<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
{"version":3,"sources":["webpack://OpenStadComponents/webpack/bootstrap","webpack://OpenStadComponents/./node_modules/custom-event-polyfill/polyfill.js","webpack://OpenStadComponents/./node_modules/es6-promise-promise/index.js","webpack://OpenStadComponents/./node_modules/es6-promise/dist/es6-promise.js","webpack://OpenStadComponents/./node_modules/merge/merge.js","webpack://OpenStadComponents/./node_modules/process/browser.js","webpack://OpenStadComponents/./node_modules/setimmediate/setImmediate.js","webpack://OpenStadComponents/./node_modules/timers-browserify/main.js","webpack://OpenStadComponents/(webpack)/buildin/global.js","webpack://OpenStadComponents/(webpack)/buildin/module.js","webpack://OpenStadComponents/./node_modules/whatwg-fetch/fetch.js","webpack://OpenStadComponents/./src/component/index.jsx","webpack://OpenStadComponents/./src/forms/component/default-input.jsx","webpack://OpenStadComponents/./src/forms/component/form-field.jsx","webpack://OpenStadComponents/./src/forms/component/form.jsx","webpack://OpenStadComponents/./src/forms/component/hidden.jsx","webpack://OpenStadComponents/./src/forms/component/htmlarea.jsx","webpack://OpenStadComponents/./src/forms/component/image-upload.jsx","webpack://OpenStadComponents/./src/forms/component/input-with-counter.jsx","webpack://OpenStadComponents/./src/forms/component/postcode.jsx","webpack://OpenStadComponents/./src/forms/component/radios.jsx","webpack://OpenStadComponents/./src/forms/component/select.jsx","webpack://OpenStadComponents/./src/forms/component/slider.jsx","webpack://OpenStadComponents/./src/forms/component/textarea.jsx","webpack://OpenStadComponents/./src/forms/component/textinput.jsx","webpack://OpenStadComponents/./src/forms/css/default.less?b805","webpack://OpenStadComponents/./src/forms/index.jsx","webpack://OpenStadComponents/./src/idea-details/component/idea-details.jsx","webpack://OpenStadComponents/./src/idea-details/component/vote-button.jsx","webpack://OpenStadComponents/./src/idea-details/css/default.less?e694","webpack://OpenStadComponents/./src/idea-details/index.jsx","webpack://OpenStadComponents/./src/idea-image/component/idea-image.jsx","webpack://OpenStadComponents/./src/idea-image/css/default.less?05a6","webpack://OpenStadComponents/./src/idea-image/index.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/filterbar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/idea-form.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-list.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-on-map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-block.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/search.jsx","webpack://OpenStadComponents/./src/ideas-on-map/css/default.less?8653","webpack://OpenStadComponents/./src/ideas-on-map/index.jsx","webpack://OpenStadComponents/./src/libs/css/default.less","webpack://OpenStadComponents/./src/libs/index.jsx","webpack://OpenStadComponents/./src/libs/lib/api/get-headers.js","webpack://OpenStadComponents/./src/libs/lib/api/index.js","webpack://OpenStadComponents/./src/libs/lib/local-storage.js","webpack://OpenStadComponents/./src/libs/lib/react-template.js","webpack://OpenStadComponents/./src/libs/lib/session-storage.js","webpack://OpenStadComponents/./src/libs/lib/user/get-jwt.js","webpack://OpenStadComponents/./src/libs/lib/user/get-user.js","webpack://OpenStadComponents/./src/libs/lib/user/has-role.js","webpack://OpenStadComponents/./src/libs/lib/user/index.js","webpack://OpenStadComponents/./src/libs/lib/user/logout.js","webpack://OpenStadComponents/./src/nlmap/component/map.jsx","webpack://OpenStadComponents/./src/nlmap/css/default.less?5507","webpack://OpenStadComponents/./src/nlmap/index.jsx","webpack://OpenStadComponents/./src/nlmap/lib/amaps-cluster-icon.js","webpack://OpenStadComponents/./src/poll/component/poll-form.jsx","webpack://OpenStadComponents/./src/poll/component/poll.jsx","webpack://OpenStadComponents/./src/poll/css/default.less?c43d","webpack://OpenStadComponents/./src/poll/index.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction-form.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction.jsx","webpack://OpenStadComponents/./src/reactions/component/reactions.jsx","webpack://OpenStadComponents/./src/reactions/css/default.less?29e6","webpack://OpenStadComponents/./src/reactions/index.jsx","webpack://OpenStadComponents/vertx (ignored)","webpack://OpenStadComponents/external \"React\"","webpack://OpenStadComponents/external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentDefaultInput","defaultConfig","choices","placeholder","disabled","required","merge","recursive","state","error","onChange","showErrors","isValid","setState","data","validate","OpenStadComponentFormField","inputType","validateAction","changeAction","title","description","toLowerCase","undefined","handleOnChange","bind","input","titleHTML","descriptionHTML","__html","fieldHTML","el","instance","OpenStadComponentForm","intro","fields","values","firstInvalid","field","scrollIntoView","behavior","introHTML","fieldsHTML","length","map","fieldConfig","i","OpenStadComponentSelect","e","OpenStadComponentHTMLArea","onKeyUpx","filterHTML","innerHTML","replace","command","args","preventDefault","stopPropagation","document","execCommand","onKeyUp","onFocus","onBlur","executeAction","prompt","EditButton","cmd","evt","arg","allowMultiple","imageserver","process","fetch","uploadedFiles","image","push","source","url","options","type","file","metadata","poster","_loadedFiles","files","loadNextFile","element","createElement","src","async","onload","body","appendChild","fileUploaderInit","imageuploader","getFiles","images","serverId","containerElement","querySelector","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","filePondSettings","acceptedFileTypes","allowFileSizeValidation","allowReorder","styleItemPanelAspectRatio","maxFileSize","maxFiles","allowBrowse","server","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","addEventListener","detail","console","log","fileUploaderUpdateCurrentInput","formfields","addFiles","errorHTML","FormfieldInputWithCounter","minLength","maxLength","focused","valueLength","useKey","onInputFocus","onInputBlur","onInputKeyUp","warning","showWarning","counter","inputHTML","OpenStadComponentPostcode","match","OpenStadComponentRadios","choice","dangerousDescription","Slider","touched","handleChange","event","target","min","max","range","progInRange","step","className","transform","calcProgress","doTouch","OpenStadComponentText","Form","FormField","Hidden","ImageUpload","InputWithCounter","Postcode","Radios","Select","Text","Textarea","IdeasDetails","siteId","ideaId","user","api","headers","isUserLoggedIn","argument","isActive","poll","canAddPolls","showVoteButtons","showLabels","labels","types","allowMultipleImages","shareChannelsSelection","metaDataTemplate","idea","showPollForm","reactionAddedListener","onReactionStored","reactionEditedListener","reactionDeletedListener","onReactionDeleted","pollCreatedListener","onPollCreated","pollDeletedListener","onPollDeleted","fetchData","removeEventListener","editIdeaLink","location","href","CustomEvent","dispatchEvent","isNew","argCount","hidePollForm","OpenStadComponentLibs","getHeaders","then","response","ok","Error","json","localStorage","get","hash","set","role","method","afterDeleteIdeaLink","labelHTML","typeId","extraData","typeDef","find","def","labelText","label","backgroundColor","textColor","color","pollHTML","addPollButtonHTML","can","edit","dispatchAddPollClick","voteButtonsHTML","text","opinion","yes","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","reactionsCountHTML","reactionsHTML","loginUrl","shareButtonsHTML","facebookButtonHTML","includes","encodeURIComponent","twitterButtonHTML","mailButtonHTML","eval","titleField","whatsappButtonHTML","authorHTML","nickName","fullName","firstName","lastName","linkToUserPageUrl","metaDataHTML","createDateHumanized","theme","reactTemplate","html","username","summary","VoteButton","busy","votePending","doVote","remove","stringify","change","userVote","alert","message","value000","value00","value0","OpenStadComponentIdeaDetails","renderElement","elem","ReactDOM","render","OpenStadComponentIdeaImage","currentImageIndex","width","offsetWidth","which","posterImage","backgroundImage","thumb","height","left","zIndex","setCurrentImageIndex","Filterbar","typesFilterLabel","areas","search","searchIn","selectedType","selectedArea","mobileActiveSelector","hideMobileActiveSelector","area","handleTypeChange","handleAreaChange","showMobileActiveSelector","areasHTML","areasButtonHTML","toggleMobileActiveSelector","areaSelector","searchHTML","doSearchFunction","ideaName","typeSelector","resetTypeAndArea","resetButton","IdeasForm","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","descriptionMinLength","descriptionMaxLength","showFormErrorsWarning","isBusy","summaryField","descriptionField","imageField","hasRole","typeField","auth","createableBy","address","coordinates","lat","lng","dispatchUpdateEditIdea","style","display","formValues","form","getValues","validateIdea","formErrorsWarningHTML","formHTML","submitIdea","submitButton","IdeasList","sort","sortOptions","showSortButton","defaultSortOrder","onIdeaClick","currentSortOrder","ideas","currentMouseOverIdea","hideSortButton","sortOrder","center","a","b","ranking","Date","createdAt","getTime","_distance","sqrt","pow","slice","updateIdeas","newMouseOverIdeaId","sortSelector","setSortOrder","option","titleHML","ideaTypeValue","entry","listicon","voteCountHTML","argcountHTML","ignoreReactionsForIdeaIds","RegExp","dispatchMouseOverListItem","dispatchMouseOutListItem","OpenStadComponentIdeasOnMap","displayType","displayWidth","displayHeight","canSelectLocation","canAddNewIdeas","formIntro","requiredUserRole","closeReactionsForIdeaIds","content","mobilePreviewLoggedInHTML","mobilePreviewNotLoggedInHTML","doSearch","mapicon","buttonicon","visibleIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","hideIdeaDetails","showIdeaDetails","on","onChangeMapBoundaries","onMapClick","onMarkerClick","onClusterClick","onChangeTypeFilter","onUpdateSelectedIdea","onCloseSelectedLocation","onUpdateEditIdea","onSelectedIdeaClick","onNewIdeaClick","onClickMobileSwitcher","onMouseOverListItem","onMouseOutListItem","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","showIdeaSelected","markers","marker","removeMarker","filter","addIdea","setBoundsAndCenter","startWithListOpenOnMobile","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","newIdea","split","val","substring","decodeURIComponent","showIdeaForm","infoblock","hideMarkers","exception","next","formUrl","searchValue","callback","searchValueLc","searchResult","locations","titlelLc","summaryLc","onClick","setImmediate","docs","found","weergavenaam","onClickAddress","centroide_ll","panTo","L","LatLng","latlng","getVisibleIdeas","setSelectedLocation","ideaform","handleLocationChange","getPointInfo","_display","isPointInPolygon","polygon","fadeMarkers","x","unfadeAllMarkers","forceSelectLocation","updateFading","scrollTo","setFilter","infoHTML","mobilePopupHTML","isClosed","typeLabel","ideadetails","onClickBackToOverview","hideIdeaForm","contentHTML","addButton","loginButton","loginLink","newIdeaButton","filterbar","divStyle","simpleHTML","buttonHTML","linkToCompleteUrl","position","top","right","bottom","zoomControl","InfoBlock","noSelectionLoggedInHTML","noSelectionNotLoggedInHTML","selectionActiveLoggedInHTML","selectionInactiveLoggedInHTML","selectionActiveNotLoggedInHTML","selectionInactiveNotLoggedInHTML","showNoSelectionOnMobile","noSelectionHTML","eventTarget","list","newIdeaHTML","selectedIdeaHTML","titleAddition","mobileSwitcherHTML","mobileTitle","buttonBgHTML","dispatchNewIdeaClick","buttonLabel","dispatchCloseSelectedLocation","dispatchSelectedIdeaClick","dispatchUpdateSelectedIdea","defaultBlockHTML","dispatchClickMobileSwitcher","dispatchOnIdeaClick","Map","clustering","maxClusterRadius","showCoverageOnHover","autoZoomAndCenter","onMapClusterAnimationEnd","typename","icondef","icon","anchor","divIcon","iconSize","point","iconAnchor","addMarker","visible","getBounds","contains","getLatLng","selectedLocationMarker","updateMarker","doNotCluster","points","keepCenter","showMarker","_latlng","hideMarker","isFaded","visibleParent","markerClusterGroup","getVisibleParent","ignore","getAllChildMarkers","m","setOpacity","OpenStadComponentNLMap","Search","assign","doSearchx","updateSearchResult","showSuggestions","updateSearchValue","inputfield","focus","setTimeout","suggestionsHTML","suggestionDividerHTML","addressSuggestionsHTML","result","$0","onSuggestionClick","ideasSuggestionsHTML","suggestions","hideSuggestions","handleButtonClick","sessionStorage","jwt","getJWT","OpenStadComponentAPI","oscLocalStorage","getItem","setItem","removeItem","arguments","matches","regEx","exec","oscSessionStorage","roles","admin","moderator","editor","member","anonymous","all","owner","requiredRole","userRole","OpenStadComponentUser","getUser","logout","latitude","longitude","zoom","zoomposition","disableDefaultUI","variant","createMap","mapIsReady","rel","amaps","nlmaps","removeControl","iconCreateFunction","amapsCreateClusterIcon","onClusterAnimationEnd","addLayer","createCutoutPolygon","centerOn","editorMarker","markerData","index","indexOf","splice","removeLayer","newData","newLatLng","setLatLng","cluster","count","getChildCount","bounds","getCenter","smallest","y","sin","cos","bearing","atan2","PI","concat","delta1","delta2","outerBox","polygonStyle","Array","isArray","poly","latLngBounds","fitBounds","addTo","filterFuntion","filterFunction","applyFilter","inside","j","xi","yi","xj","yj","intersect","bagApiUrl1","bagApiUrl2","results","landelijk_id","colors","total","tmp","soFar","myColor","perc","angle","OpenStadComponentPollForm","questionMinLength","questionMaxLength","allowChoiceTitles","pollId","question","messages","questionInput","titleInput","descriptionInput","validatedResult","canSubmit","onFinished","submitButtonHTML","submitForm","titleInputHTML","addChoice","OpenStadComponentPoll","withPercentage","allowShowResultsIfNotVoted","hideEditForm","selectedChoice","showResult","showQuestion","editMode","showVoteSucceeded","parseVoteCount","voteCount","votesAbs","votesPrc","reaction","onSubmit","questionHTML","choiceHTML","submitVote","showResultButtonHTML","setShowResult","selectChoice","resultHTML","showQuestionButtonHTML","setShowQuestion","totalVotesHTML","xx","percentageHTML","scoreHTML","showEditForm","deletePoll","voteSucceededHTML","OpenStadComponentReactionForm","argumentId","parentId","sentiment","OpenStadComponentReaction","isMenuActive","isReplyFromActive","storedListener","onNewReactionStored","editedListener","onReactionEdited","what","reply","canDelete","isDeleted","canLike","hasUserVoted","isAdmin","metadataHTML","menuHTML","canEdit","showMenu","submitDelete","toggleEditForm","editForm","likeButtonHTML","submitLike","replyButtonHTML","replyFormHTML","canReply","toggleReplyForm","repliesHTML","reactions","OpenStadComponentReactions","scrollToNewReaction","closedText","deletedListener","getElementById","reactionFormHTML"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,CAAC;;;;;;;;;;;;ACpDD,iBAAiB,mBAAO,CAAC,mEAAa;;;;;;;;;;;;ACAtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAA4D;AAChE,IAAI,SAC+B;AACnC,CAAC,qBAAqB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAC,CAAC,cAAO;AACzB;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,yCAAyC,UAAc;AACxD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uCAAuC;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD,oC;;;;;;;;;;;;ACjoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;;AAE9B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;;AAEZ;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,CAAC,EAAE,KAA0B,oE;;;;;;;;;;;;AChL7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;ACzLD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,iEAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA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","file":"ideas-on-map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ideas-on-map/index.jsx\");\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","module.exports = require('es6-promise').Promise;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   3.3.1\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  return function () {\n    vertxNext(flush);\n  };\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\npolyfill();\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n    self.config = self.config || props.config;\n\n    if (self.config) {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = this;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentDefaultInput extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      choices: [],\n\t\t\tname: '',\n      placeholder: '',\n      disabled: false,\n      required: false,\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      value: props.value,\n      error: null,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate({ showErrors }) {\n\t\tlet isValid = this.config.required ? !!this.state.value : true;\n    let error = '';\n    if (!isValid && showErrors) error = true;\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n\thandleOnChange(data) {\n\t\tlet self = this;\n    data = data || {};\n\t\tself.setState(data, () => {\n      self.validate({});\n    })\n\t\tif (typeof self.onChange == 'function') {\n\t\t\tself.onChange({ name: self.config.name, value: data.value });\n\t\t}\n\t}\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\nimport OpenStadComponentHidden from './hidden.jsx';\nimport OpenStadComponentImageUpload from './image-upload.jsx';\nimport OpenStadComponentInputWithCounter from './input-with-counter.jsx';\nimport OpenStadComponentRadios from './radios.jsx';\nimport OpenStadComponentPostcode from './postcode.jsx';\nimport OpenStadComponentSelect from './select.jsx';\nimport OpenStadComponentText from './textinput.jsx';\nimport OpenStadComponentTextArea from './textarea.jsx';\n\nexport default class OpenStadComponentFormField extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      inputType: null,\n\n      validateAction: null,\n      changeAction: null,\n      required: false,\n\n      title: null,\n      description: null,\n      choices: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.name = self.config.name || self.config.title.toLowerCase();\n\n    self.state = {\n      value: props.value || undefined,\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(self);\n\n    self.onChange = props.onChange;\n\n  }\n  \n\tvalidate({ showErrors }) {\n    return this.input ? this.input.validate({ showErrors }) : true;\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"form field change\", data);\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h3 className=\"osc-form-title\">{self.config.title}</h3>\n    }\n\n    let descriptionHTML = null;\n    if (self.config.description) {\n      descriptionHTML = <div className=\"osc-form-description\" dangerouslySetInnerHTML={{ __html: self.config.description }}></div>\n    }\n\n    let fieldHTML = null;\n\n    switch (self.config.inputType) {\n\n      case 'hidden':\n        fieldHTML = <OpenStadComponentHidden config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'html-with-counter':\n      case 'htmlarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'htmlarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'image-upload':\n        fieldHTML = <OpenStadComponentImageUpload config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'input-with-counter':\n      case 'text-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ inputType: 'input', ...self.config }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'postcode':\n        fieldHTML = <OpenStadComponentPostcode config={self.config} onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'radios':\n        fieldHTML = <OpenStadComponentRadios config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'select':\n      case 'multiple-choice':\n        fieldHTML = <OpenStadComponentSelect config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'text':\n        fieldHTML = <OpenStadComponentText config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea':\n        fieldHTML = <OpenStadComponentTextArea config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'textarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      default:\n    }\n\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-form-field\">\n\t\t\t\t{titleHTML}\n\t\t\t\t{descriptionHTML}\n\t\t\t\t{fieldHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentFormField from './form-field.jsx';\n\nexport default class OpenStadComponentForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      // validateAction: null,\n      // submitAction: null,\n      title: null,\n      intro: null,\n      fields: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      values: props.values|| {},\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(this);\n\n    self.fields = [];\n\n  }\n  \n\tgetValues() {\n    return this.state.values;\n\t}\n\n\tvalidate({ showErrors }) {\n    let self= this;\n    let isValid = true;\n    let firstInvalid = null\n    self.fields.forEach((field) => {\n      if (!field.validate({ showErrors })) {\n        isValid = false;\n        if (!firstInvalid) firstInvalid = field;\n      }\n    });\n\n    if (firstInvalid && firstInvalid.instance && firstInvalid.instance.scrollIntoView) firstInvalid.instance.scrollIntoView({behavior: 'smooth'});\n    // console.log(isValid);\n    return isValid;    \n\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"formchange\", data);\n    let self = this;\n    let values = { ...this.state.values };\n    values[data.name] = data.value;\n\t\tthis.setState({ values });\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h2 className=\"osc-form-title\">{self.config.title}</h2>\n    }\n\n    let introHTML = null;\n    if (self.config.intro) {\n      introHTML = <div className=\"osc-form-intro\" dangerouslySetInnerHTML={{ __html: self.config.intro }}></div>\n    }\n\n    let fieldsHTML = null;\n    if (self.config.fields && self.config.fields.length) {\n      fieldsHTML =\n        <div className=\"osc-form-fields\">\n          { self.config.fields.map((fieldConfig, i) => {\n            return <OpenStadComponentFormField config={fieldConfig} onChange={self.handleOnChange} ref={el => (self.input = el)} key={`osc-form-field-${i}`}  ref={el => { self.fields[i] = el; }}/>\n          })}\n        </div>\n    }\n\n    return (\n\t\t\t<div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)}>\n\t\t\t\t{titleHTML}\n\t\t\t\t{introHTML}\n\t\t\t\t{fieldsHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n    \n    return (\n\t\t\t<input type=\"hidden\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// TODO: it is probably not ok to write your own html editor, but after intergrating ckeditor or react-rte the build was (more than) twice as large; a bettter solution must be possible\n\n'use strict';\n\nexport default class OpenStadComponentHTMLArea extends React.Component  {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.props.value,\n\t  };\n\n    this.onKeyUpx = this.onKeyUpx.bind(this);\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let value = this.props.value;\n    value = this.filterHTML(value);\n    this.input.innerHTML = value;\n  }\n\n  filterHTML(value) {\n    value = value.replace(/<(\\/?\\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\\s*\\/?)>/g, \"[[[$1]]]\");\n    value = value.replace(/<[^>]+>/g, \"\");\n    value = value.replace(/\\[\\[\\[([^\\]]+)\\]\\]\\]/g, \"<$1>\");\n    return value;\n  }\n\n  executeAction(e, command, args) {\n    e.preventDefault()\n    e.stopPropagation();\n    document.execCommand(command,false,args);\n    this.onKeyUp();\n  }\n  \n  onFocus(e) {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  onBlur(e) {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n    if (this.props.onChange) {\n      this.props.onChange({ value: this.state.value });\n    }\n  }\n\n  onKeyUpx() {\n    let value = this.input.innerHTML;\n    value = this.filterHTML(value);\n    this.setState({ value })\n    if (this.props.onKeyUp) {\n      this.props.onKeyUp(value);\n    }\n  }\n  \n  render () {\n    return (\n      <div className=\"osc-html-editor\">\n        <div className=\"osc-html-editor-buttons\">\n          <div className=\"osc-html-editor-button osc-html-editor-button-bold\" onMouseDown={e => this.executeAction(e, 'bold')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-italic\" onMouseDown={e => this.executeAction(e, 'italic')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-insertunorderedlist\" onMouseDown={e => this.executeAction(e, 'insertunorderedlist')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-createlink\" onMouseDown={e => this.executeAction(e, 'createlink', prompt('Lank naar','http://'))}>&nbsp;</div>\n        </div>\n        <div className=\"osc-html-editor-content\" contentEditable={true}\n             onFocus={ e => this.onFocus(e)}\n             onBlur={ e => this.onBlur(e)}\n             onKeyUp={ e => this.onKeyUpx()}\n             // dangerouslySetInnerHTML={{ __html: this.state.value }}\n             ref={el => (this.input = el)}\n        />\n      </div>\n    );\n  }\n\n}\n\nfunction EditButton(props) {\n  return (\n    <button\n      key={props.cmd}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      {props.name || props.cmd}\n    </button>\n  );\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      allowMultiple: false,\n\t\t\timageserver: {\n\t\t\t\tprocess: '',\n\t\t\t\tfetch: ''\n\t\t\t},\n    };\n\t\tthis.config = merge.recursive(defaultConfig, this.props.config, this.config || {});\n\n    var uploadedFiles = [];\n    let value = props.value || [];\n    value.forEach((image) => {\n      uploadedFiles.push({\n        source: { url: image },\n        options : {\n          type: 'local',\n          // mock file information\n          file: {\n            name: image,\n            //\t\t size: 3001025,\n            //\t type: 'image/png'\n          },\n          metadata: {\n            poster: image,\n          }\n        }\n      })\n    });\n\n    this.state = {\n      uploadedFiles: uploadedFiles,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond files\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\n  }\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar containerElement = document.querySelector('.osc-image-upload-container');\n\t\tif (containerElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\t// FilePond.setOptions({\n\t\t\t//   server: 'https://image-server2.openstadsdeel.nl/image/?access_token=MHhfb5U0m8vquAR81p',\n\t\t\t// });\n      \n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n        allowMultiple: this.config.allowMultiple,\n        allowReorder: true,\n        styleItemPanelAspectRatio: 1,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 5,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: this.state.uploadedFiles,\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: this.config.imageserver.process,\n\t\t\t\t\tfetch: this.config.imageserver.fetch,\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(containerElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = typeof image.serverId == 'string' ? JSON.parse(image.serverId) : image.serverId;\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.onChange({name: self.config.name, value: self.state.value})\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen afbeelding geupload</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-image-upload-container\">\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n//import CKEditor from '@ckeditor/ckeditor5-react';\n//import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport HTMLArea from './htmlarea.jsx';\n\n'use strict';\n\nexport default class FormfieldInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value && props.value.length || 0,\n\t\t};\n\n    self.key = props.useKey || ( self.id || 'osc-input-with-counter-' ) + parseInt( 10000000 * Math.random );\n\n    this.onChange = props.onChange;\n\n    self.handleOnChange = self.handleOnChange.bind(this)\n    self.onInputFocus = self.onInputFocus.bind(this)\n    self.onInputBlur = self.onInputBlur.bind(this)\n    self.onInputKeyUp = self.onInputKeyUp.bind(this)\n\n  }\n\n\tisValid() {\n\t\tlet state = {};\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `De tekst is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `De tekst is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n  }\n\n\tvalidate() {\n\t\tthis.setState({ showWarning: true })\n\t\treturn this.isValid();\n\t}\n  \n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange({ name: this.config.name, value: data.value });\n\t\t}\n\t}\n\n\tonInputFocus() {\n\t\tlet state = {};\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputBlur() {\n\t\tlet state = {};\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputKeyUp(value) {\n\t\tlet state = {};\n\t\tstate.value = value || this.input.value;\n\t\tlet valueLength = state.value.length;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n        \n      case 'htmlarea':\n        inputHTML = (\n          <HTMLArea\n            value={this.state.value}\n            onChange={self.handleOnChange}\n            onFocus={self.onInputFocus}\n            onBlur={self.onInputBlur}\n            onKeyUp={self.onInputKeyUp}\n          />\n        );\n        // inputHTML = (\n        //   <CKEditor\n        //     editor={ ClassicEditor }\n        //     config={{ toolbar: [ 'h3', 'bold', 'italic', 'link' ] }}\n        //     data={this.state.value}\n        //     onInit={ editor => {\n        //       // TODO: betere selector\n        //       document.querySelector('.ck-content').addEventListener('keyup', function(e) {\n        //         self.onInputKeyUp(e, editor.getData())\n        //       })\n        //     }}\n        //     onChange={( event, editor ) => self.handleOnChange({ value: editor.getData() })}\n        //     onFocus={e => self.onInputFocus(e)}\n        //     onBlur={e => self.onInputBlur(e)}\n        //   />\n        // );\n        break;\n        \n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentPostcode extends OpenStadComponentDefaultInput {\n\n\tvalidate({ showErrors }) {\n    \n\t\tlet isValid = true;\n    let error = '';\n    if (!this.state.value || !this.state.value.match(/^\\s*\\d{4}\\s*[a-zA-Z][a-zA-Z]\\s*$/)) {\n      isValid = false;\n      if (showErrors) error = 'Dit is geen postcode';\n    }\n    if (this.config.required && !this.state.value) {\n      isValid = false;\n      if (showErrors) error = 'Je hebt nog niets ingevuld';\n    }\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n  render() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">{self.state.error}</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentRadios extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-radios\">\n        {self.config.choices.map( choice => {\n          if (choice.dangerousDescription) {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\" dangerouslySetInnerHTML={{ __html: choice.dangerousDescription }}/></div>\n          } else {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\">{choice.dangerousDescription ? null : choice.description || choice.title || choice.value}</div></div>\n          }\n        })}\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  componentDidMount() {\n    // init value\n    let value = this.state.value || ( this.config.choices[0] && this.config.choices[0].value );\n    this.handleOnChange({ value })\n  }\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-select\">\n\t\t\t  <select value={this.state.value || ''} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>\n          {self.config.choices.map( choice => {\n            return <option value={choice.value || ''} key={choice.value}>{choice.description || choice.title || choice.value}</option>\n          })}\n        </select>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import React from \"react\"\n\nclass Slider extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: this.props.value,\n      touched: this.props.touched || false,\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const { value } = event.target\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(value)\n    }\n    \n    this.setState({value, touched: true})\n  }\n\n  doTouch() {\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(50)\n    }\n\n    this.setState({touched: true})\n\n  }\n\n  calcProgress(min, max, value) {\n    const range = max - min\n    const progInRange = value - min\n    return ((progInRange*2)/range)-1\n  }\n\n  render(){\n    let self = this;\n    const { value, touched } = self.state\n    const { min, max, step } = self.props\n    return(\n      <div className={`${self.props.className} osc-slider`}>\n        <div className=\"osc-slider-track-container\">\n          <div className=\"osc-slider-track\"></div>\n          <div className=\"osc-slider-track-progress-container\">\n            <div className=\"osc-slider-track-progress\" style={{ transform: 'scaleX(' + self.calcProgress(min, max, value) + ')' }}></div>\n          </div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-left\"></div>\n          <div className=\"osc-slider-track-dot-start osc-slider-track-dot-center\"></div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-right\"></div>\n        </div>\n        <input type='range' min={min} max={max} step={step} value={value} onClick={() => { if (!touched) self.doTouch(); } } onChange={self.handleChange} className={touched ? 'osc-slider-input-range' : 'osc-slider-input-range osc-slider-untouched'} ref={el => (self.input = el)}/>\n      </div>\n    )\n  }\n}\n\nexport default Slider;\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textarea\">\n\t\t\t  <textarea value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>{this.state.value}</textarea>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentText extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport Form from './component/form.jsx';\nimport FormField from './component/form-field.jsx';\nimport Hidden from './component/hidden.jsx';\nimport ImageUpload from './component/image-upload.jsx';\nimport InputWithCounter from './component/input-with-counter.jsx';\nimport Postcode from './component/postcode.jsx';\nimport Radios from './component/radios.jsx';\nimport Select from './component/select.jsx';\nimport Text from './component/textinput.jsx';\nimport Textarea from './component/textarea.jsx';\nimport Slider from './component/slider.jsx';\nexport default {\n  Form,\n  FormField,\n  Hidden,\n  ImageUpload,\n  InputWithCounter,\n  Postcode,\n  Radios,\n  Select,\n  Text,\n  Textarea,\n  Slider,\n}\n\n// render the base element\n// function renderElement( elem, config ) {\n//   let attributes = elem.attributes;\n//   ReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n// }\n// export {renderElement}\n\n","import merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentPoll from '../../poll/index.jsx';\nimport OpenStadComponentReactions from '../../reactions/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\nexport default class IdeasDetails extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      user: {},\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      argument: {\n        isActive: true,\n      },\n      poll: {\n        canAddPolls: false,\n      },\n      showVoteButtons: true,\n      showLabels: false,\n      labels: {},\n      types: null,\n      allowMultipleImages: false,\n\t\t};\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n    if (!this.config.shareChannelsSelection) this.config.shareChannelsSelection = [\"facebook\",\"twitter\",\"mail\",\"whatsapp\"];\n    if (typeof this.config.metaDataTemplate == 'undefined') this.config.metaDataTemplate = '<span class=\"ocs-gray-text\">Door </span>{username} <span class=\"ocs-gray-text\"> op </span>{createDate} <span class=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span> <span class=\"ocs-gray-text\">Thema: </span>{theme}';\n    \n    this.state = {\n      idea: this.props.idea,\n      ideaId: ( props.idea && props.idea.id ) || this.config.ideaId,\n      showPollForm: false,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.reactionAddedListener = function(event) {\n      self.onReactionStored(event.detail, true);\n    }\n    document.addEventListener('osc-new-reaction-stored', self.reactionAddedListener);\n\n\t\tself.reactionEditedListener = function(event) {\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('osc-reaction-edited', self.reactionEditedListener);\n\n\t\tself.reactionDeletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('osc-reaction-deleted', self.reactionDeletedListener);\n    \n\t\tself.pollCreatedListener = function(event) {\n      self.onPollCreated(event.detail);\n    }\n    document.addEventListener('osc-new-poll-stored', self.pollCreatedListener);\n    \n\t\tself.pollDeletedListener = function(event) {\n      self.onPollDeleted(event.detail);\n    }\n    document.addEventListener('osc-poll-deleted', self.pollDeletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.reactionAddedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.reactionEditedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.reactionDeletedListener);\n\t\tdocument.removeEventListener('osc-new-poll-stored', this.pollCreatedListener);\n\t\tdocument.removeEventListener('osc-poll-deleted', this.pollDeletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n    if ( this.config.editIdeaLink ) {\n      document.location.href = this.config.editIdeaLink;\n    } else {\n\t\t  var event = new window.CustomEvent('osc-edit-idea-click', { detail: this.state.idea });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n\n  showPollForm() {\n    this.setState({\n      showPollForm: true\n    })\n  }\n\n  hidePollForm() {\n    this.setState({\n      showPollForm: false\n    })\n  }\n\n  dispatchAddPollClick(e) {\n    e.stopPropagation();\n    this.showPollForm();\n  }\n  \n  onReactionStored(data, isNew) {\n    if (isNew) this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onPollCreated() {\n    this.hidePollForm();\n    this.fetchData();\n  }\n\n  onPollDeleted() {\n    this.fetchData();\n  }\n  \n  fetchData() {\n\n    let self = this;\n\n    let ideaId = self.state.ideaId || (this.state.idea && this.state.idea.id);\n\n    if (!ideaId) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ ideaId }?includeVoteCount=1&includeArguments=1&includeArgsCount=1&includeUser=1&includeUserVote=1`;\n    if (self.config.poll.canAddPolls) url += '&includePoll=1';\n\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let idea = json;\n        self.setState({ idea }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n        if ( this.config.afterDeleteIdeaLink ) {\n          document.location.href = this.config.afterDeleteIdeaLink;\n        } else {\n\t\t      var event = new window.CustomEvent('osc-idea-deleted', { detail: { ideaId } });\n\t\t      document.dispatchEvent(event);\n        }\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    if (!idea) return null;\n\n    let labelHTML = null;\n\n    if (self.config.showLabels) {\n      // TODO: idea.extraData.type is tmp voor Gerard Dou\n      let typeId = idea.typeId || idea.extraData.type;\n      let typeDef = self.config.types && self.config.types.find(def => def.id == typeId || def.value == typeId);\n      if (typeDef) {\n        let labelText = typeDef.label;\n        let backgroundColor = typeDef.backgroundColor;\n        let textColor = typeDef.textColor;\n        labelHTML = (\n          <div className=\"ocs-idea-label\" style={{ color: textColor, backgroundColor }}>{labelText}</div>\n        );\n      }\n    }\n    \n    let pollHTML = null;\n    let addPollButtonHTML = null;\n    if (self.config.poll.canAddPolls) {\n      if (idea.poll || self.state.showPollForm) {\n        pollHTML = (\n          <div>\n\t\t\t      <div id=\"poll\" className=\"osc-poll-header\"><h3>{self.config.poll.title || 'Poll'}</h3></div>\n            <OpenStadComponentPoll config={{ ...self.config, ...self.config.poll, ideaId: self.state.ideaId }} poll={idea.poll}/>\n          </div>\n        )\n      } else {\n        if (idea.can && idea.can.edit) {\n          addPollButtonHTML = (\n            <div className=\"osc-editbuttons-container\">\n              <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchAddPollClick(event)}>Add poll</button>\n            </div>\n          )\n        }\n      }\n    }\n\n    let voteButtonsHTML = null;\n    if (self.config.showVoteButtons) {\n      voteButtonsHTML = (\n        <div className=\"osc-details-vote-buttons-container\">\n          <h3>Likes</h3>\n          <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={idea.yes}/>\n        </div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( idea.can && idea.can.edit ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (idea && idea.modBreak) {\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {idea.modBreakDateHumanized}<br/>\n          <br/>\n          {idea.modBreak}\n        </div>\n      );\n    }\n\n    let reactionsCountHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsCountHTML = (\n        <div>\n          <h3>Reacties</h3>\n          <a href=\"#reactions\" className=\"osc-no-of-reactions\">{idea.argCount || 0} reacties</a>\n        </div>\n      );\n    }\n\n    let reactionsHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsHTML = (\n        <div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>{self.config.argument.title || 'Reacties'}</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, title: undefined, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: idea.id, loginUrl: self.config.loginUrl, }}/>\n        </div>\n      );\n    }\n\n    let shareButtonsHTML = null;\n    if (self.config.shareChannelsSelection.length) {\n      let facebookButtonHTML = self.config.shareChannelsSelection.includes('facebook') ? (<li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>) : null;\n      let twitterButtonHTML = self.config.shareChannelsSelection.includes('twitter') ? (<li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>) : null;\n      let mailButtonHTML = self.config.shareChannelsSelection.includes('mail') ? (<li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>) : null;\n      let whatsappButtonHTML = self.config.shareChannelsSelection.includes('whatsapp') ? (<li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>) : null;\n\n      shareButtonsHTML = (\n      <div className=\"osc-details-sharebuttons\">\n        <ul>\n          {facebookButtonHTML}\n          {twitterButtonHTML}\n          {mailButtonHTML}\n          {whatsappButtonHTML}\n\t\t\t\t</ul>\n      </div>);\n\n\n    }\n\n    let authorHTML = idea.user.nickName || idea.user.fullName || idea.user.firstName +' ' + idea.user.lastName;\n    if (this.config.linkToUserPageUrl) {\n      authorHTML = <a href={this.config.linkToUserPageUrl + '/' + idea.user.id} className=\"osc-author-link\">{authorHTML}</a>\n    }\n\n    let metaDataHTML = self.config.metaDataTemplate;\n    metaDataHTML = metaDataHTML.replace(/\\{createDate\\}/, idea.createDateHumanized);\n    metaDataHTML = metaDataHTML.replace(/\\{theme\\}/, idea.extraData.theme);\n    metaDataHTML = OpenStadComponentLibs.reactTemplate({ html: metaDataHTML, username: authorHTML })\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-idea-image-container\">\n                <OpenStadComponentImage config={{ allowMultipleImages: self.config.allowMultipleImages }} idea={idea}/>\n              </div>\n\n              {labelHTML}\n\n              {shareButtonsHTML}\n\n              <div className=\"osc-details-stats\">\n                {voteButtonsHTML}\n                {reactionsCountHTML}\n                {editButtonsHTML}\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              {metaDataHTML}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{idea.summary}</p>\n\n            <p className=\"osc-details-description\" dangerouslySetInnerHTML={{ __html: idea.description }}></p>\n\n            {addPollButtonHTML}\n\n\t\t\t    </div>\n\n          {pollHTML}\n\n          {reactionsHTML}\n\n\t\t\t    <div className=\"osc-bottom-spacer\"></div>\n\n        </div>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote();\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    if (e) e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new window.CustomEvent('osc-idea-liked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaDetails from './component/idea-details.jsx';\n\n// render elements\nOpenStadComponentIdeaDetails.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaDetails attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaDetails as default,\n  OpenStadComponentIdeaDetails as IdeaDetails,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentIdeaImage extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      allowMultipleImages: false\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      currentImageIndex: 0,\n      width: 0,\n    };\n        \n  }\n\n  componentDidMount () {\n    let elem = document.querySelector(`#${this.divId}`);\n    this.setState({width: elem.offsetWidth})\n  }\n\n  setCurrentImageIndex (which) {\n    this.setState({currentImageIndex: which})\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.props.idea;\n\n    if (!idea) return null;\n\n    let images = (idea.extraData && idea.extraData.images) || [];\n    let image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[self.state.currentImageIndex]);\n\n    if (self.config.allowMultipleImages && images.length > 1) {\n\n      // multiple\n      return (\n        <div id={self.divId} className=\"osc-idea-multiple-images\">\n        \n          <div className=\"osc-idea-image-spacer\">\n            <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n          </div>\n\n          <div className=\"osc-idea-multiple-images-thumbs\">\n\n            {images.map(( thumb, i ) => {\n              let height = 0.1 * self.state.width;\n              let width = height * 16/9;\n              // let left = ( width *  1.07) * i + ( self.state.width - width *  1.07* images.length ) / 2;\n              let left = ( width *  1.05 ) * i;\n              return (\n                <div className=\"osc-idea-image-thumb-spacer\" key={`osc-idea-image-thumb-${i}`} style={{ left, width, height }}>\n                  <div className=\"osc-idea-image-thumb\" style={thumb ? { backgroundImage: `url(${thumb})`, zIndex: 10-i } : {}} onClick={e => self.setCurrentImageIndex(i)}></div>\n                </div>\n              );\n            })}\n\n          </div>\n\n        </div>\n      );\n\n    } else {\n\n      // singular\n      return (\n        <div id={self.divId} className=\"osc-idea-image-spacer\">\n          <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n        </div>\n      );\n      \n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaImage from './component/idea-image.jsx';\n\n// render elements\nOpenStadComponentIdeaImage.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaImage attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaImage as default,\n  OpenStadComponentIdeaImage as IdeaImage,\n};\n\n","import merge from 'merge';\nimport React from 'react';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      types: ( props.config && props.config.types ) || [],\n      typesFilterLabel: 'Alle thema\\'s',\n      areas: ( props.config && props.config.areas ) || [],\n      search: {},\n\t\t};\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    this.config.searchIn = typeof props.config.search.searchIn == 'object' && props.config.search.searchIn || ['ideas', 'addresses'];\n\n    this.state = {\n      selectedType: undefined,\n      types: this.config.types,\n      typesFilterLabel: this.config.typesFilterLabel,\n      selectedArea: undefined,\n      areas: this.config.areas,\n      mobileActiveSelector: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleTypeChange(value) {\n\n    this.setState({ selectedType: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  setAreaValue(value) {\n    this.setState({ selectedArea: value });\n  }\n\n  handleAreaChange(value) {\n\n    this.setState({ selectedArea: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('areaFilterUpdate', { detail: { value: this.state.areas.find(area => value == area.value) } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  resetTypeAndArea() {\n    this.handleTypeChange(0)\n    this.handleAreaChange(0)\n    this.hideMobileActiveSelector()\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let areasHTML = null;\n    let areasButtonHTML = null;\n    // TODO: niet state maar config\n    if (self.state.areas && self.state.areas.length) {\n      areasButtonHTML = (\n        <div className=\"osc-area-selector-button\" onClick={() => self.toggleMobileActiveSelector('area')}></div>\n      );\n      areasHTML = (\n          <div className={`osc-area-selector-container${self.state.mobileActiveSelector == 'area' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedArea} onChange={() => self.handleAreaChange( self.areaSelector.value )} className=\"osc-default-select osc-margin-right osc-area-selector\" ref={el => (self.areaSelector = el)}>\n              <option value=\"0\">Alle gebieden</option>;\n              { self.state.areas.map((area, i) => {\n                return <option key={'area-option-' + i}>{ area.name }</option>;\n              })}\n            </select>\n          </div>\n      );\n    }\n\n    let searchHTML = null;\n    console.log(self.config);\n    if ( self.config.searchIn && self.config.searchIn.length && self.config.doSearchFunction) {\n      searchHTML = (\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t    <Search config={{ searchIn: this.config.search.searchIn, placeholder: this.config.search.placeholder, doSearchFunction: this.config.doSearchFunction, ideaName: this.config.ideaName }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>\n      );\n    }\n\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-filterbar'} ref={el => (self.instance = el)}>\n\n        {searchHTML}\n        \n        <div className=\"osc-selectors-container osc-align-right-container\">\n\n          <div className={`osc-type-selector-button${ self.state.selectedType && self.state.selectedType != '0'  ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('type')}></div>\n          <div className={`osc-type-selector-container${self.state.mobileActiveSelector == 'type' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedType} onChange={() => self.handleTypeChange( self.typeSelector.value )} className=\"osc-default-select osc-margin-right osc-type-selector\" ref={el => (self.typeSelector = el)}>\n              <option value=\"0\">{self.state.typesFilterLabel}</option>;\n              { self.state.types.map((type, i) => {\n                return <option key={'type-option-' + i} value={ type.id || type.name }>{ type.name }</option>;\n              })}\n            </select>\n          </div>\n\n          {areasButtonHTML}\n          {areasHTML}\n\n          <button value=\"reset\" onClick={() => self.resetTypeAndArea()} className=\"osc-button osc-reset-button\" ref={el => (self.resetButton = el)}>Alles tonen</button>\n          \n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n// import OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\n// import OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n      fields: [],\n    };\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.fields = [ ...self.config.fields ];\n\n    let fields = self.config.fields || [];\n\n    if (!self.props.idea.extraData) self.props.idea.extraData = {};\n\n    let state = {\n      formfields: {\n        id: self.props.idea.id || '',\n        user: self.props.idea.user || {},\n      },\n      showFormErrorsWarning: false,\n      isBusy: false,\n    };\n\n    fields.forEach((field) => {\n      if (field.name) {\n        state.formfields[field.name] = eval('self.props.idea.' + field.name);\n        field.value = eval('self.props.idea.' + field.name);\n      }\n    });\n\n    let titleField = fields.find(field => field.name == 'title');\n    if (titleField) {\n\t\t  titleField.minLength = self.config.titleMinLength;\n\t\t  titleField.maxLength = self.config.titleMaxLength;\n    }\n\n    let summaryField = fields.find(field => field.name == 'summary');\n    if (summaryField) {\n\t\t  summaryField.minLength = self.config.summaryMinLength;\n\t\t  summaryField.maxLength = self.config.summaryMaxLength;\n    }\n\n    let descriptionField = fields.find(field => field.name == 'description');\n    if (descriptionField) {\n\t\t  descriptionField.minLength = self.config.descriptionMinLength;\n\t\t  descriptionField.maxLength = self.config.descriptionMaxLength;\n    }\n\n    let imageField = fields.find(field => field.inputType == 'image-upload'); // TODO: multiple images?\n    if (imageField) {\n\t\t  imageField.imageserver = self.config.imageserver;\n    }\n\n    if (OpenStadComponentLibs.user.hasRole( self.config.user, 'editor' ) ) {\n\n      // typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        let choices = [];\n        self.config.types.forEach(type => {\n          let typeDef = type;\n          if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n            choices.push({ title: typeDef.name, value: typeDef.id || typeDef.value})\n          }\n        });\n        self.config.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  title: \"Type inzending\",\n\t\t\t\t  value: self.props.idea.typeId,\n          inputType: \"multiple-choice\",\n          choices\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n      // moderator\n      self.config.fields.push({\n\t\t\t\tname: \"modBreak\",\n\t\t\t\ttitle: \"Moderator reactie\",\n\t\t\t\tvalue: self.props.idea.modBreak,\n\t\t\t\tinputType: \"textarea-with-counter\",\n\t\t\t\tminLength: 0,\n\t\t\t\tmaxLength: 2000,\n\t\t\t})\n      state.formfields.modBreak = self.props.idea.modBreak;\n\n    } else {\n\n      // hidden: typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        self.config.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  value: self.props.idea.typeId,\n\t\t\t\t  inputType: \"hidden\",\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n    }\n\n    self.state = state;\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new window.CustomEvent('updateEditIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n      console.log('xxx');\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // // images\n\t  // if (!self.imageField.validate()) {\n\t\t//   self['form-warning-image'].style.display = 'block';\n\t\t//   isValid = false;\n\t  // } else {\n\t\t//   self['form-warning-image'].style.display = 'none';\n    // }\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let formValues = self.form.getValues();\n\n      let isValid = self.form.validate({ showErrors: true });\n\n\t    if ( !self.validateIdea() || !isValid ) { // validateIdea doet nog locatie en images\n        self.setState({ isBusy: false, showFormErrorsWarning: true });\n        return;\n      }\n\n      self.setState({ showFormErrorsWarning: false });\n\n\t    if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t    var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n\n      let body = {\n        location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n      };\n      Object.keys(formValues).forEach(key => {\n        let match = key.match(/^extraData\\.(.+)/)\n        if (match) {\n          if (!body.extraData) body.extraData = {};\n          body.extraData[match[1]] = formValues[key];\n        } else {\n          body[key] = formValues[key];\n        }\n      });\n\n      // if ( self.config.user && self.config.user.role == 'admin' ) {\n      //   body.modBreak = self.state.formfields['modBreak'];\n      // }\n\n      let method = 'POST';\n      if (typeof this.state.formfields.id == 'number') {\n        method = 'PUT';\n        url = url + '/' + this.state.formfields.id;\n      }\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw response;\n          }\n          return response.json();\n        })\n        .then( json => {\n          self.setState({ isBusy: false }, () => {\n\t\t        var event = new window.CustomEvent('newIdeaStored', { detail: { idea: json } });\n\t\t        document.dispatchEvent(event);\n          })\n        })\n        .catch((err) => {\n          console.log('Niet goed');\n          console.log(err);\n          if ( typeof err.json == 'function' ) {\n            err.json().then(json => self.setState({ isBusy: false, showFormErrorsWarning: json.message }) );\n          } else {\n            self.setState({ isBusy: false, showFormErrorsWarning: err.message || err })\n          }\n        });\n    })\n    \n  }\n  \n\trender() {\n\n    let self = this;\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      let text = 'Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.';\n      if (typeof self.state.showFormErrorsWarning == 'string') {\n        text = self.state.showFormErrorsWarning;\n      }\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">{ text }</div>\n      );\n    }\n\n    let formHTML = null;\n    formHTML = (\n      <OpenStadComponentForms.Form config={ self.config } values={{ typeId: self.state.formfields.typeId /* typeId is hidden */ }} ref={(el) => { self.form = el;}}/>\n    )\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          {formHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className={`osc-button osc-button-blue${ self.state.isBusy ? ' osc-disabled' : '' }`} onClick={() => { if (!self.state.isBusy) self.submitIdea() } } ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\nexport default class IdeasList extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      types: [],\n      titleField: 'title',\n      summaryField: 'summary',\n      idea: {\n        showVoteButtons: true,\n        sort: {\n          sortOptions: [{ value: 'createdtime,desc', label: 'Nieuwste eerst' },{ value: 'createdtime,asc', label: 'Oudste eerst' }],\n          showSortButton: true,\n          defaultSortOrder: 'createdtime,desc',\n        }\n      },\n\t\t};\n\t\tthis.config = merge.recursive(this.defaultConfig, props.config || {})\n\t\tthis.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n      currentSortOrder: this.config.idea.sort.defaultSortOrder,\n      ideas: this.props.ideas || [],\n      currentMouseOverIdea: null,\n      hideSortButton: !this.config.idea.sort.hideSortButton,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n\n    let self = this;\n    let state = { ...self.state };\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'title':\n\t\t\t\tideas = ideas.sort( function(a,b) { if (a.title.toLowerCase() < b.title.toLowerCase()) { return -1; } if (b.title.toLowerCase() < a.title.toLowerCase()) { return 1; } return 0; });\n\t\t\t\tbreak;\n\t\t\tcase 'ranking,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - b.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.yes - b.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.yes - a.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'args,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.argCount - a.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'args,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.argCount - b.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    state.ideas = maxLength ? ideas.slice(0, maxLength): ideas;\n\n    state.hideSortButton = hideSortButton;\n\n    self.setState(state);\n\n  }\n\n  setSortOrder({ sortOrder }) {\n    this.setState({\n      ...this.state,\n      currentSortOrder: sortOrder\n    }, function() {\n      this.updateIdeas({ sortOrder })\n    });\n  }\n\n  onIdeaClick(e) {\n    // placeholder\n  }\n\n  dispatchMouseOverListItem(e, idea) {\n    e.stopPropagation();\n    let newMouseOverIdeaId = idea.id;\n    if (!this.state.currentMouseOverIdea || newMouseOverIdeaId != this.state.currentMouseOverIdea.id) {\n      this.setState({ currentMouseOverIdea: idea.id });\n\t\t  var event = new window.CustomEvent('mouseOverListItem', { detail: { idea: idea } });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n  \n  dispatchMouseOutListItem(e) {\n    e.stopPropagation();\n    if (this.state.currentMouseOverIdea) {\n      this.setState({ currentMouseOverIdea: null });\n\t\t  var event = new window.CustomEvent('mouseOutListItem', {});\n\t\t  document.dispatchEvent(event);\n    }\n  }\n\n\trender() {\n\n    let self = this;\n\n    let sortSelector = null;\n    if (this.config.idea.sort.showSortButton && !this.state.hideSortButton) {\n      sortSelector = (\n        <div className=\"osc-sort osc-align-right-container osc-margin-right\">\n          Sorteer op:&nbsp;&nbsp;&nbsp;&nbsp;\n          <select value={self.state.currentSortOrder} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n            { self.config.idea.sort.sortOptions.map((option, i) => {\n              return <option value={ option.value } key={'sort-option-' + i}>{ option.label }</option>;\n            })}\n          </select>\n        </div>\n      );\n    } else {\n      sortSelector = (<div style={{height: 20}}></div>)\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.props.title} ({self.state.ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-ideas-list'} ref={el => (self.instance = el)}>\n\n        {sortSelector}\n\n        {titleHML}\n\n        { self.state.ideas.map((idea, i) => {\n          if (!idea) {\n            console.log('idea is undef', i, self.state.ideas);\n          }\n          let ideaTypeValue;\n          try {\n            ideaTypeValue = eval(`idea.${self.config.typeField}`);\n          } catch (err) {\n            ideaTypeValue = '';\n          }\n          let typeDef = self.config.types.find(entry => ideaTypeValue && ( entry.id == ideaTypeValue || entry.name == ideaTypeValue ));\n          if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n          let voteCountHTML = null;\n          if (this.config.idea.showVoteButtons) {\n            voteCountHTML = (\n              <div className=\"osc-likes\">\n                {idea.yes || 0}\n              </div>);\n          }\n          let argcountHTML = null;\n          if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n            argcountHTML = (\n              <div className=\"osc-reactions\">\n                {idea.argCount || 0}\n              </div>);\n          }\n          return (\n            <div className={`osc-info-block-ideas-list-idea${self.state.currentMouseOverIdea && self.state.currentMouseOverIdea != idea.id ? ' osc-opacity-65' : ''}`} onClick={(event) => self.config.onIdeaClick(event, idea)} key={'info-block-' + i} onMouseOver={e => self.dispatchMouseOverListItem(e, idea)} onMouseOut={e => self.dispatchMouseOutListItem(e)}>\n              <div className=\"osc-content\">\n                <div className=\"osc-idea-image-container\">\n                  <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n                </div>\n                <h4 className=\"osc-title\">{ eval(`idea.${self.config.titleField}`) }</h4>\n                <div className=\"osc-summary\">\n                  { eval(`idea.${self.config.summaryField}`) }\n                </div>\n                <div className=\"osc-stats\">\n                  {voteCountHTML}\n                  {argcountHTML}\n                  <div className=\"osc-type\">\n                    <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"osc-clear-both\"></div>\n            </div>\n          );\n        })}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBlock from './info-block.jsx';\nimport IdeaForm from './idea-form.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentIdeaDetails from '../../idea-details/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n      displayType: 'complete',\n      displayWidth: null,\n      displayHeight: null,\n      canSelectLocation: true,\n      types: [],\n      typeField: null,\n\n      // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n      // currentPolygon: undefined,\n      // areas: [\n      //  { name: \"Heel West\",\n      //    value: \"Heel West\",\n      //    polygon: [{ \"lng\": 4.8353454, \"lat\": 52.3731265 }, { \"lng\": 4.8422025, \"lat\": 52.3721002 }, { \"lng\": 4.8421761, \"lat\": 52.3695836 }, { \"lng\": 4.8455807, \"lat\": 52.3696369 }, { \"lng\": 4.8476385, \"lat\": 52.369853 }, { \"lng\": 4.8477361, \"lat\": 52.3695885 }, { \"lng\": 4.8484176, \"lat\": 52.369697 }, { \"lng\": 4.8504835, \"lat\": 52.3653302 }, { \"lng\": 4.8504956, \"lat\": 52.3643692 }, { \"lng\": 4.8501587, \"lat\": 52.3638376 }, { \"lng\": 4.8494487, \"lat\": 52.3633001 }, { \"lng\": 4.8495059, \"lat\": 52.3610989 }, { \"lng\": 4.8489152, \"lat\": 52.3608149 }, { \"lng\": 4.8487824, \"lat\": 52.3578658 }, { \"lng\": 4.8504012, \"lat\": 52.3578553 }, { \"lng\": 4.8518982, \"lat\": 52.357844 }, { \"lng\": 4.8538275, \"lat\": 52.3581295 }, { \"lng\": 4.854723, \"lat\": 52.3578629 }, { \"lng\": 4.854635, \"lat\": 52.3577532 }, { \"lng\": 4.85436, \"lat\": 52.3572975 }, { \"lng\": 4.8540881, \"lat\": 52.3564026 }, { \"lng\": 4.8547969, \"lat\": 52.3562758 }, { \"lng\": 4.8698903, \"lat\": 52.3601067 }, { \"lng\": 4.8699397, \"lat\": 52.3600231 }, { \"lng\": 4.8714122, \"lat\": 52.3603737 }, { \"lng\": 4.8712647, \"lat\": 52.3605634 }, { \"lng\": 4.8715288, \"lat\": 52.3605997 }, { \"lng\": 4.8716826, \"lat\": 52.3604277 }, { \"lng\": 4.8738605, \"lat\": 52.3608533 }, { \"lng\": 4.8738525, \"lat\": 52.3610213 }, { \"lng\": 4.8740097, \"lat\": 52.3610407 }, { \"lng\": 4.8741351, \"lat\": 52.3608935 }, { \"lng\": 4.8750611, \"lat\": 52.3608041 }, { \"lng\": 4.8756501, \"lat\": 52.3606138 }, { \"lng\": 4.876429, \"lat\": 52.3607996 }, { \"lng\": 4.8765642, \"lat\": 52.3606177 }, { \"lng\": 4.876929, \"lat\": 52.3606957 }, { \"lng\": 4.8768495, \"lat\": 52.360911 }, { \"lng\": 4.8771709, \"lat\": 52.3609696 }, { \"lng\": 4.8774, \"lat\": 52.3607583 }, { \"lng\": 4.8819952, \"lat\": 52.3620427 }, { \"lng\": 4.8813956, \"lat\": 52.3630818 }, { \"lng\": 4.8808146, \"lat\": 52.3634904 }, { \"lng\": 4.8793708, \"lat\": 52.3643261 }, { \"lng\": 4.8792691, \"lat\": 52.3649574 }, { \"lng\": 4.8787082, \"lat\": 52.3658206 }, { \"lng\": 4.8775395, \"lat\": 52.3667815 }, { \"lng\": 4.8767523, \"lat\": 52.3685117 }, { \"lng\": 4.8754901, \"lat\": 52.3697867 }, { \"lng\": 4.8745065, \"lat\": 52.3718772 }, { \"lng\": 4.8745782, \"lat\": 52.3725454 }, { \"lng\": 4.8753796, \"lat\": 52.373407 }, { \"lng\": 4.8755899, \"lat\": 52.3743025 }, { \"lng\": 4.8799131, \"lat\": 52.3813052 }, { \"lng\": 4.8796339, \"lat\": 52.3819128 }, { \"lng\": 4.880478, \"lat\": 52.3822531 }, { \"lng\": 4.8818058, \"lat\": 52.3843528 }, { \"lng\": 4.882637, \"lat\": 52.3854107 }, { \"lng\": 4.8846503, \"lat\": 52.3883466 }, { \"lng\": 4.8857963, \"lat\": 52.3881476 }, { \"lng\": 4.8911796, \"lat\": 52.3884502 }, { \"lng\": 4.8937804, \"lat\": 52.3886712 }, { \"lng\": 4.8956658, \"lat\": 52.3888313 }, { \"lng\": 4.8927982, \"lat\": 52.3933453 }, { \"lng\": 4.8850924, \"lat\": 52.398824 }, { \"lng\": 4.8762366, \"lat\": 52.3945287 }, { \"lng\": 4.8726422, \"lat\": 52.3948206 }, { \"lng\": 4.8719896, \"lat\": 52.3947192 }, { \"lng\": 4.8719508, \"lat\": 52.3952766 }, { \"lng\": 4.8715979, \"lat\": 52.39538 }, { \"lng\": 4.8667403, \"lat\": 52.393136 }, { \"lng\": 4.8643092, \"lat\": 52.3927072 }, { \"lng\": 4.8627057, \"lat\": 52.3938521 }, { \"lng\": 4.8603441, \"lat\": 52.3949382 }, { \"lng\": 4.858593, \"lat\": 52.3952782 }, { \"lng\": 4.8569204, \"lat\": 52.3953667 }, { \"lng\": 4.8569896, \"lat\": 52.3938363 }, { \"lng\": 4.8573172, \"lat\": 52.3938424 }, { \"lng\": 4.8574043, \"lat\": 52.3920751 }, { \"lng\": 4.8589526, \"lat\": 52.3912226 }, { \"lng\": 4.8592744, \"lat\": 52.3905434 }, { \"lng\": 4.8592929, \"lat\": 52.3887899 }, { \"lng\": 4.8449045, \"lat\": 52.3887733 }, { \"lng\": 4.8451066, \"lat\": 52.3850658 }, { \"lng\": 4.8446526, \"lat\": 52.3850638 }, { \"lng\": 4.8390117, \"lat\": 52.3850241 }, { \"lng\": 4.8392807, \"lat\": 52.3829687 }, { \"lng\": 4.838548, \"lat\": 52.3808766 }, { \"lng\": 4.836707, \"lat\": 52.3763581 }, { \"lng\": 4.8353454, \"lat\": 52.3731265 }] },\n      //  { name: \"De Baarsjes\",\n      //    value: \"De Baarsjes\",\n      //    polygon: [{\"lng\":4.8558724,\"lat\":52.374202},{\"lng\":4.8577714,\"lat\":52.3681953},{\"lng\":4.8582878,\"lat\":52.3648623},{\"lng\":4.8592819,\"lat\":52.3648966},{\"lng\":4.8598228,\"lat\":52.364783},{\"lng\":4.8613989,\"lat\":52.3664539},{\"lng\":4.8661845,\"lat\":52.3717538},{\"lng\":4.8664001,\"lat\":52.3721596},{\"lng\":4.8663889,\"lat\":52.372566},{\"lng\":4.865846,\"lat\":52.3733281},{\"lng\":4.8646717,\"lat\":52.3734961},{\"lng\":4.8641583,\"lat\":52.3750737},{\"lng\":4.8640923,\"lat\":52.3752839},{\"lng\":4.8559599,\"lat\":52.3743342},{\"lng\":4.8558724,\"lat\":52.374202}] },\n      //  { name: \"Oud West\",\n      //    value: \"Oud West\",\n      //    polygon: [{\"lng\":4.8546816,\"lat\":52.3568634},{\"lng\":4.855041,\"lat\":52.3563261},{\"lng\":4.858839,\"lat\":52.3572696},{\"lng\":4.8625458,\"lat\":52.3582427},{\"lng\":4.8646701,\"lat\":52.3588487},{\"lng\":4.868731,\"lat\":52.3597955},{\"lng\":4.8703188,\"lat\":52.3601231},{\"lng\":4.8717136,\"lat\":52.3604376},{\"lng\":4.8738218,\"lat\":52.3609651},{\"lng\":4.8763055,\"lat\":52.3607226},{\"lng\":4.8776842,\"lat\":52.3608635},{\"lng\":4.878167,\"lat\":52.3610044},{\"lng\":4.8812676,\"lat\":52.3618856},{\"lng\":4.8807043,\"lat\":52.3623966},{\"lng\":4.8798675,\"lat\":52.3633663},{\"lng\":4.8795778,\"lat\":52.3639428},{\"lng\":4.8792613,\"lat\":52.3644931},{\"lng\":4.8791272,\"lat\":52.3650598},{\"lng\":4.8787785,\"lat\":52.3656691},{\"lng\":4.8779202,\"lat\":52.3663734},{\"lng\":4.8773838,\"lat\":52.366809},{\"lng\":4.8772336,\"lat\":52.3676312},{\"lng\":4.8769385,\"lat\":52.3681389},{\"lng\":4.8754311,\"lat\":52.3697536},{\"lng\":4.8746211,\"lat\":52.3714043},{\"lng\":4.8744494,\"lat\":52.3720594},{\"lng\":4.8744602,\"lat\":52.3723083},{\"lng\":4.8752166,\"lat\":52.3729895},{\"lng\":4.8745943,\"lat\":52.3731762},{\"lng\":4.870925,\"lat\":52.3724033},{\"lng\":4.8680175,\"lat\":52.3717974},{\"lng\":4.8665959,\"lat\":52.3715648},{\"lng\":4.8654211,\"lat\":52.3703825},{\"lng\":4.8641176,\"lat\":52.3689905},{\"lng\":4.8628623,\"lat\":52.3676443},{\"lng\":4.8616499,\"lat\":52.3662554},{\"lng\":4.8604268,\"lat\":52.3648862},{\"lng\":4.8602505,\"lat\":52.3647431},{\"lng\":4.8591448,\"lat\":52.3634056},{\"lng\":4.8580772,\"lat\":52.3621247},{\"lng\":4.8575783,\"lat\":52.3615515},{\"lng\":4.857117,\"lat\":52.3604245},{\"lng\":4.856248,\"lat\":52.3592681},{\"lng\":4.8555345,\"lat\":52.3580035},{\"lng\":4.855299,\"lat\":52.357674},{\"lng\":4.855269,\"lat\":52.3576447},{\"lng\":4.855115,\"lat\":52.3574166},{\"lng\":4.8549071,\"lat\":52.3571512},{\"lng\":4.85479,\"lat\":52.3570018},{\"lng\":4.8546816,\"lat\":52.3568634}] },\n      // ],\n\n      titleField: 'title',\n      summaryField: 'summary',\n      // areaField: self.config.areaField || 'extraData.gebied',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n        titleMinLength: 10,\n        titleMaxLength: 20,\n        summaryMinLength: 20,\n        summaryMaxLength: 140,\n        descriptionMinLength: 140,\n        descriptionMaxLength: 5000,\n      },\n      argument: {\n        isActive: true,\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        placeholder: '',\n        requiredUserRole: 'member',\n        ignoreReactionsForIdeaIds: '',\n        closeReactionsForIdeaIds: '',\n      },\n      content: {\n        mobilePreviewLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4>{addButton}',\n        mobilePreviewNotLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4><div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"{loginLink}\">inloggen</a>.</div>',\n      },\n      search: {},\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.ideaName = self.config.ideaName || 'Inzendingen';\n    self.config.search.searchIn = props.config.search && props.config.search.searchIn || ['ideas', 'addresses'];\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n    self.config.typeField = self.config.typeField || 'extraData.theme'\n\n    // tmp\n    if (self.config.types && self.config.types.length) {\n      self.config.types.forEach((entry) => {\n        if (entry.value && !entry.name) {\n          entry.name = entry.value;\n        }\n        if (entry.mapicon && typeof entry.mapicon == 'string') {\n          try {\n            entry.mapicon = JSON.parse(entry.mapicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.listicon && typeof entry.listicon == 'string') {\n          try {\n            entry.listicon = JSON.parse(entry.listicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.buttonicon && typeof entry.buttonicon == 'string') {\n          try {\n            entry.buttonicon = JSON.parse(entry.buttonicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n      });\n    }\n\n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n      currentMouseOverIdea: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    window.addEventListener( 'hashchange', e => {\n      self.hideIdeaDetails();\n      let match = window.location.hash.match(/(\\w)(\\d+)/);\n      if (match) {\n        let ideaId = match[2];\n        let idea = self.state.ideas && self.state.ideas.find(idea => idea.id == ideaId);\n        if (match[1] == 'D') {\n          self.showIdeaDetails(idea)\n        } else {\n\t\t\t\t\t// self.setSelectedIdea(idea);\n        }\n      }\n    }, false );\n\n    // when the map is ready\n\t\tdocument.addEventListener('osc-map-is-ready', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // map events\n\t\tdocument.addEventListener('osc-map-click', function(event) {\n      self.onMapClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-marker-click', function(event) {\n      self.onMarkerClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-cluster-click', function(event) {\n      self.onClusterClick(event.detail);\n    });\n    \n    // handle filter changes\n\t\tdocument.addEventListener('typeFilterUpdate', function(event) {\n      self.onChangeTypeFilter(event.detail.value);\n    });\n    // document.addEventListener('areaFilterUpdate', function(event) {\n    //   self.onChangeAreaFilter(event.detail.value);\n    // });\n\n    // handle infoblock changes\n\t\tdocument.addEventListener('updateSelectedIdea', function(event) {\n      self.onUpdateSelectedIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('closeSelectedLocation', function(event) {\n      self.onCloseSelectedLocation(event.detail.idea);\n    });\n\t\tdocument.addEventListener('updateEditIdea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('ideaClick', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('selectedIdeaClick', function(event) {\n      self.onSelectedIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('newIdeaClick', function(event) {\n      self.onNewIdeaClick({ typeId: event.detail.typeId });\n    });\n\t\tdocument.addEventListener('clickMobileSwitcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n\t\tdocument.addEventListener('mouseOverListItem', function(event) {\n      self.onMouseOverListItem(event.detail.idea);\n    });\n\t\tdocument.addEventListener('mouseOutListItem', function(event) {\n      self.onMouseOutListItem();\n    });\n\n    // details changes\n\t\tdocument.addEventListener('osc-idea-liked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onReactionStored(event.detail, true);\n    });\n\t\tdocument.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('osc-edit-idea-click', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-idea-deleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('newIdeaStored', function(event) {\n      document.location.href = \"#\";\n      self.onNewIdeaStored(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArgsCount=1&includeUser=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers,\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        // showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/(\\w)(\\d+)/) && window.location.hash.match(/(\\w)(\\d+)/)[2] ) || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        // showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/^#D(\\d+)/) && window.location.hash.match(/^#D(\\d+)/)[1] );\n        showIdeaSelected = showIdeaSelected || ( window.location.hash.match(/^#S(\\d+)/) && window.location.hash.match(/^#S(\\d+)/)[1] );\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.map.setBoundsAndCenter();\n\n        self.setState({ ideas }, function () {\n          self.setState({ mobileState: self.config.startWithListOpenOnMobile ? 'opened' : 'closed' })\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers({})\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          if (window.location.hash.match(/^#newidea/)) {\n            // TODO: dit moet ook bestaande ideeen gaan werken\n            let hash = window.location.hash;\n            let match = hash.match(/&([^&]+)=([^&]+)/g);\n            let newIdea = {  };\n            if (match) {\n              match.forEach((entry) => {\n                let [key, val] = entry.split('=');\n                key = key.substring(1, key.length);\n                newIdea[key] = decodeURIComponent(val);\n              });\n            }\n\t\t\t\t\t  self.setNewIdea(newIdea);\n\t\t\t\t    self.showIdeaForm(newIdea);\n          }\n          self.onChangeMapBoundaries();\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    if (self.infoblock) self.infoblock.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers({})\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n\n    if (self.config.idea.formUrl) {\n      let url = self.config.idea.formUrl;\n      url = url.replace(/:ideaId/, typeof idea.id == 'number' ? idea.id : '');\n      url = url.replace(/:location/, idea.location ? JSON.stringify({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }) : '');\n      url = url.replace(/:typeId/, idea.typeId);\n      url = url.replace(/:address/, idea.address);\n      document.location.href = url;\n    } else {\n      self.setState({ status: 'idea-form', editIdea: idea }, function() {\n        self.map.map.invalidateSize();\n        self.map.hideMarkers({ exception: { location: idea && idea.location && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n        if (next) next();\n      });\n    }\n\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      self.showIdeaDetails(idea)\n      document.location.href = \"#D\" + idea.id\n    } else {\n      document.location.href='#';\n      if (self.state.editIdea && self.state.editIdea.location) {\n        self.setState({ status: 'location-selected' }, function() {\n          // todo: dit zou hij zelf via state moeten doen\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(self.state.editIdea)\n        });\n      } else {\n        self.setState({ status: 'default' }, function() {\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(null)\n        });\n      }\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas xxx\n    if (this.config.search.searchIn.includes('ideas')) {\n\t\t  this.state.ideas.forEach((idea) => {\n\t\t\t  let title = eval(`idea.${self.config.titleField}`) || '';\n        let titlelLc = title.toLowerCase();\n\t\t\t  let summary = eval(`idea.${self.config.summaryField}`) || '';\n        let summaryLc = summary.toLowerCase();\n\t\t\t  if (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\t  searchResult.ideas.push({\n\t\t\t\t\t  text: title,\n\t\t\t\t\t  onClick: function() {\n              self.onUpdateSelectedIdea(idea)\n            },\n\t\t\t\t  })\n\t\t\t  }\n\t\t  });\n    }\n\n    if (!this.config.search.searchIn.includes('addresses')) {\n      setImmediate(function(){callback(searchValue, searchResult)});\n    }\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n\n\n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\n\t}\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // setCurrentPolygon(polygon) {\n  //   let state = { ...this.state };\n  //   state.currentPolygon = polygon ? this.map.createCutoutPolygon(polygon): undefined;\n  //   this.setState(state);\n  // }\n\n  // removeCurrentPolygon() {\n  //   this.map.removePolygon(this.state.currentPolygon)\n  //   let state = { ...this.state };\n  //   state.currentPolygon = undefined;\n  //   this.setState(state);\n  // }\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n    // xxx\n    let self = this;\n    self.map.setSelectedLocation(location)\n    if (self.ideaform) {\n      if (!location) return;\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\tself.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\tlet address = json && json._display || 'Geen adres gevonden';\n\t\t\t\tself.state.editIdea.address = address;\n\t\t\t\tself.ideaform.handleLocationChange({ location, address: address });\n\t\t\t})\n    }\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        // xxx\n        if (idea.location) self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infoblock) {\n          self.setState({ editIdea: self.state.editIdea });\n          if (idea.location) {\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n            self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n              let address = json && json._display || 'Geen adres gevonden';\n              let editIdea = self.state.editIdea;\n              editIdea.address = address;\n              self.setState({ editIdea });\n              self.infoblock.setNewIdea({ ...self.state.editIdea, address });\n            })\n          } else {\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Geen locatie geselecteerd...' });\n          }\n          self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        self.setSelectedLocation(null);\n        if (self.infoblock) {\n          self.infoblock.setNewIdea(null);\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(idea);\n        this.infoblock.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map.unfadeAllMarkers();\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(null);\n        this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          document.location.href='#';\n          this.setSelectedIdea(null);\n          this.setNewIdea(null);\n          this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n        } else {\n          if (!this.config.canSelectLocation) break;\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n          // setTimeout( function() {\n\t\t      // var event = new window.CustomEvent('newIdeaClick', { detail: { newIdea } });\n\t\t      //   document.dispatchEvent(event);\n          // }, 500 );\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infoblock) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infoblock) {\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    if (idea) {\n      document.location.href='#S'+idea.id;\n    } else {\n      document.location.href = \"#\";\n    }\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n\tonCloseSelectedLocation() {\n    this.setState({ ...this.state, status: 'default', currentIdea: null }, function() {\n      this.setSelectedIdea(null);\n      this.setNewIdea(null);\n      this.setSelectedLocation(null);\n    });\n  }\n  \n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      // this.showIdeaDetails(idea);\n      document.location.href = \"#D\" + idea.id;\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter();\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick(idea) {\n    // this.showIdeaDetails(idea);\n    document.location.href = \"#D\" + idea.id\n  };\n  \n  onNewIdeaClick({ typeId }) {\n    let self = this;\n    let editIdea = this.state.editIdea || {};\n    editIdea.typeId = typeId;\n    self.showIdeaForm(editIdea, () => {\n      let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n\t\tself.showIdeaDetails(idea);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data, isNew) {\n    if (isNew) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n      idea.argCount++;\n    }\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n\n  onChangeTypeFilter(value) {\n\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.setSelectedLocation(null);\n\t  self.map.setFilter(function(marker) {\n\t\t  if (value && value !== '0') {\n\t\t\t  return marker.data && eval(`marker.data.${self.config.typeField}`).toLowerCase() && eval(`marker.data.${self.config.typeField}`).toLowerCase() == value.toLowerCase();\n\t\t  } else {\n\t\t\t  return true;\n\t\t  }\n\t  })\n    self.setState({ status: 'default' })\n    self.map.setBoundsAndCenter();\n    self.onChangeMapBoundaries(); // todo: rename\n  }\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // onChangeAreaFilter(area) {\n  //   let self = this;\n  //   self.setSelectedIdea(null);\n  //   self.setNewIdea(null);\n  //   self.removeCurrentPolygon();\n  //   self.setCurrentPolygon( area && area.polygon );\n  //   self.setState({ status: 'default' })\n  //   self.map.setBoundsAndCenter(area && area.polygon || self.config.map.polygon || self.map.markers);\n  // }\n\n  onMouseOverListItem(idea) {\n    this.setState({ currentMouseOverIdea: idea });\n    this.map.fadeMarkers({ exception: idea })\n    this.map.updateFading();\n  }\n\n  onMouseOutListItem(idea) {\n    this.setState({ currentMouseOverIdea: null });\n    this.map.unfadeAllMarkers()\n    if (this.selectedIdea) {\n      this.map.fadeMarkers({exception: this.selectedIdea});\n    }\n    if (this.map.selectedLocation) {\n      this.map.fadeMarkers({});\n    }\n    this.map.updateFading();\n  }\n\n  onClickBackToOverview(idea) {\n    document.location.href='#S'+this.state.currentIdea.id;\n  }\n  \n  onClickMobileSwitcher() {\n    let self = this;\n    if (self.infoblock) self.infoblock.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter();\n      }\n    })\n  }\n\n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infoblock moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        let config = { // TODO: niet bij elke render\n          titleField: this.config.titleField,\n          summaryField: this.config.summaryField,\n          typeField: this.config.typeField,\n          // areaField: this.config.areaField,\n          siteId: this.config.siteId,\n          user: this.config.user,\n          api: this.config.api,\n          argument: { ...this.config.argument },\n          showVoteButtons: this.config.idea.showVoteButtons,\n          poll: this.config.poll,\n          showLabels: this.config.idea.showLabels,\n          types: this.config.types,\n          allowMultipleImages: this.config.idea.allowMultipleImages,\n          metaDataTemplate: this.config.idea.metaDataTemplate,\n          shareChannelsSelection: this.config.idea.shareChannelsSelection,\n          loginUrl: this.config.loginUrl,\n          linkToUserPageUrl: this.config.linkToUserPageUrl,\n        };\n        config.argument.isActive = this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${this.state.currentIdea.id}(?:\\\\D|$)`));\n        config.argument.isClosed = this.config.argument.isClosed || this.config.argument.closeReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${this.state.currentIdea.id}(?:\\\\D|$)`));\n        if (this.config.typeLabel) config.typeLabel = this.config.typeLabel;\n        // TODO: tmp gerard dou\n        if ( this.state.currentIdea && this.state.currentIdea.extraData && this.state.currentIdea.extraData.type && ( this.state.currentIdea.extraData.type == 'Kans' || this.state.currentIdea.extraData.type == 'Knelpunt' ) ) {\n          config.types = [{\"name\": \"Kans\",\"label\": \"Dit gaat goed\",\"value\": \"Kans\",\"buttonLabel\": \"Ik wil een idee posten\",\"backgroundColor\": \"#bed200\",\"textColor\": \"black\"},{\"name\": \"Knelpunt\",\"label\": \"Dit kan beter\",\"value\": \"Knelpunt\",\"backgroundColor\": \"#ff9100\",\"textColor\": \"black\"}];\n          config.showLabels = true;\n        }\n        infoHTML = (\n\t\t\t    <OpenStadComponentIdeaDetails id={this.divId + '-infoblock'} config={config} idea={this.state.currentIdea} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideadetails = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.onClickBackToOverview() }>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <IdeaForm id={this.divId + '-infoblock'} config={{ siteId: this.config.siteId, user: this.config.user, api: this.config.api, ...this.config.idea, types: this.config.types, typeField: this.config.typeField }} idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideaform = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n\n            let contentHTML = this.config.api.isUserLoggedIn ? this.config.content.mobilePreviewLoggedInHTML : this.config.content.mobilePreviewNotLoggedInHTML;\n\n            let addButton = null; let loginButton = null; let loginLink = null;\n            if (this.config.api.isUserLoggedIn) {\n              if (this.config.idea.canAddNewIdeas) {\n                addButton = (\n                  <button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n                );\n              }\n            } else {\n              if (this.config.idea.canAddNewIdeas) {\n                loginButton = (\n                  <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n                );\n                loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n              }\n            }\n            \n            contentHTML = contentHTML.replace(/\\{address\\}/g, this.state.editIdea.address || '');\n            contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n            \n            contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n            mobilePopupHTML = (\n\t\t\t\t\t\t\t<div className=\"ocs-mobile-popup\">\n\t\t\t\t\t\t\t\t{contentHTML}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infoblock.setState({ mobileState: 'opened' }); document.location.href = \"#D\" + this.state.currentIdea.id; /* this.showIdeaDetails(this.state.currentIdea) */ } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, user: this.config.user, ideaName: this.config.ideaName, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, typeField: this.config.typeField, content: this.config.content, argument: this.config.argument, idea: this.config.idea, loginUrl: this.config.loginUrl  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, typesFilterLabel: this.config.typesFilterLabel, typeField: this.config.typeField, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, ideaName: this.config.ideaName, search: this.config.search }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, user: this.config.user, ideaName: this.config.ideaName, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, typeField: this.config.typeField, content: this.config.content, argument: this.config.argument, idea: this.config.idea, loginUrl: this.config.loginUrl  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, typesFilterLabel: this.config.typesFilterLabel, typeField: this.config.typeField, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, ideaName: this.config.ideaName, search: this.config.search }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    let divStyle = {};\n    let simpleHTML = null;\n    if ( this.config.displayType == 'simple' ) {\n      filterHTML = null;\n      infoHTML = null;\n      mobilePopupHTML = null;\n      let buttonHTML = null;\n      if (this.config.linkToCompleteUrl) buttonHTML = <button onClick={() => { document.location.href = this.config.linkToCompleteUrl }} className=\"osc-button-blue\" style={{position: 'absolute', top: 20, right: 20}}>Bekijk de volledige kaart</button>\n      simpleHTML = (\n        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, zIndex: 1000 }}>\n          {buttonHTML}\n        </div>)\n      if (this.config.displayWidth) divStyle.width = this.config.displayWidth;\n      if (this.config.displayHeight) divStyle.height = this.config.displayHeight;\n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} style={divStyle} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className={`osc-ideas-on-map-map osc-ideas-on-map-map-${this.config.displayType}`}>\n\t\t\t    <Map id={this.divId + '-map'} config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField, zoomControl: this.config.displayType == 'simple' ? false : true }} ref={el => (this.map = el)}/>\n        </div>\n        {simpleHTML}\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport IdeasList from './ideas-list.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n// TODO: na verandering op verandering denk ik dat dit een status moet gaan krijgen ipv. de new en selected versie.\n// TODO: setNewIdea refactoren naar setSelectedLocation\n// TODO: events worden via document gestuurd; dat kan ook intern\n\n'use strict';\n\nexport default class InfoBlock extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      content: {\n        noSelectionLoggedInHTML: '<div class=\\\"osc-info-block-default-block\\\"><div class=\\\"osc-info-block-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-info-block-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-info-block-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        noSelectionNotLoggedInHTML: '<div class=\\\"osc-info-block-default-block\\\"><div class=\\\"osc-info-block-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-info-block-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-info-block-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        selectionActiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {addButton}.',\n        selectionInactiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        selectionActiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {loginButton} of <a href=\"{loginLink}\">login link</a>.',\n        selectionInactiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        showNoSelectionOnMobile: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n      argument: {\n        isActive: true,\n        ignoreReactionsForIdeaIds: '',\n      },\n      types: [],\n\t\t};\n\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n    this.config.loginUrl = this.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    // tmp voor oude data\n    console.log();\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionLoggedInHTML) {\n      this.config.content.noSelectionLoggedInHTML = props.config.content.noSelectionHTML\n    }\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionNotLoggedInHTML) {\n      this.config.content.noSelectionNotLoggedInHTML = props.config.content.noSelectionHTML\n    }\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    this.eventTarget = this.config.eventTarget || this.instance;\n  }\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    this.setState({ ideas });\n    this.list.updateIdeas({ ideas, sortOrder, hideSortButton, center, maxLength });\n  }\n\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n\n  dispatchUpdateSelectedIdea(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('updateSelectedIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchCloseSelectedLocation(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('closeSelectedLocation', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchSelectedIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('selectedIdeaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  dispatchOnIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('ideaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchNewIdeaClick(e, typeId) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('newIdeaClick', { detail: { typeId } });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('clickMobileSwitcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  render() {\n\n    let self = this;\n\n    let newIdeaHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // knoppen\n    let addButton = null; let loginButton = null; let loginLink = null;\n\n    if (self.config.idea.canAddNewIdeas) {\n      if (self.config.types && self.config.typeField == 'typeId') {\n        addButton = (\n          <span className=\"osc-new-idea-buttons\">\n            {self.config.types.map(\n              type => {\n                let typeDef = type;\n                if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n                  let buttonBgHTML = typeDef ? <div className=\"osc-button-background-image\" dangerouslySetInnerHTML={{ __html: typeDef.buttonicon && typeDef.buttonicon.html || '' }}></div> : null;\n                  return (<button className=\"osc-button osc-button-white\" onClick={(event) => self.dispatchNewIdeaClick(event, typeDef.id || typeDef.name)}>{buttonBgHTML}{ typeDef && typeDef.buttonLabel || 'Nieuw punt toevoegen' }</button>)\n                } else return null;\n              }\n            )}\n          </span>\n        );\n      } else {\n        addButton = (\n          <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)}>Nieuw punt toevoegen</button>\n        );\n      }\n      loginButton = (\n        <button onClick={() => { document.location.href = this.config.loginUrl }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n      );\n      loginLink = `javascript: document.location.href = '${this.config.loginUrl}'`;\n    }\n\n    // new idea\n    if (self.state.newIdea) {\n      let contentHTML = null;\n      if (self.state.newIdea.isPointInPolygon) {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionActiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionActiveNotLoggedInHTML\n        }\n      } else {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionInactiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionInactiveNotLoggedInHTML\n        }\n      }\n\n      contentHTML = contentHTML.replace(/\\{address\\}/g, self.state.newIdea.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      newIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-new-idea\">\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchCloseSelectedLocation(event, null)} ref={el => (self.resetButton = el)}/>\n          {contentHTML}\n        </div>\n      );\n\n\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      let idea = self.state.selectedIdea;\n      let ideaTypeValue;\n      try {\n        ideaTypeValue = eval(`idea.${self.config.typeField}`);\n      } catch (err) {\n        ideaTypeValue = '';\n      }\n      let typeDef = self.config.types.find(entry => entry.name == ideaTypeValue || entry.id == ideaTypeValue);\n      if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      let voteCountHTML = null;\n      if (this.config.idea.showVoteButtons) {\n        voteCountHTML = (\n          <div className=\"osc-likes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        argcountHTML = (\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.state.selectedIdea)}>\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchUpdateSelectedIdea(event, null)} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-info-block-selected-idea-idea\">\n            <div className=\"osc-idea-image-container\">\n              <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n            </div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                {voteCountHTML}\n                {argcountHTML}\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n    let defaultBlockHTML = null;\n    if (!newIdeaHTML && !selectedIdeaHTML) {\n      let noSelectionHTML = self.config.content.noSelectionNotLoggedInHTML;\n      if (self.config.api.isUserLoggedIn) noSelectionHTML = self.config.content.noSelectionLoggedInHTML;\n      noSelectionHTML = noSelectionHTML.replace(/\\{loginLink\\}/g, loginLink);\n      noSelectionHTML = OpenStadComponentLibs.reactTemplate({ html: noSelectionHTML, addButton, loginButton })\n      defaultBlockHTML = (\n\t\t\t  <div className={`osc-info-block-default-block${ self.config.content.showNoSelectionOnMobile ? ' osc-visible-on-mobile' : '' }`}>{noSelectionHTML}</div>\n      );\n      mobileTitle = `${self.config.ideaName} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n\n\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-info-block'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          {defaultBlockHTML}\n          {newIdeaHTML}\n          {selectedIdeaHTML}\n\t\t\t    <IdeasList config={{ ...self.config, onIdeaClick: ( event, idea ) => self.dispatchOnIdeaClick(event, idea) }} ideas={self.state.ideas} title={self.config.ideaName + ' ' + titleAddition} key={`osc-ideas-list-321`} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport OpenStadComponentNLMap from '../../nlmap/index.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      clustering: {\n        maxClusterRadius: 100,\n        showCoverageOnHover: false,\n      },\n      types: [],\n    };\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    // tmp fallback\n    this.config.polygon = this.config.polygon;\n    this.config.autoZoomAndCenter = this.config.autoZoomAndCenter || 'polygon'\n    \n    this.ideas = [];\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    super.componentDidMount(prevProps, prevState);\n\n    let self = this;\n\t\tdocument.addEventListener('osc-map-cluster-animation-end', function(event) {\n      self.onMapClusterAnimationEnd(event.detail);\n    });\n\n  }\n  \n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && self.config.typeField ? eval(`idea.${self.config.typeField}`) : 'typeId';\n\t\tlet typeDef = self.config.types.find(entry => typename && ( entry.id == typename || entry.name == typename ));\n    if (!typeDef) typeDef = {};\n\t  let color = typeDef.color || typeDef.backgroundColor || '#164995';\n    let icondef = ( ( typeDef.mapicon || typeDef.icon ) ) || { html: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  setBoundsAndCenter(points) {\n    super.setBoundsAndCenter(points || ( this.config.autoZoomAndCenter == 'polygon' && this.config.polygon ) || this.markers);\n  }\n\n  showMarkers({ keepCenter=false }) {\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    // if (!keepCenter) self.setBoundsAndCenter(( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || self.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception && exception.location) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onMapClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n    this.config.searchIn = props.config.searchIn || ['ideas', 'addresses'];\n    this.config.placeholder = props.config.placeholder || 'Zoek op trefwoord';\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n    this.updateSearchResult = this.updateSearchResult.bind(this);\n\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult);\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n      let suggestionDividerHTML = null;\n      if (this.config.searchIn.includes('ideas') && this.config.searchIn.includes('addresses')) {\n        suggestionDividerHTML = (<div className=\"osc-search-suggestions-hr\"/>);\n      }\n      let addressSuggestionsHTML = null;\n      if (this.config.searchIn.includes('addresses')) {\n        addressSuggestionsHTML = (\n          <div>\n\t\t\t\t\t  Adressen:\n            { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\t  let text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n              return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n            })}\n          </div>);\n      }\n      let ideasSuggestionsHTML = null;\n      if (this.config.searchIn.includes('ideas')) {\n        ideasSuggestionsHTML = (\n          <div>\n\t\t\t\t\t  { this.config.ideaName }:\n            { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\t  let text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n              return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n            })}\n          </div>);\n      }\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t  {addressSuggestionsHTML}\n          {suggestionDividerHTML}\n          {ideasSuggestionsHTML}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder={self.config.placeholder} onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\nimport 'custom-event-polyfill';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\n\n// render elements\nOpenStadComponentIdeasOnMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOnMap as default,\n  OpenStadComponentIdeasOnMap as IdeasOnMap,\n};\n\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\nimport reactTemplate from './lib/react-template.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n  reactTemplate,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","import merge from 'merge';\n\n// TODO: dit werkt alleen als het er 1 is\n\nexport default function({ html='' }) {\n\n  let args = arguments[0];\n  delete args.html;\n\n  let matches = 0;\n\n  Object.keys(args).forEach((key) => {\n\n    let regEx = new RegExp(`^((?:.|\\n|\\r)*)\\\\{${key}\\\\}((?:.|\\n|\\r)*)$`, 'g');\n    let match = regEx.exec(html);\n\n    if (match) {\n      matches++;\n      html = (\n        <span>\n        <span dangerouslySetInnerHTML={{ __html: match[1] }}></span>\n        {args[key]}\n        <span dangerouslySetInnerHTML={{ __html: match[2] }}></span>\n        </span>\n      );\n    }\n\n  });\n\n  if (matches == 0) html = <span dangerouslySetInnerHTML={{ __html: html }}></span>\n  return html;\n  \n}\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nlet roles = {\n  admin: ['admin', 'moderator', 'editor', 'member', 'anonymous', 'all'],\n  moderator: ['moderator', 'editor', 'member', 'anonymous', 'all'],\n  editor: ['editor', 'member', 'anonymous', 'all'],\n  member: ['member', 'anonymous', 'all'],\n  anonymous: ['anonymous', 'all'],\n  all: ['all'],   // special\n  owner: null, // special\n}\n\nexport default function(user, requiredRole) {\n  let userRole = user.role;\n  if (!Object.keys(roles).includes(userRole)) userRole = 'all';\n  return roles[userRole].includes(requiredRole);\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\nimport hasRole from './has-role.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n  hasRole,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from '../../component/index.jsx';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tself.mapIsReady = true;\n\t\t\tvar event = new CustomEvent('osc-map-is-ready', { detail: { id: self.divId } });\n\t\t\tdocument.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap({ ...self.config });\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n    if (self.config.zoomControl == false) {\n      self.map.removeControl(self.map.zoomControl);\n    }\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || amapsCreateClusterIcon.bind(self) // ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t\tself.markerClusterGroup.on('clusterclick', self.onClusterClick);\n\t\t\tself.markerClusterGroup.on('animationend', self.onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tself.map.on('click', self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\n    if (!Array.isArray(points)) {\n      self.map.panTo(new L.LatLng(self.config.center.latitude, self.config.center.longitude));\n      return;\n    }\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n    if (!point) return false;\n    if (!polygon) return true;\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var x = point.lat, y = point.lng;\n\n    var inside = false;\n    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        var xi = polygon[i].lat, yi = polygon[i].lng;\n        var xj = polygon[j].lat, yj = polygon[j].lng;\n\n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonMarkerClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-marker-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterAnimationEnd(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-animation-end', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentNLMap from './component/map.jsx';\n\n// render elements\nOpenStadComponentNLMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentNLMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentNLMap as default,\n  OpenStadComponentNLMap as NLMap,\n};\n\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n  \n  // todo: configurable\n  let markers = cluster.getAllChildMarkers();\n\n  let colors = {}\n  let total = markers.length;\n  let isFaded = false;\n  markers.forEach((entry) => {\n    let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n    let tmp = self.config.types.find(entry => type && ( entry.id == type || entry.name == type ));\n    let color = tmp && ( tmp.color || tmp.backgroundColor ) || '#164995';\n    if ( type == undefined ) type = 'undef'\n    if ( !colors[color] ) colors[color] = 0;\n    colors[color]++;\n    if (entry.data && entry.data.isFaded) isFaded = true;\n  });\n\n  let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n  let soFar = 0;\n  Object.keys(colors).forEach((key) => {\n    let myColor = key;\n    let perc = 100 * colors[key] / total;\n    let angle = (soFar / 100) * 360;\n    \n    html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n    soFar = soFar + perc;\n  });\n\n  html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n  return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPollForm extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      user: {},\n      questionMinLength: 30,\n      questionMaxLength: 500,\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      allowChoiceTitles: true,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      pollId: props.pollId,\n      poll: props.poll,\n      isBusy: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if ( !self.state.poll ) self.fetchData();\n        });\n      });\n    } else {\n      if ( !self.state.poll ) self.fetchData();\n    }\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n    if (!self.state.pollId) {\n      return self.setState({ poll: {\n        question: '',\n        choices: { \"1\": {}, \"2\": {} },\n      }});\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.config.pollId }?withUser=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.poll = json;\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  validatedResult() {\n\n    let self = this;\n    let poll = self.state.poll;\n\n    let questionInput = self['question-input'];\n    let isValid = questionInput.validate();\n    let result = { question: questionInput.state.value, choices: {} };\n\n    Object.keys(poll.choices).forEach((key) => {\n      let titleInput = self[`title-input-${key}`];\n      let descriptionInput = self[`description-input-${key}`];\n      if (!( titleInput && titleInput.state.value ) && !descriptionInput.state.value) return;\n      result.choices[key] = {};\n      if (self.config.allowChoiceTitles && titleInput.state.value) {\n        result.choices[key].title = titleInput.state.value;\n        if (!titleInput.validate()) isValid = false;\n      }\n      if (descriptionInput.state.value) {\n        result.choices[key].description = descriptionInput.state.value;\n        if (!descriptionInput.validate()) isValid = false;\n      }\n    });\n\n    if (!isValid) return null;\n    if (Object.keys(result.choices).length < 2) return null;\n    return result;\n\n  }\n\n  handleOnChange(data) {\n\n    let self = this;\n    let poll = { ...self.state.poll };\n\n    if (data.choice) {\n      poll.choices[ data.choice.id ] = {\n        title: self.config.allowChoiceTitles && data.choice.title,\n        description: data.choice.description,\n      }\n    }\n\n    if (data.question) {\n      poll.question = data.question;\n    }\n\n    this.setState({ poll }, () => {\n    });\n\n  }\n\n  addChoice() {\n    let self = this;\n    let poll = { ...self.state.poll };\n    let keys = Object.keys(poll.choices).sort();\n    let key = parseInt( keys[keys.length-1] ) + 1;\n    poll.choices[ key ] = {};\n    self.setState({ poll })\n  }\n\n  canSubmit() {\n    if (this.state.poll && this.state.poll.can) {\n      return this.state.poll.can.edit;\n    } else {\n      let requiredUserRole = this.config.requiredUserRole;\n      let userRole = this.props.user && this.props.user.role;\n      // todo: owner; dus dit moet anders\n      // todo: nieuwe rollen structuur\n      return  requiredUserRole == 'anonymous' && userRole  ||\n        requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n        requiredUserRole == 'admin' && userRole == 'admin';\n    }\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let validatedResult = self.validatedResult();\n      if (!validatedResult) {\n        self.setState({ isBusy: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let isNew = true;\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll`;\n      let method = 'POST';\n      if (self.state.poll && self.state.poll.id) {\n        url += `/${ self.state.poll.id }`;\n        method = 'PUT';\n        isNew = false;\n      }\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      let body = validatedResult;\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-new-poll-stored', { detail: json });\n          if (!isNew) event = new CustomEvent('osc-poll-edited', { detail: json });\n\n\t\t      document.dispatchEvent(event);\n          if (typeof self.config.onFinished == 'function') {\n            self.config.onFinished(validatedResult);\n          }\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n    \n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue osc-margin-left${ self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button osc-margin-left\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)} >\n        {formIntro}\n\n        <h4>Vraag</h4>\n        <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.questionMinLength, maxLength: self.config.questionMaxLength, placeholder: 'Vraag' }} value={poll.question} onChange={ data => self.handleOnChange({ question: data.value }) } ref={el => (self[`question-input`] = el)}/>\n\n        <h4>Keuzemogelijkheden</h4>\n        <ol className=\"osc-poll-form-choices\">\n          {poll && poll.choices && Object.keys(poll.choices).sort().map((key) => {\n            let choice = poll.choices[key];\n            let titleInputHTML = null;\n            if (self.config.allowChoiceTitles) titleInputHTML = <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.titleMinLength, maxLength: self.config.titleMaxLength, placeholder: 'Titel' }} value={choice.title} onChange={ data => self.handleOnChange({ choice: { id: key, title: data.value } }) } ref={el => (self[`title-input-${key}`] = el)}/>;\n            return (\n              <li className=\"osc-poll-form-choice\" key={`osc-key-${key}`}>\n                {titleInputHTML}\n                <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.descriptionMinLength, maxLength: self.config.descriptionMaxLength, placeholder: 'Beschrijving' }} value={choice.description} onChange={ data => self.handleOnChange({ choice: { id: key, description: data.value } }) } ref={el => (self[`description-input-${key}`] = el)}/>\n              </li>\n            );\n          })}\n        </ol>\n\n        <a className=\"osc-add-choice-button\" onClick={ e => this.addChoice() }>Nog een keuzemogelijkheid toevoegen</a>\n        \n        {submitButtonHTML}\n\n      </div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\nimport OpenStadComponentPollForm from './poll-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPoll extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-poll-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null, // hoort niet hier\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      withPercentage: true,\n      allowChoiceTitles: true,\n      allowShowResultsIfNotVoted: false,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    self.hideEditForm = self.hideEditForm.bind(self);\n\n    self.state = {\n      user: self.config.user,\n      poll: props.poll,\n      pollId: ( props.poll && props.poll.id ) || self.config.pollId,\n      selectedChoice: null,\n      showResult: false,\n      showQuestion: false,\n      editMode: false,\n      showVoteSucceeded: false,\n    };\n\n    if (self.state.poll) {\n      self.parseVoteCount(self.state.poll);\n      if (self.state.poll.userVote) {\n        self.state.selectedChoice = self.state.poll.userVote;\n      }\n    }\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if (!self.state.poll && self.config.ideaId) self.fetchData();\n        });\n      });\n    } else {\n      if (!self.state.poll && self.config.ideaId) self.fetchData();\n    }\n\n    // document.addEventListener('osc-new-reaction-stored', function(event) {\n    //   self.onNewPolltored(event.detail);\n    // });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    if (!self.state.pollId) {\n      // no data: show new poll form\n      return self.setState({ editMode: true }, () =>{\n      })\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.state.pollId }?withUser=1&withUserVote=1&withVoteCount=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state, showResult: false, showQuestion: false, };\n        state.poll = json;\n        state.pollId = json.id;\n\n        self.parseVoteCount(state.poll);\n\n        if (state.poll.userVote) {\n          state.selectedChoice = state.poll.userVote;\n        }\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  parseVoteCount(poll) {\n    let self = this;\n    if (poll.voteCount) {\n      Object.keys(poll.choices).sort().forEach((key) => {\n        let choice = poll.choices[key];\n        choice.votesAbs = poll.voteCount[key]\n        choice.votesPrc = parseInt(100 * ( poll.voteCount[key] / poll.voteCount.total ));\n        choice.votesPrc = choice.votesPrc || 0;\n      });\n    }\n\n  }\n\n  showEditForm() {\n    this.setState({ editMode: true });\n  }\n\n  hideEditForm() {\n    this.setState({\n      editMode: false,\n    }, function() {\n      this.fetchData()\n    });\n  }\n\n  setShowResult() {\n    this.setState({ showResult: true });\n  }\n\n  setShowQuestion() {\n    this.setState({ showQuestion: true });\n  }\n\n  selectChoice(data) {\n    this.setState({ selectedChoice: data.choice });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  isValid() {\n    return !!this.state.selectedChoice;\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.state.user && this.state.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n            requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n            requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitVote() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      if (!self.isValid()) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = 'POST';\n\n      let body = {\n        choice: self.state.selectedChoice,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          self.fetchData( () => {\n            self.setState({ isBusy: false, showVoteSucceeded: true, }, () => {\n\t\t          let event = new CustomEvent('osc-poll-voted', { detail: json });\n\t\t          document.dispatchEvent(event);\n            });\n          });\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n            \n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  deletePoll() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let poll = self.state.poll;\n      if (!( poll && poll.can && poll.can.delete )) return alert('U kunt deze poll niet verwijderen');\n      if (!( poll && poll.id )) return alert('U kunt deze poll niet verwijderen');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }`;\n      let method = 'DELETE';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      fetch(url, {\n        method,\n        headers,\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-poll-deleted', { detail: json });\n\t\t      document.dispatchEvent(event);\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    if (self.state.editMode) {\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          <OpenStadComponentPollForm config={{ ...self.config, onFinished: self.hideEditForm }} pollId={self.state.poll && self.state.poll.id} poll={self.state.poll} user={self.state.user}/>\n        </div>\n      );\n      \n    } else {\n\n      let questionHTML = null;\n      if (( poll && poll.choices && !poll.userVote ) || self.state.showQuestion) {\n        \n        let config = { name: \"pollChoice\", choices: [] };\n        Object.keys(poll.choices).sort().map(key => {\n          let choiceHTML = self.config.allowChoiceTitles && poll.choices[key].title ? `<h4>${poll.choices[key].title}</h4>` : '';\n          choiceHTML += poll.choices[key].description || '';\n          config.choices.push({\n            dangerousDescription: choiceHTML,\n            value: key\n          });\n        })\n\n        let submitButtonHTML = null;\n        if (self.canSubmit()) {\n          submitButtonHTML = (<button onClick={(e) => { if (!self.state.isBusy) self.submitVote(); }} className={`osc-button-blue${ !self.isValid() ? ' osc-disabled' : '' }`} >Stemmen</button>);\n        } else {\n          submitButtonHTML = (<button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-poll-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>);\n        }\n\n        let showResultButtonHTML = null;\n        if (self.config.allowShowResultsIfNotVoted &&  !(poll.userVote || self.state.showResult)) showResultButtonHTML = (<a className=\"osc-show-result-button\" onClick={ e => this.setShowResult() }>Resultaat bekijken</a>);\n\n        questionHTML = (\n          <div className=\"osc-poll-question osc-form\">\n            <OpenStadComponentForms.Radios config={config} value={self.state.selectedChoice} onChange={ data => self.selectChoice({ choice: data.value }) } ref={el => (self.description = el)}/>\n            <div className=\"osc-poll-question-buttons\">\n              {submitButtonHTML}\n              {showResultButtonHTML}\n            </div>\n          </div>\n        );\n      }\n\n      let resultHTML = null;\n      if ( poll && ( poll.userVote || self.state.showResult ) ) {\n\n        let showQuestionButtonHTML = null;\n        if (!self.state.showQuestion && !(poll && poll.choices && !poll.userVote)) showQuestionButtonHTML = (<a className=\"osc-show-question-button\" onClick={ e => this.setShowQuestion() }>Stem aanpassen</a>);\n\n        let totalVotesHTML = null;\n        if (poll.voteCount && poll.voteCount.total) {\n          let xx = poll.voteCount.total == 1 ? 'stem' : 'stemmen';\n          totalVotesHTML = <div>Totaal {poll.voteCount.total} {xx}<br/><br/></div>\n        }\n\n        resultHTML = (\n          <ul className=\"osc-choices\">\n            {Object.keys(poll.choices).sort().map(key => {\n              let choice = poll.choices[key];\n              let titleHTML = null;\n              if (self.config.allowChoiceTitles && choice.title) titleHTML = (<h4>{choice.title}</h4>);\n              let descriptionHTML = null;\n              if (choice.description) descriptionHTML = (<div>{choice.description}</div>);\n              let percentageHTML = null;\n              if (self.config.withPercentage) {\n                percentageHTML = <div className=\"osc-percentage\">{choice.votesPrc}%</div>\n              }\n              let scoreHTML = (\n                <div className=\"osc-choice-default\">\n                  {titleHTML}\n                  {descriptionHTML}\n                  <div className={`osc-choice-bar${self.config.withPercentage ? ' osc-with-percentage' : ''}`}>\n                    <div className=\"osc-choice-bar-mask\"></div>\n                    <div className=\"osc-choice-bar-progress\" style={{ width: ( choice.votesPrc || 0 ) + '%' }}></div>\n                  </div>\n                  { percentageHTML }\n                </div>\n              );\n              return (\n                <li className=\"osc-choice\" key={`osc-key-${key}`}>\n                  {scoreHTML}\n                </li>\n              );\n            })}\n            {totalVotesHTML}\n            {showQuestionButtonHTML}\n          </ul>\n        );\n      }\n\n      let editButtonsHTML = null;\n      if (self.state.poll && self.state.poll.can && self.state.poll.can.edit) {\n        editButtonsHTML =\n          <div className=\"osc-editbuttons\">\n            <button className=\"osc-editbutton osc-edit\" onClick={event => self.showEditForm()}>Bewerk poll</button>\n            <button className=\"osc-editbutton osc-delete\" onClick={event => { if (confirm('Weet u het zeker')) self.deletePoll() }}>Verwijder poll</button>\n          </div>\n      }\n\n      let voteSucceededHTML = null;\n      if (self.state.showVoteSucceeded) {\n        voteSucceededHTML = <div className=\"osc-vote-succeeded\">Uw stem is opgeslagen</div>\n      }\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          {editButtonsHTML}\n          {voteSucceededHTML}\n          <h4>{poll.question}</h4>\n          {questionHTML}\n          {resultHTML}\n          <br/><br/>\n        </div>\n      );\n\n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentPoll from './component/poll.jsx';\n\n// render elements\nOpenStadComponentPoll.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentPoll attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentPoll as default,\n  OpenStadComponentPoll as Poll,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactionForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    \n    self.state = {\n      description: self.config.description || '',\n      isValid: false,\n      isBusy: false,\n    };\n\n  }\n\n  handleOnChange(data) {\n    data = data || {};\n    if (data.description) data.isValid = this.description.isValid();\n    this.setState(data);\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let user = this.props.user || {};\n    return OpenStadComponentLibs.user.hasRole(user, requiredUserRole)\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let isValid = self.description.validate({ showWarning: true });\n      if (!isValid) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument${   self.config.argumentId ? `/${  self.config.argumentId}` : ''}`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = self.config.argumentId ? 'PUT' : 'POST';\n\n      let body = {\n        parentId: self.config.parentId,\n        sentiment: self.config.sentiment,\n        description: self.state.description,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n\n          self.setState({ description: '', isBusy: false, isValid: false }, () => {\n\n            self.description.handleOnChange({ value: '' });\n\n            if (self.config.argumentId) {\n\t\t          let event = new CustomEvent('osc-reaction-edited', { detail: json });\n\t\t          document.dispatchEvent(event);\n            } else {\n\t\t          let event = new CustomEvent('osc-new-reaction-stored', { detail: json });\n\t\t          document.dispatchEvent(event);\n            }\n          });\n\n\n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n\n    let config = {\n      descriptionMinLength: self.config.descriptionMinLength || 30,\n      descriptionMaxLength: self.config.descriptionMaxLength || 500,\n    };\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue${ !self.state.isValid || self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <OpenStadComponentForms.InputWithCounter disabled={this.canSubmit() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ data => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        {submitButtonHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reaction-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n    };\n\n    self.config = Object.assign(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      isMenuActive: false,\n      isReplyFromActive: false,\n      editMode: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true });\n  }\n\n  toggleReplyForm() {\n    this.setState({ isReplyFromActive: !this.state.isReplyFromActive });\n  }\n\n  toggleEditForm(what) {\n    this.setState({ editMode: !this.state.editMode });\n  }\n\n  canEdit() {\n    return this.props.data.can.edit;\n  }\n\n  canDelete() {\n    return this.props.data.can.delete;\n  }\n\n  canLike() {\n    if (this.config.isClosed) return false;\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    return (( requiredUserRole == 'anonymous' && userRole ) ||\n            ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n            ( requiredUserRole == 'admin' && userRole == 'admin'));\n  }\n\n  canReply() {\n    return this.props.data.can.reply;\n  }\n\n  submitDelete() {\n\n    let self = this;\n\n    if (!self.canDelete()) return alert('U kunt deze reactie niet verwijderen');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id}`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'DELETE',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        self.setState({ isDeleted: true });\n\n\t\t    let event = new CustomEvent('osc-reaction-deleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  submitLike() {\n\n    let self = this;\n\n    if (!self.canLike()) return alert('U kunt deze reactie niet liken');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id  }/vote`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        // console.log({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n        self.setState({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.setState({ isMenuActive: false, isReplyFromActive: false });\n  }\n\n  onReactionEdited(reaction) {\n    if (reaction.id == this.props.data.id) {\n      this.setState({ editMode: false, isMenuActive: false });\n    }\n  }\n\n  render() {\n\n    let self = this;\n    let data = self.props.data || { can: {} };\n\n    if (data.isDeleted) return null;\n\n    console.log('--------------------');\n    console.log(data.user);\n    let isAdmin = OpenStadComponentLibs.user.hasRole(data.user, 'editor') ? 'osc-is-admin' : '';\n    let metadataHTML = <div className={`osc-reaction-user ${isAdmin}`}>{data.user.nickName || data.user.fullName || `${data.user.firstName } ${  data.user.lastName}`}</div>\n\n    let menuHTML = null;\n    if ( self.canEdit() && self.canDelete() ) {\n      menuHTML = (\n        <div className={ `osc-reaction-menu${   self.state.isMenuActive ? ' osc-reaction-hamburger-active' : ''}` } onClick={ () => { self.showMenu(); }}>\n          <a className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete(); } }/>\n          <a className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.toggleEditForm() }/>\n        </div>\n      );\n    }\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{data.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: data.description, argumentId: data.id }} user={self.state.user} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    let likeButtonHTML = null;\n    if (!data.parentId) {\n      likeButtonHTML = (\n\t\t\t  <a className={ `osc-reaction-like-button${ ( typeof self.state.hasUserVoted != 'undefined' ? self.state.hasUserVoted : data.hasUserVoted ) ? ' osc-reaction-like-button-hasvoted' : ''}` } onClick={ () => self.submitLike() }>\n\t\t\t\t  Mee eens (<span>{( typeof self.state.yes != 'undefined' ? self.state.yes : data.yes ) | 0}</span>)\n        </a>\n      );\n    }\n\n    let replyButtonHTML = null;\n    let replyFormHTML = null;\n    if (self.canReply() && !self.config.isClosed) {\n      replyButtonHTML = (<a onClick={ () => self.toggleReplyForm() } className=\"osc-reply-button\">Reageren</a>);\n      if (self.state.isReplyFromActive) {\n        let config = { ...self.config, parentId: data.id };\n        config.formIntro = '';\n        replyFormHTML = (\n\t\t\t    <div id={`osc-reaction-${data.id}`} className=\"osc-reply\">\n            <OpenStadComponentReactionForm config={config} user={self.state.user} ref={el => (self.editForm = el)}/>\n          </div>\n        );\n      }\n    }\n\n    let repliesHTML = null;\n    if (data.reactions && data.reactions.length) {\n      repliesHTML = (\n        <ul className=\"osc-reactions-list\">\n          {data.reactions.map((reaction) => {\n\n            let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n            return (\n              <li key={key}>\n                <OpenStadComponentReaction config={self.config} className=\"osc-reply\" user={self.state.user} data={reaction}/>\n              </li>\n            );\n\n          })}\n        </ul>\n      );\n    }\n\n    return (\n      <div>\n\n\t\t\t  <div id={`osc-reaction-${data.id}`} className={ self.props.className || 'osc-reaction' }>\n\n          {menuHTML}\n\n          {metadataHTML}\n\t\t\t\t  <div className=\"osc-reaction-date\">{data.createDateHumanized}</div>\n          {descriptionHTML}\n\n          {likeButtonHTML}\n\t\t\t    {replyButtonHTML}\n\n\t\t    </div>\n\n\t\t\t  {replyFormHTML}\n        {repliesHTML}\n\n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\nimport OpenStadComponentReaction from './reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reactions-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      scrollToNewReaction: true,\n      isClosed: false,\n      closedText: 'De reactiemogelijkheid is gesloten',\n      sentiment: undefined,\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n\n    self.state = {\n      user: self.config.user,\n      reactions: [],\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          self.fetchData();\n        });\n      });\n    } else {\n      self.fetchData();\n    }\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n    this.deletedListener = document.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.deletedListener);\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument?sentiment=${  self.config.sentiment  }&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.reactions = json;\n        state.reactions.sort((a, b) => {\n          return a.createdAt < b.createdAt;\n        });\n        // console.log(state.reactions);\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.fetchData(() => {\n      if (this.config.scrollToNewReaction) {\n        let element = document.getElementById(`osc-reaction-${  reaction.id}`);\n        if ( element ) document.getElementById(`osc-reaction-${  reaction.id}`).scrollIntoView();\n      }\n    });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  onReactionDeleted(reaction) {\n    this.fetchData();\n  }\n\n  render() {\n\n    let self = this;\n\n    let reactions =\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n          let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} user={self.state.user} data={{ ...reaction }}/>\n            </li>\n          );\n\n        })}\n      </ul>;\n\n    let title = self.config.title ? <h3>{self.config.title}</h3> : null;\n\n    let reactionFormHTML = <OpenStadComponentReactionForm config={self.config} user={self.state.user}/>;\n    if (self.config.isClosed) {\n      if (self.config.closedText) {\n        reactionFormHTML = <div className=\"osc-closed-text\">{self.config.closedText}</div>\n      } else {\n        reactionFormHTML = null\n      }\n    }\n\n    return (\n      <div id={this.id} className={self.props.className || 'osc-reactions'} ref={(el) => { this.instance = el; }} >\n\n        {title}\n\n        {reactionFormHTML}\n\n        {reactions}\n        <br/><br/>\n\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentReactions from './component/reactions.jsx';\n\n// render elements\nOpenStadComponentReactions.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentReactions as default,\n  OpenStadComponentReactions as Reactions,\n};\n\n","/* (ignored) */","(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack://OpenStadComponents/webpack/bootstrap","webpack://OpenStadComponents/./node_modules/custom-event-polyfill/polyfill.js","webpack://OpenStadComponents/./node_modules/es6-promise-promise/index.js","webpack://OpenStadComponents/./node_modules/es6-promise/dist/es6-promise.js","webpack://OpenStadComponents/./node_modules/merge/merge.js","webpack://OpenStadComponents/./node_modules/process/browser.js","webpack://OpenStadComponents/./node_modules/setimmediate/setImmediate.js","webpack://OpenStadComponents/./node_modules/timers-browserify/main.js","webpack://OpenStadComponents/(webpack)/buildin/global.js","webpack://OpenStadComponents/(webpack)/buildin/module.js","webpack://OpenStadComponents/./node_modules/whatwg-fetch/fetch.js","webpack://OpenStadComponents/./src/component/index.jsx","webpack://OpenStadComponents/./src/forms/component/default-input.jsx","webpack://OpenStadComponents/./src/forms/component/form-field.jsx","webpack://OpenStadComponents/./src/forms/component/form.jsx","webpack://OpenStadComponents/./src/forms/component/hidden.jsx","webpack://OpenStadComponents/./src/forms/component/htmlarea.jsx","webpack://OpenStadComponents/./src/forms/component/image-upload.jsx","webpack://OpenStadComponents/./src/forms/component/input-with-counter.jsx","webpack://OpenStadComponents/./src/forms/component/postcode.jsx","webpack://OpenStadComponents/./src/forms/component/radios.jsx","webpack://OpenStadComponents/./src/forms/component/select.jsx","webpack://OpenStadComponents/./src/forms/component/slider.jsx","webpack://OpenStadComponents/./src/forms/component/textarea.jsx","webpack://OpenStadComponents/./src/forms/component/textinput.jsx","webpack://OpenStadComponents/./src/forms/css/default.less?b805","webpack://OpenStadComponents/./src/forms/index.jsx","webpack://OpenStadComponents/./src/idea-details/component/idea-details.jsx","webpack://OpenStadComponents/./src/idea-details/component/vote-button.jsx","webpack://OpenStadComponents/./src/idea-details/css/default.less?e694","webpack://OpenStadComponents/./src/idea-details/index.jsx","webpack://OpenStadComponents/./src/idea-image/component/idea-image.jsx","webpack://OpenStadComponents/./src/idea-image/css/default.less?05a6","webpack://OpenStadComponents/./src/idea-image/index.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/filterbar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/idea-form.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-list.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-on-map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-block.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/search.jsx","webpack://OpenStadComponents/./src/ideas-on-map/css/default.less?8653","webpack://OpenStadComponents/./src/ideas-on-map/index.jsx","webpack://OpenStadComponents/./src/libs/css/default.less","webpack://OpenStadComponents/./src/libs/index.jsx","webpack://OpenStadComponents/./src/libs/lib/api/get-headers.js","webpack://OpenStadComponents/./src/libs/lib/api/index.js","webpack://OpenStadComponents/./src/libs/lib/local-storage.js","webpack://OpenStadComponents/./src/libs/lib/react-template.js","webpack://OpenStadComponents/./src/libs/lib/session-storage.js","webpack://OpenStadComponents/./src/libs/lib/user/get-jwt.js","webpack://OpenStadComponents/./src/libs/lib/user/get-user.js","webpack://OpenStadComponents/./src/libs/lib/user/has-role.js","webpack://OpenStadComponents/./src/libs/lib/user/index.js","webpack://OpenStadComponents/./src/libs/lib/user/logout.js","webpack://OpenStadComponents/./src/nlmap/component/map.jsx","webpack://OpenStadComponents/./src/nlmap/css/default.less?5507","webpack://OpenStadComponents/./src/nlmap/index.jsx","webpack://OpenStadComponents/./src/nlmap/lib/amaps-cluster-icon.js","webpack://OpenStadComponents/./src/poll/component/poll-form.jsx","webpack://OpenStadComponents/./src/poll/component/poll.jsx","webpack://OpenStadComponents/./src/poll/css/default.less?c43d","webpack://OpenStadComponents/./src/poll/index.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction-form.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction.jsx","webpack://OpenStadComponents/./src/reactions/component/reactions.jsx","webpack://OpenStadComponents/./src/reactions/css/default.less?29e6","webpack://OpenStadComponents/./src/reactions/index.jsx","webpack://OpenStadComponents/vertx (ignored)","webpack://OpenStadComponents/external \"React\"","webpack://OpenStadComponents/external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentDefaultInput","defaultConfig","choices","placeholder","disabled","required","merge","recursive","state","error","onChange","showErrors","isValid","setState","data","validate","OpenStadComponentFormField","inputType","validateAction","changeAction","title","description","toLowerCase","undefined","handleOnChange","bind","input","titleHTML","descriptionHTML","__html","fieldHTML","el","instance","OpenStadComponentForm","intro","fields","values","firstInvalid","field","scrollIntoView","behavior","introHTML","fieldsHTML","length","map","fieldConfig","i","OpenStadComponentSelect","e","OpenStadComponentHTMLArea","onKeyUpx","filterHTML","innerHTML","replace","command","args","preventDefault","stopPropagation","document","execCommand","onKeyUp","onFocus","onBlur","executeAction","prompt","EditButton","cmd","evt","arg","allowMultiple","imageserver","process","fetch","uploadedFiles","image","push","source","url","options","type","file","metadata","poster","_loadedFiles","files","loadNextFile","element","createElement","src","async","onload","body","appendChild","fileUploaderInit","imageuploader","getFiles","images","serverId","containerElement","querySelector","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","filePondSettings","acceptedFileTypes","allowFileSizeValidation","allowReorder","styleItemPanelAspectRatio","maxFileSize","maxFiles","allowBrowse","server","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","addEventListener","detail","console","log","fileUploaderUpdateCurrentInput","formfields","addFiles","errorHTML","FormfieldInputWithCounter","minLength","maxLength","focused","valueLength","useKey","onInputFocus","onInputBlur","onInputKeyUp","warning","showWarning","counter","inputHTML","OpenStadComponentPostcode","match","OpenStadComponentRadios","choice","dangerousDescription","Slider","touched","handleChange","event","target","min","max","range","progInRange","step","className","transform","calcProgress","doTouch","OpenStadComponentText","Form","FormField","Hidden","ImageUpload","InputWithCounter","Postcode","Radios","Select","Text","Textarea","IdeasDetails","siteId","ideaId","user","api","headers","isUserLoggedIn","argument","isActive","poll","canAddPolls","showVoteButtons","showLabels","labels","types","allowMultipleImages","shareChannelsSelection","metaDataTemplate","idea","showPollForm","reactionAddedListener","onReactionStored","reactionEditedListener","reactionDeletedListener","onReactionDeleted","pollCreatedListener","onPollCreated","pollDeletedListener","onPollDeleted","fetchData","removeEventListener","editIdeaLink","location","href","CustomEvent","dispatchEvent","isNew","argCount","hidePollForm","OpenStadComponentLibs","getHeaders","then","response","ok","Error","json","localStorage","get","hash","set","role","method","afterDeleteIdeaLink","labelHTML","typeId","extraData","typeDef","find","def","labelText","label","backgroundColor","textColor","color","pollHTML","addPollButtonHTML","can","edit","dispatchAddPollClick","voteButtonsHTML","text","opinion","yes","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","reactionsCountHTML","reactionsHTML","loginUrl","shareButtonsHTML","facebookButtonHTML","includes","encodeURIComponent","twitterButtonHTML","mailButtonHTML","eval","titleField","whatsappButtonHTML","authorHTML","nickName","fullName","firstName","lastName","linkToUserPageUrl","metaDataHTML","createDateHumanized","theme","reactTemplate","html","username","summary","VoteButton","busy","votePending","doVote","remove","stringify","change","userVote","alert","message","value000","value00","value0","OpenStadComponentIdeaDetails","renderElement","elem","ReactDOM","render","OpenStadComponentIdeaImage","currentImageIndex","width","offsetWidth","which","posterImage","backgroundImage","thumb","height","left","zIndex","setCurrentImageIndex","Filterbar","typesFilterLabel","areas","search","searchIn","selectedType","selectedArea","mobileActiveSelector","hideMobileActiveSelector","area","handleTypeChange","handleAreaChange","showMobileActiveSelector","areasHTML","areasButtonHTML","toggleMobileActiveSelector","areaSelector","searchHTML","doSearchFunction","ideaName","typeSelector","resetTypeAndArea","resetButton","IdeasForm","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","descriptionMinLength","descriptionMaxLength","showFormErrorsWarning","isBusy","summaryField","descriptionField","imageField","hasRole","typeField","auth","createableBy","address","coordinates","lat","lng","dispatchUpdateEditIdea","style","display","formValues","form","getValues","validateIdea","formErrorsWarningHTML","formHTML","submitIdea","submitButton","IdeasList","sort","sortOptions","showSortButton","defaultSortOrder","onIdeaClick","currentSortOrder","ideas","currentMouseOverIdea","hideSortButton","sortOrder","center","a","b","ranking","Date","createdAt","getTime","_distance","sqrt","pow","slice","updateIdeas","newMouseOverIdeaId","sortSelector","setSortOrder","option","titleHML","ideaTypeValue","entry","listicon","voteCountHTML","argcountHTML","ignoreReactionsForIdeaIds","RegExp","dispatchMouseOverListItem","dispatchMouseOutListItem","OpenStadComponentIdeasOnMap","displayType","displayWidth","displayHeight","canSelectLocation","canAddNewIdeas","formIntro","requiredUserRole","closeReactionsForIdeaIds","content","mobilePreviewLoggedInHTML","mobilePreviewNotLoggedInHTML","doSearch","mapicon","buttonicon","visibleIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","hideIdeaDetails","showIdeaDetails","on","onChangeMapBoundaries","onMapClick","onMarkerClick","onClusterClick","onChangeTypeFilter","onUpdateSelectedIdea","onCloseSelectedLocation","onUpdateEditIdea","onSelectedIdeaClick","onNewIdeaClick","onClickMobileSwitcher","onMouseOverListItem","onMouseOutListItem","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","showIdeaSelected","markers","marker","removeMarker","filter","addIdea","setBoundsAndCenter","startWithListOpenOnMobile","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","newIdea","split","val","substring","decodeURIComponent","showIdeaForm","infoblock","hideMarkers","exception","next","formUrl","searchValue","callback","searchValueLc","searchResult","locations","titlelLc","summaryLc","onClick","setImmediate","docs","found","weergavenaam","onClickAddress","centroide_ll","panTo","L","LatLng","latlng","getVisibleIdeas","setSelectedLocation","ideaform","handleLocationChange","getPointInfo","_display","isPointInPolygon","polygon","fadeMarkers","x","unfadeAllMarkers","forceSelectLocation","updateFading","scrollTo","setTimeout","setFilter","infoHTML","mobilePopupHTML","isClosed","typeLabel","ideadetails","onClickBackToOverview","hideIdeaForm","contentHTML","addButton","loginButton","loginLink","newIdeaButton","filterbar","divStyle","simpleHTML","buttonHTML","linkToCompleteUrl","position","top","right","bottom","zoomControl","InfoBlock","noSelectionLoggedInHTML","noSelectionNotLoggedInHTML","selectionActiveLoggedInHTML","selectionInactiveLoggedInHTML","selectionActiveNotLoggedInHTML","selectionInactiveNotLoggedInHTML","showNoSelectionOnMobile","noSelectionHTML","eventTarget","list","newIdeaHTML","selectedIdeaHTML","titleAddition","mobileSwitcherHTML","mobileTitle","buttonBgHTML","dispatchNewIdeaClick","buttonLabel","dispatchCloseSelectedLocation","dispatchSelectedIdeaClick","dispatchUpdateSelectedIdea","defaultBlockHTML","dispatchClickMobileSwitcher","dispatchOnIdeaClick","Map","clustering","maxClusterRadius","showCoverageOnHover","autoZoomAndCenter","onMapClusterAnimationEnd","typename","icondef","icon","anchor","divIcon","iconSize","point","iconAnchor","addMarker","visible","getBounds","contains","getLatLng","selectedLocationMarker","updateMarker","doNotCluster","points","keepCenter","showMarker","_latlng","hideMarker","isFaded","visibleParent","markerClusterGroup","getVisibleParent","ignore","getAllChildMarkers","m","setOpacity","OpenStadComponentNLMap","Search","assign","doSearchx","updateSearchResult","showSuggestions","updateSearchValue","inputfield","focus","suggestionsHTML","suggestionDividerHTML","addressSuggestionsHTML","result","$0","onSuggestionClick","ideasSuggestionsHTML","suggestions","hideSuggestions","handleButtonClick","sessionStorage","jwt","getJWT","OpenStadComponentAPI","oscLocalStorage","getItem","setItem","removeItem","arguments","matches","regEx","exec","oscSessionStorage","roles","admin","moderator","editor","member","anonymous","all","owner","requiredRole","userRole","OpenStadComponentUser","getUser","logout","latitude","longitude","zoom","zoomposition","disableDefaultUI","variant","createMap","mapIsReady","rel","amaps","nlmaps","removeControl","iconCreateFunction","amapsCreateClusterIcon","onClusterAnimationEnd","addLayer","createCutoutPolygon","centerOn","editorMarker","markerData","index","indexOf","splice","removeLayer","newData","newLatLng","setLatLng","cluster","count","getChildCount","bounds","getCenter","smallest","y","sin","cos","bearing","atan2","PI","concat","delta1","delta2","outerBox","polygonStyle","Array","isArray","poly","latLngBounds","fitBounds","addTo","filterFuntion","filterFunction","applyFilter","inside","j","xi","yi","xj","yj","intersect","bagApiUrl1","bagApiUrl2","results","landelijk_id","colors","total","tmp","soFar","myColor","perc","angle","OpenStadComponentPollForm","questionMinLength","questionMaxLength","allowChoiceTitles","pollId","question","messages","questionInput","titleInput","descriptionInput","validatedResult","canSubmit","onFinished","submitButtonHTML","submitForm","titleInputHTML","addChoice","OpenStadComponentPoll","withPercentage","allowShowResultsIfNotVoted","hideEditForm","selectedChoice","showResult","showQuestion","editMode","showVoteSucceeded","parseVoteCount","voteCount","votesAbs","votesPrc","reaction","onSubmit","questionHTML","choiceHTML","submitVote","showResultButtonHTML","setShowResult","selectChoice","resultHTML","showQuestionButtonHTML","setShowQuestion","totalVotesHTML","xx","percentageHTML","scoreHTML","showEditForm","deletePoll","voteSucceededHTML","OpenStadComponentReactionForm","argumentId","parentId","sentiment","OpenStadComponentReaction","isMenuActive","isReplyFromActive","storedListener","onNewReactionStored","editedListener","onReactionEdited","what","reply","canDelete","isDeleted","canLike","hasUserVoted","isAdmin","metadataHTML","menuHTML","canEdit","showMenu","submitDelete","toggleEditForm","editForm","likeButtonHTML","submitLike","replyButtonHTML","replyFormHTML","canReply","toggleReplyForm","repliesHTML","reactions","OpenStadComponentReactions","scrollToNewReaction","closedText","deletedListener","getElementById","reactionFormHTML"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,CAAC;;;;;;;;;;;;ACpDD,iBAAiB,mBAAO,CAAC,mEAAa;;;;;;;;;;;;ACAtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAA4D;AAChE,IAAI,SAC+B;AACnC,CAAC,qBAAqB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAC,CAAC,cAAO;AACzB;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,yCAAyC,UAAc;AACxD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uCAAuC;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD,oC;;;;;;;;;;;;ACjoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;;AAE9B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;;AAEZ;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,CAAC,EAAE,KAA0B,oE;;;;;;;;;;;;AChL7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;ACzLD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,iEAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA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","file":"ideas-on-map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ideas-on-map/index.jsx\");\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","module.exports = require('es6-promise').Promise;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   3.3.1\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  return function () {\n    vertxNext(flush);\n  };\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\npolyfill();\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n    self.config = self.config || props.config;\n\n    if (self.config) {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = this;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentDefaultInput extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      choices: [],\n\t\t\tname: '',\n      placeholder: '',\n      disabled: false,\n      required: false,\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      value: props.value,\n      error: null,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate({ showErrors }) {\n\t\tlet isValid = this.config.required ? !!this.state.value : true;\n    let error = '';\n    if (!isValid && showErrors) error = true;\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n\thandleOnChange(data) {\n\t\tlet self = this;\n    data = data || {};\n\t\tself.setState(data, () => {\n      self.validate({});\n    })\n\t\tif (typeof self.onChange == 'function') {\n\t\t\tself.onChange({ name: self.config.name, value: data.value });\n\t\t}\n\t}\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\nimport OpenStadComponentHidden from './hidden.jsx';\nimport OpenStadComponentImageUpload from './image-upload.jsx';\nimport OpenStadComponentInputWithCounter from './input-with-counter.jsx';\nimport OpenStadComponentRadios from './radios.jsx';\nimport OpenStadComponentPostcode from './postcode.jsx';\nimport OpenStadComponentSelect from './select.jsx';\nimport OpenStadComponentText from './textinput.jsx';\nimport OpenStadComponentTextArea from './textarea.jsx';\n\nexport default class OpenStadComponentFormField extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      inputType: null,\n\n      validateAction: null,\n      changeAction: null,\n      required: false,\n\n      title: null,\n      description: null,\n      choices: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.name = self.config.name || self.config.title.toLowerCase();\n\n    self.state = {\n      value: props.value || undefined,\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(self);\n\n    self.onChange = props.onChange;\n\n  }\n  \n\tvalidate({ showErrors }) {\n    return this.input ? this.input.validate({ showErrors }) : true;\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"form field change\", data);\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h3 className=\"osc-form-title\">{self.config.title}</h3>\n    }\n\n    let descriptionHTML = null;\n    if (self.config.description) {\n      descriptionHTML = <div className=\"osc-form-description\" dangerouslySetInnerHTML={{ __html: self.config.description }}></div>\n    }\n\n    let fieldHTML = null;\n\n    switch (self.config.inputType) {\n\n      case 'hidden':\n        fieldHTML = <OpenStadComponentHidden config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'html-with-counter':\n      case 'htmlarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'htmlarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'image-upload':\n        fieldHTML = <OpenStadComponentImageUpload config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'input-with-counter':\n      case 'text-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ inputType: 'input', ...self.config }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'postcode':\n        fieldHTML = <OpenStadComponentPostcode config={self.config} onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'radios':\n        fieldHTML = <OpenStadComponentRadios config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'select':\n      case 'multiple-choice':\n        fieldHTML = <OpenStadComponentSelect config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'text':\n        fieldHTML = <OpenStadComponentText config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea':\n        fieldHTML = <OpenStadComponentTextArea config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'textarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      default:\n    }\n\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-form-field\">\n\t\t\t\t{titleHTML}\n\t\t\t\t{descriptionHTML}\n\t\t\t\t{fieldHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentFormField from './form-field.jsx';\n\nexport default class OpenStadComponentForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      // validateAction: null,\n      // submitAction: null,\n      title: null,\n      intro: null,\n      fields: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      values: props.values|| {},\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(this);\n\n    self.fields = [];\n\n  }\n  \n\tgetValues() {\n    return this.state.values;\n\t}\n\n\tvalidate({ showErrors }) {\n    let self= this;\n    let isValid = true;\n    let firstInvalid = null\n    self.fields.forEach((field) => {\n      if (!field.validate({ showErrors })) {\n        isValid = false;\n        if (!firstInvalid) firstInvalid = field;\n      }\n    });\n\n    if (firstInvalid && firstInvalid.instance && firstInvalid.instance.scrollIntoView) firstInvalid.instance.scrollIntoView({behavior: 'smooth'});\n    // console.log(isValid);\n    return isValid;    \n\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"formchange\", data);\n    let self = this;\n    let values = { ...this.state.values };\n    values[data.name] = data.value;\n\t\tthis.setState({ values });\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h2 className=\"osc-form-title\">{self.config.title}</h2>\n    }\n\n    let introHTML = null;\n    if (self.config.intro) {\n      introHTML = <div className=\"osc-form-intro\" dangerouslySetInnerHTML={{ __html: self.config.intro }}></div>\n    }\n\n    let fieldsHTML = null;\n    if (self.config.fields && self.config.fields.length) {\n      fieldsHTML =\n        <div className=\"osc-form-fields\">\n          { self.config.fields.map((fieldConfig, i) => {\n            return <OpenStadComponentFormField config={fieldConfig} onChange={self.handleOnChange} ref={el => (self.input = el)} key={`osc-form-field-${i}`}  ref={el => { self.fields[i] = el; }}/>\n          })}\n        </div>\n    }\n\n    return (\n\t\t\t<div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)}>\n\t\t\t\t{titleHTML}\n\t\t\t\t{introHTML}\n\t\t\t\t{fieldsHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n    \n    return (\n\t\t\t<input type=\"hidden\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// TODO: it is probably not ok to write your own html editor, but after intergrating ckeditor or react-rte the build was (more than) twice as large; a bettter solution must be possible\n\n'use strict';\n\nexport default class OpenStadComponentHTMLArea extends React.Component  {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.props.value,\n\t  };\n\n    this.onKeyUpx = this.onKeyUpx.bind(this);\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let value = this.props.value;\n    value = this.filterHTML(value);\n    this.input.innerHTML = value;\n  }\n\n  filterHTML(value) {\n    value = value.replace(/<(\\/?\\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\\s*\\/?)>/g, \"[[[$1]]]\");\n    value = value.replace(/<[^>]+>/g, \"\");\n    value = value.replace(/\\[\\[\\[([^\\]]+)\\]\\]\\]/g, \"<$1>\");\n    return value;\n  }\n\n  executeAction(e, command, args) {\n    e.preventDefault()\n    e.stopPropagation();\n    document.execCommand(command,false,args);\n    this.onKeyUp();\n  }\n  \n  onFocus(e) {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  onBlur(e) {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n    if (this.props.onChange) {\n      this.props.onChange({ value: this.state.value });\n    }\n  }\n\n  onKeyUpx() {\n    let value = this.input.innerHTML;\n    value = this.filterHTML(value);\n    this.setState({ value })\n    if (this.props.onKeyUp) {\n      this.props.onKeyUp(value);\n    }\n  }\n  \n  render () {\n    return (\n      <div className=\"osc-html-editor\">\n        <div className=\"osc-html-editor-buttons\">\n          <div className=\"osc-html-editor-button osc-html-editor-button-bold\" onMouseDown={e => this.executeAction(e, 'bold')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-italic\" onMouseDown={e => this.executeAction(e, 'italic')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-insertunorderedlist\" onMouseDown={e => this.executeAction(e, 'insertunorderedlist')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-createlink\" onMouseDown={e => this.executeAction(e, 'createlink', prompt('Lank naar','http://'))}>&nbsp;</div>\n        </div>\n        <div className=\"osc-html-editor-content\" contentEditable={true}\n             onFocus={ e => this.onFocus(e)}\n             onBlur={ e => this.onBlur(e)}\n             onKeyUp={ e => this.onKeyUpx()}\n             // dangerouslySetInnerHTML={{ __html: this.state.value }}\n             ref={el => (this.input = el)}\n        />\n      </div>\n    );\n  }\n\n}\n\nfunction EditButton(props) {\n  return (\n    <button\n      key={props.cmd}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      {props.name || props.cmd}\n    </button>\n  );\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      allowMultiple: false,\n\t\t\timageserver: {\n\t\t\t\tprocess: '',\n\t\t\t\tfetch: ''\n\t\t\t},\n    };\n\t\tthis.config = merge.recursive(defaultConfig, this.props.config, this.config || {});\n\n    var uploadedFiles = [];\n    let value = props.value || [];\n    value.forEach((image) => {\n      uploadedFiles.push({\n        source: { url: image },\n        options : {\n          type: 'local',\n          // mock file information\n          file: {\n            name: image,\n            //\t\t size: 3001025,\n            //\t type: 'image/png'\n          },\n          metadata: {\n            poster: image,\n          }\n        }\n      })\n    });\n\n    this.state = {\n      uploadedFiles: uploadedFiles,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond files\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\n  }\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar containerElement = document.querySelector('.osc-image-upload-container');\n\t\tif (containerElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\t// FilePond.setOptions({\n\t\t\t//   server: 'https://image-server2.openstadsdeel.nl/image/?access_token=MHhfb5U0m8vquAR81p',\n\t\t\t// });\n      \n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n        allowMultiple: this.config.allowMultiple,\n        allowReorder: true,\n        styleItemPanelAspectRatio: 1,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 5,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: this.state.uploadedFiles,\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: this.config.imageserver.process,\n\t\t\t\t\tfetch: this.config.imageserver.fetch,\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(containerElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = typeof image.serverId == 'string' ? JSON.parse(image.serverId) : image.serverId;\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.onChange({name: self.config.name, value: self.state.value})\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen afbeelding geupload</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-image-upload-container\">\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n//import CKEditor from '@ckeditor/ckeditor5-react';\n//import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport HTMLArea from './htmlarea.jsx';\n\n'use strict';\n\nexport default class FormfieldInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value && props.value.length || 0,\n\t\t};\n\n    self.key = props.useKey || ( self.id || 'osc-input-with-counter-' ) + parseInt( 10000000 * Math.random );\n\n    this.onChange = props.onChange;\n\n    self.handleOnChange = self.handleOnChange.bind(this)\n    self.onInputFocus = self.onInputFocus.bind(this)\n    self.onInputBlur = self.onInputBlur.bind(this)\n    self.onInputKeyUp = self.onInputKeyUp.bind(this)\n\n  }\n\n\tisValid() {\n\t\tlet state = {};\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `De tekst is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `De tekst is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n  }\n\n\tvalidate() {\n\t\tthis.setState({ showWarning: true })\n\t\treturn this.isValid();\n\t}\n  \n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange({ name: this.config.name, value: data.value });\n\t\t}\n\t}\n\n\tonInputFocus() {\n\t\tlet state = {};\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputBlur() {\n\t\tlet state = {};\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputKeyUp(value) {\n\t\tlet state = {};\n\t\tstate.value = value || this.input.value;\n\t\tlet valueLength = state.value.length;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n        \n      case 'htmlarea':\n        inputHTML = (\n          <HTMLArea\n            value={this.state.value}\n            onChange={self.handleOnChange}\n            onFocus={self.onInputFocus}\n            onBlur={self.onInputBlur}\n            onKeyUp={self.onInputKeyUp}\n          />\n        );\n        // inputHTML = (\n        //   <CKEditor\n        //     editor={ ClassicEditor }\n        //     config={{ toolbar: [ 'h3', 'bold', 'italic', 'link' ] }}\n        //     data={this.state.value}\n        //     onInit={ editor => {\n        //       // TODO: betere selector\n        //       document.querySelector('.ck-content').addEventListener('keyup', function(e) {\n        //         self.onInputKeyUp(e, editor.getData())\n        //       })\n        //     }}\n        //     onChange={( event, editor ) => self.handleOnChange({ value: editor.getData() })}\n        //     onFocus={e => self.onInputFocus(e)}\n        //     onBlur={e => self.onInputBlur(e)}\n        //   />\n        // );\n        break;\n        \n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentPostcode extends OpenStadComponentDefaultInput {\n\n\tvalidate({ showErrors }) {\n    \n\t\tlet isValid = true;\n    let error = '';\n    if (!this.state.value || !this.state.value.match(/^\\s*\\d{4}\\s*[a-zA-Z][a-zA-Z]\\s*$/)) {\n      isValid = false;\n      if (showErrors) error = 'Dit is geen postcode';\n    }\n    if (this.config.required && !this.state.value) {\n      isValid = false;\n      if (showErrors) error = 'Je hebt nog niets ingevuld';\n    }\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n  render() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">{self.state.error}</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentRadios extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-radios\">\n        {self.config.choices.map( choice => {\n          if (choice.dangerousDescription) {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\" dangerouslySetInnerHTML={{ __html: choice.dangerousDescription }}/></div>\n          } else {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\">{choice.dangerousDescription ? null : choice.description || choice.title || choice.value}</div></div>\n          }\n        })}\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  componentDidMount() {\n    // init value\n    let value = this.state.value || ( this.config.choices[0] && this.config.choices[0].value );\n    this.handleOnChange({ value })\n  }\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-select\">\n\t\t\t  <select value={this.state.value || ''} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>\n          {self.config.choices.map( choice => {\n            return <option value={choice.value || ''} key={choice.value}>{choice.description || choice.title || choice.value}</option>\n          })}\n        </select>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import React from \"react\"\n\nclass Slider extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: this.props.value,\n      touched: this.props.touched || false,\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const { value } = event.target\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(value)\n    }\n    \n    this.setState({value, touched: true})\n  }\n\n  doTouch() {\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(50)\n    }\n\n    this.setState({touched: true})\n\n  }\n\n  calcProgress(min, max, value) {\n    const range = max - min\n    const progInRange = value - min\n    return ((progInRange*2)/range)-1\n  }\n\n  render(){\n    let self = this;\n    const { value, touched } = self.state\n    const { min, max, step } = self.props\n    return(\n      <div className={`${self.props.className} osc-slider`}>\n        <div className=\"osc-slider-track-container\">\n          <div className=\"osc-slider-track\"></div>\n          <div className=\"osc-slider-track-progress-container\">\n            <div className=\"osc-slider-track-progress\" style={{ transform: 'scaleX(' + self.calcProgress(min, max, value) + ')' }}></div>\n          </div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-left\"></div>\n          <div className=\"osc-slider-track-dot-start osc-slider-track-dot-center\"></div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-right\"></div>\n        </div>\n        <input type='range' min={min} max={max} step={step} value={value} onClick={() => { if (!touched) self.doTouch(); } } onChange={self.handleChange} className={touched ? 'osc-slider-input-range' : 'osc-slider-input-range osc-slider-untouched'} ref={el => (self.input = el)}/>\n      </div>\n    )\n  }\n}\n\nexport default Slider;\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textarea\">\n\t\t\t  <textarea value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>{this.state.value}</textarea>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentText extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport Form from './component/form.jsx';\nimport FormField from './component/form-field.jsx';\nimport Hidden from './component/hidden.jsx';\nimport ImageUpload from './component/image-upload.jsx';\nimport InputWithCounter from './component/input-with-counter.jsx';\nimport Postcode from './component/postcode.jsx';\nimport Radios from './component/radios.jsx';\nimport Select from './component/select.jsx';\nimport Text from './component/textinput.jsx';\nimport Textarea from './component/textarea.jsx';\nimport Slider from './component/slider.jsx';\nexport default {\n  Form,\n  FormField,\n  Hidden,\n  ImageUpload,\n  InputWithCounter,\n  Postcode,\n  Radios,\n  Select,\n  Text,\n  Textarea,\n  Slider,\n}\n\n// render the base element\n// function renderElement( elem, config ) {\n//   let attributes = elem.attributes;\n//   ReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n// }\n// export {renderElement}\n\n","import merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentPoll from '../../poll/index.jsx';\nimport OpenStadComponentReactions from '../../reactions/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\nexport default class IdeasDetails extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      user: {},\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      argument: {\n        isActive: true,\n      },\n      poll: {\n        canAddPolls: false,\n      },\n      showVoteButtons: true,\n      showLabels: false,\n      labels: {},\n      types: null,\n      allowMultipleImages: false,\n\t\t};\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n    if (!this.config.shareChannelsSelection) this.config.shareChannelsSelection = [\"facebook\",\"twitter\",\"mail\",\"whatsapp\"];\n    if (typeof this.config.metaDataTemplate == 'undefined') this.config.metaDataTemplate = '<span class=\"ocs-gray-text\">Door </span>{username} <span class=\"ocs-gray-text\"> op </span>{createDate} <span class=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span> <span class=\"ocs-gray-text\">Thema: </span>{theme}';\n    \n    this.state = {\n      idea: this.props.idea,\n      ideaId: ( props.idea && props.idea.id ) || this.config.ideaId,\n      showPollForm: false,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.reactionAddedListener = function(event) {\n      console.log('++++++++++++++++++++');\n      self.onReactionStored(event.detail, true);\n    }\n    document.addEventListener('osc-new-reaction-stored', self.reactionAddedListener);\n\n\t\tself.reactionEditedListener = function(event) {\n      console.log('--------------------');\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('osc-reaction-edited', self.reactionEditedListener);\n\n\t\tself.reactionDeletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('osc-reaction-deleted', self.reactionDeletedListener);\n    \n\t\tself.pollCreatedListener = function(event) {\n      self.onPollCreated(event.detail);\n    }\n    document.addEventListener('osc-new-poll-stored', self.pollCreatedListener);\n    \n\t\tself.pollDeletedListener = function(event) {\n      self.onPollDeleted(event.detail);\n    }\n    document.addEventListener('osc-poll-deleted', self.pollDeletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.reactionAddedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.reactionEditedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.reactionDeletedListener);\n\t\tdocument.removeEventListener('osc-new-poll-stored', this.pollCreatedListener);\n\t\tdocument.removeEventListener('osc-poll-deleted', this.pollDeletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n    if ( this.config.editIdeaLink ) {\n      document.location.href = this.config.editIdeaLink;\n    } else {\n\t\t  var event = new window.CustomEvent('osc-edit-idea-click', { detail: this.state.idea });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n\n  showPollForm() {\n    this.setState({\n      showPollForm: true\n    })\n  }\n\n  hidePollForm() {\n    this.setState({\n      showPollForm: false\n    })\n  }\n\n  dispatchAddPollClick(e) {\n    e.stopPropagation();\n    this.showPollForm();\n  }\n  \n  onReactionStored(data, isNew) {\n    if (isNew) this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onPollCreated() {\n    this.hidePollForm();\n    this.fetchData();\n  }\n\n  onPollDeleted() {\n    this.fetchData();\n  }\n  \n  fetchData() {\n\n    let self = this;\n\n    let ideaId = self.state.ideaId || (this.state.idea && this.state.idea.id);\n\n    if (!ideaId) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ ideaId }?includeVoteCount=1&includeArguments=1&includeArgsCount=1&includeUser=1&includeUserVote=1`;\n    if (self.config.poll.canAddPolls) url += '&includePoll=1';\n\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let idea = json;\n        self.setState({ idea }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n        if ( this.config.afterDeleteIdeaLink ) {\n          document.location.href = this.config.afterDeleteIdeaLink;\n        } else {\n\t\t      var event = new window.CustomEvent('osc-idea-deleted', { detail: { ideaId } });\n\t\t      document.dispatchEvent(event);\n        }\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    if (!idea) return null;\n\n    let labelHTML = null;\n\n    if (self.config.showLabels) {\n      // TODO: idea.extraData.type is tmp voor Gerard Dou\n      let typeId = idea.typeId || idea.extraData.type;\n      let typeDef = self.config.types && self.config.types.find(def => def.id == typeId || def.value == typeId);\n      if (typeDef) {\n        let labelText = typeDef.label;\n        let backgroundColor = typeDef.backgroundColor;\n        let textColor = typeDef.textColor;\n        labelHTML = (\n          <div className=\"ocs-idea-label\" style={{ color: textColor, backgroundColor }}>{labelText}</div>\n        );\n      }\n    }\n    \n    let pollHTML = null;\n    let addPollButtonHTML = null;\n    if (self.config.poll.canAddPolls) {\n      if (idea.poll || self.state.showPollForm) {\n        pollHTML = (\n          <div>\n\t\t\t      <div id=\"poll\" className=\"osc-poll-header\"><h3>{self.config.poll.title || 'Poll'}</h3></div>\n            <OpenStadComponentPoll config={{ ...self.config, ...self.config.poll, ideaId: self.state.ideaId }} poll={idea.poll}/>\n          </div>\n        )\n      } else {\n        if (idea.can && idea.can.edit) {\n          addPollButtonHTML = (\n            <div className=\"osc-editbuttons-container\">\n              <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchAddPollClick(event)}>Add poll</button>\n            </div>\n          )\n        }\n      }\n    }\n\n    let voteButtonsHTML = null;\n    if (self.config.showVoteButtons) {\n      voteButtonsHTML = (\n        <div className=\"osc-details-vote-buttons-container\">\n          <h3>Likes</h3>\n          <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={idea.yes}/>\n        </div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( idea.can && idea.can.edit ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (idea && idea.modBreak) {\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {idea.modBreakDateHumanized}<br/>\n          <br/>\n          {idea.modBreak}\n        </div>\n      );\n    }\n\n    let reactionsCountHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsCountHTML = (\n        <div>\n          <h3>Reacties</h3>\n          <a href=\"#reactions\" className=\"osc-no-of-reactions\">{idea.argCount || 0} reacties</a>\n        </div>\n      );\n    }\n\n    let reactionsHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsHTML = (\n        <div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>{self.config.argument.title || 'Reacties'}</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, title: undefined, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: idea.id, loginUrl: self.config.loginUrl, }}/>\n        </div>\n      );\n    }\n\n    let shareButtonsHTML = null;\n    if (self.config.shareChannelsSelection.length) {\n      let facebookButtonHTML = self.config.shareChannelsSelection.includes('facebook') ? (<li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>) : null;\n      let twitterButtonHTML = self.config.shareChannelsSelection.includes('twitter') ? (<li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>) : null;\n      let mailButtonHTML = self.config.shareChannelsSelection.includes('mail') ? (<li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>) : null;\n      let whatsappButtonHTML = self.config.shareChannelsSelection.includes('whatsapp') ? (<li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>) : null;\n\n      shareButtonsHTML = (\n      <div className=\"osc-details-sharebuttons\">\n        <ul>\n          {facebookButtonHTML}\n          {twitterButtonHTML}\n          {mailButtonHTML}\n          {whatsappButtonHTML}\n\t\t\t\t</ul>\n      </div>);\n\n\n    }\n\n    let authorHTML = idea.user.nickName || idea.user.fullName || idea.user.firstName +' ' + idea.user.lastName;\n    if (this.config.linkToUserPageUrl) {\n      authorHTML = <a href={this.config.linkToUserPageUrl + '/' + idea.user.id} className=\"osc-author-link\">{authorHTML}</a>\n    }\n\n    let metaDataHTML = self.config.metaDataTemplate;\n    metaDataHTML = metaDataHTML.replace(/\\{createDate\\}/, idea.createDateHumanized);\n    metaDataHTML = metaDataHTML.replace(/\\{theme\\}/, idea.extraData.theme);\n    metaDataHTML = OpenStadComponentLibs.reactTemplate({ html: metaDataHTML, username: authorHTML })\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-idea-image-container\">\n                <OpenStadComponentImage config={{ allowMultipleImages: self.config.allowMultipleImages }} idea={idea}/>\n              </div>\n\n              {labelHTML}\n\n              {shareButtonsHTML}\n\n              <div className=\"osc-details-stats\">\n                {voteButtonsHTML}\n                {reactionsCountHTML}\n                {editButtonsHTML}\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              {metaDataHTML}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{idea.summary}</p>\n\n            <p className=\"osc-details-description\" dangerouslySetInnerHTML={{ __html: idea.description }}></p>\n\n            {addPollButtonHTML}\n\n\t\t\t    </div>\n\n          {pollHTML}\n\n          {reactionsHTML}\n\n\t\t\t    <div className=\"osc-bottom-spacer\"></div>\n\n        </div>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote();\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    if (e) e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new window.CustomEvent('osc-idea-liked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaDetails from './component/idea-details.jsx';\n\n// render elements\nOpenStadComponentIdeaDetails.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaDetails attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaDetails as default,\n  OpenStadComponentIdeaDetails as IdeaDetails,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentIdeaImage extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      allowMultipleImages: false\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      currentImageIndex: 0,\n      width: 0,\n    };\n        \n  }\n\n  componentDidMount () {\n    let elem = document.querySelector(`#${this.divId}`);\n    this.setState({width: elem.offsetWidth})\n  }\n\n  setCurrentImageIndex (which) {\n    this.setState({currentImageIndex: which})\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.props.idea;\n\n    if (!idea) return null;\n\n    let images = (idea.extraData && idea.extraData.images) || [];\n    let image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[self.state.currentImageIndex]);\n\n    if (self.config.allowMultipleImages && images.length > 1) {\n\n      // multiple\n      return (\n        <div id={self.divId} className=\"osc-idea-multiple-images\">\n        \n          <div className=\"osc-idea-image-spacer\">\n            <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n          </div>\n\n          <div className=\"osc-idea-multiple-images-thumbs\">\n\n            {images.map(( thumb, i ) => {\n              let height = 0.1 * self.state.width;\n              let width = height * 16/9;\n              // let left = ( width *  1.07) * i + ( self.state.width - width *  1.07* images.length ) / 2;\n              let left = ( width *  1.05 ) * i;\n              return (\n                <div className=\"osc-idea-image-thumb-spacer\" key={`osc-idea-image-thumb-${i}`} style={{ left, width, height }}>\n                  <div className=\"osc-idea-image-thumb\" style={thumb ? { backgroundImage: `url(${thumb})`, zIndex: 10-i } : {}} onClick={e => self.setCurrentImageIndex(i)}></div>\n                </div>\n              );\n            })}\n\n          </div>\n\n        </div>\n      );\n\n    } else {\n\n      // singular\n      return (\n        <div id={self.divId} className=\"osc-idea-image-spacer\">\n          <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n        </div>\n      );\n      \n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaImage from './component/idea-image.jsx';\n\n// render elements\nOpenStadComponentIdeaImage.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaImage attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaImage as default,\n  OpenStadComponentIdeaImage as IdeaImage,\n};\n\n","import merge from 'merge';\nimport React from 'react';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      types: ( props.config && props.config.types ) || [],\n      typesFilterLabel: 'Alle thema\\'s',\n      areas: ( props.config && props.config.areas ) || [],\n      search: {},\n\t\t};\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    this.config.searchIn = typeof props.config.search.searchIn == 'object' && props.config.search.searchIn || ['ideas', 'addresses'];\n\n    this.state = {\n      selectedType: undefined,\n      types: this.config.types,\n      typesFilterLabel: this.config.typesFilterLabel,\n      selectedArea: undefined,\n      areas: this.config.areas,\n      mobileActiveSelector: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleTypeChange(value) {\n\n    this.setState({ selectedType: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  setAreaValue(value) {\n    this.setState({ selectedArea: value });\n  }\n\n  handleAreaChange(value) {\n\n    this.setState({ selectedArea: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('areaFilterUpdate', { detail: { value: this.state.areas.find(area => value == area.value) } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  resetTypeAndArea() {\n    this.handleTypeChange(0)\n    this.handleAreaChange(0)\n    this.hideMobileActiveSelector()\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let areasHTML = null;\n    let areasButtonHTML = null;\n    // TODO: niet state maar config\n    if (self.state.areas && self.state.areas.length) {\n      areasButtonHTML = (\n        <div className=\"osc-area-selector-button\" onClick={() => self.toggleMobileActiveSelector('area')}></div>\n      );\n      areasHTML = (\n          <div className={`osc-area-selector-container${self.state.mobileActiveSelector == 'area' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedArea} onChange={() => self.handleAreaChange( self.areaSelector.value )} className=\"osc-default-select osc-margin-right osc-area-selector\" ref={el => (self.areaSelector = el)}>\n              <option value=\"0\">Alle gebieden</option>;\n              { self.state.areas.map((area, i) => {\n                return <option key={'area-option-' + i}>{ area.name }</option>;\n              })}\n            </select>\n          </div>\n      );\n    }\n\n    let searchHTML = null;\n    if ( this.config.searchIn && this.config.searchIn.length && this.config.doSearchFunction) {\n      searchHTML = (\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t    <Search config={{ searchIn: this.config.search.searchIn, placeholder: this.config.search.placeholder, doSearchFunction: this.config.doSearchFunction, ideaName: this.config.ideaName }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>\n      );\n    }\n\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-filterbar'} ref={el => (self.instance = el)}>\n\n        {searchHTML}\n        \n        <div className=\"osc-selectors-container osc-align-right-container\">\n\n          <div className={`osc-type-selector-button${ self.state.selectedType && self.state.selectedType != '0'  ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('type')}></div>\n          <div className={`osc-type-selector-container${self.state.mobileActiveSelector == 'type' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedType} onChange={() => self.handleTypeChange( self.typeSelector.value )} className=\"osc-default-select osc-margin-right osc-type-selector\" ref={el => (self.typeSelector = el)}>\n              <option value=\"0\">{self.state.typesFilterLabel}</option>;\n              { self.state.types.map((type, i) => {\n                return <option key={'type-option-' + i} value={ type.id || type.name }>{ type.name }</option>;\n              })}\n            </select>\n          </div>\n\n          {areasButtonHTML}\n          {areasHTML}\n\n          <button value=\"reset\" onClick={() => self.resetTypeAndArea()} className=\"osc-button osc-reset-button\" ref={el => (self.resetButton = el)}>Alles tonen</button>\n          \n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n// import OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\n// import OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n      fields: [],\n    };\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.fields = [ ...self.config.fields ];\n\n    let fields = self.config.fields || [];\n\n    if (!self.props.idea.extraData) self.props.idea.extraData = {};\n\n    let state = {\n      formfields: {\n        id: self.props.idea.id || '',\n        user: self.props.idea.user || {},\n      },\n      showFormErrorsWarning: false,\n      isBusy: false,\n    };\n\n    fields.forEach((field) => {\n      if (field.name) {\n        state.formfields[field.name] = eval('self.props.idea.' + field.name);\n        field.value = eval('self.props.idea.' + field.name);\n      }\n    });\n\n    let titleField = fields.find(field => field.name == 'title');\n    if (titleField) {\n\t\t  titleField.minLength = self.config.titleMinLength;\n\t\t  titleField.maxLength = self.config.titleMaxLength;\n    }\n\n    let summaryField = fields.find(field => field.name == 'summary');\n    if (summaryField) {\n\t\t  summaryField.minLength = self.config.summaryMinLength;\n\t\t  summaryField.maxLength = self.config.summaryMaxLength;\n    }\n\n    let descriptionField = fields.find(field => field.name == 'description');\n    if (descriptionField) {\n\t\t  descriptionField.minLength = self.config.descriptionMinLength;\n\t\t  descriptionField.maxLength = self.config.descriptionMaxLength;\n    }\n\n    let imageField = fields.find(field => field.inputType == 'image-upload'); // TODO: multiple images?\n    if (imageField) {\n\t\t  imageField.imageserver = self.config.imageserver;\n    }\n\n    if (OpenStadComponentLibs.user.hasRole( self.config.user, 'editor' ) ) {\n\n      // typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        let choices = [];\n        self.config.types.forEach(type => {\n          let typeDef = type;\n          if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n            choices.push({ title: typeDef.name, value: typeDef.id || typeDef.value})\n          }\n        });\n        self.config.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  title: \"Type inzending\",\n\t\t\t\t  value: self.props.idea.typeId,\n          inputType: \"multiple-choice\",\n          choices\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n      // moderator\n      self.config.fields.push({\n\t\t\t\tname: \"modBreak\",\n\t\t\t\ttitle: \"Moderator reactie\",\n\t\t\t\tvalue: self.props.idea.modBreak,\n\t\t\t\tinputType: \"textarea-with-counter\",\n\t\t\t\tminLength: 0,\n\t\t\t\tmaxLength: 2000,\n\t\t\t})\n      state.formfields.modBreak = self.props.idea.modBreak;\n\n    } else {\n\n      // hidden: typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        self.config.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  value: self.props.idea.typeId,\n\t\t\t\t  inputType: \"hidden\",\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n    }\n\n    self.state = state;\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new window.CustomEvent('updateEditIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n      console.log('xxx');\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // // images\n\t  // if (!self.imageField.validate()) {\n\t\t//   self['form-warning-image'].style.display = 'block';\n\t\t//   isValid = false;\n\t  // } else {\n\t\t//   self['form-warning-image'].style.display = 'none';\n    // }\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let formValues = self.form.getValues();\n\n      let isValid = self.form.validate({ showErrors: true });\n\n\t    if ( !self.validateIdea() || !isValid ) { // validateIdea doet nog locatie en images\n        self.setState({ isBusy: false, showFormErrorsWarning: true });\n        return;\n      }\n\n      self.setState({ showFormErrorsWarning: false });\n\n\t    if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t    var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n\n      let body = {\n        location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n      };\n      Object.keys(formValues).forEach(key => {\n        let match = key.match(/^extraData\\.(.+)/)\n        if (match) {\n          if (!body.extraData) body.extraData = {};\n          body.extraData[match[1]] = formValues[key];\n        } else {\n          body[key] = formValues[key];\n        }\n      });\n\n      // if ( self.config.user && self.config.user.role == 'admin' ) {\n      //   body.modBreak = self.state.formfields['modBreak'];\n      // }\n\n      let method = 'POST';\n      if (typeof this.state.formfields.id == 'number') {\n        method = 'PUT';\n        url = url + '/' + this.state.formfields.id;\n      }\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw response;\n          }\n          return response.json();\n        })\n        .then( json => {\n          self.setState({ isBusy: false }, () => {\n\t\t        var event = new window.CustomEvent('newIdeaStored', { detail: { idea: json } });\n\t\t        document.dispatchEvent(event);\n          })\n        })\n        .catch((err) => {\n          console.log('Niet goed');\n          console.log(err);\n          if ( typeof err.json == 'function' ) {\n            err.json().then(json => self.setState({ isBusy: false, showFormErrorsWarning: json.message }) );\n          } else {\n            self.setState({ isBusy: false, showFormErrorsWarning: err.message || err })\n          }\n        });\n    })\n    \n  }\n  \n\trender() {\n\n    let self = this;\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      let text = 'Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.';\n      if (typeof self.state.showFormErrorsWarning == 'string') {\n        text = self.state.showFormErrorsWarning;\n      }\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">{ text }</div>\n      );\n    }\n\n    let formHTML = null;\n    formHTML = (\n      <OpenStadComponentForms.Form config={ self.config } values={{ typeId: self.state.formfields.typeId /* typeId is hidden */ }} ref={(el) => { self.form = el;}}/>\n    )\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          {formHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className={`osc-button osc-button-blue${ self.state.isBusy ? ' osc-disabled' : '' }`} onClick={() => { if (!self.state.isBusy) self.submitIdea() } } ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\nexport default class IdeasList extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      types: [],\n      titleField: 'title',\n      summaryField: 'summary',\n      idea: {\n        showVoteButtons: true,\n        sort: {\n          sortOptions: [{ value: 'createdtime,desc', label: 'Nieuwste eerst' },{ value: 'createdtime,asc', label: 'Oudste eerst' }],\n          showSortButton: true,\n          defaultSortOrder: 'createdtime,desc',\n        }\n      },\n\t\t};\n\t\tthis.config = merge.recursive(this.defaultConfig, props.config || {})\n\t\tthis.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n      currentSortOrder: this.config.idea.sort.defaultSortOrder,\n      ideas: this.props.ideas || [],\n      currentMouseOverIdea: null,\n      hideSortButton: !this.config.idea.sort.hideSortButton,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n\n    let self = this;\n    let state = { ...self.state };\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'title':\n\t\t\t\tideas = ideas.sort( function(a,b) { if (a.title.toLowerCase() < b.title.toLowerCase()) { return -1; } if (b.title.toLowerCase() < a.title.toLowerCase()) { return 1; } return 0; });\n\t\t\t\tbreak;\n\t\t\tcase 'ranking,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - b.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.yes - b.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.yes - a.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'args,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.argCount - a.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'args,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.argCount - b.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    state.ideas = maxLength ? ideas.slice(0, maxLength): ideas;\n\n    state.hideSortButton = hideSortButton;\n\n    self.setState(state);\n\n  }\n\n  setSortOrder({ sortOrder }) {\n    this.setState({\n      ...this.state,\n      currentSortOrder: sortOrder\n    }, function() {\n      this.updateIdeas({ sortOrder })\n    });\n  }\n\n  onIdeaClick(e) {\n    // placeholder\n  }\n\n  dispatchMouseOverListItem(e, idea) {\n    e.stopPropagation();\n    let newMouseOverIdeaId = idea.id;\n    if (!this.state.currentMouseOverIdea || newMouseOverIdeaId != this.state.currentMouseOverIdea.id) {\n      this.setState({ currentMouseOverIdea: idea.id });\n\t\t  var event = new window.CustomEvent('mouseOverListItem', { detail: { idea: idea } });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n  \n  dispatchMouseOutListItem(e) {\n    e.stopPropagation();\n    if (this.state.currentMouseOverIdea) {\n      this.setState({ currentMouseOverIdea: null });\n\t\t  var event = new window.CustomEvent('mouseOutListItem', {});\n\t\t  document.dispatchEvent(event);\n    }\n  }\n\n\trender() {\n\n    let self = this;\n\n    let sortSelector = null;\n    if (this.config.idea.sort.showSortButton && !this.state.hideSortButton) {\n      sortSelector = (\n        <div className=\"osc-sort osc-align-right-container osc-margin-right\">\n          Sorteer op:&nbsp;&nbsp;&nbsp;&nbsp;\n          <select value={self.state.currentSortOrder} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n            { self.config.idea.sort.sortOptions.map((option, i) => {\n              return <option value={ option.value } key={'sort-option-' + i}>{ option.label }</option>;\n            })}\n          </select>\n        </div>\n      );\n    } else {\n      sortSelector = (<div style={{height: 20}}></div>)\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.props.title} ({self.state.ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-ideas-list'} ref={el => (self.instance = el)}>\n\n        {sortSelector}\n\n        {titleHML}\n\n        { self.state.ideas.map((idea, i) => {\n          if (!idea) {\n            console.log('idea is undef', i, self.state.ideas);\n          }\n          let ideaTypeValue;\n          try {\n            ideaTypeValue = eval(`idea.${self.config.typeField}`);\n          } catch (err) {\n            ideaTypeValue = '';\n          }\n          let typeDef = self.config.types.find(entry => ideaTypeValue && ( entry.id == ideaTypeValue || entry.name == ideaTypeValue ));\n          if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n          let voteCountHTML = null;\n          if (this.config.idea.showVoteButtons) {\n            voteCountHTML = (\n              <div className=\"osc-likes\">\n                {idea.yes || 0}\n              </div>);\n          }\n          let argcountHTML = null;\n          if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n            argcountHTML = (\n              <div className=\"osc-reactions\">\n                {idea.argCount || 0}\n              </div>);\n          }\n          return (\n            <div className={`osc-info-block-ideas-list-idea${self.state.currentMouseOverIdea && self.state.currentMouseOverIdea != idea.id ? ' osc-opacity-65' : ''}`} onClick={(event) => self.config.onIdeaClick(event, idea)} key={'info-block-' + i} onMouseOver={e => self.dispatchMouseOverListItem(e, idea)} onMouseOut={e => self.dispatchMouseOutListItem(e)}>\n              <div className=\"osc-content\">\n                <div className=\"osc-idea-image-container\">\n                  <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n                </div>\n                <h4 className=\"osc-title\">{ eval(`idea.${self.config.titleField}`) }</h4>\n                <div className=\"osc-summary\">\n                  { eval(`idea.${self.config.summaryField}`) }\n                </div>\n                <div className=\"osc-stats\">\n                  {voteCountHTML}\n                  {argcountHTML}\n                  <div className=\"osc-type\">\n                    <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"osc-clear-both\"></div>\n            </div>\n          );\n        })}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBlock from './info-block.jsx';\nimport IdeaForm from './idea-form.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentIdeaDetails from '../../idea-details/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n      displayType: 'complete',\n      displayWidth: null,\n      displayHeight: null,\n      canSelectLocation: true,\n      types: [],\n      typeField: null,\n\n      // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n      // currentPolygon: undefined,\n      // areas: [\n      //  { name: \"Heel West\",\n      //    value: \"Heel West\",\n      //    polygon: [{ \"lng\": 4.8353454, \"lat\": 52.3731265 }, { \"lng\": 4.8422025, \"lat\": 52.3721002 }, { \"lng\": 4.8421761, \"lat\": 52.3695836 }, { \"lng\": 4.8455807, \"lat\": 52.3696369 }, { \"lng\": 4.8476385, \"lat\": 52.369853 }, { \"lng\": 4.8477361, \"lat\": 52.3695885 }, { \"lng\": 4.8484176, \"lat\": 52.369697 }, { \"lng\": 4.8504835, \"lat\": 52.3653302 }, { \"lng\": 4.8504956, \"lat\": 52.3643692 }, { \"lng\": 4.8501587, \"lat\": 52.3638376 }, { \"lng\": 4.8494487, \"lat\": 52.3633001 }, { \"lng\": 4.8495059, \"lat\": 52.3610989 }, { \"lng\": 4.8489152, \"lat\": 52.3608149 }, { \"lng\": 4.8487824, \"lat\": 52.3578658 }, { \"lng\": 4.8504012, \"lat\": 52.3578553 }, { \"lng\": 4.8518982, \"lat\": 52.357844 }, { \"lng\": 4.8538275, \"lat\": 52.3581295 }, { \"lng\": 4.854723, \"lat\": 52.3578629 }, { \"lng\": 4.854635, \"lat\": 52.3577532 }, { \"lng\": 4.85436, \"lat\": 52.3572975 }, { \"lng\": 4.8540881, \"lat\": 52.3564026 }, { \"lng\": 4.8547969, \"lat\": 52.3562758 }, { \"lng\": 4.8698903, \"lat\": 52.3601067 }, { \"lng\": 4.8699397, \"lat\": 52.3600231 }, { \"lng\": 4.8714122, \"lat\": 52.3603737 }, { \"lng\": 4.8712647, \"lat\": 52.3605634 }, { \"lng\": 4.8715288, \"lat\": 52.3605997 }, { \"lng\": 4.8716826, \"lat\": 52.3604277 }, { \"lng\": 4.8738605, \"lat\": 52.3608533 }, { \"lng\": 4.8738525, \"lat\": 52.3610213 }, { \"lng\": 4.8740097, \"lat\": 52.3610407 }, { \"lng\": 4.8741351, \"lat\": 52.3608935 }, { \"lng\": 4.8750611, \"lat\": 52.3608041 }, { \"lng\": 4.8756501, \"lat\": 52.3606138 }, { \"lng\": 4.876429, \"lat\": 52.3607996 }, { \"lng\": 4.8765642, \"lat\": 52.3606177 }, { \"lng\": 4.876929, \"lat\": 52.3606957 }, { \"lng\": 4.8768495, \"lat\": 52.360911 }, { \"lng\": 4.8771709, \"lat\": 52.3609696 }, { \"lng\": 4.8774, \"lat\": 52.3607583 }, { \"lng\": 4.8819952, \"lat\": 52.3620427 }, { \"lng\": 4.8813956, \"lat\": 52.3630818 }, { \"lng\": 4.8808146, \"lat\": 52.3634904 }, { \"lng\": 4.8793708, \"lat\": 52.3643261 }, { \"lng\": 4.8792691, \"lat\": 52.3649574 }, { \"lng\": 4.8787082, \"lat\": 52.3658206 }, { \"lng\": 4.8775395, \"lat\": 52.3667815 }, { \"lng\": 4.8767523, \"lat\": 52.3685117 }, { \"lng\": 4.8754901, \"lat\": 52.3697867 }, { \"lng\": 4.8745065, \"lat\": 52.3718772 }, { \"lng\": 4.8745782, \"lat\": 52.3725454 }, { \"lng\": 4.8753796, \"lat\": 52.373407 }, { \"lng\": 4.8755899, \"lat\": 52.3743025 }, { \"lng\": 4.8799131, \"lat\": 52.3813052 }, { \"lng\": 4.8796339, \"lat\": 52.3819128 }, { \"lng\": 4.880478, \"lat\": 52.3822531 }, { \"lng\": 4.8818058, \"lat\": 52.3843528 }, { \"lng\": 4.882637, \"lat\": 52.3854107 }, { \"lng\": 4.8846503, \"lat\": 52.3883466 }, { \"lng\": 4.8857963, \"lat\": 52.3881476 }, { \"lng\": 4.8911796, \"lat\": 52.3884502 }, { \"lng\": 4.8937804, \"lat\": 52.3886712 }, { \"lng\": 4.8956658, \"lat\": 52.3888313 }, { \"lng\": 4.8927982, \"lat\": 52.3933453 }, { \"lng\": 4.8850924, \"lat\": 52.398824 }, { \"lng\": 4.8762366, \"lat\": 52.3945287 }, { \"lng\": 4.8726422, \"lat\": 52.3948206 }, { \"lng\": 4.8719896, \"lat\": 52.3947192 }, { \"lng\": 4.8719508, \"lat\": 52.3952766 }, { \"lng\": 4.8715979, \"lat\": 52.39538 }, { \"lng\": 4.8667403, \"lat\": 52.393136 }, { \"lng\": 4.8643092, \"lat\": 52.3927072 }, { \"lng\": 4.8627057, \"lat\": 52.3938521 }, { \"lng\": 4.8603441, \"lat\": 52.3949382 }, { \"lng\": 4.858593, \"lat\": 52.3952782 }, { \"lng\": 4.8569204, \"lat\": 52.3953667 }, { \"lng\": 4.8569896, \"lat\": 52.3938363 }, { \"lng\": 4.8573172, \"lat\": 52.3938424 }, { \"lng\": 4.8574043, \"lat\": 52.3920751 }, { \"lng\": 4.8589526, \"lat\": 52.3912226 }, { \"lng\": 4.8592744, \"lat\": 52.3905434 }, { \"lng\": 4.8592929, \"lat\": 52.3887899 }, { \"lng\": 4.8449045, \"lat\": 52.3887733 }, { \"lng\": 4.8451066, \"lat\": 52.3850658 }, { \"lng\": 4.8446526, \"lat\": 52.3850638 }, { \"lng\": 4.8390117, \"lat\": 52.3850241 }, { \"lng\": 4.8392807, \"lat\": 52.3829687 }, { \"lng\": 4.838548, \"lat\": 52.3808766 }, { \"lng\": 4.836707, \"lat\": 52.3763581 }, { \"lng\": 4.8353454, \"lat\": 52.3731265 }] },\n      //  { name: \"De Baarsjes\",\n      //    value: \"De Baarsjes\",\n      //    polygon: [{\"lng\":4.8558724,\"lat\":52.374202},{\"lng\":4.8577714,\"lat\":52.3681953},{\"lng\":4.8582878,\"lat\":52.3648623},{\"lng\":4.8592819,\"lat\":52.3648966},{\"lng\":4.8598228,\"lat\":52.364783},{\"lng\":4.8613989,\"lat\":52.3664539},{\"lng\":4.8661845,\"lat\":52.3717538},{\"lng\":4.8664001,\"lat\":52.3721596},{\"lng\":4.8663889,\"lat\":52.372566},{\"lng\":4.865846,\"lat\":52.3733281},{\"lng\":4.8646717,\"lat\":52.3734961},{\"lng\":4.8641583,\"lat\":52.3750737},{\"lng\":4.8640923,\"lat\":52.3752839},{\"lng\":4.8559599,\"lat\":52.3743342},{\"lng\":4.8558724,\"lat\":52.374202}] },\n      //  { name: \"Oud West\",\n      //    value: \"Oud West\",\n      //    polygon: [{\"lng\":4.8546816,\"lat\":52.3568634},{\"lng\":4.855041,\"lat\":52.3563261},{\"lng\":4.858839,\"lat\":52.3572696},{\"lng\":4.8625458,\"lat\":52.3582427},{\"lng\":4.8646701,\"lat\":52.3588487},{\"lng\":4.868731,\"lat\":52.3597955},{\"lng\":4.8703188,\"lat\":52.3601231},{\"lng\":4.8717136,\"lat\":52.3604376},{\"lng\":4.8738218,\"lat\":52.3609651},{\"lng\":4.8763055,\"lat\":52.3607226},{\"lng\":4.8776842,\"lat\":52.3608635},{\"lng\":4.878167,\"lat\":52.3610044},{\"lng\":4.8812676,\"lat\":52.3618856},{\"lng\":4.8807043,\"lat\":52.3623966},{\"lng\":4.8798675,\"lat\":52.3633663},{\"lng\":4.8795778,\"lat\":52.3639428},{\"lng\":4.8792613,\"lat\":52.3644931},{\"lng\":4.8791272,\"lat\":52.3650598},{\"lng\":4.8787785,\"lat\":52.3656691},{\"lng\":4.8779202,\"lat\":52.3663734},{\"lng\":4.8773838,\"lat\":52.366809},{\"lng\":4.8772336,\"lat\":52.3676312},{\"lng\":4.8769385,\"lat\":52.3681389},{\"lng\":4.8754311,\"lat\":52.3697536},{\"lng\":4.8746211,\"lat\":52.3714043},{\"lng\":4.8744494,\"lat\":52.3720594},{\"lng\":4.8744602,\"lat\":52.3723083},{\"lng\":4.8752166,\"lat\":52.3729895},{\"lng\":4.8745943,\"lat\":52.3731762},{\"lng\":4.870925,\"lat\":52.3724033},{\"lng\":4.8680175,\"lat\":52.3717974},{\"lng\":4.8665959,\"lat\":52.3715648},{\"lng\":4.8654211,\"lat\":52.3703825},{\"lng\":4.8641176,\"lat\":52.3689905},{\"lng\":4.8628623,\"lat\":52.3676443},{\"lng\":4.8616499,\"lat\":52.3662554},{\"lng\":4.8604268,\"lat\":52.3648862},{\"lng\":4.8602505,\"lat\":52.3647431},{\"lng\":4.8591448,\"lat\":52.3634056},{\"lng\":4.8580772,\"lat\":52.3621247},{\"lng\":4.8575783,\"lat\":52.3615515},{\"lng\":4.857117,\"lat\":52.3604245},{\"lng\":4.856248,\"lat\":52.3592681},{\"lng\":4.8555345,\"lat\":52.3580035},{\"lng\":4.855299,\"lat\":52.357674},{\"lng\":4.855269,\"lat\":52.3576447},{\"lng\":4.855115,\"lat\":52.3574166},{\"lng\":4.8549071,\"lat\":52.3571512},{\"lng\":4.85479,\"lat\":52.3570018},{\"lng\":4.8546816,\"lat\":52.3568634}] },\n      // ],\n\n      titleField: 'title',\n      summaryField: 'summary',\n      // areaField: self.config.areaField || 'extraData.gebied',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n        titleMinLength: 10,\n        titleMaxLength: 20,\n        summaryMinLength: 20,\n        summaryMaxLength: 140,\n        descriptionMinLength: 140,\n        descriptionMaxLength: 5000,\n      },\n      argument: {\n        isActive: true,\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        placeholder: '',\n        requiredUserRole: 'member',\n        ignoreReactionsForIdeaIds: '',\n        closeReactionsForIdeaIds: '',\n      },\n      content: {\n        mobilePreviewLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4>{addButton}',\n        mobilePreviewNotLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4><div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"{loginLink}\">inloggen</a>.</div>',\n      },\n      search: {},\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.ideaName = self.config.ideaName || 'Inzendingen';\n    self.config.search.searchIn = props.config.search && props.config.search.searchIn || ['ideas', 'addresses'];\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n    self.config.typeField = self.config.typeField || 'extraData.theme'\n\n    // tmp\n    if (self.config.types && self.config.types.length) {\n      self.config.types.forEach((entry) => {\n        if (entry.value && !entry.name) {\n          entry.name = entry.value;\n        }\n        if (entry.mapicon && typeof entry.mapicon == 'string') {\n          try {\n            entry.mapicon = JSON.parse(entry.mapicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.listicon && typeof entry.listicon == 'string') {\n          try {\n            entry.listicon = JSON.parse(entry.listicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.buttonicon && typeof entry.buttonicon == 'string') {\n          try {\n            entry.buttonicon = JSON.parse(entry.buttonicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n      });\n    }\n\n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n      currentMouseOverIdea: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    window.addEventListener( 'hashchange', e => {\n      self.hideIdeaDetails();\n      let match = window.location.hash.match(/(\\w)(\\d+)/);\n      if (match) {\n        let ideaId = match[2];\n        let idea = self.state.ideas && self.state.ideas.find(idea => idea.id == ideaId);\n        if (match[1] == 'D') {\n          self.showIdeaDetails(idea)\n        } else {\n\t\t\t\t\t// self.setSelectedIdea(idea);\n        }\n      }\n    }, false );\n\n    // when the map is ready\n\t\tdocument.addEventListener('osc-map-is-ready', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // map events\n\t\tdocument.addEventListener('osc-map-click', function(event) {\n      self.onMapClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-marker-click', function(event) {\n      self.onMarkerClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-cluster-click', function(event) {\n      self.onClusterClick(event.detail);\n    });\n    \n    // handle filter changes\n\t\tdocument.addEventListener('typeFilterUpdate', function(event) {\n      self.onChangeTypeFilter(event.detail.value);\n    });\n    // document.addEventListener('areaFilterUpdate', function(event) {\n    //   self.onChangeAreaFilter(event.detail.value);\n    // });\n\n    // handle infoblock changes\n\t\tdocument.addEventListener('updateSelectedIdea', function(event) {\n      self.onUpdateSelectedIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('closeSelectedLocation', function(event) {\n      self.onCloseSelectedLocation(event.detail.idea);\n    });\n\t\tdocument.addEventListener('updateEditIdea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('ideaClick', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('selectedIdeaClick', function(event) {\n      self.onSelectedIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('newIdeaClick', function(event) {\n      self.onNewIdeaClick({ typeId: event.detail.typeId });\n    });\n\t\tdocument.addEventListener('clickMobileSwitcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n\t\tdocument.addEventListener('mouseOverListItem', function(event) {\n      self.onMouseOverListItem(event.detail.idea);\n    });\n\t\tdocument.addEventListener('mouseOutListItem', function(event) {\n      self.onMouseOutListItem();\n    });\n\n    // details changes\n\t\tdocument.addEventListener('osc-idea-liked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-stored', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('osc-edit-idea-click', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-idea-deleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('newIdeaStored', function(event) {\n      document.location.href = \"#\";\n      self.onNewIdeaStored(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArgsCount=1&includeUser=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers,\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        // showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/(\\w)(\\d+)/) && window.location.hash.match(/(\\w)(\\d+)/)[2] ) || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        // showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/^#D(\\d+)/) && window.location.hash.match(/^#D(\\d+)/)[1] );\n        showIdeaSelected = showIdeaSelected || ( window.location.hash.match(/^#S(\\d+)/) && window.location.hash.match(/^#S(\\d+)/)[1] );\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.map.setBoundsAndCenter();\n\n        self.setState({ ideas }, function () {\n          self.setState({ mobileState: self.config.startWithListOpenOnMobile ? 'opened' : 'closed' })\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers({})\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          if (window.location.hash.match(/^#newidea/)) {\n            // TODO: dit moet ook bestaande ideeen gaan werken\n            let hash = window.location.hash;\n            let match = hash.match(/&([^&]+)=([^&]+)/g);\n            let newIdea = {  };\n            if (match) {\n              match.forEach((entry) => {\n                let [key, val] = entry.split('=');\n                key = key.substring(1, key.length);\n                newIdea[key] = decodeURIComponent(val);\n              });\n            }\n\t\t\t\t\t  self.setNewIdea(newIdea);\n\t\t\t\t    self.showIdeaForm(newIdea);\n          }\n          self.onChangeMapBoundaries();\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    if (self.infoblock) self.infoblock.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers({})\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n\n    if (self.config.idea.formUrl) {\n      let url = self.config.idea.formUrl;\n      url = url.replace(/:ideaId/, typeof idea.id == 'number' ? idea.id : '');\n      url = url.replace(/:location/, idea.location ? JSON.stringify({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }) : '');\n      url = url.replace(/:typeId/, idea.typeId);\n      url = url.replace(/:address/, idea.address);\n      document.location.href = url;\n    } else {\n      self.setState({ status: 'idea-form', editIdea: idea }, function() {\n        self.map.map.invalidateSize();\n        self.map.hideMarkers({ exception: { location: idea && idea.location && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n        if (next) next();\n      });\n    }\n\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      self.showIdeaDetails(idea)\n      document.location.href = \"#D\" + idea.id\n    } else {\n      document.location.href='#';\n      if (self.state.editIdea && self.state.editIdea.location) {\n        self.setState({ status: 'location-selected' }, function() {\n          // todo: dit zou hij zelf via state moeten doen\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(self.state.editIdea)\n        });\n      } else {\n        self.setState({ status: 'default' }, function() {\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(null)\n        });\n      }\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas xxx\n    if (this.config.search.searchIn.includes('ideas')) {\n\t\t  this.state.ideas.forEach((idea) => {\n\t\t\t  let title = eval(`idea.${self.config.titleField}`) || '';\n        let titlelLc = title.toLowerCase();\n\t\t\t  let summary = eval(`idea.${self.config.summaryField}`) || '';\n        let summaryLc = summary.toLowerCase();\n\t\t\t  if (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\t  searchResult.ideas.push({\n\t\t\t\t\t  text: title,\n\t\t\t\t\t  onClick: function() {\n              self.onUpdateSelectedIdea(idea)\n            },\n\t\t\t\t  })\n\t\t\t  }\n\t\t  });\n    }\n\n    if (!this.config.search.searchIn.includes('addresses')) {\n      setImmediate(function(){callback(searchValue, searchResult)});\n    }\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n\n\n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\n\t}\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // setCurrentPolygon(polygon) {\n  //   let state = { ...this.state };\n  //   state.currentPolygon = polygon ? this.map.createCutoutPolygon(polygon): undefined;\n  //   this.setState(state);\n  // }\n\n  // removeCurrentPolygon() {\n  //   this.map.removePolygon(this.state.currentPolygon)\n  //   let state = { ...this.state };\n  //   state.currentPolygon = undefined;\n  //   this.setState(state);\n  // }\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n    // xxx\n    let self = this;\n    self.map.setSelectedLocation(location)\n    if (self.ideaform) {\n      if (!location) return;\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\tself.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\tlet address = json && json._display || 'Geen adres gevonden';\n\t\t\t\tself.state.editIdea.address = address;\n\t\t\t\tself.ideaform.handleLocationChange({ location, address: address });\n\t\t\t})\n    }\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        // xxx\n        if (idea.location) self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infoblock) {\n          self.setState({ editIdea: self.state.editIdea });\n          if (idea.location) {\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n            self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n              let address = json && json._display || 'Geen adres gevonden';\n              let editIdea = self.state.editIdea;\n              editIdea.address = address;\n              self.setState({ editIdea });\n              self.infoblock.setNewIdea({ ...self.state.editIdea, address });\n            })\n          } else {\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Geen locatie geselecteerd...' });\n          }\n          self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        self.setSelectedLocation(null);\n        if (self.infoblock) {\n          self.infoblock.setNewIdea(null);\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(idea);\n        this.infoblock.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map.unfadeAllMarkers();\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(null);\n        this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          document.location.href='#';\n          this.setSelectedIdea(null);\n          this.setNewIdea(null);\n          this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n        } else {\n          if (!this.config.canSelectLocation) break;\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n          // setTimeout( function() {\n\t\t      // var event = new window.CustomEvent('newIdeaClick', { detail: { newIdea } });\n\t\t      //   document.dispatchEvent(event);\n          // }, 500 );\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infoblock) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infoblock) {\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    if (idea) {\n      document.location.href='#S'+idea.id;\n    } else {\n      document.location.href = \"#\";\n    }\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n\tonCloseSelectedLocation() {\n    this.setState({ ...this.state, status: 'default', currentIdea: null }, function() {\n      this.setSelectedIdea(null);\n      this.setNewIdea(null);\n      this.setSelectedLocation(null);\n    });\n  }\n  \n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      // this.showIdeaDetails(idea);\n      document.location.href = \"#D\" + idea.id;\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter();\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick(idea) {\n    // this.showIdeaDetails(idea);\n    document.location.href = \"#D\" + idea.id\n  };\n  \n  onNewIdeaClick({ typeId }) {\n    let self = this;\n    let editIdea = this.state.editIdea || {};\n    editIdea.typeId = typeId;\n    self.showIdeaForm(editIdea, () => {\n      let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n\t\tself.showIdeaDetails(idea);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount++;\n    setTimeout(e => { window.location.hash = `#osc-reaction-${data.id}` }, 1000);\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n  \n  onChangeTypeFilter(value) {\n\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.setSelectedLocation(null);\n\t  self.map.setFilter(function(marker) {\n\t\t  if (value && value !== '0') {\n\t\t\t  return marker.data && eval(`marker.data.${self.config.typeField}`).toLowerCase() && eval(`marker.data.${self.config.typeField}`).toLowerCase() == value.toLowerCase();\n\t\t  } else {\n\t\t\t  return true;\n\t\t  }\n\t  })\n    self.setState({ status: 'default' })\n    self.map.setBoundsAndCenter();\n    self.onChangeMapBoundaries(); // todo: rename\n  }\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // onChangeAreaFilter(area) {\n  //   let self = this;\n  //   self.setSelectedIdea(null);\n  //   self.setNewIdea(null);\n  //   self.removeCurrentPolygon();\n  //   self.setCurrentPolygon( area && area.polygon );\n  //   self.setState({ status: 'default' })\n  //   self.map.setBoundsAndCenter(area && area.polygon || self.config.map.polygon || self.map.markers);\n  // }\n\n  onMouseOverListItem(idea) {\n    this.setState({ currentMouseOverIdea: idea });\n    this.map.fadeMarkers({ exception: idea })\n    this.map.updateFading();\n  }\n\n  onMouseOutListItem(idea) {\n    this.setState({ currentMouseOverIdea: null });\n    this.map.unfadeAllMarkers()\n    if (this.selectedIdea) {\n      this.map.fadeMarkers({exception: this.selectedIdea});\n    }\n    if (this.map.selectedLocation) {\n      this.map.fadeMarkers({});\n    }\n    this.map.updateFading();\n  }\n\n  onClickBackToOverview(idea) {\n    document.location.href='#S'+this.state.currentIdea.id;\n  }\n  \n  onClickMobileSwitcher() {\n    let self = this;\n    if (self.infoblock) self.infoblock.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter();\n      }\n    })\n  }\n\n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infoblock moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        let config = { // TODO: niet bij elke render\n          titleField: this.config.titleField,\n          summaryField: this.config.summaryField,\n          typeField: this.config.typeField,\n          // areaField: this.config.areaField,\n          siteId: this.config.siteId,\n          user: this.config.user,\n          api: this.config.api,\n          argument: { ...this.config.argument },\n          showVoteButtons: this.config.idea.showVoteButtons,\n          poll: this.config.poll,\n          showLabels: this.config.idea.showLabels,\n          types: this.config.types,\n          allowMultipleImages: this.config.idea.allowMultipleImages,\n          metaDataTemplate: this.config.idea.metaDataTemplate,\n          shareChannelsSelection: this.config.idea.shareChannelsSelection,\n          loginUrl: this.config.loginUrl,\n          linkToUserPageUrl: this.config.linkToUserPageUrl,\n        };\n        config.argument.isActive = this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${this.state.currentIdea.id}(?:\\\\D|$)`));\n        config.argument.isClosed = this.config.argument.isClosed || this.config.argument.closeReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${this.state.currentIdea.id}(?:\\\\D|$)`));\n        if (this.config.typeLabel) config.typeLabel = this.config.typeLabel;\n        // TODO: tmp gerard dou\n        if ( this.state.currentIdea && this.state.currentIdea.extraData && this.state.currentIdea.extraData.type && ( this.state.currentIdea.extraData.type == 'Kans' || this.state.currentIdea.extraData.type == 'Knelpunt' ) ) {\n          config.types = [{\"name\": \"Kans\",\"label\": \"Dit gaat goed\",\"value\": \"Kans\",\"buttonLabel\": \"Ik wil een idee posten\",\"backgroundColor\": \"#bed200\",\"textColor\": \"black\"},{\"name\": \"Knelpunt\",\"label\": \"Dit kan beter\",\"value\": \"Knelpunt\",\"backgroundColor\": \"#ff9100\",\"textColor\": \"black\"}];\n          config.showLabels = true;\n        }\n        infoHTML = (\n\t\t\t    <OpenStadComponentIdeaDetails id={this.divId + '-infoblock'} config={config} idea={this.state.currentIdea} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideadetails = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.onClickBackToOverview() }>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <IdeaForm id={this.divId + '-infoblock'} config={{ siteId: this.config.siteId, user: this.config.user, api: this.config.api, ...this.config.idea, types: this.config.types, typeField: this.config.typeField }} idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideaform = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n\n            let contentHTML = this.config.api.isUserLoggedIn ? this.config.content.mobilePreviewLoggedInHTML : this.config.content.mobilePreviewNotLoggedInHTML;\n\n            let addButton = null; let loginButton = null; let loginLink = null;\n            if (this.config.api.isUserLoggedIn) {\n              if (this.config.idea.canAddNewIdeas) {\n                addButton = (\n                  <button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n                );\n              }\n            } else {\n              if (this.config.idea.canAddNewIdeas) {\n                loginButton = (\n                  <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n                );\n                loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n              }\n            }\n            \n            contentHTML = contentHTML.replace(/\\{address\\}/g, this.state.editIdea.address || '');\n            contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n            \n            contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n            mobilePopupHTML = (\n\t\t\t\t\t\t\t<div className=\"ocs-mobile-popup\">\n\t\t\t\t\t\t\t\t{contentHTML}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infoblock.setState({ mobileState: 'opened' }); document.location.href = \"#D\" + this.state.currentIdea.id; /* this.showIdeaDetails(this.state.currentIdea) */ } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, user: this.config.user, ideaName: this.config.ideaName, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, typeField: this.config.typeField, content: this.config.content, argument: this.config.argument, idea: this.config.idea, loginUrl: this.config.loginUrl  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, typesFilterLabel: this.config.typesFilterLabel, typeField: this.config.typeField, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, ideaName: this.config.ideaName, search: this.config.search }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, user: this.config.user, ideaName: this.config.ideaName, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, typeField: this.config.typeField, content: this.config.content, argument: this.config.argument, idea: this.config.idea, loginUrl: this.config.loginUrl  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, typesFilterLabel: this.config.typesFilterLabel, typeField: this.config.typeField, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, ideaName: this.config.ideaName, search: this.config.search }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    let divStyle = {};\n    let simpleHTML = null;\n    if ( this.config.displayType == 'simple' ) {\n      filterHTML = null;\n      infoHTML = null;\n      mobilePopupHTML = null;\n      let buttonHTML = null;\n      if (this.config.linkToCompleteUrl) buttonHTML = <button onClick={() => { document.location.href = this.config.linkToCompleteUrl }} className=\"osc-button-blue\" style={{position: 'absolute', top: 20, right: 20}}>Bekijk de volledige kaart</button>\n      simpleHTML = (\n        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, zIndex: 1000 }}>\n          {buttonHTML}\n        </div>)\n      if (this.config.displayWidth) divStyle.width = this.config.displayWidth;\n      if (this.config.displayHeight) divStyle.height = this.config.displayHeight;\n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} style={divStyle} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className={`osc-ideas-on-map-map osc-ideas-on-map-map-${this.config.displayType}`}>\n\t\t\t    <Map id={this.divId + '-map'} config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField, zoomControl: this.config.displayType == 'simple' ? false : true }} ref={el => (this.map = el)}/>\n        </div>\n        {simpleHTML}\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport IdeasList from './ideas-list.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n// TODO: na verandering op verandering denk ik dat dit een status moet gaan krijgen ipv. de new en selected versie.\n// TODO: setNewIdea refactoren naar setSelectedLocation\n// TODO: events worden via document gestuurd; dat kan ook intern\n\n'use strict';\n\nexport default class InfoBlock extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      content: {\n        noSelectionLoggedInHTML: '<div class=\\\"osc-info-block-default-block\\\"><div class=\\\"osc-info-block-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-info-block-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-info-block-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        noSelectionNotLoggedInHTML: '<div class=\\\"osc-info-block-default-block\\\"><div class=\\\"osc-info-block-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-info-block-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-info-block-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        selectionActiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {addButton}.',\n        selectionInactiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        selectionActiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {loginButton} of <a href=\"{loginLink}\">login link</a>.',\n        selectionInactiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        showNoSelectionOnMobile: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n      argument: {\n        isActive: true,\n        ignoreReactionsForIdeaIds: '',\n      },\n      types: [],\n\t\t};\n\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n    this.config.loginUrl = this.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    // tmp voor oude data\n    console.log();\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionLoggedInHTML) {\n      this.config.content.noSelectionLoggedInHTML = props.config.content.noSelectionHTML\n    }\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionNotLoggedInHTML) {\n      this.config.content.noSelectionNotLoggedInHTML = props.config.content.noSelectionHTML\n    }\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    this.eventTarget = this.config.eventTarget || this.instance;\n  }\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    this.setState({ ideas });\n    this.list.updateIdeas({ ideas, sortOrder, hideSortButton, center, maxLength });\n  }\n\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n\n  dispatchUpdateSelectedIdea(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('updateSelectedIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchCloseSelectedLocation(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('closeSelectedLocation', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchSelectedIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('selectedIdeaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  dispatchOnIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('ideaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchNewIdeaClick(e, typeId) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('newIdeaClick', { detail: { typeId } });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('clickMobileSwitcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  render() {\n\n    let self = this;\n\n    let newIdeaHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // knoppen\n    let addButton = null; let loginButton = null; let loginLink = null;\n\n    if (self.config.idea.canAddNewIdeas) {\n      if (self.config.types && self.config.typeField == 'typeId') {\n        addButton = (\n          <span className=\"osc-new-idea-buttons\">\n            {self.config.types.map(\n              type => {\n                let typeDef = type;\n                if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n                  let buttonBgHTML = typeDef ? <div className=\"osc-button-background-image\" dangerouslySetInnerHTML={{ __html: typeDef.buttonicon && typeDef.buttonicon.html || '' }}></div> : null;\n                  return (<button className={'osc-button osc-button-white' + ( typeDef && typeDef.auth && typeDef.auth.createableBy ? ` osc-button-required-role-is-${typeDef.auth.createableBy}` : '' )} onClick={(event) => self.dispatchNewIdeaClick(event, typeDef.id || typeDef.name)}>{buttonBgHTML}{ typeDef && typeDef.buttonLabel || 'Nieuw punt toevoegen' }</button>)\n                } else return null;\n              }\n            )}\n          </span>\n        );\n      } else {\n        addButton = (\n          <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)}>Nieuw punt toevoegen</button>\n        );\n      }\n      loginButton = (\n        <button onClick={() => { document.location.href = this.config.loginUrl }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n      );\n      loginLink = `javascript: document.location.href = '${this.config.loginUrl}'`;\n    }\n\n    // new idea\n    if (self.state.newIdea) {\n      let contentHTML = null;\n      if (self.state.newIdea.isPointInPolygon) {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionActiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionActiveNotLoggedInHTML\n        }\n      } else {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionInactiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionInactiveNotLoggedInHTML\n        }\n      }\n\n      contentHTML = contentHTML.replace(/\\{address\\}/g, self.state.newIdea.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      newIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-new-idea\">\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchCloseSelectedLocation(event, null)} ref={el => (self.resetButton = el)}/>\n          {contentHTML}\n        </div>\n      );\n\n\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      let idea = self.state.selectedIdea;\n      let ideaTypeValue;\n      try {\n        ideaTypeValue = eval(`idea.${self.config.typeField}`);\n      } catch (err) {\n        ideaTypeValue = '';\n      }\n      let typeDef = self.config.types.find(entry => entry.name == ideaTypeValue || entry.id == ideaTypeValue);\n      if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      let voteCountHTML = null;\n      if (this.config.idea.showVoteButtons) {\n        voteCountHTML = (\n          <div className=\"osc-likes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        argcountHTML = (\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.state.selectedIdea)}>\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchUpdateSelectedIdea(event, null)} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-info-block-selected-idea-idea\">\n            <div className=\"osc-idea-image-container\">\n              <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n            </div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                {voteCountHTML}\n                {argcountHTML}\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n    let defaultBlockHTML = null;\n    if (!newIdeaHTML && !selectedIdeaHTML) {\n      let noSelectionHTML = self.config.content.noSelectionNotLoggedInHTML;\n      if (self.config.api.isUserLoggedIn) noSelectionHTML = self.config.content.noSelectionLoggedInHTML;\n      noSelectionHTML = noSelectionHTML.replace(/\\{loginLink\\}/g, loginLink);\n      noSelectionHTML = OpenStadComponentLibs.reactTemplate({ html: noSelectionHTML, addButton, loginButton })\n      defaultBlockHTML = (\n\t\t\t  <div className={`osc-info-block-default-block${ self.config.content.showNoSelectionOnMobile ? ' osc-visible-on-mobile' : '' }`}>{noSelectionHTML}</div>\n      );\n      mobileTitle = `${self.config.ideaName} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n\n\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-info-block'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          {defaultBlockHTML}\n          {newIdeaHTML}\n          {selectedIdeaHTML}\n\t\t\t    <IdeasList config={{ ...self.config, onIdeaClick: ( event, idea ) => self.dispatchOnIdeaClick(event, idea) }} ideas={self.state.ideas} title={self.config.ideaName + ' ' + titleAddition} key={`osc-ideas-list-321`} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport OpenStadComponentNLMap from '../../nlmap/index.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      clustering: {\n        maxClusterRadius: 100,\n        showCoverageOnHover: false,\n      },\n      types: [],\n    };\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    // tmp fallback\n    this.config.polygon = this.config.polygon;\n    this.config.autoZoomAndCenter = this.config.autoZoomAndCenter || 'polygon'\n    \n    this.ideas = [];\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    super.componentDidMount(prevProps, prevState);\n\n    let self = this;\n\t\tdocument.addEventListener('osc-map-cluster-animation-end', function(event) {\n      self.onMapClusterAnimationEnd(event.detail);\n    });\n\n  }\n  \n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && self.config.typeField ? eval(`idea.${self.config.typeField}`) : 'typeId';\n\t\tlet typeDef = self.config.types.find(entry => typename && ( entry.id == typename || entry.name == typename ));\n    if (!typeDef) typeDef = {};\n\t  let color = typeDef.color || typeDef.backgroundColor || '#164995';\n    let icondef = ( ( typeDef.mapicon || typeDef.icon ) ) || { html: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  setBoundsAndCenter(points) {\n    super.setBoundsAndCenter(points || ( this.config.autoZoomAndCenter == 'polygon' && this.config.polygon ) || this.markers);\n  }\n\n  showMarkers({ keepCenter=false }) {\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    // if (!keepCenter) self.setBoundsAndCenter(( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || self.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception && exception.location) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onMapClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n    this.config.searchIn = props.config.searchIn || ['ideas', 'addresses'];\n    this.config.placeholder = props.config.placeholder || 'Zoek op trefwoord';\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n    this.updateSearchResult = this.updateSearchResult.bind(this);\n\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult);\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n      let suggestionDividerHTML = null;\n      if (this.config.searchIn.includes('ideas') && this.config.searchIn.includes('addresses')) {\n        suggestionDividerHTML = (<div className=\"osc-search-suggestions-hr\"/>);\n      }\n      let addressSuggestionsHTML = null;\n      if (this.config.searchIn.includes('addresses')) {\n        addressSuggestionsHTML = (\n          <div>\n\t\t\t\t\t  Adressen:\n            { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\t  let text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n              return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n            })}\n          </div>);\n      }\n      let ideasSuggestionsHTML = null;\n      if (this.config.searchIn.includes('ideas')) {\n        ideasSuggestionsHTML = (\n          <div>\n\t\t\t\t\t  { this.config.ideaName }:\n            { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\t  let text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n              return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n            })}\n          </div>);\n      }\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t  {addressSuggestionsHTML}\n          {suggestionDividerHTML}\n          {ideasSuggestionsHTML}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder={self.config.placeholder} onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\nimport 'custom-event-polyfill';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\n\n// render elements\nOpenStadComponentIdeasOnMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOnMap as default,\n  OpenStadComponentIdeasOnMap as IdeasOnMap,\n};\n\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\nimport reactTemplate from './lib/react-template.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n  reactTemplate,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","import merge from 'merge';\n\n// TODO: dit werkt alleen als het er 1 is\n\nexport default function({ html='' }) {\n\n  let args = arguments[0];\n  delete args.html;\n\n  let matches = 0;\n\n  Object.keys(args).forEach((key) => {\n\n    let regEx = new RegExp(`^((?:.|\\n|\\r)*)\\\\{${key}\\\\}((?:.|\\n|\\r)*)$`, 'g');\n    let match = regEx.exec(html);\n\n    if (match) {\n      matches++;\n      html = (\n        <span>\n        <span dangerouslySetInnerHTML={{ __html: match[1] }}></span>\n        {args[key]}\n        <span dangerouslySetInnerHTML={{ __html: match[2] }}></span>\n        </span>\n      );\n    }\n\n  });\n\n  if (matches == 0) html = <span dangerouslySetInnerHTML={{ __html: html }}></span>\n  return html;\n  \n}\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nlet roles = {\n  admin: ['admin', 'moderator', 'editor', 'member', 'anonymous', 'all'],\n  moderator: ['moderator', 'editor', 'member', 'anonymous', 'all'],\n  editor: ['editor', 'member', 'anonymous', 'all'],\n  member: ['member', 'anonymous', 'all'],\n  anonymous: ['anonymous', 'all'],\n  all: ['all'],   // special\n  owner: null, // special\n}\n\nexport default function(user, requiredRole) {\n  let userRole = user.role;\n  if (!Object.keys(roles).includes(userRole)) userRole = 'all';\n  return roles[userRole].includes(requiredRole);\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\nimport hasRole from './has-role.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n  hasRole,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from '../../component/index.jsx';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tself.mapIsReady = true;\n\t\t\tvar event = new CustomEvent('osc-map-is-ready', { detail: { id: self.divId } });\n\t\t\tdocument.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap({ ...self.config });\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n    if (self.config.zoomControl == false) {\n      self.map.removeControl(self.map.zoomControl);\n    }\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || amapsCreateClusterIcon.bind(self) // ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t\tself.markerClusterGroup.on('clusterclick', self.onClusterClick);\n\t\t\tself.markerClusterGroup.on('animationend', self.onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tself.map.on('click', self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\n    if (!Array.isArray(points)) {\n      self.map.panTo(new L.LatLng(self.config.center.latitude, self.config.center.longitude));\n      return;\n    }\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n    if (!point) return false;\n    if (!polygon) return true;\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var x = point.lat, y = point.lng;\n\n    var inside = false;\n    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        var xi = polygon[i].lat, yi = polygon[i].lng;\n        var xj = polygon[j].lat, yj = polygon[j].lng;\n\n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonMarkerClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-marker-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterAnimationEnd(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-animation-end', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentNLMap from './component/map.jsx';\n\n// render elements\nOpenStadComponentNLMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentNLMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentNLMap as default,\n  OpenStadComponentNLMap as NLMap,\n};\n\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n  \n  // todo: configurable\n  let markers = cluster.getAllChildMarkers();\n\n  let colors = {}\n  let total = markers.length;\n  let isFaded = false;\n  markers.forEach((entry) => {\n    let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n    let tmp = self.config.types.find(entry => type && ( entry.id == type || entry.name == type ));\n    let color = tmp && ( tmp.color || tmp.backgroundColor ) || '#164995';\n    if ( type == undefined ) type = 'undef'\n    if ( !colors[color] ) colors[color] = 0;\n    colors[color]++;\n    if (entry.data && entry.data.isFaded) isFaded = true;\n  });\n\n  let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n  let soFar = 0;\n  Object.keys(colors).forEach((key) => {\n    let myColor = key;\n    let perc = 100 * colors[key] / total;\n    let angle = (soFar / 100) * 360;\n    \n    html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n    soFar = soFar + perc;\n  });\n\n  html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n  return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPollForm extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      user: {},\n      questionMinLength: 30,\n      questionMaxLength: 500,\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      allowChoiceTitles: true,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      pollId: props.pollId,\n      poll: props.poll,\n      isBusy: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if ( !self.state.poll ) self.fetchData();\n        });\n      });\n    } else {\n      if ( !self.state.poll ) self.fetchData();\n    }\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n    if (!self.state.pollId) {\n      return self.setState({ poll: {\n        question: '',\n        choices: { \"1\": {}, \"2\": {} },\n      }});\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.config.pollId }?withUser=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.poll = json;\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  validatedResult() {\n\n    let self = this;\n    let poll = self.state.poll;\n\n    let questionInput = self['question-input'];\n    let isValid = questionInput.validate();\n    let result = { question: questionInput.state.value, choices: {} };\n\n    Object.keys(poll.choices).forEach((key) => {\n      let titleInput = self[`title-input-${key}`];\n      let descriptionInput = self[`description-input-${key}`];\n      if (!( titleInput && titleInput.state.value ) && !descriptionInput.state.value) return;\n      result.choices[key] = {};\n      if (self.config.allowChoiceTitles && titleInput.state.value) {\n        result.choices[key].title = titleInput.state.value;\n        if (!titleInput.validate()) isValid = false;\n      }\n      if (descriptionInput.state.value) {\n        result.choices[key].description = descriptionInput.state.value;\n        if (!descriptionInput.validate()) isValid = false;\n      }\n    });\n\n    if (!isValid) return null;\n    if (Object.keys(result.choices).length < 2) return null;\n    return result;\n\n  }\n\n  handleOnChange(data) {\n\n    let self = this;\n    let poll = { ...self.state.poll };\n\n    if (data.choice) {\n      poll.choices[ data.choice.id ] = {\n        title: self.config.allowChoiceTitles && data.choice.title,\n        description: data.choice.description,\n      }\n    }\n\n    if (data.question) {\n      poll.question = data.question;\n    }\n\n    this.setState({ poll }, () => {\n    });\n\n  }\n\n  addChoice() {\n    let self = this;\n    let poll = { ...self.state.poll };\n    let keys = Object.keys(poll.choices).sort();\n    let key = parseInt( keys[keys.length-1] ) + 1;\n    poll.choices[ key ] = {};\n    self.setState({ poll })\n  }\n\n  canSubmit() {\n    if (this.state.poll && this.state.poll.can) {\n      return this.state.poll.can.edit;\n    } else {\n      let requiredUserRole = this.config.requiredUserRole;\n      let userRole = this.props.user && this.props.user.role;\n      // todo: owner; dus dit moet anders\n      // todo: nieuwe rollen structuur\n      return  requiredUserRole == 'anonymous' && userRole  ||\n        requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n        requiredUserRole == 'admin' && userRole == 'admin';\n    }\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let validatedResult = self.validatedResult();\n      if (!validatedResult) {\n        self.setState({ isBusy: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let isNew = true;\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll`;\n      let method = 'POST';\n      if (self.state.poll && self.state.poll.id) {\n        url += `/${ self.state.poll.id }`;\n        method = 'PUT';\n        isNew = false;\n      }\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      let body = validatedResult;\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-new-poll-stored', { detail: json });\n          if (!isNew) event = new CustomEvent('osc-poll-edited', { detail: json });\n\n\t\t      document.dispatchEvent(event);\n          if (typeof self.config.onFinished == 'function') {\n            self.config.onFinished(validatedResult);\n          }\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n    \n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue osc-margin-left${ self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button osc-margin-left\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)} >\n        {formIntro}\n\n        <h4>Vraag</h4>\n        <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.questionMinLength, maxLength: self.config.questionMaxLength, placeholder: 'Vraag' }} value={poll.question} onChange={ data => self.handleOnChange({ question: data.value }) } ref={el => (self[`question-input`] = el)}/>\n\n        <h4>Keuzemogelijkheden</h4>\n        <ol className=\"osc-poll-form-choices\">\n          {poll && poll.choices && Object.keys(poll.choices).sort().map((key) => {\n            let choice = poll.choices[key];\n            let titleInputHTML = null;\n            if (self.config.allowChoiceTitles) titleInputHTML = <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.titleMinLength, maxLength: self.config.titleMaxLength, placeholder: 'Titel' }} value={choice.title} onChange={ data => self.handleOnChange({ choice: { id: key, title: data.value } }) } ref={el => (self[`title-input-${key}`] = el)}/>;\n            return (\n              <li className=\"osc-poll-form-choice\" key={`osc-key-${key}`}>\n                {titleInputHTML}\n                <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.descriptionMinLength, maxLength: self.config.descriptionMaxLength, placeholder: 'Beschrijving' }} value={choice.description} onChange={ data => self.handleOnChange({ choice: { id: key, description: data.value } }) } ref={el => (self[`description-input-${key}`] = el)}/>\n              </li>\n            );\n          })}\n        </ol>\n\n        <a className=\"osc-add-choice-button\" onClick={ e => this.addChoice() }>Nog een keuzemogelijkheid toevoegen</a>\n        \n        {submitButtonHTML}\n\n      </div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\nimport OpenStadComponentPollForm from './poll-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPoll extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-poll-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null, // hoort niet hier\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      withPercentage: true,\n      allowChoiceTitles: true,\n      allowShowResultsIfNotVoted: false,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    self.hideEditForm = self.hideEditForm.bind(self);\n\n    self.state = {\n      user: self.config.user,\n      poll: props.poll,\n      pollId: ( props.poll && props.poll.id ) || self.config.pollId,\n      selectedChoice: null,\n      showResult: false,\n      showQuestion: false,\n      editMode: false,\n      showVoteSucceeded: false,\n    };\n\n    if (self.state.poll) {\n      self.parseVoteCount(self.state.poll);\n      if (self.state.poll.userVote) {\n        self.state.selectedChoice = self.state.poll.userVote;\n      }\n    }\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if (!self.state.poll && self.config.ideaId) self.fetchData();\n        });\n      });\n    } else {\n      if (!self.state.poll && self.config.ideaId) self.fetchData();\n    }\n\n    // document.addEventListener('osc-new-reaction-stored', function(event) {\n    //   self.onNewPolltored(event.detail);\n    // });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    if (!self.state.pollId) {\n      // no data: show new poll form\n      return self.setState({ editMode: true }, () =>{\n      })\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.state.pollId }?withUser=1&withUserVote=1&withVoteCount=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state, showResult: false, showQuestion: false, };\n        state.poll = json;\n        state.pollId = json.id;\n\n        self.parseVoteCount(state.poll);\n\n        if (state.poll.userVote) {\n          state.selectedChoice = state.poll.userVote;\n        }\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  parseVoteCount(poll) {\n    let self = this;\n    if (poll.voteCount) {\n      Object.keys(poll.choices).sort().forEach((key) => {\n        let choice = poll.choices[key];\n        choice.votesAbs = poll.voteCount[key]\n        choice.votesPrc = parseInt(100 * ( poll.voteCount[key] / poll.voteCount.total ));\n        choice.votesPrc = choice.votesPrc || 0;\n      });\n    }\n\n  }\n\n  showEditForm() {\n    this.setState({ editMode: true });\n  }\n\n  hideEditForm() {\n    this.setState({\n      editMode: false,\n    }, function() {\n      this.fetchData()\n    });\n  }\n\n  setShowResult() {\n    this.setState({ showResult: true });\n  }\n\n  setShowQuestion() {\n    this.setState({ showQuestion: true });\n  }\n\n  selectChoice(data) {\n    this.setState({ selectedChoice: data.choice });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  isValid() {\n    return !!this.state.selectedChoice;\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.state.user && this.state.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n            requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n            requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitVote() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      if (!self.isValid()) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = 'POST';\n\n      let body = {\n        choice: self.state.selectedChoice,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          self.fetchData( () => {\n            self.setState({ isBusy: false, showVoteSucceeded: true, }, () => {\n\t\t          let event = new CustomEvent('osc-poll-voted', { detail: json });\n\t\t          document.dispatchEvent(event);\n            });\n          });\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n            \n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  deletePoll() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let poll = self.state.poll;\n      if (!( poll && poll.can && poll.can.delete )) return alert('U kunt deze poll niet verwijderen');\n      if (!( poll && poll.id )) return alert('U kunt deze poll niet verwijderen');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }`;\n      let method = 'DELETE';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      fetch(url, {\n        method,\n        headers,\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-poll-deleted', { detail: json });\n\t\t      document.dispatchEvent(event);\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    if (self.state.editMode) {\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          <OpenStadComponentPollForm config={{ ...self.config, onFinished: self.hideEditForm }} pollId={self.state.poll && self.state.poll.id} poll={self.state.poll} user={self.state.user}/>\n        </div>\n      );\n      \n    } else {\n\n      let questionHTML = null;\n      if (( poll && poll.choices && !poll.userVote ) || self.state.showQuestion) {\n        \n        let config = { name: \"pollChoice\", choices: [] };\n        Object.keys(poll.choices).sort().map(key => {\n          let choiceHTML = self.config.allowChoiceTitles && poll.choices[key].title ? `<h4>${poll.choices[key].title}</h4>` : '';\n          choiceHTML += poll.choices[key].description || '';\n          config.choices.push({\n            dangerousDescription: choiceHTML,\n            value: key\n          });\n        })\n\n        let submitButtonHTML = null;\n        if (self.canSubmit()) {\n          submitButtonHTML = (<button onClick={(e) => { if (!self.state.isBusy) self.submitVote(); }} className={`osc-button-blue${ !self.isValid() ? ' osc-disabled' : '' }`} >Stemmen</button>);\n        } else {\n          submitButtonHTML = (<button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-poll-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>);\n        }\n\n        let showResultButtonHTML = null;\n        if (self.config.allowShowResultsIfNotVoted &&  !(poll.userVote || self.state.showResult)) showResultButtonHTML = (<a className=\"osc-show-result-button\" onClick={ e => this.setShowResult() }>Resultaat bekijken</a>);\n\n        questionHTML = (\n          <div className=\"osc-poll-question osc-form\">\n            <OpenStadComponentForms.Radios config={config} value={self.state.selectedChoice} onChange={ data => self.selectChoice({ choice: data.value }) } ref={el => (self.description = el)}/>\n            <div className=\"osc-poll-question-buttons\">\n              {submitButtonHTML}\n              {showResultButtonHTML}\n            </div>\n          </div>\n        );\n      }\n\n      let resultHTML = null;\n      if ( poll && ( poll.userVote || self.state.showResult ) ) {\n\n        let showQuestionButtonHTML = null;\n        if (!self.state.showQuestion && !(poll && poll.choices && !poll.userVote)) showQuestionButtonHTML = (<a className=\"osc-show-question-button\" onClick={ e => this.setShowQuestion() }>Stem aanpassen</a>);\n\n        let totalVotesHTML = null;\n        if (poll.voteCount && poll.voteCount.total) {\n          let xx = poll.voteCount.total == 1 ? 'stem' : 'stemmen';\n          totalVotesHTML = <div>Totaal {poll.voteCount.total} {xx}<br/><br/></div>\n        }\n\n        resultHTML = (\n          <ul className=\"osc-choices\">\n            {Object.keys(poll.choices).sort().map(key => {\n              let choice = poll.choices[key];\n              let titleHTML = null;\n              if (self.config.allowChoiceTitles && choice.title) titleHTML = (<h4>{choice.title}</h4>);\n              let descriptionHTML = null;\n              if (choice.description) descriptionHTML = (<div>{choice.description}</div>);\n              let percentageHTML = null;\n              if (self.config.withPercentage) {\n                percentageHTML = <div className=\"osc-percentage\">{choice.votesPrc}%</div>\n              }\n              let scoreHTML = (\n                <div className=\"osc-choice-default\">\n                  {titleHTML}\n                  {descriptionHTML}\n                  <div className={`osc-choice-bar${self.config.withPercentage ? ' osc-with-percentage' : ''}`}>\n                    <div className=\"osc-choice-bar-mask\"></div>\n                    <div className=\"osc-choice-bar-progress\" style={{ width: ( choice.votesPrc || 0 ) + '%' }}></div>\n                  </div>\n                  { percentageHTML }\n                </div>\n              );\n              return (\n                <li className=\"osc-choice\" key={`osc-key-${key}`}>\n                  {scoreHTML}\n                </li>\n              );\n            })}\n            {totalVotesHTML}\n            {showQuestionButtonHTML}\n          </ul>\n        );\n      }\n\n      let editButtonsHTML = null;\n      if (self.state.poll && self.state.poll.can && self.state.poll.can.edit) {\n        editButtonsHTML =\n          <div className=\"osc-editbuttons\">\n            <button className=\"osc-editbutton osc-edit\" onClick={event => self.showEditForm()}>Bewerk poll</button>\n            <button className=\"osc-editbutton osc-delete\" onClick={event => { if (confirm('Weet u het zeker')) self.deletePoll() }}>Verwijder poll</button>\n          </div>\n      }\n\n      let voteSucceededHTML = null;\n      if (self.state.showVoteSucceeded) {\n        voteSucceededHTML = <div className=\"osc-vote-succeeded\">Uw stem is opgeslagen</div>\n      }\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          {editButtonsHTML}\n          {voteSucceededHTML}\n          <h4>{poll.question}</h4>\n          {questionHTML}\n          {resultHTML}\n          <br/><br/>\n        </div>\n      );\n\n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentPoll from './component/poll.jsx';\n\n// render elements\nOpenStadComponentPoll.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentPoll attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentPoll as default,\n  OpenStadComponentPoll as Poll,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactionForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    \n    self.state = {\n      description: self.config.description || '',\n      isValid: false,\n      isBusy: false,\n    };\n\n  }\n\n  handleOnChange(data) {\n    data = data || {};\n    if (data.description) data.isValid = this.description.isValid();\n    this.setState(data);\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let user = this.props.user || {};\n    return OpenStadComponentLibs.user.hasRole(user, requiredUserRole)\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let isValid = self.description.validate({ showWarning: true });\n      if (!isValid) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument${   self.config.argumentId ? `/${  self.config.argumentId}` : ''}`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = self.config.argumentId ? 'PUT' : 'POST';\n\n      let body = {\n        parentId: self.config.parentId,\n        sentiment: self.config.sentiment,\n        description: self.state.description,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n\n          self.setState({ description: '', isBusy: false, isValid: false }, () => {\n\n            self.description.handleOnChange({ value: '' });\n\n            if (self.config.argumentId) {\n\t\t          let event = new CustomEvent('osc-reaction-edited', { detail: json });\n\t\t          document.dispatchEvent(event);\n            } else {\n\t\t          let event = new CustomEvent('osc-new-reaction-stored', { detail: json });\n\t\t          document.dispatchEvent(event);\n            }\n          });\n\n\n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n\n    let config = {\n      descriptionMinLength: self.config.descriptionMinLength || 30,\n      descriptionMaxLength: self.config.descriptionMaxLength || 500,\n    };\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue${ !self.state.isValid || self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <OpenStadComponentForms.InputWithCounter disabled={this.canSubmit() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ data => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        {submitButtonHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reaction-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n    };\n\n    self.config = Object.assign(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      isMenuActive: false,\n      isReplyFromActive: false,\n      editMode: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true });\n  }\n\n  toggleReplyForm() {\n    this.setState({ isReplyFromActive: !this.state.isReplyFromActive });\n  }\n\n  toggleEditForm(what) {\n    this.setState({ editMode: !this.state.editMode });\n  }\n\n  canEdit() {\n    return this.props.data.can.edit;\n  }\n\n  canDelete() {\n    return this.props.data.can.delete;\n  }\n\n  canLike() {\n    if (this.config.isClosed) return false;\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    return (( requiredUserRole == 'anonymous' && userRole ) ||\n            ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n            ( requiredUserRole == 'admin' && userRole == 'admin'));\n  }\n\n  canReply() {\n    return this.props.data.can.reply;\n  }\n\n  submitDelete() {\n\n    let self = this;\n\n    if (!self.canDelete()) return alert('U kunt deze reactie niet verwijderen');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id}`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'DELETE',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        self.setState({ isDeleted: true });\n\n\t\t    let event = new CustomEvent('osc-reaction-deleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  submitLike() {\n\n    let self = this;\n\n    if (!self.canLike()) return alert('U kunt deze reactie niet liken');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id  }/vote`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        // console.log({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n        self.setState({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.setState({ isMenuActive: false, isReplyFromActive: false });\n  }\n\n  onReactionEdited(reaction) {\n    if (reaction.id == this.props.data.id) {\n      this.setState({ editMode: false, isMenuActive: false });\n    }\n  }\n\n  render() {\n\n    let self = this;\n    let data = self.props.data || { can: {} };\n\n    if (data.isDeleted) return null;\n\n    console.log('--------------------');\n    console.log(data.user);\n    let isAdmin = OpenStadComponentLibs.user.hasRole(data.user, 'editor') ? 'osc-is-admin' : '';\n    let metadataHTML = <div className={`osc-reaction-user ${isAdmin}`}>{data.user.nickName || data.user.fullName || `${data.user.firstName } ${  data.user.lastName}`}</div>\n\n    let menuHTML = null;\n    if ( self.canEdit() && self.canDelete() ) {\n      menuHTML = (\n        <div className={ `osc-reaction-menu${   self.state.isMenuActive ? ' osc-reaction-hamburger-active' : ''}` } onClick={ () => { self.showMenu(); }}>\n          <a className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete(); } }/>\n          <a className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.toggleEditForm() }/>\n        </div>\n      );\n    }\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{data.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: data.description, argumentId: data.id }} user={self.state.user} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    let likeButtonHTML = null;\n    if (!data.parentId) {\n      likeButtonHTML = (\n\t\t\t  <a className={ `osc-reaction-like-button${ ( typeof self.state.hasUserVoted != 'undefined' ? self.state.hasUserVoted : data.hasUserVoted ) ? ' osc-reaction-like-button-hasvoted' : ''}` } onClick={ () => self.submitLike() }>\n\t\t\t\t  Mee eens (<span>{( typeof self.state.yes != 'undefined' ? self.state.yes : data.yes ) | 0}</span>)\n        </a>\n      );\n    }\n\n    let replyButtonHTML = null;\n    let replyFormHTML = null;\n    if (self.canReply() && !self.config.isClosed) {\n      replyButtonHTML = (<a onClick={ () => self.toggleReplyForm() } className=\"osc-reply-button\">Reageren</a>);\n      if (self.state.isReplyFromActive) {\n        let config = { ...self.config, parentId: data.id };\n        config.formIntro = '';\n        replyFormHTML = (\n\t\t\t    <div id={`osc-reaction-${data.id}`} className=\"osc-reply\">\n            <OpenStadComponentReactionForm config={config} user={self.state.user} ref={el => (self.editForm = el)}/>\n          </div>\n        );\n      }\n    }\n\n    let repliesHTML = null;\n    if (data.reactions && data.reactions.length) {\n      repliesHTML = (\n        <ul className=\"osc-reactions-list\">\n          {data.reactions.map((reaction) => {\n\n            let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n            return (\n              <li key={key}>\n                <OpenStadComponentReaction config={self.config} className=\"osc-reply\" user={self.state.user} data={reaction}/>\n              </li>\n            );\n\n          })}\n        </ul>\n      );\n    }\n\n    return (\n      <div>\n\n\t\t\t  <div id={`osc-reaction-${data.id}`} className={ self.props.className || 'osc-reaction' }>\n\n          {menuHTML}\n\n          {metadataHTML}\n\t\t\t\t  <div className=\"osc-reaction-date\">{data.createDateHumanized}</div>\n          {descriptionHTML}\n\n          {likeButtonHTML}\n\t\t\t    {replyButtonHTML}\n\n\t\t    </div>\n\n\t\t\t  {replyFormHTML}\n        {repliesHTML}\n\n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\nimport OpenStadComponentReaction from './reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reactions-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      scrollToNewReaction: true,\n      isClosed: false,\n      closedText: 'De reactiemogelijkheid is gesloten',\n      sentiment: undefined,\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n\n    self.state = {\n      user: self.config.user,\n      reactions: [],\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          self.fetchData();\n        });\n      });\n    } else {\n      self.fetchData();\n    }\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n    this.deletedListener = document.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.deletedListener);\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument?sentiment=${  self.config.sentiment  }&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.reactions = json;\n        state.reactions.sort((a, b) => {\n          return a.createdAt < b.createdAt;\n        });\n        // console.log(state.reactions);\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.fetchData(() => {\n      if (this.config.scrollToNewReaction) {\n        let element = document.getElementById(`osc-reaction-${  reaction.id}`);\n        if ( element ) document.getElementById(`osc-reaction-${  reaction.id}`).scrollIntoView();\n      }\n    });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  onReactionDeleted(reaction) {\n    this.fetchData();\n  }\n\n  render() {\n\n    let self = this;\n\n    let reactions =\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n          let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} user={self.state.user} data={{ ...reaction }}/>\n            </li>\n          );\n\n        })}\n      </ul>;\n\n    let title = self.config.title ? <h3>{self.config.title}</h3> : null;\n\n    let reactionFormHTML = <OpenStadComponentReactionForm config={self.config} user={self.state.user}/>;\n    if (self.config.isClosed) {\n      if (self.config.closedText) {\n        reactionFormHTML = <div className=\"osc-closed-text\">{self.config.closedText}</div>\n      } else {\n        reactionFormHTML = null\n      }\n    }\n\n    return (\n      <div id={this.id} className={self.props.className || 'osc-reactions'} ref={(el) => { this.instance = el; }} >\n\n        {title}\n\n        {reactionFormHTML}\n\n        {reactions}\n        <br/><br/>\n\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentReactions from './component/reactions.jsx';\n\n// render elements\nOpenStadComponentReactions.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentReactions as default,\n  OpenStadComponentReactions as Reactions,\n};\n\n","/* (ignored) */","(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());"],"sourceRoot":""}
>>>>>>> hotfix/004-choices-guide-results
=======
{"version":3,"sources":["webpack://OpenStadComponents/webpack/bootstrap","webpack://OpenStadComponents/./node_modules/custom-event-polyfill/polyfill.js","webpack://OpenStadComponents/./node_modules/es6-promise-promise/index.js","webpack://OpenStadComponents/./node_modules/es6-promise/dist/es6-promise.js","webpack://OpenStadComponents/./node_modules/merge/merge.js","webpack://OpenStadComponents/./node_modules/process/browser.js","webpack://OpenStadComponents/(webpack)/buildin/global.js","webpack://OpenStadComponents/(webpack)/buildin/module.js","webpack://OpenStadComponents/./node_modules/whatwg-fetch/fetch.js","webpack://OpenStadComponents/./src/component/index.jsx","webpack://OpenStadComponents/./src/forms/component/default-input.jsx","webpack://OpenStadComponents/./src/forms/component/form-field.jsx","webpack://OpenStadComponents/./src/forms/component/form.jsx","webpack://OpenStadComponents/./src/forms/component/hidden.jsx","webpack://OpenStadComponents/./src/forms/component/htmlarea.jsx","webpack://OpenStadComponents/./src/forms/component/image-upload.jsx","webpack://OpenStadComponents/./src/forms/component/input-with-counter.jsx","webpack://OpenStadComponents/./src/forms/component/postcode.jsx","webpack://OpenStadComponents/./src/forms/component/radios.jsx","webpack://OpenStadComponents/./src/forms/component/select.jsx","webpack://OpenStadComponents/./src/forms/component/slider.jsx","webpack://OpenStadComponents/./src/forms/component/textarea.jsx","webpack://OpenStadComponents/./src/forms/component/textinput.jsx","webpack://OpenStadComponents/./src/forms/css/default.less","webpack://OpenStadComponents/./src/forms/index.jsx","webpack://OpenStadComponents/./src/idea-details/component/idea-details.jsx","webpack://OpenStadComponents/./src/idea-details/component/vote-button.jsx","webpack://OpenStadComponents/./src/idea-details/css/default.less","webpack://OpenStadComponents/./src/idea-details/index.jsx","webpack://OpenStadComponents/./src/idea-image/component/idea-image.jsx","webpack://OpenStadComponents/./src/idea-image/css/default.less","webpack://OpenStadComponents/./src/idea-image/index.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/filterbar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-on-map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-bar/idea-form.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-bar/ideas-list.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-bar/info-bar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-bar/preview.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/search.jsx","webpack://OpenStadComponents/./src/ideas-on-map/css/default.less","webpack://OpenStadComponents/./src/ideas-on-map/index.jsx","webpack://OpenStadComponents/./src/libs/css/default.less","webpack://OpenStadComponents/./src/libs/index.jsx","webpack://OpenStadComponents/./src/libs/lib/api/get-headers.js","webpack://OpenStadComponents/./src/libs/lib/api/index.js","webpack://OpenStadComponents/./src/libs/lib/local-storage.js","webpack://OpenStadComponents/./src/libs/lib/react-template.js","webpack://OpenStadComponents/./src/libs/lib/session-storage.js","webpack://OpenStadComponents/./src/libs/lib/user/get-jwt.js","webpack://OpenStadComponents/./src/libs/lib/user/get-user.js","webpack://OpenStadComponents/./src/libs/lib/user/has-role.js","webpack://OpenStadComponents/./src/libs/lib/user/index.js","webpack://OpenStadComponents/./src/libs/lib/user/logout.js","webpack://OpenStadComponents/./src/nlmap/component/map.jsx","webpack://OpenStadComponents/./src/nlmap/css/default.less","webpack://OpenStadComponents/./src/nlmap/index.jsx","webpack://OpenStadComponents/./src/nlmap/lib/amaps-cluster-icon.js","webpack://OpenStadComponents/./src/poll/component/poll-form.jsx","webpack://OpenStadComponents/./src/poll/component/poll.jsx","webpack://OpenStadComponents/./src/poll/css/default.less","webpack://OpenStadComponents/./src/poll/index.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction-form.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction.jsx","webpack://OpenStadComponents/./src/reactions/component/reactions.jsx","webpack://OpenStadComponents/./src/reactions/css/default.less","webpack://OpenStadComponents/./src/reactions/index.jsx","webpack://OpenStadComponents/vertx (ignored)","webpack://OpenStadComponents/external \"React\"","webpack://OpenStadComponents/external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","defaultConfig","siteId","api","url","headers","isUserLoggedIn","user","merge","recursive","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentDefaultInput","choices","placeholder","disabled","required","state","error","onChange","showErrors","isValid","setState","data","validate","OpenStadComponentFormField","inputType","validateAction","changeAction","title","description","toLowerCase","undefined","handleOnChange","bind","input","titleHTML","descriptionHTML","__html","fieldHTML","el","instance","OpenStadComponentForm","intro","fields","values","firstInvalid","field","scrollIntoView","behavior","introHTML","fieldsHTML","length","map","fieldConfig","i","OpenStadComponentSelect","e","OpenStadComponentHTMLArea","onKeyUpx","filterHTML","innerHTML","replace","command","args","preventDefault","stopPropagation","document","execCommand","onKeyUp","onFocus","onBlur","executeAction","prompt","EditButton","cmd","evt","arg","allowMultiple","imageserver","process","fetch","uploadedFiles","image","push","source","options","type","file","metadata","poster","_loadedFiles","files","loadNextFile","element","createElement","src","async","onload","body","appendChild","fileUploaderInit","imageuploader","getFiles","images","serverId","containerElement","querySelector","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","filePondSettings","acceptedFileTypes","allowFileSizeValidation","allowReorder","styleItemPanelAspectRatio","maxFileSize","maxFiles","allowBrowse","server","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","addEventListener","detail","console","log","fileUploaderUpdateCurrentInput","formfields","addFiles","errorHTML","FormfieldInputWithCounter","minLength","maxLength","focused","valueLength","useKey","onInputFocus","onInputBlur","onInputKeyUp","warning","showWarning","counter","inputHTML","OpenStadComponentPostcode","match","OpenStadComponentRadios","choice","dangerousDescription","Slider","touched","handleChange","event","target","min","max","range","progInRange","step","className","transform","calcProgress","doTouch","OpenStadComponentText","Form","FormField","Hidden","ImageUpload","InputWithCounter","Postcode","Radios","Select","Text","Textarea","IdeasDetails","ideaId","idea","showVoteButtons","showLabels","allowMultipleImages","shareChannelsSelection","argument","isActive","poll","canAddPolls","labels","types","typeLabel","showPollForm","reactionStoredListener","onReactionStored","reactionDeletedListener","onReactionDeleted","pollCreatedListener","onPollCreated","pollDeletedListener","onPollDeleted","fetchData","removeEventListener","editIdeaLink","location","href","CustomEvent","dispatchEvent","argCount","hidePollForm","OpenStadComponentLibs","getHeaders","then","response","ok","Error","json","localStorage","get","hash","set","role","method","afterDeleteIdeaLink","labelHTML","typeId","extraData","typeDef","find","def","labelText","label","backgroundColor","textColor","color","pollHTML","addPollButtonHTML","can","edit","dispatchAddPollClick","voteButtonsHTML","text","opinion","yes","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","reactionsCountHTML","reactionsHTML","ignoreReactionsForIdeaIds","RegExp","isClosed","closeReactionsForIdeaIds","loginUrl","authorHTML","nickName","fullName","firstName","lastName","linkToUserPageUrl","shareButtonsHTML","facebookButtonHTML","includes","encodeURIComponent","twitterButtonHTML","mailButtonHTML","eval","titleField","whatsappButtonHTML","createDateHumanized","theme","summary","VoteButton","busy","votePending","doVote","remove","stringify","change","userVote","alert","message","value000","value00","value0","OpenStadComponentIdeaDetails","renderElement","elem","ReactDOM","render","OpenStadComponentIdeaImage","currentImageIndex","width","offsetWidth","which","posterImage","backgroundImage","thumb","height","left","zIndex","setCurrentImageIndex","Filterbar","typesFilterLabel","areas","assign","selectedType","selectedArea","mobileActiveSelector","hideMobileActiveSelector","area","handleTypeChange","handleAreaChange","showMobileActiveSelector","areasHTML","areasButtonHTML","toggleMobileActiveSelector","areaSelector","typeSelector","resetTypeAndArea","resetButton","OpenStadComponentIdeasOnMap","displayType","displayWidth","displayHeight","canSelectLocation","typeField","summaryField","canAddNewIdeas","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","descriptionMinLength","descriptionMaxLength","formIntro","requiredUserRole","content","ideaName","doSearchFunction","doSearch","entry","mapicon","listicon","buttonicon","ideas","visibleIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","currentMouseOverIdea","hideIdeaDetails","showIdeaDetails","on","onChangeMapBoundaries","onMapClick","onMarkerClick","onClusterClick","onChangeTypeFilter","onUpdateSelectedIdea","setSelectedLocation","onNewIdeaClick","onSelectedIdeaClick","onClickMobileSwitcher","onUpdateEditIdea","onIdeaClick","onMouseOverListItem","onMouseOutListItem","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","showIdeaSelected","markers","marker","removeMarker","filter","addIdea","setBoundsAndCenter","startWithListOpenOnMobile","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","newIdea","split","val","substring","decodeURIComponent","showIdeaForm","infobar","hideMarkers","exception","lat","coordinates","lng","next","formUrl","address","searchValue","callback","searchValueLc","searchResult","locations","titlelLc","summaryLc","onClick","docs","found","weergavenaam","onClickAddress","centroide_ll","panTo","L","LatLng","latlng","getVisibleIdeas","ideaform","handleLocationChange","getPointInfo","_display","unfadeAllMarkers","isPointInPolygon","polygon","fadeMarkers","updateIdeas","x","sortOrder","hideSortButton","center","forceSelectLocation","updateFading","scrollTo","setTimeout","setFilter","infoHTML","mobilePopupHTML","onClickBackToOverview","hideIdeaForm","display","filterbar","divStyle","simpleHTML","buttonHTML","linkToCompleteUrl","position","top","right","bottom","zoomControl","IdeasForm","showFormErrorsWarning","isBusy","descriptionField","imageField","hasRole","auth","createableBy","dispatchUpdateEditIdea","style","formValues","form","getValues","validateIdea","formErrorsWarningHTML","formHTML","submitIdea","submitButton","IdeasList","sort","sortOptions","showSortButton","defaultSortOrder","currentSortOrder","a","b","ranking","Date","createdAt","getTime","_distance","sqrt","pow","slice","newMouseOverIdeaId","sortSelector","setSortOrder","option","titleHML","ideaTypeValue","html","voteCountHTML","argcountHTML","dispatchMouseOverListItem","dispatchMouseOutListItem","InfoBar","noSelectionHTML","noSelectionLoggedInHTML","noSelectionNotLoggedInHTML","list","ideadetails","titleAddition","mobileSwitcherHTML","mobileTitle","dispatchClickMobileSwitcher","dispatchOnIdeaClick","Preview","selectionActiveLoggedInHTML","selectionInactiveLoggedInHTML","selectionActiveNotLoggedInHTML","selectionInactiveNotLoggedInHTML","mobilePreviewLoggedInHTML","mobilePreviewNotLoggedInHTML","showNoSelectionOnMobile","what","contentHTML","addButton","loginButton","loginLink","newIdeaButton","reactTemplate","selectedLocationHTML","selectedIdeaHTML","buttonBgHTML","dispatchNewIdeaClick","buttonLabel","dispatchClosePreview","dispatchSelectedIdeaClick","defaultBlockHTML","Map","clustering","maxClusterRadius","showCoverageOnHover","autoZoomAndCenter","onMapClusterAnimationEnd","typename","icondef","icon","anchor","divIcon","iconSize","point","iconAnchor","addMarker","visible","getBounds","contains","getLatLng","selectedLocationMarker","updateMarker","doNotCluster","points","keepCenter","showMarker","_latlng","hideMarker","isFaded","visibleParent","markerClusterGroup","getVisibleParent","ignore","getAllChildMarkers","m","setOpacity","OpenStadComponentNLMap","Search","doSearchx","showSuggestions","updateSearchValue","updateSearchResult","inputfield","focus","suggestionsHTML","suggestions","result","$0","onSuggestionClick","hideSuggestions","handleButtonClick","sessionStorage","jwt","getJWT","OpenStadComponentAPI","oscLocalStorage","getItem","setItem","removeItem","arguments","matches","regEx","exec","oscSessionStorage","search","roles","admin","moderator","editor","member","anonymous","all","owner","requiredRole","userRole","OpenStadComponentUser","getUser","logout","latitude","longitude","zoom","zoomposition","disableDefaultUI","variant","createMap","mapIsReady","rel","amaps","nlmaps","removeControl","iconCreateFunction","amapsCreateClusterIcon","onClusterAnimationEnd","addLayer","createCutoutPolygon","centerOn","editorMarker","markerData","index","indexOf","splice","removeLayer","newData","newLatLng","setLatLng","cluster","count","getChildCount","bounds","getCenter","smallest","y","sin","cos","bearing","atan2","PI","concat","delta1","delta2","outerBox","polygonStyle","Array","isArray","poly","latLngBounds","fitBounds","addTo","filterFuntion","filterFunction","applyFilter","inside","j","xi","yi","xj","yj","intersect","bagApiUrl1","bagApiUrl2","results","landelijk_id","colors","total","tmp","soFar","myColor","perc","angle","OpenStadComponentPollForm","questionMinLength","questionMaxLength","allowChoiceTitles","pollId","question","messages","questionInput","titleInput","descriptionInput","validatedResult","canSubmit","isNew","onFinished","submitButtonHTML","submitForm","titleInputHTML","addChoice","OpenStadComponentPoll","withPercentage","allowShowResultsIfNotVoted","hideEditForm","selectedChoice","showResult","showQuestion","editMode","showVoteSucceeded","parseVoteCount","voteCount","votesAbs","votesPrc","reaction","onSubmit","questionHTML","choiceHTML","submitVote","showResultButtonHTML","setShowResult","selectChoice","resultHTML","showQuestionButtonHTML","setShowQuestion","totalVotesHTML","xx","percentageHTML","scoreHTML","showEditForm","deletePoll","voteSucceededHTML","OpenStadComponentReactionForm","argumentId","parentId","sentiment","OpenStadComponentReaction","isMenuActive","isReplyFromActive","storedListener","onNewReactionStored","editedListener","onReactionEdited","reply","canDelete","isDeleted","canLike","hasUserVoted","menuHTML","canEdit","showMenu","submitDelete","toggleEditForm","editForm","likeButtonHTML","submitLike","replyButtonHTML","replyFormHTML","canReply","toggleReplyForm","repliesHTML","reactions","OpenStadComponentReactions","scrollToNewReaction","closedText","deletedListener","getElementById","reactionFormHTML"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,CAAC;;;;;;;;;;;;ACpDD,iBAAiB,mBAAO,CAAC,mEAAa;;;;;;;;;;;;ACAtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAA4D;AAChE,IAAI,SAC+B;AACnC,CAAC,qBAAqB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAC,CAAC,cAAO;AACzB;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,yCAAyC,UAAc;AACxD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uCAAuC;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD,oC;;;;;;;;;;;;ACjoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;;AAE9B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;;AAEZ;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,CAAC,EAAE,KAA0B,oE;;;;;;;;;;;;AChL7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,0BAA0B,eAAe;AACtE;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","file":"ideas-on-map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ideas-on-map/index.jsx\");\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","module.exports = require('es6-promise').Promise;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   3.3.1\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  return function () {\n    vertxNext(flush);\n  };\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\npolyfill();\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import merge from 'merge';\nimport React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n\t\t// config\n    self.config = self.config || props.config;\n    if (typeof self.config == 'string') {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\t\tlet defaultConfig = {\n      siteId: null,\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      user: {},\n    }\n\t\tself.config = merge.recursive(defaultConfig, self.config, self.props.config || {})\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = self;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentDefaultInput extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      choices: [],\n\t\t\tname: '',\n      placeholder: '',\n      disabled: false,\n      required: false,\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      value: props.value,\n      error: null,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate({ showErrors }) {\n\t\tlet isValid = this.config.required ? !!this.state.value : true;\n    let error = '';\n    if (!isValid && showErrors) error = true;\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n\thandleOnChange(data) {\n\t\tlet self = this;\n    data = data || {};\n\t\tself.setState(data, () => {\n      self.validate({});\n    })\n\t\tif (typeof self.onChange == 'function') {\n\t\t\tself.onChange({ name: self.config.name, value: data.value });\n\t\t}\n\t}\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\nimport OpenStadComponentHidden from './hidden.jsx';\nimport OpenStadComponentImageUpload from './image-upload.jsx';\nimport OpenStadComponentInputWithCounter from './input-with-counter.jsx';\nimport OpenStadComponentRadios from './radios.jsx';\nimport OpenStadComponentPostcode from './postcode.jsx';\nimport OpenStadComponentSelect from './select.jsx';\nimport OpenStadComponentText from './textinput.jsx';\nimport OpenStadComponentTextArea from './textarea.jsx';\n\nexport default class OpenStadComponentFormField extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      inputType: null,\n\n      validateAction: null,\n      changeAction: null,\n      required: false,\n\n      title: null,\n      description: null,\n      choices: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.name = self.config.name || self.config.title.toLowerCase();\n\n    self.state = {\n      value: props.value || undefined,\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(self);\n\n    self.onChange = props.onChange;\n\n  }\n  \n\tvalidate({ showErrors }) {\n    return this.input ? this.input.validate({ showErrors }) : true;\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"form field change\", data);\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h3 className=\"osc-form-title\">{self.config.title}</h3>\n    }\n\n    let descriptionHTML = null;\n    if (self.config.description) {\n      descriptionHTML = <div className=\"osc-form-description\" dangerouslySetInnerHTML={{ __html: self.config.description }}></div>\n    }\n\n    let fieldHTML = null;\n\n    switch (self.config.inputType) {\n\n      case 'hidden':\n        fieldHTML = <OpenStadComponentHidden config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'html-with-counter':\n      case 'htmlarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'htmlarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'image-upload':\n        fieldHTML = <OpenStadComponentImageUpload config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'input-with-counter':\n      case 'text-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ inputType: 'input', ...self.config }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'postcode':\n        fieldHTML = <OpenStadComponentPostcode config={self.config} onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'radios':\n        fieldHTML = <OpenStadComponentRadios config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'select':\n      case 'multiple-choice':\n        fieldHTML = <OpenStadComponentSelect config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'text':\n        fieldHTML = <OpenStadComponentText config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea':\n        fieldHTML = <OpenStadComponentTextArea config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'textarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      default:\n    }\n\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-form-field\">\n\t\t\t\t{titleHTML}\n\t\t\t\t{descriptionHTML}\n\t\t\t\t{fieldHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentFormField from './form-field.jsx';\n\nexport default class OpenStadComponentForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      // validateAction: null,\n      // submitAction: null,\n      title: null,\n      intro: null,\n      fields: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      values: props.values|| {},\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(this);\n\n    self.fields = [];\n\n  }\n  \n\tgetValues() {\n    return this.state.values;\n\t}\n\n\tvalidate({ showErrors }) {\n    let self= this;\n    let isValid = true;\n    let firstInvalid = null\n    self.fields.forEach((field) => {\n      if (!field.validate({ showErrors })) {\n        isValid = false;\n        if (!firstInvalid) firstInvalid = field;\n      }\n    });\n\n    if (firstInvalid && firstInvalid.instance && firstInvalid.instance.scrollIntoView) firstInvalid.instance.scrollIntoView({behavior: 'smooth'});\n    // console.log(isValid);\n    return isValid;    \n\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"formchange\", data);\n    let self = this;\n    let values = { ...this.state.values };\n    values[data.name] = data.value;\n\t\tthis.setState({ values });\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h2 className=\"osc-form-title\">{self.config.title}</h2>\n    }\n\n    let introHTML = null;\n    if (self.config.intro) {\n      introHTML = <div className=\"osc-form-intro\" dangerouslySetInnerHTML={{ __html: self.config.intro }}></div>\n    }\n\n    let fieldsHTML = null;\n    if (self.config.fields && self.config.fields.length) {\n      fieldsHTML =\n        <div className=\"osc-form-fields\">\n          { self.config.fields.map((fieldConfig, i) => {\n            return <OpenStadComponentFormField config={fieldConfig} onChange={self.handleOnChange} ref={el => (self.input = el)} key={`osc-form-field-${i}`}  ref={el => { self.fields[i] = el; }}/>\n          })}\n        </div>\n    }\n\n    return (\n\t\t\t<div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)}>\n\t\t\t\t{titleHTML}\n\t\t\t\t{introHTML}\n\t\t\t\t{fieldsHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n    \n    return (\n\t\t\t<input type=\"hidden\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// TODO: it is probably not ok to write your own html editor, but after intergrating ckeditor or react-rte the build was (more than) twice as large; a bettter solution must be possible\n\n'use strict';\n\nexport default class OpenStadComponentHTMLArea extends React.Component  {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.props.value,\n\t  };\n\n    this.onKeyUpx = this.onKeyUpx.bind(this);\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let value = this.props.value;\n    value = this.filterHTML(value);\n    this.input.innerHTML = value;\n  }\n\n  filterHTML(value) {\n    value = value.replace(/<(\\/?\\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\\s*\\/?)>/g, \"[[[$1]]]\");\n    value = value.replace(/<[^>]+>/g, \"\");\n    value = value.replace(/\\[\\[\\[([^\\]]+)\\]\\]\\]/g, \"<$1>\");\n    return value;\n  }\n\n  executeAction(e, command, args) {\n    e.preventDefault()\n    e.stopPropagation();\n    document.execCommand(command,false,args);\n    this.onKeyUp();\n  }\n  \n  onFocus(e) {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  onBlur(e) {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n    if (this.props.onChange) {\n      this.props.onChange({ value: this.state.value });\n    }\n  }\n\n  onKeyUpx() {\n    let value = this.input.innerHTML;\n    value = this.filterHTML(value);\n    this.setState({ value })\n    if (this.props.onKeyUp) {\n      this.props.onKeyUp(value);\n    }\n  }\n  \n  render () {\n    return (\n      <div className=\"osc-html-editor\">\n        <div className=\"osc-html-editor-buttons\">\n          <div className=\"osc-html-editor-button osc-html-editor-button-bold\" onMouseDown={e => this.executeAction(e, 'bold')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-italic\" onMouseDown={e => this.executeAction(e, 'italic')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-insertunorderedlist\" onMouseDown={e => this.executeAction(e, 'insertunorderedlist')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-createlink\" onMouseDown={e => this.executeAction(e, 'createlink', prompt('Lank naar','http://'))}>&nbsp;</div>\n        </div>\n        <div className=\"osc-html-editor-content\" contentEditable={true}\n             onFocus={ e => this.onFocus(e)}\n             onBlur={ e => this.onBlur(e)}\n             onKeyUp={ e => this.onKeyUpx()}\n             // dangerouslySetInnerHTML={{ __html: this.state.value }}\n             ref={el => (this.input = el)}\n        />\n      </div>\n    );\n  }\n\n}\n\nfunction EditButton(props) {\n  return (\n    <button\n      key={props.cmd}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      {props.name || props.cmd}\n    </button>\n  );\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      allowMultiple: false,\n\t\t\timageserver: {\n\t\t\t\tprocess: '',\n\t\t\t\tfetch: ''\n\t\t\t},\n    };\n\t\tthis.config = merge.recursive(defaultConfig, this.props.config, this.config || {});\n\n    var uploadedFiles = [];\n    let value = props.value || [];\n    value.forEach((image) => {\n      uploadedFiles.push({\n        source: { url: image },\n        options : {\n          type: 'local',\n          // mock file information\n          file: {\n            name: image,\n            //\t\t size: 3001025,\n            //\t type: 'image/png'\n          },\n          metadata: {\n            poster: image,\n          }\n        }\n      })\n    });\n\n    this.state = {\n      uploadedFiles: uploadedFiles,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond files\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\n  }\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar containerElement = document.querySelector('.osc-image-upload-container');\n\t\tif (containerElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\t// FilePond.setOptions({\n\t\t\t//   server: 'https://image-server2.openstadsdeel.nl/image/?access_token=MHhfb5U0m8vquAR81p',\n\t\t\t// });\n      \n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n        allowMultiple: this.config.allowMultiple,\n        allowReorder: true,\n        styleItemPanelAspectRatio: 1,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 5,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: this.state.uploadedFiles,\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: this.config.imageserver.process,\n\t\t\t\t\tfetch: this.config.imageserver.fetch,\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(containerElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = typeof image.serverId == 'string' ? JSON.parse(image.serverId) : image.serverId;\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.onChange({name: self.config.name, value: self.state.value})\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen afbeelding geupload</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-image-upload-container\">\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n//import CKEditor from '@ckeditor/ckeditor5-react';\n//import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport HTMLArea from './htmlarea.jsx';\n\n'use strict';\n\nexport default class FormfieldInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value && props.value.length || 0,\n\t\t};\n\n    self.key = props.useKey || ( self.id || 'osc-input-with-counter-' ) + parseInt( 10000000 * Math.random );\n\n    this.onChange = props.onChange;\n\n    self.handleOnChange = self.handleOnChange.bind(this)\n    self.onInputFocus = self.onInputFocus.bind(this)\n    self.onInputBlur = self.onInputBlur.bind(this)\n    self.onInputKeyUp = self.onInputKeyUp.bind(this)\n\n  }\n\n\tisValid() {\n\t\tlet state = {};\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `De tekst is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `De tekst is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n  }\n\n\tvalidate() {\n\t\tthis.setState({ showWarning: true })\n\t\treturn this.isValid();\n\t}\n  \n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange({ name: this.config.name, value: data.value });\n\t\t}\n\t}\n\n\tonInputFocus() {\n\t\tlet state = {};\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputBlur() {\n\t\tlet state = {};\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputKeyUp(value) {\n\t\tlet state = {};\n\t\tstate.value = value || this.input.value;\n\t\tlet valueLength = state.value.length;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n        \n      case 'htmlarea':\n        inputHTML = (\n          <HTMLArea\n            value={this.state.value}\n            onChange={self.handleOnChange}\n            onFocus={self.onInputFocus}\n            onBlur={self.onInputBlur}\n            onKeyUp={self.onInputKeyUp}\n          />\n        );\n        // inputHTML = (\n        //   <CKEditor\n        //     editor={ ClassicEditor }\n        //     config={{ toolbar: [ 'h3', 'bold', 'italic', 'link' ] }}\n        //     data={this.state.value}\n        //     onInit={ editor => {\n        //       // TODO: betere selector\n        //       document.querySelector('.ck-content').addEventListener('keyup', function(e) {\n        //         self.onInputKeyUp(e, editor.getData())\n        //       })\n        //     }}\n        //     onChange={( event, editor ) => self.handleOnChange({ value: editor.getData() })}\n        //     onFocus={e => self.onInputFocus(e)}\n        //     onBlur={e => self.onInputBlur(e)}\n        //   />\n        // );\n        break;\n        \n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentPostcode extends OpenStadComponentDefaultInput {\n\n\tvalidate({ showErrors }) {\n    \n\t\tlet isValid = true;\n    let error = '';\n    if (!this.state.value || !this.state.value.match(/^\\s*\\d{4}\\s*[a-zA-Z][a-zA-Z]\\s*$/)) {\n      isValid = false;\n      if (showErrors) error = 'Dit is geen postcode';\n    }\n    if (this.config.required && !this.state.value) {\n      isValid = false;\n      if (showErrors) error = 'Je hebt nog niets ingevuld';\n    }\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n  render() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">{self.state.error}</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentRadios extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-radios\">\n        {self.config.choices.map( choice => {\n          if (choice.dangerousDescription) {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\" dangerouslySetInnerHTML={{ __html: choice.dangerousDescription }}/></div>\n          } else {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\">{choice.dangerousDescription ? null : choice.description || choice.title || choice.value}</div></div>\n          }\n        })}\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  componentDidMount() {\n    // init value\n    let value = this.state.value || ( this.config.choices[0] && this.config.choices[0].value );\n    this.handleOnChange({ value })\n  }\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-select\">\n\t\t\t  <select value={this.state.value || ''} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>\n          {self.config.choices.map( choice => {\n            return <option value={choice.value || ''} key={choice.value}>{choice.description || choice.title || choice.value}</option>\n          })}\n        </select>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import React from \"react\"\n\nclass Slider extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: this.props.value,\n      touched: this.props.touched || false,\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const { value } = event.target\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(value)\n    }\n    \n    this.setState({value, touched: true})\n  }\n\n  doTouch() {\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(50)\n    }\n\n    this.setState({touched: true})\n\n  }\n\n  calcProgress(min, max, value) {\n    const range = max - min\n    const progInRange = value - min\n    return ((progInRange*2)/range)-1\n  }\n\n  render(){\n    let self = this;\n    const { value, touched } = self.state\n    const { min, max, step } = self.props\n    return(\n      <div className={`${self.props.className} osc-slider`}>\n        <div className=\"osc-slider-track-container\">\n          <div className=\"osc-slider-track\"></div>\n          <div className=\"osc-slider-track-progress-container\">\n            <div className=\"osc-slider-track-progress\" style={{ transform: 'scaleX(' + self.calcProgress(min, max, value) + ')' }}></div>\n          </div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-left\"></div>\n          <div className=\"osc-slider-track-dot-start osc-slider-track-dot-center\"></div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-right\"></div>\n        </div>\n        <input type='range' min={min} max={max} step={step} value={value} onClick={() => { if (!touched) self.doTouch(); } } onChange={self.handleChange} className={touched ? 'osc-slider-input-range' : 'osc-slider-input-range osc-slider-untouched'} ref={el => (self.input = el)}/>\n      </div>\n    )\n  }\n}\n\nexport default Slider;\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textarea\">\n\t\t\t  <textarea value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>{this.state.value}</textarea>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentText extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport Form from './component/form.jsx';\nimport FormField from './component/form-field.jsx';\nimport Hidden from './component/hidden.jsx';\nimport ImageUpload from './component/image-upload.jsx';\nimport InputWithCounter from './component/input-with-counter.jsx';\nimport Postcode from './component/postcode.jsx';\nimport Radios from './component/radios.jsx';\nimport Select from './component/select.jsx';\nimport Text from './component/textinput.jsx';\nimport Textarea from './component/textarea.jsx';\nimport Slider from './component/slider.jsx';\nexport default {\n  Form,\n  FormField,\n  Hidden,\n  ImageUpload,\n  InputWithCounter,\n  Postcode,\n  Radios,\n  Select,\n  Text,\n  Textarea,\n  Slider,\n}\n\n// render the base element\n// function renderElement( elem, config ) {\n//   let attributes = elem.attributes;\n//   ReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n// }\n// export {renderElement}\n\n","import merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentPoll from '../../poll/index.jsx';\nimport OpenStadComponentReactions from '../../reactions/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\nexport default class IdeasDetails extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      idea: {\n        showVoteButtons: true,\n        showLabels: false,\n        allowMultipleImages: false,\n        shareChannelsSelection: [\"facebook\",\"twitter\",\"mail\",\"whatsapp\"],\n      },\n      argument: {\n        isActive: true,\n      },\n      poll: {\n        canAddPolls: false,\n      },\n      labels: {},\n      types: null,\n      typeLabel: 'Thema',\n\t\t};\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      idea: this.props.idea,\n      ideaId: ( props.idea && props.idea.id ) || this.config.ideaId,\n      showPollForm: false,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.reactionStoredListener = function(event) {\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('osc-reaction-stored', self.reactionStoredListener);\n\n\t\tself.reactionDeletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('osc-reaction-deleted', self.reactionDeletedListener);\n    \n\t\tself.pollCreatedListener = function(event) {\n      self.onPollCreated(event.detail);\n    }\n    document.addEventListener('osc-new-poll-stored', self.pollCreatedListener);\n    \n\t\tself.pollDeletedListener = function(event) {\n      self.onPollDeleted(event.detail);\n    }\n    document.addEventListener('osc-poll-deleted', self.pollDeletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-reaction-stored', this.reactionStoredListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.reactionDeletedListener);\n\t\tdocument.removeEventListener('osc-new-poll-stored', this.pollCreatedListener);\n\t\tdocument.removeEventListener('osc-poll-deleted', this.pollDeletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n    if ( this.config.editIdeaLink ) {\n      document.location.href = this.config.editIdeaLink;\n    } else {\n\t\t  var event = new window.CustomEvent('osc-edit-idea-click', { detail: this.state.idea });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n\n  showPollForm() {\n    this.setState({\n      showPollForm: true\n    })\n  }\n\n  hidePollForm() {\n    this.setState({\n      showPollForm: false\n    })\n  }\n\n  dispatchAddPollClick(e) {\n    e.stopPropagation();\n    this.showPollForm();\n  }\n  \n  onReactionStored(data) {\n    this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onPollCreated() {\n    this.hidePollForm();\n    this.fetchData();\n  }\n\n  onPollDeleted() {\n    this.fetchData();\n  }\n  \n  fetchData() {\n\n    let self = this;\n\n    let ideaId = self.state.ideaId || (this.state.idea && this.state.idea.id);\n\n    if (!ideaId) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ ideaId }?includeVoteCount=1&includeArguments=1&includeArgsCount=1&includeUser=1&includeUserVote=1`;\n    if (self.config.poll.canAddPolls) url += '&includePoll=1';\n\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let idea = json;\n        self.setState({ idea }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n        if ( this.config.afterDeleteIdeaLink ) {\n          document.location.href = this.config.afterDeleteIdeaLink;\n        } else {\n\t\t      var event = new window.CustomEvent('osc-idea-deleted', { detail: { ideaId } });\n\t\t      document.dispatchEvent(event);\n        }\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    if (!idea) return null;\n\n    let labelHTML = null;\n\n    if (self.config.idea.showLabels) {\n      // TODO: idea.extraData.type is tmp voor Gerard Dou\n      let typeId = idea.typeId || idea.extraData.type;\n      let typeDef = self.config.types && self.config.types.find(def => def.id == typeId || def.value == typeId);\n      if (typeDef) {\n        let labelText = typeDef.label;\n        let backgroundColor = typeDef.backgroundColor;\n        let textColor = typeDef.textColor;\n        labelHTML = (\n          <div className=\"ocs-idea-label\" style={{ color: textColor, backgroundColor }}>{labelText}</div>\n        );\n      }\n    }\n    \n    let pollHTML = null;\n    let addPollButtonHTML = null;\n    if (self.config.poll.canAddPolls) {\n      if (idea.poll || self.state.showPollForm) {\n        pollHTML = (\n          <div>\n\t\t\t      <div id=\"poll\" className=\"osc-poll-header\"><h3>{self.config.poll.title || 'Poll'}</h3></div>\n            <OpenStadComponentPoll config={{ ...self.config, ...self.config.poll, ideaId: self.state.ideaId }} poll={idea.poll}/>\n          </div>\n        )\n      } else {\n        if (idea.can && idea.can.edit) {\n          addPollButtonHTML = (\n            <div className=\"osc-editbuttons-container\">\n              <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchAddPollClick(event)}>Add poll</button>\n            </div>\n          )\n        }\n      }\n    }\n\n    let voteButtonsHTML = null;\n    if (self.config.idea.showVoteButtons) {\n      voteButtonsHTML = (\n        <div className=\"osc-details-vote-buttons-container\">\n          <h3>Likes</h3>\n          <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={idea.yes}/>\n        </div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( idea.can && idea.can.edit ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (idea && idea.modBreak) {\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {idea.modBreakDateHumanized}<br/>\n          <br/>\n          {idea.modBreak}\n        </div>\n      );\n    }\n\n    let reactionsCountHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsCountHTML = (\n        <div>\n          <h3>Reacties</h3>\n          <a href=\"#reactions\" className=\"osc-no-of-reactions\">{idea.argCount || 0} reacties</a>\n        </div>\n      );\n    }\n\n    let reactionsHTML = null;\n    if ( self.config.argument.isActive ) {\n      // todo: refactor config zodat hij in reactions ook gewoon argument: {} heet, en dan deze regels naar daar\n      let config = {...self.config}\n      config.argument.isActive = this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`));\n      config.argument.isClosed = this.config.argument.isClosed || this.config.argument.closeReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`));\n      reactionsHTML = (\n        <div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>{self.config.argument.title || 'Reacties'}</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, title: undefined, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: idea.id, loginUrl: self.config.loginUrl, }}/>\n        </div>\n      );\n    }\n\n    let authorHTML = idea.user.nickName || idea.user.fullName || idea.user.firstName +' ' + idea.user.lastName;\n    if (this.config.linkToUserPageUrl) {\n      authorHTML = <a href={this.config.linkToUserPageUrl + '/' + idea.user.id} className=\"osc-author-link\">{authorHTML}</a>\n    }\n\n    let shareButtonsHTML = null;\n    if (self.config.idea.shareChannelsSelection.length) {\n      let facebookButtonHTML = self.config.idea.shareChannelsSelection.includes('facebook') ? (<li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>) : null;\n      let twitterButtonHTML = self.config.idea.shareChannelsSelection.includes('twitter') ? (<li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>) : null;\n      let mailButtonHTML = self.config.idea.shareChannelsSelection.includes('mail') ? (<li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>) : null;\n      let whatsappButtonHTML = self.config.idea.shareChannelsSelection.includes('whatsapp') ? (<li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>) : null;\n\n      shareButtonsHTML = (\n      <div className=\"osc-details-sharebuttons\">\n        <ul>\n          {facebookButtonHTML}\n          {twitterButtonHTML}\n          {mailButtonHTML}\n          {whatsappButtonHTML}\n\t\t\t\t</ul>\n      </div>);\n\n\n    }\n    \n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-idea-image-container\">\n                <OpenStadComponentImage config={{ allowMultipleImages: self.config.idea.allowMultipleImages }} idea={idea}/>\n              </div>\n\n              {labelHTML}\n\n              {shareButtonsHTML}\n\n              <div className=\"osc-details-stats\">\n                {voteButtonsHTML}\n                {reactionsCountHTML}\n                {editButtonsHTML}\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              <span className=\"ocs-gray-text\">Door </span>{authorHTML}\n              <span className=\"ocs-gray-text\"> op </span>{idea.createDateHumanized}\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span>\n\t\t\t        <span className=\"ocs-gray-text\">{self.config.typeLabel}: </span>{idea.extraData.theme}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{idea.summary}</p>\n\n            <p className=\"osc-details-description\" dangerouslySetInnerHTML={{ __html: idea.description }}></p>\n\n            {addPollButtonHTML}\n\n\t\t\t    </div>\n\n          {pollHTML}\n\n          {reactionsHTML}\n\n\t\t\t    <div className=\"osc-bottom-spacer\"></div>\n\n        </div>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote();\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    if (e) e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new window.CustomEvent('osc-idea-liked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaDetails from './component/idea-details.jsx';\n\n// render elements\nOpenStadComponentIdeaDetails.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaDetails attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaDetails as default,\n  OpenStadComponentIdeaDetails as IdeaDetails,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentIdeaImage extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      allowMultipleImages: false\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      currentImageIndex: 0,\n      width: 0,\n    };\n        \n  }\n\n  componentDidMount () {\n    let elem = document.querySelector(`#${this.divId}`);\n    this.setState({width: elem.offsetWidth})\n  }\n\n  setCurrentImageIndex (which) {\n    this.setState({currentImageIndex: which})\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.props.idea;\n\n    if (!idea) return null;\n\n    let images = (idea.extraData && idea.extraData.images) || [];\n    let image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[self.state.currentImageIndex]);\n\n    if (self.config.allowMultipleImages && images.length > 1) {\n\n      // multiple\n      return (\n        <div id={self.divId} className=\"osc-idea-multiple-images\">\n        \n          <div className=\"osc-idea-image-spacer\">\n            <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n          </div>\n\n          <div className=\"osc-idea-multiple-images-thumbs\">\n\n            {images.map(( thumb, i ) => {\n              let height = 0.1 * self.state.width;\n              let width = height * 16/9;\n              // let left = ( width *  1.07) * i + ( self.state.width - width *  1.07* images.length ) / 2;\n              let left = ( width *  1.05 ) * i;\n              return (\n                <div className=\"osc-idea-image-thumb-spacer\" key={`osc-idea-image-thumb-${i}`} style={{ left, width, height }}>\n                  <div className=\"osc-idea-image-thumb\" style={thumb ? { backgroundImage: `url(${thumb})`, zIndex: 10-i } : {}} onClick={e => self.setCurrentImageIndex(i)}></div>\n                </div>\n              );\n            })}\n\n          </div>\n\n        </div>\n      );\n\n    } else {\n\n      // singular\n      return (\n        <div id={self.divId} className=\"osc-idea-image-spacer\">\n          <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n        </div>\n      );\n      \n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaImage from './component/idea-image.jsx';\n\n// render elements\nOpenStadComponentIdeaImage.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaImage attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaImage as default,\n  OpenStadComponentIdeaImage as IdeaImage,\n};\n\n","import React from 'react';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      types: ( props.config && props.config.types ) || [],\n      typesFilterLabel: 'Alle thema\\'s',\n      areas: ( props.config && props.config.areas ) || [],\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.state = {\n      selectedType: undefined,\n      types: this.config.types,\n      typesFilterLabel: this.config.typesFilterLabel,\n      selectedArea: undefined,\n      areas: this.config.areas,\n      mobileActiveSelector: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleTypeChange(value) {\n\n    this.setState({ selectedType: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  setAreaValue(value) {\n    this.setState({ selectedArea: value });\n  }\n\n  handleAreaChange(value) {\n\n    this.setState({ selectedArea: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('areaFilterUpdate', { detail: { value: this.state.areas.find(area => value == area.value) } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  resetTypeAndArea() {\n    this.handleTypeChange(0)\n    this.handleAreaChange(0)\n    this.hideMobileActiveSelector()\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let areasHTML = null;\n    let areasButtonHTML = null;\n    // TODO: niet state maar config\n    if (self.state.areas && self.state.areas.length) {\n      areasButtonHTML = (\n        <div className=\"osc-area-selector-button\" onClick={() => self.toggleMobileActiveSelector('area')}></div>\n      );\n      areasHTML = (\n          <div className={`osc-area-selector-container${self.state.mobileActiveSelector == 'area' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedArea} onChange={() => self.handleAreaChange( self.areaSelector.value )} className=\"osc-default-select osc-margin-right osc-area-selector\" ref={el => (self.areaSelector = el)}>\n              <option value=\"0\">Alle gebieden</option>;\n              { self.state.areas.map((area, i) => {\n                return <option key={'area-option-' + i}>{ area.name }</option>;\n              })}\n            </select>\n          </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-filterbar'} ref={el => (self.instance = el)}>\n\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t\t  <Search config={{ ...this.config }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>\n\n        <div className=\"osc-selectors-container osc-align-right-container\">\n\n          <div className={`osc-type-selector-button${ self.state.selectedType && self.state.selectedType != '0'  ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('type')}></div>\n          <div className={`osc-type-selector-container${self.state.mobileActiveSelector == 'type' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedType} onChange={() => self.handleTypeChange( self.typeSelector.value )} className=\"osc-default-select osc-margin-right osc-type-selector\" ref={el => (self.typeSelector = el)}>\n              <option value=\"0\">{self.state.typesFilterLabel}</option>;\n              { self.state.types.map((type, i) => {\n                return <option key={'type-option-' + i} value={ type.name || type.id }>{ type.name }</option>;\n              })}\n            </select>\n          </div>\n\n          {areasButtonHTML}\n          {areasHTML}\n\n          <button value=\"reset\" onClick={() => self.resetTypeAndArea()} className=\"osc-button osc-reset-button\" ref={el => (self.resetButton = el)}>Alles tonen</button>\n          \n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBar from './info-bar/info-bar.jsx';\nimport Preview from './info-bar/preview.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n// TODO: editIdea vs newIdea opschonen\n// TODO: vervang handle functies door events, bijvoorbeeld bij opzoeken adres\n// TODO: events renamen naar osc-xxx\n// TODO: remove event listener is niet consequent doorgevoerd\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n      displayType: 'complete',\n      displayWidth: null,\n      displayHeight: null,\n      canSelectLocation: true,\n      types: [],\n      typeField: null,\n\n      // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n      // currentPolygon: undefined,\n      // areas: [\n      //  { name: \"Heel West\",\n      //    value: \"Heel West\",\n      //    polygon: [{ \"lng\": 4.8353454, \"lat\": 52.3731265 }, { \"lng\": 4.8422025, \"lat\": 52.3721002 }, { \"lng\": 4.8421761, \"lat\": 52.3695836 }, { \"lng\": 4.8455807, \"lat\": 52.3696369 }, { \"lng\": 4.8476385, \"lat\": 52.369853 }, { \"lng\": 4.8477361, \"lat\": 52.3695885 }, { \"lng\": 4.8484176, \"lat\": 52.369697 }, { \"lng\": 4.8504835, \"lat\": 52.3653302 }, { \"lng\": 4.8504956, \"lat\": 52.3643692 }, { \"lng\": 4.8501587, \"lat\": 52.3638376 }, { \"lng\": 4.8494487, \"lat\": 52.3633001 }, { \"lng\": 4.8495059, \"lat\": 52.3610989 }, { \"lng\": 4.8489152, \"lat\": 52.3608149 }, { \"lng\": 4.8487824, \"lat\": 52.3578658 }, { \"lng\": 4.8504012, \"lat\": 52.3578553 }, { \"lng\": 4.8518982, \"lat\": 52.357844 }, { \"lng\": 4.8538275, \"lat\": 52.3581295 }, { \"lng\": 4.854723, \"lat\": 52.3578629 }, { \"lng\": 4.854635, \"lat\": 52.3577532 }, { \"lng\": 4.85436, \"lat\": 52.3572975 }, { \"lng\": 4.8540881, \"lat\": 52.3564026 }, { \"lng\": 4.8547969, \"lat\": 52.3562758 }, { \"lng\": 4.8698903, \"lat\": 52.3601067 }, { \"lng\": 4.8699397, \"lat\": 52.3600231 }, { \"lng\": 4.8714122, \"lat\": 52.3603737 }, { \"lng\": 4.8712647, \"lat\": 52.3605634 }, { \"lng\": 4.8715288, \"lat\": 52.3605997 }, { \"lng\": 4.8716826, \"lat\": 52.3604277 }, { \"lng\": 4.8738605, \"lat\": 52.3608533 }, { \"lng\": 4.8738525, \"lat\": 52.3610213 }, { \"lng\": 4.8740097, \"lat\": 52.3610407 }, { \"lng\": 4.8741351, \"lat\": 52.3608935 }, { \"lng\": 4.8750611, \"lat\": 52.3608041 }, { \"lng\": 4.8756501, \"lat\": 52.3606138 }, { \"lng\": 4.876429, \"lat\": 52.3607996 }, { \"lng\": 4.8765642, \"lat\": 52.3606177 }, { \"lng\": 4.876929, \"lat\": 52.3606957 }, { \"lng\": 4.8768495, \"lat\": 52.360911 }, { \"lng\": 4.8771709, \"lat\": 52.3609696 }, { \"lng\": 4.8774, \"lat\": 52.3607583 }, { \"lng\": 4.8819952, \"lat\": 52.3620427 }, { \"lng\": 4.8813956, \"lat\": 52.3630818 }, { \"lng\": 4.8808146, \"lat\": 52.3634904 }, { \"lng\": 4.8793708, \"lat\": 52.3643261 }, { \"lng\": 4.8792691, \"lat\": 52.3649574 }, { \"lng\": 4.8787082, \"lat\": 52.3658206 }, { \"lng\": 4.8775395, \"lat\": 52.3667815 }, { \"lng\": 4.8767523, \"lat\": 52.3685117 }, { \"lng\": 4.8754901, \"lat\": 52.3697867 }, { \"lng\": 4.8745065, \"lat\": 52.3718772 }, { \"lng\": 4.8745782, \"lat\": 52.3725454 }, { \"lng\": 4.8753796, \"lat\": 52.373407 }, { \"lng\": 4.8755899, \"lat\": 52.3743025 }, { \"lng\": 4.8799131, \"lat\": 52.3813052 }, { \"lng\": 4.8796339, \"lat\": 52.3819128 }, { \"lng\": 4.880478, \"lat\": 52.3822531 }, { \"lng\": 4.8818058, \"lat\": 52.3843528 }, { \"lng\": 4.882637, \"lat\": 52.3854107 }, { \"lng\": 4.8846503, \"lat\": 52.3883466 }, { \"lng\": 4.8857963, \"lat\": 52.3881476 }, { \"lng\": 4.8911796, \"lat\": 52.3884502 }, { \"lng\": 4.8937804, \"lat\": 52.3886712 }, { \"lng\": 4.8956658, \"lat\": 52.3888313 }, { \"lng\": 4.8927982, \"lat\": 52.3933453 }, { \"lng\": 4.8850924, \"lat\": 52.398824 }, { \"lng\": 4.8762366, \"lat\": 52.3945287 }, { \"lng\": 4.8726422, \"lat\": 52.3948206 }, { \"lng\": 4.8719896, \"lat\": 52.3947192 }, { \"lng\": 4.8719508, \"lat\": 52.3952766 }, { \"lng\": 4.8715979, \"lat\": 52.39538 }, { \"lng\": 4.8667403, \"lat\": 52.393136 }, { \"lng\": 4.8643092, \"lat\": 52.3927072 }, { \"lng\": 4.8627057, \"lat\": 52.3938521 }, { \"lng\": 4.8603441, \"lat\": 52.3949382 }, { \"lng\": 4.858593, \"lat\": 52.3952782 }, { \"lng\": 4.8569204, \"lat\": 52.3953667 }, { \"lng\": 4.8569896, \"lat\": 52.3938363 }, { \"lng\": 4.8573172, \"lat\": 52.3938424 }, { \"lng\": 4.8574043, \"lat\": 52.3920751 }, { \"lng\": 4.8589526, \"lat\": 52.3912226 }, { \"lng\": 4.8592744, \"lat\": 52.3905434 }, { \"lng\": 4.8592929, \"lat\": 52.3887899 }, { \"lng\": 4.8449045, \"lat\": 52.3887733 }, { \"lng\": 4.8451066, \"lat\": 52.3850658 }, { \"lng\": 4.8446526, \"lat\": 52.3850638 }, { \"lng\": 4.8390117, \"lat\": 52.3850241 }, { \"lng\": 4.8392807, \"lat\": 52.3829687 }, { \"lng\": 4.838548, \"lat\": 52.3808766 }, { \"lng\": 4.836707, \"lat\": 52.3763581 }, { \"lng\": 4.8353454, \"lat\": 52.3731265 }] },\n      //  { name: \"De Baarsjes\",\n      //    value: \"De Baarsjes\",\n      //    polygon: [{\"lng\":4.8558724,\"lat\":52.374202},{\"lng\":4.8577714,\"lat\":52.3681953},{\"lng\":4.8582878,\"lat\":52.3648623},{\"lng\":4.8592819,\"lat\":52.3648966},{\"lng\":4.8598228,\"lat\":52.364783},{\"lng\":4.8613989,\"lat\":52.3664539},{\"lng\":4.8661845,\"lat\":52.3717538},{\"lng\":4.8664001,\"lat\":52.3721596},{\"lng\":4.8663889,\"lat\":52.372566},{\"lng\":4.865846,\"lat\":52.3733281},{\"lng\":4.8646717,\"lat\":52.3734961},{\"lng\":4.8641583,\"lat\":52.3750737},{\"lng\":4.8640923,\"lat\":52.3752839},{\"lng\":4.8559599,\"lat\":52.3743342},{\"lng\":4.8558724,\"lat\":52.374202}] },\n      //  { name: \"Oud West\",\n      //    value: \"Oud West\",\n      //    polygon: [{\"lng\":4.8546816,\"lat\":52.3568634},{\"lng\":4.855041,\"lat\":52.3563261},{\"lng\":4.858839,\"lat\":52.3572696},{\"lng\":4.8625458,\"lat\":52.3582427},{\"lng\":4.8646701,\"lat\":52.3588487},{\"lng\":4.868731,\"lat\":52.3597955},{\"lng\":4.8703188,\"lat\":52.3601231},{\"lng\":4.8717136,\"lat\":52.3604376},{\"lng\":4.8738218,\"lat\":52.3609651},{\"lng\":4.8763055,\"lat\":52.3607226},{\"lng\":4.8776842,\"lat\":52.3608635},{\"lng\":4.878167,\"lat\":52.3610044},{\"lng\":4.8812676,\"lat\":52.3618856},{\"lng\":4.8807043,\"lat\":52.3623966},{\"lng\":4.8798675,\"lat\":52.3633663},{\"lng\":4.8795778,\"lat\":52.3639428},{\"lng\":4.8792613,\"lat\":52.3644931},{\"lng\":4.8791272,\"lat\":52.3650598},{\"lng\":4.8787785,\"lat\":52.3656691},{\"lng\":4.8779202,\"lat\":52.3663734},{\"lng\":4.8773838,\"lat\":52.366809},{\"lng\":4.8772336,\"lat\":52.3676312},{\"lng\":4.8769385,\"lat\":52.3681389},{\"lng\":4.8754311,\"lat\":52.3697536},{\"lng\":4.8746211,\"lat\":52.3714043},{\"lng\":4.8744494,\"lat\":52.3720594},{\"lng\":4.8744602,\"lat\":52.3723083},{\"lng\":4.8752166,\"lat\":52.3729895},{\"lng\":4.8745943,\"lat\":52.3731762},{\"lng\":4.870925,\"lat\":52.3724033},{\"lng\":4.8680175,\"lat\":52.3717974},{\"lng\":4.8665959,\"lat\":52.3715648},{\"lng\":4.8654211,\"lat\":52.3703825},{\"lng\":4.8641176,\"lat\":52.3689905},{\"lng\":4.8628623,\"lat\":52.3676443},{\"lng\":4.8616499,\"lat\":52.3662554},{\"lng\":4.8604268,\"lat\":52.3648862},{\"lng\":4.8602505,\"lat\":52.3647431},{\"lng\":4.8591448,\"lat\":52.3634056},{\"lng\":4.8580772,\"lat\":52.3621247},{\"lng\":4.8575783,\"lat\":52.3615515},{\"lng\":4.857117,\"lat\":52.3604245},{\"lng\":4.856248,\"lat\":52.3592681},{\"lng\":4.8555345,\"lat\":52.3580035},{\"lng\":4.855299,\"lat\":52.357674},{\"lng\":4.855269,\"lat\":52.3576447},{\"lng\":4.855115,\"lat\":52.3574166},{\"lng\":4.8549071,\"lat\":52.3571512},{\"lng\":4.85479,\"lat\":52.3570018},{\"lng\":4.8546816,\"lat\":52.3568634}] },\n      // ],\n\n      titleField: 'title',\n      summaryField: 'summary',\n      // areaField: self.config.areaField || 'extraData.gebied',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n        titleMinLength: 10,\n        titleMaxLength: 20,\n        summaryMinLength: 20,\n        summaryMaxLength: 140,\n        descriptionMinLength: 140,\n        descriptionMaxLength: 5000,\n      },\n      argument: {\n        isActive: true,\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        placeholder: '',\n        requiredUserRole: 'member',\n        ignoreReactionsForIdeaIds: '',\n        closeReactionsForIdeaIds: '',\n      },\n      content: {\n      },\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.ideaName = self.config.ideaName || 'Inzendingen';\n\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n    self.config.typeField = self.config.typeField || 'extraData.theme'\n\n    // tmp\n    if (self.config.types && self.config.types.length) {\n      self.config.types.forEach((entry) => {\n        if (entry.value && !entry.name) {\n          entry.name = entry.value;\n        }\n        if (entry.mapicon && typeof entry.mapicon == 'string') {\n          try {\n            entry.mapicon = JSON.parse(entry.mapicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.listicon && typeof entry.listicon == 'string') {\n          try {\n            entry.listicon = JSON.parse(entry.listicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.buttonicon && typeof entry.buttonicon == 'string') {\n          try {\n            entry.buttonicon = JSON.parse(entry.buttonicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n      });\n    }\n\n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n      currentMouseOverIdea: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    window.addEventListener( 'hashchange', e => {\n      self.hideIdeaDetails();\n      let match = window.location.hash.match(/(\\w)(\\d+)/);\n      if (match) {\n        let ideaId = match[2];\n        let idea = self.state.ideas && self.state.ideas.find(idea => idea.id == ideaId);\n        if (match[1] == 'D') {\n          self.showIdeaDetails(idea)\n        } else {\n\t\t\t\t\t// self.setSelectedIdea(idea);\n        }\n      }\n    }, false );\n\n    // when the map is ready\n\t\tdocument.addEventListener('osc-map-is-ready', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // map events\n\t\tdocument.addEventListener('osc-map-click', function(event) {\n      self.onMapClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-marker-click', function(event) {\n      self.onMarkerClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-cluster-click', function(event) {\n      self.onClusterClick(event.detail);\n    });\n    \n    // handle filter changes\n\t\tdocument.addEventListener('typeFilterUpdate', function(event) {\n      self.onChangeTypeFilter(event.detail.value);\n    });\n    // document.addEventListener('areaFilterUpdate', function(event) {\n    //   self.onChangeAreaFilter(event.detail.value);\n    // });\n\n\n    // handle infobar events\n\t\tdocument.addEventListener('osc-set-selected-idea', function(event) {\n      self.onUpdateSelectedIdea(event.detail);\n    });\n\t\tdocument.addEventListener('osc-set-selected-location', function(event) {\n      self.setSelectedLocation(event.detail);\n    });\n\t\tdocument.addEventListener('osc-new-idea-click', function(event) {\n      self.onNewIdeaClick({ idea: event.detail.idea });\n    });\n\t\tdocument.addEventListener('osc-selected-idea-click', function(event) {\n      self.onSelectedIdeaClick({ idea: event.detail.idea });\n    });\n\t\tdocument.addEventListener('osc-click-mobile-switcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n    \n    \n    // handle infoblock changes oud\n\t\tdocument.addEventListener('updateSelectedIdea', function(event) {\n      self.onUpdateSelectedIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('updateEditIdea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('ideaClick', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('selectedIdeaClick', function(event) {\n      self.onSelectedIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('mouseOverListItem', function(event) {\n      self.onMouseOverListItem(event.detail.idea);\n    });\n\t\tdocument.addEventListener('mouseOutListItem', function(event) {\n      self.onMouseOutListItem();\n    });\n\n    // details changes\n\t\tdocument.addEventListener('osc-idea-liked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-stored', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('osc-edit-idea-click', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-idea-deleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('newIdeaStored', function(event) {\n      document.location.href = \"#\";\n      self.onNewIdeaStored(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArgsCount=1&includeUser=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers,\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        // showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/(\\w)(\\d+)/) && window.location.hash.match(/(\\w)(\\d+)/)[2] ) || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        // showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/^#D(\\d+)/) && window.location.hash.match(/^#D(\\d+)/)[1] );\n        showIdeaSelected = showIdeaSelected || ( window.location.hash.match(/^#S(\\d+)/) && window.location.hash.match(/^#S(\\d+)/)[1] );\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.map.setBoundsAndCenter();\n\n        self.setState({ ideas }, function () {\n          self.setState({ mobileState: self.config.startWithListOpenOnMobile ? 'opened' : 'closed' })\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers({})\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          if (window.location.hash.match(/^#newidea/)) {\n            // TODO: dit moet ook bestaande ideeen gaan werken\n            let hash = window.location.hash;\n            let match = hash.match(/&([^&]+)=([^&]+)/g);\n            let newIdea = {  };\n            if (match) {\n              match.forEach((entry) => {\n                let [key, val] = entry.split('=');\n                key = key.substring(1, key.length);\n                newIdea[key] = decodeURIComponent(val);\n              });\n            }\n\t\t\t\t\t  self.setNewIdea(newIdea);\n\t\t\t\t    self.showIdeaForm(newIdea);\n          }\n          self.onChangeMapBoundaries();\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    if (self.infobar) self.infobar.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers({})\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n\n    if (self.config.idea.formUrl) {\n      let url = self.config.idea.formUrl;\n      url = url.replace(/:ideaId/, typeof idea.id == 'number' ? idea.id : '');\n      url = url.replace(/:location/, idea.location ? JSON.stringify({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }) : '');\n      url = url.replace(/:typeId/, idea.typeId);\n      url = url.replace(/:address/, idea.address);\n      document.location.href = url;\n    } else {\n      self.setState({ status: 'idea-form', editIdea: idea }, function() {\n        self.map.map.invalidateSize();\n        self.map.hideMarkers({ exception: { location: idea && idea.location && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n        if (next) next();\n      });\n    }\n\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      self.showIdeaDetails(idea)\n      document.location.href = \"#D\" + idea.id\n    } else {\n      document.location.href='#';\n      if (self.state.editIdea && self.state.editIdea.location) {\n        self.setState({ status: 'location-selected' }, function() {\n          // todo: dit zou hij zelf via state moeten doen\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(self.state.editIdea)\n        });\n      } else {\n        self.setState({ status: 'default' }, function() {\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(null)\n        });\n      }\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas\n\t\tthis.state.ideas.forEach((idea) => {\n\t\t\tlet title = eval(`idea.${self.config.titleField}`) || '';\n      let titlelLc = title.toLowerCase();\n\t\t\tlet summary = eval(`idea.${self.config.summaryField}`) || '';\n      let summaryLc = summary.toLowerCase();\n\t\t\tif (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\tsearchResult.ideas.push({\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonClick: function() {\n            self.onUpdateSelectedIdea(idea)\n          },\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n    \n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\t\t\n\t}\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // setCurrentPolygon(polygon) {\n  //   let state = { ...this.state };\n  //   state.currentPolygon = polygon ? this.map.createCutoutPolygon(polygon): undefined;\n  //   this.setState(state);\n  // }\n\n  // removeCurrentPolygon() {\n  //   this.map.removePolygon(this.state.currentPolygon)\n  //   let state = { ...this.state };\n  //   state.currentPolygon = undefined;\n  //   this.setState(state);\n  // }\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n    // xxx\n    let self = this;\n\n    self.map.setSelectedLocation(location)\n\n    if (location)  {\n      if (self.infobar.ideaform) {\n        self.infobar.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t\t  self.state.editIdea.address = address;\n\t\t\t\t  self.infobar.ideaform.handleLocationChange({ location, address: address });\n\t\t\t  })\n      }\n    } else {\n      self.map.unfadeAllMarkers();\n      this.setState({ status: 'default', currentIdea: null, newIdea: null, editIdea: null }, function() {\n      });\n    }\n\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        // xxx\n        if (idea.location) self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infobar) {\n          self.setState({ editIdea: self.state.editIdea });\n          if (idea.location) {\n            self.infobar.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n            self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n              let address = json && json._display || 'Geen adres gevonden';\n              let editIdea = self.state.editIdea;\n              editIdea.address = address;\n              self.setState({ editIdea });\n              self.infobar.setNewIdea({ ...self.state.editIdea, address });\n            })\n          } else {\n            self.infobar.setNewIdea({ ...self.state.editIdea, address: 'Geen locatie geselecteerd...' });\n          }\n          self.infobar.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        if (self.infobar) {\n          self.infobar.setNewIdea(null);\n          self.infobar.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infobar) {\n        this.infobar.setSelectedIdea(idea);\n        this.infobar.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map.unfadeAllMarkers();\n      if (this.infobar) {\n        this.infobar.setSelectedIdea(null);\n        this.infobar.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infobar.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          document.location.href='#';\n          this.setSelectedIdea(null);\n          this.setNewIdea(null);\n          this.infobar.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n        } else {\n          if (!this.config.canSelectLocation) break;\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infobar.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infobar.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infobar) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infobar.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infobar) {\n          self.infobar.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    if (idea) {\n      document.location.href='#S'+this.state.currentIdea.id;\n    } else {\n      document.location.href = \"#\";\n    }\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      // this.showIdeaDetails(idea);\n      document.location.href = \"#D\" + idea.id;\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      // todo: dit werkt niet meer nu self.infobar.ideaform in de infobar zit\n      self.infobar.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.infobar.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter();\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick({ idea }) {\n    // this.showIdeaDetails(idea);\n    document.location.href = \"#D\" + idea.id\n  };\n  \n  onNewIdeaClick({ idea }) {\n    let self = this;\n    let editIdea = this.state.editIdea || {};\n    editIdea.typeId = idea.typeId;\n    self.showIdeaForm(editIdea, () => {\n      if (this.state.editIdea && this.state.editIdea.location) {\n        let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      // todo: dit werkt niet meer nu self.infobar.ideaform in de infobar zit\n        self.infobar.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t    self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t    let address = json && json._display || 'Geen adres gevonden';\n\t\t\t    self.state.editIdea.address = address;\n\t\t\t    self.infobar.ideaform.handleLocationChange({ location, address: address });\n\t\t    })\n      }\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n\t\tself.showIdeaDetails(idea);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount++;\n    setTimeout(e => { window.location.hash = `#osc-reaction-${data.id}` }, 1000);\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n  \n  onChangeTypeFilter(value) {\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.setSelectedLocation(null);\n\t  self.map.setFilter(function(marker) {\n\t\t  if (value && value !== '0') {\n\t\t\t  return marker.data && eval(`marker.data.${self.config.typeField}`) && eval(`marker.data.${self.config.typeField}`) == value;\n\t\t  } else {\n\t\t\t  return true;\n\t\t  }\n\t  })\n    self.setState({ status: 'default' })\n    self.map.setBoundsAndCenter();\n    self.onChangeMapBoundaries(); // todo: rename\n  }\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // onChangeAreaFilter(area) {\n  //   let self = this;\n  //   self.setSelectedIdea(null);\n  //   self.setNewIdea(null);\n  //   self.removeCurrentPolygon();\n  //   self.setCurrentPolygon( area && area.polygon );\n  //   self.setState({ status: 'default' })\n  //   self.map.setBoundsAndCenter(area && area.polygon || self.config.map.polygon || self.map.markers);\n  // }\n\n  onMouseOverListItem(idea) {\n    this.setState({ currentMouseOverIdea: idea });\n    this.map.fadeMarkers({ exception: idea })\n    this.map.updateFading();\n  }\n\n  onMouseOutListItem(idea) {\n    this.setState({ currentMouseOverIdea: null });\n    this.map.unfadeAllMarkers()\n    if (this.selectedIdea) {\n      this.map.fadeMarkers({exception: this.selectedIdea});\n    }\n    if (this.map.selectedLocation) {\n      this.map.fadeMarkers({});\n    }\n    this.map.updateFading();\n  }\n\n  onClickBackToOverview(idea) {\n    document.location.href='#S'+this.state.currentIdea.id;\n  }\n  \n  onClickMobileSwitcher() {\n    let self = this;\n    if (self.infobar) self.infobar.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter();\n      }\n    })\n  }\n\n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infobar moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} displayType=\"details\" idea={this.state.currentIdea} className=\"osc-ideas-on-map-info\" ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.onClickBackToOverview() }>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} displayType=\"form\" idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} className=\"osc-ideas-on-map-info\" ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n            mobilePopupHTML = (\n              <Preview config={{ ...this.config, display: { type: 'mobilePreview' } }} selectedLocation={this.state.editIdea} />\n\t\t\t\t\t\t);\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infobar.setState({ mobileState: 'opened' }); document.location.href = \"#D\" + this.state.currentIdea.id; /* this.showIdeaDetails(this.state.currentIdea) */ } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, typesFilterLabel: this.config.typesFilterLabel, typeField: this.config.typeField, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, typesFilterLabel: this.config.typesFilterLabel, typeField: this.config.typeField, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    let divStyle = {};\n    let simpleHTML = null;\n    if ( this.config.displayType == 'simple' ) {\n      filterHTML = null;\n      infoHTML = null;\n      mobilePopupHTML = null;\n      let buttonHTML = null;\n      if (this.config.linkToCompleteUrl) buttonHTML = <button onClick={() => { document.location.href = this.config.linkToCompleteUrl }} className=\"osc-button-blue\" style={{position: 'absolute', top: 20, right: 20}}>Bekijk de volledige kaart</button>\n      simpleHTML = (\n        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, zIndex: 1000 }}>\n          {buttonHTML}\n        </div>)\n      if (this.config.displayWidth) divStyle.width = this.config.displayWidth;\n      if (this.config.displayHeight) divStyle.height = this.config.displayHeight;\n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} style={divStyle} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className={`osc-ideas-on-map-map osc-ideas-on-map-map-${this.config.displayType}`}>\n\t\t\t    <Map id={this.divId + '-map'} config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField, zoomControl: this.config.displayType == 'simple' ? false : true }} ref={el => (this.map = el)}/>\n        </div>\n        {simpleHTML}\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../../forms/index.jsx';\n\n// import OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\n// import OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n      fields: [],\n    };\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.fields = [ ...self.config.fields ];\n\n    let fields = self.config.fields || [];\n\n    if (!self.props.idea.extraData) self.props.idea.extraData = {};\n\n    let state = {\n      formfields: {\n        id: self.props.idea.id || '',\n        user: self.props.idea.user || {},\n      },\n      showFormErrorsWarning: false,\n      isBusy: false,\n    };\n\n    fields.forEach((field) => {\n      if (field.name) {\n        state.formfields[field.name] = eval('self.props.idea.' + field.name);\n        field.value = eval('self.props.idea.' + field.name);\n      }\n    });\n\n    let titleField = fields.find(field => field.name == 'title');\n    if (titleField) {\n\t\t  titleField.minLength = self.config.titleMinLength;\n\t\t  titleField.maxLength = self.config.titleMaxLength;\n    }\n\n    let summaryField = fields.find(field => field.name == 'summary');\n    if (summaryField) {\n\t\t  summaryField.minLength = self.config.summaryMinLength;\n\t\t  summaryField.maxLength = self.config.summaryMaxLength;\n    }\n\n    let descriptionField = fields.find(field => field.name == 'description');\n    if (descriptionField) {\n\t\t  descriptionField.minLength = self.config.descriptionMinLength;\n\t\t  descriptionField.maxLength = self.config.descriptionMaxLength;\n    }\n\n    let imageField = fields.find(field => field.inputType == 'image-upload'); // TODO: multiple images?\n    if (imageField) {\n\t\t  imageField.imageserver = self.config.imageserver;\n    }\n\n    if (OpenStadComponentLibs.user.hasRole( self.config.user, 'editor' ) ) {\n\n      // typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        let choices = [];\n        self.config.types.forEach(type => {\n          let typeDef = type;\n          if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n            choices.push({ title: typeDef.name, value: typeDef.id || typeDef.value})\n          }\n        });\n        self.config.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  title: \"Type inzending\",\n\t\t\t\t  value: self.props.idea.typeId,\n          inputType: \"multiple-choice\",\n          choices\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n      // moderator\n      self.config.fields.push({\n\t\t\t\tname: \"modBreak\",\n\t\t\t\ttitle: \"Moderator reactie\",\n\t\t\t\tvalue: self.props.idea.modBreak,\n\t\t\t\tinputType: \"textarea-with-counter\",\n\t\t\t\tminLength: 0,\n\t\t\t\tmaxLength: 2000,\n\t\t\t})\n      state.formfields.modBreak = self.props.idea.modBreak;\n\n    } else {\n\n      // hidden: typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        self.config.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  value: self.props.idea.typeId,\n\t\t\t\t  inputType: \"hidden\",\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n    }\n\n    self.state = state;\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new window.CustomEvent('updateEditIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n      console.log('xxx');\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // // images\n\t  // if (!self.imageField.validate()) {\n\t\t//   self['form-warning-image'].style.display = 'block';\n\t\t//   isValid = false;\n\t  // } else {\n\t\t//   self['form-warning-image'].style.display = 'none';\n    // }\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let formValues = self.form.getValues();\n\n      let isValid = self.form.validate({ showErrors: true });\n\n\t    if ( !self.validateIdea() || !isValid ) { // validateIdea doet nog locatie en images\n        self.setState({ isBusy: false, showFormErrorsWarning: true });\n        return;\n      }\n\n      self.setState({ showFormErrorsWarning: false });\n\n\t    if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t    var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n\n      let body = {\n        location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n      };\n      Object.keys(formValues).forEach(key => {\n        let match = key.match(/^extraData\\.(.+)/)\n        if (match) {\n          if (!body.extraData) body.extraData = {};\n          body.extraData[match[1]] = formValues[key];\n        } else {\n          body[key] = formValues[key];\n        }\n      });\n\n      // if ( self.config.user && self.config.user.role == 'admin' ) {\n      //   body.modBreak = self.state.formfields['modBreak'];\n      // }\n\n      let method = 'POST';\n      if (typeof this.state.formfields.id == 'number') {\n        method = 'PUT';\n        url = url + '/' + this.state.formfields.id;\n      }\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw response;\n          }\n          return response.json();\n        })\n        .then( json => {\n          self.setState({ isBusy: false }, () => {\n\t\t        var event = new window.CustomEvent('newIdeaStored', { detail: { idea: json } });\n\t\t        document.dispatchEvent(event);\n          })\n        })\n        .catch((err) => {\n          console.log('Niet goed');\n          console.log(err);\n          if ( typeof err.json == 'function' ) {\n            err.json().then(json => self.setState({ isBusy: false, showFormErrorsWarning: json.message }) );\n          } else {\n            self.setState({ isBusy: false, showFormErrorsWarning: err.message || err })\n          }\n        });\n    })\n    \n  }\n  \n\trender() {\n\n    let self = this;\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      let text = 'Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.';\n      if (typeof self.state.showFormErrorsWarning == 'string') {\n        text = self.state.showFormErrorsWarning;\n      }\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">{ text }</div>\n      );\n    }\n\n    let formHTML = null;\n    formHTML = (\n      <OpenStadComponentForms.Form config={ self.config } values={{ typeId: self.state.formfields.typeId /* typeId is hidden */ }} ref={(el) => { self.form = el;}}/>\n    )\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-infobar-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          {formHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className={`osc-button osc-button-blue${ self.state.isBusy ? ' osc-disabled' : '' }`} onClick={() => { if (!self.state.isBusy) self.submitIdea() } } ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentImage from '../../../idea-image/index.jsx';\n\n'use strict';\n\nexport default class IdeasList extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      types: [],\n      titleField: 'title',\n      summaryField: 'summary',\n      idea: {\n        showVoteButtons: true,\n        sort: {\n          sortOptions: [{ value: 'createdtime,desc', label: 'Nieuwste eerst' },{ value: 'createdtime,asc', label: 'Oudste eerst' }],\n          showSortButton: true,\n          defaultSortOrder: 'createdtime,desc',\n        }\n      },\n\t\t};\n\t\tthis.config = merge.recursive(this.defaultConfig, props.config || {})\n\t\tthis.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n      currentSortOrder: this.config.idea.sort.defaultSortOrder,\n      ideas: this.props.ideas || [],\n      currentMouseOverIdea: null,\n      hideSortButton: !this.config.idea.sort.hideSortButton,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n\n    let self = this;\n    let state = { ...self.state };\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'title':\n\t\t\t\tideas = ideas.sort( function(a,b) { if (a.title.toLowerCase() < b.title.toLowerCase()) { return -1; } if (b.title.toLowerCase() < a.title.toLowerCase()) { return 1; } return 0; });\n\t\t\t\tbreak;\n\t\t\tcase 'ranking,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - b.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.yes - b.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.yes - a.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'args,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.argCount - a.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'args,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.argCount - b.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    state.ideas = maxLength ? ideas.slice(0, maxLength): ideas;\n\n    state.hideSortButton = hideSortButton;\n\n    self.setState(state);\n\n  }\n\n  setSortOrder({ sortOrder }) {\n    this.setState({\n      ...this.state,\n      currentSortOrder: sortOrder\n    }, function() {\n      this.updateIdeas({ sortOrder })\n    });\n  }\n\n  onIdeaClick(e) {\n    // placeholder\n  }\n\n  dispatchMouseOverListItem(e, idea) {\n    e.stopPropagation();\n    let newMouseOverIdeaId = idea.id;\n    if (!this.state.currentMouseOverIdea || newMouseOverIdeaId != this.state.currentMouseOverIdea.id) {\n      this.setState({ currentMouseOverIdea: idea.id });\n\t\t  var event = new window.CustomEvent('mouseOverListItem', { detail: { idea: idea } });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n  \n  dispatchMouseOutListItem(e) {\n    e.stopPropagation();\n    if (this.state.currentMouseOverIdea) {\n      this.setState({ currentMouseOverIdea: null });\n\t\t  var event = new window.CustomEvent('mouseOutListItem', {});\n\t\t  document.dispatchEvent(event);\n    }\n  }\n\n\trender() {\n\n    let self = this;\n\n    let sortSelector = null;\n    if (this.config.idea.sort.showSortButton && !this.state.hideSortButton) {\n      sortSelector = (\n        <div className=\"osc-sort osc-align-right-container osc-margin-right\">\n          Sorteer op:&nbsp;&nbsp;&nbsp;&nbsp;\n          <select value={self.state.currentSortOrder} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n            { self.config.idea.sort.sortOptions.map((option, i) => {\n              return <option value={ option.value } key={'sort-option-' + i}>{ option.label }</option>;\n            })}\n          </select>\n        </div>\n      );\n    } else {\n      sortSelector = (<div style={{height: 20}}></div>)\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.props.title} ({self.state.ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-infobar-ideas-list'} ref={el => (self.instance = el)}>\n\n        {sortSelector}\n\n        {titleHML}\n\n        { self.state.ideas.map((idea, i) => {\n          if (!idea) {\n            console.log('idea is undef', i, self.state.ideas);\n          }\n          let ideaTypeValue;\n          try {\n            ideaTypeValue = eval(`idea.${self.config.typeField}`);\n          } catch (err) {\n            ideaTypeValue = '';\n          }\n          let typeDef = self.config.types.find(entry => ideaTypeValue && ( entry.id == ideaTypeValue || entry.name == ideaTypeValue ));\n          if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n          let voteCountHTML = null;\n          if (this.config.idea.showVoteButtons) {\n            voteCountHTML = (\n              <div className=\"osc-likes\">\n                {idea.yes || 0}\n              </div>);\n          }\n          let argcountHTML = null;\n          if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n            argcountHTML = (\n              <div className=\"osc-reactions\">\n                {idea.argCount || 0}\n              </div>);\n          }\n          return (\n            <div className={`osc-infobar-ideas-list-idea${self.state.currentMouseOverIdea && self.state.currentMouseOverIdea != idea.id ? ' osc-opacity-65' : ''}`} onClick={(event) => self.config.onIdeaClick(event, idea)} key={'infobar-' + i} onMouseOver={e => self.dispatchMouseOverListItem(e, idea)} onMouseOut={e => self.dispatchMouseOutListItem(e)}>\n              <div className=\"osc-content\">\n                <div className=\"osc-idea-image-container\">\n                  <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n                </div>\n                <h4 className=\"osc-title\">{ eval(`idea.${self.config.titleField}`) }</h4>\n                <div className=\"osc-summary\">\n                  { eval(`idea.${self.config.summaryField}`) }\n                </div>\n                <div className=\"osc-stats\">\n                  {voteCountHTML}\n                  {argcountHTML}\n                  <div className=\"osc-type\">\n                    <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"osc-clear-both\"></div>\n            </div>\n          );\n        })}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport Preview from './preview.jsx';\nimport IdeasList from './ideas-list.jsx';\n\nimport IdeaDetails from '../../../idea-details/index.jsx';\nimport IdeaForm from './idea-form.jsx';\n\nimport OpenStadComponentLibs from '../../../libs/index.jsx';\nimport OpenStadComponentImage from '../../../idea-image/index.jsx';\n\n'use strict';\n\n// details en form worden nu langs hier getekend, maar de rest moet nog heel erg opgeschoond\n// ook hier woren nog funcies meegetuurd die via events moeten lopen\n\nexport default class InfoBar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      display: {\n        type: 'list',\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n      argument: {\n        isActive: true,\n        ignoreReactionsForIdeaIds: '',\n      },\n      types: [],\n\t\t};\n\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n\n    this.config.loginUrl = this.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    // tmp voor oude data\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionLoggedInHTML) {\n      this.config.content.noSelectionLoggedInHTML = props.config.content.noSelectionHTML\n    }\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionNotLoggedInHTML) {\n      this.config.content.noSelectionNotLoggedInHTML = props.config.content.noSelectionHTML\n    }\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n\t\tdocument.addEventListener('osc-set-selected-idea', function(event) {\n      self.setSelectedIdea(event.detail);\n    });\n\t\tdocument.addEventListener('osc-set-selected-location', function(event) {\n      self.setNewIdea(event.detail);\n    });\n\n  }\n  \n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    this.setState({ ideas });\n    this.list && this.list.updateIdeas({ ideas, sortOrder, hideSortButton, center, maxLength });\n  }\n\n // todo: dit moet helemaal weg; hij moet controlled worden\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n\n  dispatchOnIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('ideaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('osc-click-mobile-switcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  render() {\n\n    let self = this;\n    \n    let config = {...self.config};\n    // TODO: tmp gerard dou\n    if ( this.props.idea && this.props.idea.extraData && this.props.idea.extraData.type && ( this.props.idea.extraData.type == 'Kans' || this.props.idea.extraData.type == 'Knelpunt' ) ) {\n      config.types = [{\"name\": \"Kans\",\"label\": \"Dit gaat goed\",\"value\": \"Kans\",\"buttonLabel\": \"Ik wil een idee posten\",\"backgroundColor\": \"#bed200\",\"textColor\": \"black\"},{\"name\": \"Knelpunt\",\"label\": \"Dit kan beter\",\"value\": \"Knelpunt\",\"backgroundColor\": \"#ff9100\",\"textColor\": \"black\"}];\n      config.showLabels = true;\n    }\n\n    switch (self.props.displayType) {\n\n        // idea detail\n      case 'details':\n        return (\n          <IdeaDetails config={config} idea={this.props.idea} className={self.props.className || 'osc-infobar-idea-details'} ref={el => (this.ideadetails = el)}/>\n        );\n        break;\n\n        // idea form\n      case 'form':\n        return (\n\t\t\t    <IdeaForm config={config} idea={this.props.idea} className=\"osc-ideas-on-map-info\" ref={el => (this.ideaform = el)}/>\n        );\n        \n        break;\n\n        \n    // ideas in list\n      default:\n\n    }\n\n    \n\n    \n    \n\n    \n\n\n    \n\n    \n\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // new idea\n    if (self.state.newIdea) {\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n\n    // wat doet dit? het was was if (!newIdeaHTML && !selectedIdeaHTML) {\n    if (!self.state.newIdea && !self.state.selectedIdea) {\n      mobileTitle = `${self.config.ideaName} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-infobar'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          <Preview config={self.config} selectedIdea={self.state.selectedIdea} selectedLocation={self.state.newIdea}/>\n\t\t\t    <IdeasList config={{ ...self.config, onIdeaClick: ( event, idea ) => self.dispatchOnIdeaClick(event, idea) }} ideas={self.state.ideas} title={self.config.ideaName + ' ' + titleAddition} key={`osc-ideas-list-321`} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../../libs/index.jsx';\nimport OpenStadComponentImage from '../../../idea-image/index.jsx';\n\n'use strict';\n\n// todo: dit moet nog heel erg opgeschoond\n// todo: selectedidea weergave kan met idea-overview.tile gaan werken\n\nexport default class Preview extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      display: {\n        type:'idea-selection',\n      },\n      api: {\n      },\n      content: {\n        noSelectionLoggedInHTML: '<div class=\\\"osc-infobar-default-block\\\"><div class=\\\"osc-infobar-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-infobar-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-infobar-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        noSelectionNotLoggedInHTML: '<div class=\\\"osc-infobar-default-block\\\"><div class=\\\"osc-infobar-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-infobar-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-infobar-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        selectionActiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {addButton}.',\n        selectionInactiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        selectionActiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {loginButton} of <a href=\"{loginLink}\">login link</a>.',\n        selectionInactiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        mobilePreviewLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4>{addButton}',\n        mobilePreviewNotLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4><div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"{loginLink}\">inloggen</a>.</div>',\n        showNoSelectionOnMobile: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n\t\t};\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n    this.config.loginUrl = this.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n\n    // tmp voor oude data\n    props.config.content = props.config.content || {};\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionLoggedInHTML) {\n      this.config.content.noSelectionLoggedInHTML = props.config.content.noSelectionHTML\n    }\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionNotLoggedInHTML) {\n      this.config.content.noSelectionNotLoggedInHTML = props.config.content.noSelectionHTML\n    }\n\n    // state\n    this.state = {\n    };\n\n  }\n\n  dispatchOnButtonIdeaClick(e, idea) {\n\t\tvar event = new window.CustomEvent('osc-selection-button-click', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchNewIdeaClick(e, idea) {\n\t\tvar event = new window.CustomEvent('osc-new-idea-click', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchSelectedIdeaClick(e, idea) {\n\t\tvar event = new window.CustomEvent('osc-selected-idea-click', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchClosePreview(e, what) {\n    e.stopPropagation();\n    let event;\n    if (what == 'idea')     event = new window.CustomEvent('osc-set-selected-idea',     { detail: null });\n    if (what == 'location') event = new window.CustomEvent('osc-set-selected-location', { detail: null });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  render() {\n\n    let self = this;\n\n    // mobile popup\n    if ( self.config.display.type == 'mobilePreview') {\n\n      let contentHTML = this.config.api.isUserLoggedIn ? this.config.content.mobilePreviewLoggedInHTML : this.config.content.mobilePreviewNotLoggedInHTML;\n\n      let addButton = null; let loginButton = null; let loginLink = null;\n      if (this.config.api.isUserLoggedIn) {\n        if (this.config.idea.canAddNewIdeas) {\n          addButton = (\n            <button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n          );\n        }\n      } else {\n        if (this.config.idea.canAddNewIdeas) {\n          loginButton = (\n            <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n          );\n          loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n        }\n      }\n      \n      contentHTML = contentHTML.replace(/\\{address\\}/g, this.props.selectedLocation.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      \n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      return (\n\t\t\t\t<div className=\"ocs-mobile-popup\">\n\t\t\t\t\t{contentHTML}\n\t\t\t\t</div>\n\t\t\t);\n      \n    }\n\n    // other\n\n    let selectedLocationHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // knoppen\n    let addButton = null; let loginButton = null; let loginLink = null;\n\n    if (self.config.idea.canAddNewIdeas) {\n      if (self.config.types && self.config.typeField == 'typeId') {\n        addButton = (\n          <span className=\"osc-new-idea-buttons\">\n            {self.config.types.map(\n              (type, i) => {\n                let typeDef = type;\n                if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n                  let buttonBgHTML = typeDef ? <div className=\"osc-button-background-image\" dangerouslySetInnerHTML={{ __html: typeDef.buttonicon && typeDef.buttonicon.html || '' }}></div> : null;\n                  return (<button className=\"osc-button osc-button-white\" onClick={(event) => self.dispatchNewIdeaClick(event, {typeId: typeDef.id || typeDef.name})} key={`osc-button-${i}`}>{buttonBgHTML}{ typeDef && typeDef.buttonLabel || 'Nieuw punt toevoegen' }</button>)\n                } else return null;\n              }\n            )}\n          </span>\n        );\n      } else {\n        addButton = (\n          <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)}>Nieuw punt toevoegen</button>\n        );\n      }\n      loginButton = (\n        <button onClick={() => { document.location.href = this.config.loginUrl }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n      );\n      loginLink = `javascript: document.location.href = '${this.config.loginUrl}'`;\n    }\n\n    // new idea\n    if (self.props.selectedLocation) {\n      let contentHTML = null;\n      if (self.props.selectedLocation.isPointInPolygon) {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionActiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionActiveNotLoggedInHTML\n        }\n      } else {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionInactiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionInactiveNotLoggedInHTML\n        }\n      }\n\n      contentHTML = contentHTML.replace(/\\{address\\}/g, self.props.selectedLocation.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      selectedLocationHTML = (\n\t\t\t  <div className=\"osc-infobar-new-idea\">\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchClosePreview(event, 'location')} ref={el => (self.resetButton = el)}/>\n          {contentHTML}\n        </div>\n      );\n\n\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.props.selectedIdea) {\n      let idea = self.props.selectedIdea;\n      let ideaTypeValue;\n      try {\n        ideaTypeValue = eval(`idea.${self.config.typeField}`);\n      } catch (err) {\n        ideaTypeValue = '';\n      }\n      let typeDef = self.config.types.find(entry => entry.name == ideaTypeValue || entry.id == ideaTypeValue);\n      if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      let voteCountHTML = null;\n      if (this.config.idea.showVoteButtons) {\n        voteCountHTML = (\n          <div className=\"osc-likes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        argcountHTML = (\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-infobar-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.props.selectedIdea)}>\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchClosePreview(event, 'idea')} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-infobar-selected-idea-idea\">\n            <div className=\"osc-idea-image-container\">\n              <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n            </div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                {voteCountHTML}\n                {argcountHTML}\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    let defaultBlockHTML = null;\n    if (!selectedLocationHTML && !selectedIdeaHTML) {\n      let noSelectionHTML = self.config.content.noSelectionNotLoggedInHTML;\n      if (self.config.api.isUserLoggedIn) noSelectionHTML = self.config.content.noSelectionLoggedInHTML;\n      noSelectionHTML = noSelectionHTML.replace(/\\{loginLink\\}/g, loginLink);\n      noSelectionHTML = OpenStadComponentLibs.reactTemplate({ html: noSelectionHTML, addButton, loginButton })\n      defaultBlockHTML = (\n\t\t\t  <div className={`osc-infobar-default-block${ self.config.content.showNoSelectionOnMobile ? ' osc-visible-on-mobile' : '' }`}>{noSelectionHTML}</div>\n      );\n      mobileTitle = `${self.config.ideaName} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n\n    }\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div className=\"osc-selection-block\">\n        {defaultBlockHTML}\n        {selectedLocationHTML}\n        {selectedIdeaHTML}\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport OpenStadComponentNLMap from '../../nlmap/index.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      clustering: {\n        maxClusterRadius: 100,\n        showCoverageOnHover: false,\n      },\n      types: [],\n    };\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    // tmp fallback\n    this.config.polygon = this.config.polygon;\n    this.config.autoZoomAndCenter = this.config.autoZoomAndCenter || 'polygon'\n    \n    this.ideas = [];\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    super.componentDidMount(prevProps, prevState);\n\n    let self = this;\n\t\tdocument.addEventListener('osc-map-cluster-animation-end', function(event) {\n      self.onMapClusterAnimationEnd(event.detail);\n    });\n\n  }\n  \n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && self.config.typeField ? eval(`idea.${self.config.typeField}`) : 'typeId';\n\t\tlet typeDef = self.config.types.find(entry => typename && ( entry.id == typename || entry.name == typename ));\n    if (!typeDef) typeDef = {};\n\t  let color = typeDef.color || typeDef.backgroundColor || '#164995';\n    let icondef = ( ( typeDef.mapicon || typeDef.icon ) ) || { html: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  setBoundsAndCenter(points) {\n    super.setBoundsAndCenter(points || ( this.config.autoZoomAndCenter == 'polygon' && this.config.polygon ) || this.markers);\n  }\n\n  showMarkers({ keepCenter=false }) {\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    // if (!keepCenter) self.setBoundsAndCenter(( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || self.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception && exception.location) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onMapClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n\n\t\t\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult.bind(this));\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n\t\t// console.log('update', searchValue, searchResult);\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t\tAdressen:\n          { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t\t<div className=\"osc-search-suggestions-hr\"/>\n\t\t\t\t\t{ this.config.title }:\n          { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder=\"Zoek op trefwoord\" onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\nimport 'custom-event-polyfill';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\n\n// render elements\nOpenStadComponentIdeasOnMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOnMap as default,\n  OpenStadComponentIdeasOnMap as IdeasOnMap,\n};\n\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\nimport reactTemplate from './lib/react-template.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n  reactTemplate,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","import merge from 'merge';\n\n// TODO: dit werkt alleen als het er 1 is\n\nexport default function({ html='' }) {\n\n  let args = arguments[0];\n  delete args.html;\n\n  let matches = 0;\n\n  Object.keys(args).forEach((key) => {\n\n    let regEx = new RegExp(`^((?:.|\\n|\\r)*)\\\\{${key}\\\\}((?:.|\\n|\\r)*)$`, 'g');\n    let match = regEx.exec(html);\n\n    if (match) {\n      matches++;\n      html = (\n        <span>\n        <span dangerouslySetInnerHTML={{ __html: match[1] }}></span>\n        {args[key]}\n        <span dangerouslySetInnerHTML={{ __html: match[2] }}></span>\n        </span>\n      );\n    }\n\n  });\n\n  if (matches == 0) html = <span dangerouslySetInnerHTML={{ __html: html }}></span>\n  return html;\n  \n}\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nlet roles = {\n  admin: ['admin', 'moderator', 'editor', 'member', 'anonymous', 'all'],\n  moderator: ['moderator', 'editor', 'member', 'anonymous', 'all'],\n  editor: ['editor', 'member', 'anonymous', 'all'],\n  member: ['member', 'anonymous', 'all'],\n  anonymous: ['anonymous', 'all'],\n  all: ['all'],   // special\n  owner: null, // special\n}\n\nexport default function(user, requiredRole) {\n  let userRole = user.role;\n  if (!Object.keys(roles).includes(userRole)) userRole = 'all';\n  return roles[userRole].includes(requiredRole);\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\nimport hasRole from './has-role.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n  hasRole,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from '../../component/index.jsx';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tself.mapIsReady = true;\n\t\t\tvar event = new CustomEvent('osc-map-is-ready', { detail: { id: self.divId } });\n\t\t\tdocument.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap({ ...self.config });\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n    if (self.config.zoomControl == false) {\n      self.map.removeControl(self.map.zoomControl);\n    }\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || amapsCreateClusterIcon.bind(self) // ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t\tself.markerClusterGroup.on('clusterclick', self.onClusterClick);\n\t\t\tself.markerClusterGroup.on('animationend', self.onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tself.map.on('click', self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\n    if (!Array.isArray(points)) {\n      self.map.panTo(new L.LatLng(self.config.center.latitude, self.config.center.longitude));\n      return;\n    }\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n    if (!point) return false;\n    if (!polygon) return true;\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var x = point.lat, y = point.lng;\n\n    var inside = false;\n    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        var xi = polygon[i].lat, yi = polygon[i].lng;\n        var xj = polygon[j].lat, yj = polygon[j].lng;\n\n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonMarkerClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-marker-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterAnimationEnd(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-animation-end', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentNLMap from './component/map.jsx';\n\n// render elements\nOpenStadComponentNLMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentNLMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentNLMap as default,\n  OpenStadComponentNLMap as NLMap,\n};\n\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n  \n  // todo: configurable\n  let markers = cluster.getAllChildMarkers();\n\n  let colors = {}\n  let total = markers.length;\n  let isFaded = false;\n  markers.forEach((entry) => {\n    let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n    let tmp = self.config.types.find(entry => type && ( entry.id == type || entry.name == type ));\n    let color = tmp && ( tmp.color || tmp.backgroundColor ) || '#164995';\n    if ( type == undefined ) type = 'undef'\n    if ( !colors[color] ) colors[color] = 0;\n    colors[color]++;\n    if (entry.data && entry.data.isFaded) isFaded = true;\n  });\n\n  let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n  let soFar = 0;\n  Object.keys(colors).forEach((key) => {\n    let myColor = key;\n    let perc = 100 * colors[key] / total;\n    let angle = (soFar / 100) * 360;\n    \n    html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n    soFar = soFar + perc;\n  });\n\n  html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n  return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPollForm extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      user: {},\n      questionMinLength: 30,\n      questionMaxLength: 500,\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      allowChoiceTitles: true,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      pollId: props.pollId,\n      poll: props.poll,\n      isBusy: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if ( !self.state.poll ) self.fetchData();\n        });\n      });\n    } else {\n      if ( !self.state.poll ) self.fetchData();\n    }\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n    if (!self.state.pollId) {\n      return self.setState({ poll: {\n        question: '',\n        choices: { \"1\": {}, \"2\": {} },\n      }});\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.config.pollId }?withUser=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.poll = json;\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  validatedResult() {\n\n    let self = this;\n    let poll = self.state.poll;\n\n    let questionInput = self['question-input'];\n    let isValid = questionInput.validate();\n    let result = { question: questionInput.state.value, choices: {} };\n\n    Object.keys(poll.choices).forEach((key) => {\n      let titleInput = self[`title-input-${key}`];\n      let descriptionInput = self[`description-input-${key}`];\n      if (!( titleInput && titleInput.state.value ) && !descriptionInput.state.value) return;\n      result.choices[key] = {};\n      if (self.config.allowChoiceTitles && titleInput.state.value) {\n        result.choices[key].title = titleInput.state.value;\n        if (!titleInput.validate()) isValid = false;\n      }\n      if (descriptionInput.state.value) {\n        result.choices[key].description = descriptionInput.state.value;\n        if (!descriptionInput.validate()) isValid = false;\n      }\n    });\n\n    if (!isValid) return null;\n    if (Object.keys(result.choices).length < 2) return null;\n    return result;\n\n  }\n\n  handleOnChange(data) {\n\n    let self = this;\n    let poll = { ...self.state.poll };\n\n    if (data.choice) {\n      poll.choices[ data.choice.id ] = {\n        title: self.config.allowChoiceTitles && data.choice.title,\n        description: data.choice.description,\n      }\n    }\n\n    if (data.question) {\n      poll.question = data.question;\n    }\n\n    this.setState({ poll }, () => {\n    });\n\n  }\n\n  addChoice() {\n    let self = this;\n    let poll = { ...self.state.poll };\n    let keys = Object.keys(poll.choices).sort();\n    let key = parseInt( keys[keys.length-1] ) + 1;\n    poll.choices[ key ] = {};\n    self.setState({ poll })\n  }\n\n  canSubmit() {\n    if (this.state.poll && this.state.poll.can) {\n      return this.state.poll.can.edit;\n    } else {\n      let requiredUserRole = this.config.requiredUserRole;\n      let userRole = this.props.user && this.props.user.role;\n      // todo: owner; dus dit moet anders\n      // todo: nieuwe rollen structuur\n      return  requiredUserRole == 'anonymous' && userRole  ||\n        requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n        requiredUserRole == 'admin' && userRole == 'admin';\n    }\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let validatedResult = self.validatedResult();\n      if (!validatedResult) {\n        self.setState({ isBusy: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let isNew = true;\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll`;\n      let method = 'POST';\n      if (self.state.poll && self.state.poll.id) {\n        url += `/${ self.state.poll.id }`;\n        method = 'PUT';\n        isNew = false;\n      }\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      let body = validatedResult;\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-new-poll-stored', { detail: json });\n          if (!isNew) event = new CustomEvent('osc-poll-edited', { detail: json });\n\n\t\t      document.dispatchEvent(event);\n          if (typeof self.config.onFinished == 'function') {\n            self.config.onFinished(validatedResult);\n          }\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n    \n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue osc-margin-left${ self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button osc-margin-left\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)} >\n        {formIntro}\n\n        <h4>Vraag</h4>\n        <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.questionMinLength, maxLength: self.config.questionMaxLength, placeholder: 'Vraag' }} value={poll.question} onChange={ data => self.handleOnChange({ question: data.value }) } ref={el => (self[`question-input`] = el)}/>\n\n        <h4>Keuzemogelijkheden</h4>\n        <ol className=\"osc-poll-form-choices\">\n          {poll && poll.choices && Object.keys(poll.choices).sort().map((key) => {\n            let choice = poll.choices[key];\n            let titleInputHTML = null;\n            if (self.config.allowChoiceTitles) titleInputHTML = <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.titleMinLength, maxLength: self.config.titleMaxLength, placeholder: 'Titel' }} value={choice.title} onChange={ data => self.handleOnChange({ choice: { id: key, title: data.value } }) } ref={el => (self[`title-input-${key}`] = el)}/>;\n            return (\n              <li className=\"osc-poll-form-choice\" key={`osc-key-${key}`}>\n                {titleInputHTML}\n                <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.descriptionMinLength, maxLength: self.config.descriptionMaxLength, placeholder: 'Beschrijving' }} value={choice.description} onChange={ data => self.handleOnChange({ choice: { id: key, description: data.value } }) } ref={el => (self[`description-input-${key}`] = el)}/>\n              </li>\n            );\n          })}\n        </ol>\n\n        <a className=\"osc-add-choice-button\" onClick={ e => this.addChoice() }>Nog een keuzemogelijkheid toevoegen</a>\n        \n        {submitButtonHTML}\n\n      </div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\nimport OpenStadComponentPollForm from './poll-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPoll extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-poll-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null, // hoort niet hier\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      withPercentage: true,\n      allowChoiceTitles: true,\n      allowShowResultsIfNotVoted: false,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    self.hideEditForm = self.hideEditForm.bind(self);\n\n    self.state = {\n      user: self.config.user,\n      poll: props.poll,\n      pollId: ( props.poll && props.poll.id ) || self.config.pollId,\n      selectedChoice: null,\n      showResult: false,\n      showQuestion: false,\n      editMode: false,\n      showVoteSucceeded: false,\n    };\n\n    if (self.state.poll) {\n      self.parseVoteCount(self.state.poll);\n      if (self.state.poll.userVote) {\n        self.state.selectedChoice = self.state.poll.userVote;\n      }\n    }\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if (!self.state.poll && self.config.ideaId) self.fetchData();\n        });\n      });\n    } else {\n      if (!self.state.poll && self.config.ideaId) self.fetchData();\n    }\n\n    // document.addEventListener('osc-new-reaction-stored', function(event) {\n    //   self.onNewPolltored(event.detail);\n    // });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    if (!self.state.pollId) {\n      // no data: show new poll form\n      return self.setState({ editMode: true }, () =>{\n      })\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.state.pollId }?withUser=1&withUserVote=1&withVoteCount=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state, showResult: false, showQuestion: false, };\n        state.poll = json;\n        state.pollId = json.id;\n\n        self.parseVoteCount(state.poll);\n\n        if (state.poll.userVote) {\n          state.selectedChoice = state.poll.userVote;\n        }\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  parseVoteCount(poll) {\n    let self = this;\n    if (poll.voteCount) {\n      Object.keys(poll.choices).sort().forEach((key) => {\n        let choice = poll.choices[key];\n        choice.votesAbs = poll.voteCount[key]\n        choice.votesPrc = parseInt(100 * ( poll.voteCount[key] / poll.voteCount.total ));\n        choice.votesPrc = choice.votesPrc || 0;\n      });\n    }\n\n  }\n\n  showEditForm() {\n    this.setState({ editMode: true });\n  }\n\n  hideEditForm() {\n    this.setState({\n      editMode: false,\n    }, function() {\n      this.fetchData()\n    });\n  }\n\n  setShowResult() {\n    this.setState({ showResult: true });\n  }\n\n  setShowQuestion() {\n    this.setState({ showQuestion: true });\n  }\n\n  selectChoice(data) {\n    this.setState({ selectedChoice: data.choice });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  isValid() {\n    return !!this.state.selectedChoice;\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.state.user && this.state.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n            requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n            requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitVote() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      if (!self.isValid()) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = 'POST';\n\n      let body = {\n        choice: self.state.selectedChoice,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          self.fetchData( () => {\n            self.setState({ isBusy: false, showVoteSucceeded: true, }, () => {\n\t\t          let event = new CustomEvent('osc-poll-voted', { detail: json });\n\t\t          document.dispatchEvent(event);\n            });\n          });\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n            \n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  deletePoll() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let poll = self.state.poll;\n      if (!( poll && poll.can && poll.can.delete )) return alert('U kunt deze poll niet verwijderen');\n      if (!( poll && poll.id )) return alert('U kunt deze poll niet verwijderen');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }`;\n      let method = 'DELETE';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      fetch(url, {\n        method,\n        headers,\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-poll-deleted', { detail: json });\n\t\t      document.dispatchEvent(event);\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    if (self.state.editMode) {\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          <OpenStadComponentPollForm config={{ ...self.config, onFinished: self.hideEditForm }} pollId={self.state.poll && self.state.poll.id} poll={self.state.poll} user={self.state.user}/>\n        </div>\n      );\n      \n    } else {\n\n      let questionHTML = null;\n      if (( poll && poll.choices && !poll.userVote ) || self.state.showQuestion) {\n        \n        let config = { name: \"pollChoice\", choices: [] };\n        Object.keys(poll.choices).sort().map(key => {\n          let choiceHTML = self.config.allowChoiceTitles && poll.choices[key].title ? `<h4>${poll.choices[key].title}</h4>` : '';\n          choiceHTML += poll.choices[key].description || '';\n          config.choices.push({\n            dangerousDescription: choiceHTML,\n            value: key\n          });\n        })\n\n        let submitButtonHTML = null;\n        if (self.canSubmit()) {\n          submitButtonHTML = (<button onClick={(e) => { if (!self.state.isBusy) self.submitVote(); }} className={`osc-button-blue${ !self.isValid() ? ' osc-disabled' : '' }`} >Stemmen</button>);\n        } else {\n          submitButtonHTML = (<button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-poll-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>);\n        }\n\n        let showResultButtonHTML = null;\n        if (self.config.allowShowResultsIfNotVoted &&  !(poll.userVote || self.state.showResult)) showResultButtonHTML = (<a className=\"osc-show-result-button\" onClick={ e => this.setShowResult() }>Resultaat bekijken</a>);\n\n        questionHTML = (\n          <div className=\"osc-poll-question osc-form\">\n            <OpenStadComponentForms.Radios config={config} value={self.state.selectedChoice} onChange={ data => self.selectChoice({ choice: data.value }) } ref={el => (self.description = el)}/>\n            <div className=\"osc-poll-question-buttons\">\n              {submitButtonHTML}\n              {showResultButtonHTML}\n            </div>\n          </div>\n        );\n      }\n\n      let resultHTML = null;\n      if ( poll && ( poll.userVote || self.state.showResult ) ) {\n\n        let showQuestionButtonHTML = null;\n        if (!self.state.showQuestion && !(poll && poll.choices && !poll.userVote)) showQuestionButtonHTML = (<a className=\"osc-show-question-button\" onClick={ e => this.setShowQuestion() }>Stem aanpassen</a>);\n\n        let totalVotesHTML = null;\n        if (poll.voteCount && poll.voteCount.total) {\n          let xx = poll.voteCount.total == 1 ? 'stem' : 'stemmen';\n          totalVotesHTML = <div>Totaal {poll.voteCount.total} {xx}<br/><br/></div>\n        }\n\n        resultHTML = (\n          <ul className=\"osc-choices\">\n            {Object.keys(poll.choices).sort().map(key => {\n              let choice = poll.choices[key];\n              let titleHTML = null;\n              if (self.config.allowChoiceTitles && choice.title) titleHTML = (<h4>{choice.title}</h4>);\n              let descriptionHTML = null;\n              if (choice.description) descriptionHTML = (<div>{choice.description}</div>);\n              let percentageHTML = null;\n              if (self.config.withPercentage) {\n                percentageHTML = <div className=\"osc-percentage\">{choice.votesPrc}%</div>\n              }\n              let scoreHTML = (\n                <div className=\"osc-choice-default\">\n                  {titleHTML}\n                  {descriptionHTML}\n                  <div className={`osc-choice-bar${self.config.withPercentage ? ' osc-with-percentage' : ''}`}>\n                    <div className=\"osc-choice-bar-mask\"></div>\n                    <div className=\"osc-choice-bar-progress\" style={{ width: ( choice.votesPrc || 0 ) + '%' }}></div>\n                  </div>\n                  { percentageHTML }\n                </div>\n              );\n              return (\n                <li className=\"osc-choice\" key={`osc-key-${key}`}>\n                  {scoreHTML}\n                </li>\n              );\n            })}\n            {totalVotesHTML}\n            {showQuestionButtonHTML}\n          </ul>\n        );\n      }\n\n      let editButtonsHTML = null;\n      if (self.state.poll && self.state.poll.can && self.state.poll.can.edit) {\n        editButtonsHTML =\n          <div className=\"osc-editbuttons\">\n            <button className=\"osc-editbutton osc-edit\" onClick={event => self.showEditForm()}>Bewerk poll</button>\n            <button className=\"osc-editbutton osc-delete\" onClick={event => { if (confirm('Weet u het zeker')) self.deletePoll() }}>Verwijder poll</button>\n          </div>\n      }\n\n      let voteSucceededHTML = null;\n      if (self.state.showVoteSucceeded) {\n        voteSucceededHTML = <div className=\"osc-vote-succeeded\">Uw stem is opgeslagen</div>\n      }\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          {editButtonsHTML}\n          {voteSucceededHTML}\n          <h4>{poll.question}</h4>\n          {questionHTML}\n          {resultHTML}\n          <br/><br/>\n        </div>\n      );\n\n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentPoll from './component/poll.jsx';\n\n// render elements\nOpenStadComponentPoll.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentPoll attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentPoll as default,\n  OpenStadComponentPoll as Poll,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactionForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    \n    self.state = {\n      description: self.config.description || '',\n      isValid: false,\n      isBusy: false,\n    };\n\n  }\n\n  handleOnChange(data) {\n    data = data || {};\n    if (data.description) data.isValid = this.description.isValid();\n    this.setState(data);\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n             requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n             requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let isValid = self.description.validate({ showWarning: true });\n      if (!isValid) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument${   self.config.argumentId ? `/${  self.config.argumentId}` : ''}`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = self.config.argumentId ? 'PUT' : 'POST';\n\n      let body = {\n        parentId: self.config.parentId,\n        sentiment: self.config.sentiment,\n        description: self.state.description,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n\n          self.setState({ description: '', isBusy: false, isValid: false }, () => {\n\n            self.description.handleOnChange({ value: '' });\n\n            if (self.config.argumentId) {\n\t\t          let event = new CustomEvent('osc-reaction-edited', { detail: json });\n\t\t          document.dispatchEvent(event);\n            } else {\n\t\t          let event = new CustomEvent('osc-new-reaction-stored', { detail: json });\n\t\t          document.dispatchEvent(event);\n            }\n          });\n\n\n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n\n    let config = {\n      descriptionMinLength: self.config.descriptionMinLength || 30,\n      descriptionMaxLength: self.config.descriptionMaxLength || 500,\n    };\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue${ !self.state.isValid || self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <OpenStadComponentForms.InputWithCounter disabled={this.canSubmit() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ data => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        {submitButtonHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reaction-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n    };\n\n    self.config = Object.assign(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      isMenuActive: false,\n      isReplyFromActive: false,\n      editMode: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true });\n  }\n\n  toggleReplyForm() {\n    this.setState({ isReplyFromActive: !this.state.isReplyFromActive });\n  }\n\n  toggleEditForm(what) {\n    this.setState({ editMode: !this.state.editMode });\n  }\n\n  canEdit() {\n    return this.props.data.can.edit;\n  }\n\n  canDelete() {\n    return this.props.data.can.delete;\n  }\n\n  canLike() {\n    if (this.config.isClosed) return false;\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    return (( requiredUserRole == 'anonymous' && userRole ) ||\n            ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n            ( requiredUserRole == 'admin' && userRole == 'admin'));\n  }\n\n  canReply() {\n    return this.props.data.can.reply;\n  }\n\n  submitDelete() {\n\n    let self = this;\n\n    if (!self.canDelete()) return alert('U kunt deze reactie niet verwijderen');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id}`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'DELETE',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        self.setState({ isDeleted: true });\n\n\t\t    let event = new CustomEvent('osc-reaction-deleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  submitLike() {\n\n    let self = this;\n\n    if (!self.canLike()) return alert('U kunt deze reactie niet liken');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id  }/vote`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        // console.log({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n        self.setState({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.setState({ isMenuActive: false, isReplyFromActive: false });\n  }\n\n  onReactionEdited(reaction) {\n    if (reaction.id == this.props.data.id) {\n      this.setState({ editMode: false, isMenuActive: false });\n    }\n  }\n\n  render() {\n\n    let self = this;\n    let data = self.props.data || { can: {} };\n\n    if (data.isDeleted) return null;\n\n    let menuHTML = null;\n    if ( self.canEdit() && self.canDelete() ) {\n      menuHTML = (\n        <div className={ `osc-reaction-menu${   self.state.isMenuActive ? ' osc-reaction-hamburger-active' : ''}` } onClick={ () => { self.showMenu(); }}>\n          <a className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete(); } }/>\n          <a className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.toggleEditForm() }/>\n        </div>\n      );\n    }\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{data.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: data.description, argumentId: data.id }} user={self.state.user} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    let likeButtonHTML = null;\n    if (!data.parentId) {\n      likeButtonHTML = (\n\t\t\t  <a className={ `osc-reaction-like-button${ ( typeof self.state.hasUserVoted != 'undefined' ? self.state.hasUserVoted : data.hasUserVoted ) ? ' osc-reaction-like-button-hasvoted' : ''}` } onClick={ () => self.submitLike() }>\n\t\t\t\t  Mee eens (<span>{( typeof self.state.yes != 'undefined' ? self.state.yes : data.yes ) | 0}</span>)\n        </a>\n      );\n    }\n\n    let replyButtonHTML = null;\n    let replyFormHTML = null;\n    if (self.canReply() && !self.config.isClosed) {\n      replyButtonHTML = (<a onClick={ () => self.toggleReplyForm() } className=\"osc-reply-button\">Reageren</a>);\n      if (self.state.isReplyFromActive) {\n        let config = { ...self.config, parentId: data.id };\n        config.formIntro = '';\n        replyFormHTML = (\n\t\t\t    <div id={`osc-reaction-${data.id}`} className=\"osc-reply\">\n            <OpenStadComponentReactionForm config={config} user={self.state.user} ref={el => (self.editForm = el)}/>\n          </div>\n        );\n      }\n    }\n\n    let repliesHTML = null;\n    if (data.reactions && data.reactions.length) {\n      repliesHTML = (\n        <ul className=\"osc-reactions-list\">\n          {data.reactions.map((reaction) => {\n\n            let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n            return (\n              <li key={key}>\n                <OpenStadComponentReaction config={self.config} className=\"osc-reply\" user={self.state.user} data={reaction}/>\n              </li>\n            );\n\n          })}\n        </ul>\n      );\n    }\n\n    return (\n      <div>\n\n\t\t\t  <div id={`osc-reaction-${data.id}`} className={ self.props.className || 'osc-reaction' }>\n\n          {menuHTML}\n\n          <div className=\"osc-reaction-user\">{data.user.nickName || data.user.fullName || `${data.user.firstName } ${  data.user.lastName}`}</div>\n\t\t\t\t  <div className=\"osc-reaction-date\">{data.createDateHumanized}</div>\n          {descriptionHTML}\n\n          {likeButtonHTML}\n\t\t\t    {replyButtonHTML}\n\n\t\t    </div>\n\n\t\t\t  {replyFormHTML}\n        {repliesHTML}\n\n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\nimport OpenStadComponentReaction from './reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reactions-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      scrollToNewReaction: true,\n      isClosed: false,\n      closedText: 'De reactiemogelijkheid is gesloten',\n      sentiment: undefined,\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n\n    self.state = {\n      user: self.config.user,\n      reactions: [],\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          self.fetchData();\n        });\n      });\n    } else {\n      self.fetchData();\n    }\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n    this.deletedListener = document.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.deletedListener);\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument?sentiment=${  self.config.sentiment  }&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.reactions = json;\n        state.reactions.sort((a, b) => {\n          return a.createdAt < b.createdAt;\n        });\n        // console.log(state.reactions);\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.fetchData(() => {\n      if (this.config.scrollToNewReaction) {\n        let element = document.getElementById(`osc-reaction-${  reaction.id}`);\n        if ( element ) document.getElementById(`osc-reaction-${  reaction.id}`).scrollIntoView();\n      }\n    });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  onReactionDeleted(reaction) {\n    this.fetchData();\n  }\n\n  render() {\n\n    let self = this;\n\n    let reactions =\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n          let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} user={self.state.user} data={{ ...reaction }}/>\n            </li>\n          );\n\n        })}\n      </ul>;\n\n    let title = self.config.title ? <h3>{self.config.title}</h3> : null;\n\n    let reactionFormHTML = <OpenStadComponentReactionForm config={self.config} user={self.state.user}/>;\n    if (self.config.isClosed) {\n      if (self.config.closedText) {\n        reactionFormHTML = <div className=\"osc-closed-text\">{self.config.closedText}</div>\n      } else {\n        reactionFormHTML = null\n      }\n    }\n\n    return (\n      <div id={this.id} className={self.props.className || 'osc-reactions'} ref={(el) => { this.instance = el; }} >\n\n        {title}\n\n        {reactionFormHTML}\n\n        {reactions}\n        <br/><br/>\n\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentReactions from './component/reactions.jsx';\n\n// render elements\nOpenStadComponentReactions.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentReactions as default,\n  OpenStadComponentReactions as Reactions,\n};\n\n","/* (ignored) */","(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());"],"sourceRoot":""}
>>>>>>> Refactor ideas-on-map
=======
{"version":3,"sources":["webpack://OpenStadComponents/webpack/bootstrap","webpack://OpenStadComponents/./node_modules/custom-event-polyfill/polyfill.js","webpack://OpenStadComponents/./node_modules/es6-promise-promise/index.js","webpack://OpenStadComponents/./node_modules/es6-promise/dist/es6-promise.js","webpack://OpenStadComponents/./node_modules/merge/merge.js","webpack://OpenStadComponents/./node_modules/process/browser.js","webpack://OpenStadComponents/(webpack)/buildin/global.js","webpack://OpenStadComponents/(webpack)/buildin/module.js","webpack://OpenStadComponents/./node_modules/whatwg-fetch/fetch.js","webpack://OpenStadComponents/./src/component/index.jsx","webpack://OpenStadComponents/./src/forms/component/default-input.jsx","webpack://OpenStadComponents/./src/forms/component/form-field.jsx","webpack://OpenStadComponents/./src/forms/component/form.jsx","webpack://OpenStadComponents/./src/forms/component/hidden.jsx","webpack://OpenStadComponents/./src/forms/component/htmlarea.jsx","webpack://OpenStadComponents/./src/forms/component/image-upload.jsx","webpack://OpenStadComponents/./src/forms/component/input-with-counter.jsx","webpack://OpenStadComponents/./src/forms/component/postcode.jsx","webpack://OpenStadComponents/./src/forms/component/radios.jsx","webpack://OpenStadComponents/./src/forms/component/select.jsx","webpack://OpenStadComponents/./src/forms/component/slider.jsx","webpack://OpenStadComponents/./src/forms/component/textarea.jsx","webpack://OpenStadComponents/./src/forms/component/textinput.jsx","webpack://OpenStadComponents/./src/forms/css/default.less?b805","webpack://OpenStadComponents/./src/forms/index.jsx","webpack://OpenStadComponents/./src/idea-details/component/idea-details.jsx","webpack://OpenStadComponents/./src/idea-details/component/vote-button.jsx","webpack://OpenStadComponents/./src/idea-details/css/default.less?e694","webpack://OpenStadComponents/./src/idea-details/index.jsx","webpack://OpenStadComponents/./src/idea-image/component/idea-image.jsx","webpack://OpenStadComponents/./src/idea-image/css/default.less?05a6","webpack://OpenStadComponents/./src/idea-image/index.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/filterbar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/idea-form.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-on-map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-overview.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/infobar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/preview.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/search.jsx","webpack://OpenStadComponents/./src/ideas-on-map/css/default.less?8653","webpack://OpenStadComponents/./src/ideas-on-map/index.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/idea-tile.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/ideas-filter.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/ideas-filterbar.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/ideas-list.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/ideas-overview.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/ideas-search.jsx","webpack://OpenStadComponents/./src/ideas-overview/component/ideas-sort.jsx","webpack://OpenStadComponents/./src/ideas-overview/css/default.less?b856","webpack://OpenStadComponents/./src/ideas-overview/index.jsx","webpack://OpenStadComponents/./src/libs/css/default.less","webpack://OpenStadComponents/./src/libs/index.jsx","webpack://OpenStadComponents/./src/libs/lib/api/get-headers.js","webpack://OpenStadComponents/./src/libs/lib/api/index.js","webpack://OpenStadComponents/./src/libs/lib/local-storage.js","webpack://OpenStadComponents/./src/libs/lib/react-template.js","webpack://OpenStadComponents/./src/libs/lib/session-storage.js","webpack://OpenStadComponents/./src/libs/lib/user/get-jwt.js","webpack://OpenStadComponents/./src/libs/lib/user/get-user.js","webpack://OpenStadComponents/./src/libs/lib/user/has-role.js","webpack://OpenStadComponents/./src/libs/lib/user/index.js","webpack://OpenStadComponents/./src/libs/lib/user/logout.js","webpack://OpenStadComponents/./src/nlmap/component/map.jsx","webpack://OpenStadComponents/./src/nlmap/css/default.less?5507","webpack://OpenStadComponents/./src/nlmap/index.jsx","webpack://OpenStadComponents/./src/nlmap/lib/amaps-cluster-icon.js","webpack://OpenStadComponents/./src/poll/component/poll-form.jsx","webpack://OpenStadComponents/./src/poll/component/poll.jsx","webpack://OpenStadComponents/./src/poll/css/default.less?c43d","webpack://OpenStadComponents/./src/poll/index.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction-form.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction.jsx","webpack://OpenStadComponents/./src/reactions/component/reactions.jsx","webpack://OpenStadComponents/./src/reactions/css/default.less?29e6","webpack://OpenStadComponents/./src/reactions/index.jsx","webpack://OpenStadComponents/vertx (ignored)","webpack://OpenStadComponents/external \"React\"","webpack://OpenStadComponents/external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","defaultConfig","siteId","api","url","headers","isUserLoggedIn","user","merge","recursive","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentDefaultInput","choices","placeholder","disabled","required","state","error","onChange","showErrors","isValid","setState","data","validate","OpenStadComponentFormField","inputType","validateAction","changeAction","title","description","toLowerCase","undefined","handleOnChange","bind","input","titleHTML","descriptionHTML","__html","fieldHTML","el","instance","OpenStadComponentForm","intro","fields","values","firstInvalid","field","scrollIntoView","behavior","introHTML","fieldsHTML","length","map","fieldConfig","i","OpenStadComponentSelect","e","OpenStadComponentHTMLArea","onKeyUpx","filterHTML","innerHTML","replace","command","args","preventDefault","stopPropagation","document","execCommand","onKeyUp","onFocus","onBlur","executeAction","prompt","EditButton","cmd","evt","arg","allowMultiple","imageserver","process","fetch","uploadedFiles","image","push","source","options","type","file","metadata","poster","_loadedFiles","files","loadNextFile","element","createElement","src","async","onload","body","appendChild","fileUploaderInit","imageuploader","getFiles","images","serverId","containerElement","querySelector","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","filePondSettings","acceptedFileTypes","allowFileSizeValidation","allowReorder","styleItemPanelAspectRatio","maxFileSize","maxFiles","allowBrowse","server","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","addEventListener","detail","console","log","fileUploaderUpdateCurrentInput","formfields","addFiles","errorHTML","FormfieldInputWithCounter","minLength","maxLength","focused","valueLength","useKey","onInputFocus","onInputBlur","onInputKeyUp","warning","showWarning","counter","inputHTML","OpenStadComponentPostcode","match","OpenStadComponentRadios","choice","dangerousDescription","Slider","touched","handleChange","event","target","min","max","range","progInRange","step","className","transform","calcProgress","doTouch","OpenStadComponentText","Form","FormField","Hidden","ImageUpload","InputWithCounter","Postcode","Radios","Select","Text","Textarea","IdeasDetails","ideaId","idea","showVoteButtons","showLabels","allowMultipleImages","shareChannelsSelection","argument","isActive","formIntro","ignoreReactionsForIdeaIds","closeReactionsForIdeaIds","poll","canAddPolls","labels","types","typeField","typeLabel","showPollForm","reactionStoredListener","onReactionStored","reactionDeletedListener","onReactionDeleted","pollCreatedListener","onPollCreated","pollDeletedListener","onPollDeleted","fetchData","removeEventListener","editIdeaLink","location","href","CustomEvent","dispatchEvent","argCount","hidePollForm","OpenStadComponentLibs","getHeaders","then","response","ok","Error","json","localStorage","get","hash","set","role","method","afterDeleteIdeaLink","labelHTML","typeId","eval","typeDef","find","def","labelText","label","backgroundColor","textColor","color","pollHTML","addPollButtonHTML","can","edit","dispatchAddPollClick","voteButtonsHTML","text","opinion","yes","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","reactionsCountHTML","reactionsHTML","RegExp","isClosed","loginUrl","authorHTML","nickName","fullName","firstName","lastName","linkToUserPageUrl","shareButtonsHTML","facebookButtonHTML","includes","encodeURIComponent","twitterButtonHTML","mailButtonHTML","titleField","whatsappButtonHTML","createDateHumanized","extraData","theme","summary","VoteButton","busy","votePending","doVote","remove","stringify","change","userVote","alert","message","value000","value00","value0","OpenStadComponentIdeaDetails","renderElement","elem","ReactDOM","render","OpenStadComponentIdeaImage","currentImageIndex","width","offsetWidth","which","posterImage","backgroundImage","thumb","height","left","zIndex","setCurrentImageIndex","Filterbar","searchHTML","search","toggleMobileActiveSelector","mobileActiveSelector","resetButtonHTML","resetAll","filter","filters","currentValue","filterConfig","filtersAndButtonsHTML","IdeasFilterbar","IdeasForm","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","descriptionMinLength","descriptionMaxLength","showFormErrorsWarning","isBusy","summaryField","descriptionField","imageField","hasRole","auth","createableBy","address","coordinates","lat","lng","dispatchUpdateEditIdea","style","display","formValues","form","getValues","validateIdea","formErrorsWarningHTML","formHTML","submitIdea","submitButton","OpenStadComponentIdeasOnMap","canSelectLocation","canAddNewIdeas","content","ideaName","doSearchFunction","doSearch","entry","mapicon","listicon","buttonicon","ideas","visibleIdeas","listedIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","hideIdeaDetails","showIdeaDetails","on","onChangeMapBoundaries","onMapClick","onMarkerClick","onClusterClick","onChangeFilter","onUpdateSelectedIdea","setSelectedLocation","onNewIdeaClick","onSelectedIdeaClick","onClickMobileSwitcher","onIdeaClick","onTileMouseOver","onTileMouseOut","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","onUpdateEditIdea","showIdeaSelected","markers","marker","removeMarker","addIdea","setBoundsAndCenter","startWithListOpenOnMobile","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","newIdea","split","val","substring","decodeURIComponent","showIdeaForm","infobar","hideMarkers","exception","next","formUrl","searchValue","callback","searchValueLc","searchResult","locations","titlelLc","summaryLc","onClick","docs","found","weergavenaam","onClickAddress","centroide_ll","panTo","L","LatLng","latlng","getVisibleIdeas","ideaform","handleLocationChange","getPointInfo","_display","unfadeAllMarkers","isPointInPolygon","polygon","fadeMarkers","updateIdeas","x","sortOrder","hideSortButton","center","forceSelectLocation","updateFading","scrollTo","setTimeout","infoHTML","mobilePopupHTML","onClickBackToOverview","hideIdeaForm","divStyle","simpleHTML","buttonHTML","linkToCompleteUrl","position","top","right","bottom","zoomControl","IdeasOverview2","titleHML","showFilterbar","sort","sorter","IdeasOverview","InfoBar","columns","noSelectionHTML","noSelectionLoggedInHTML","noSelectionNotLoggedInHTML","currentSortOrder","defaultValue","list","doSort","displayType","ideadetails","titleAddition","mobileSwitcherHTML","mobileTitle","dispatchClickMobileSwitcher","onMouseOverTileFadeOthers","Map","clustering","maxClusterRadius","showCoverageOnHover","autoZoomAndCenter","mapClusterAnimationEndListener","onMapClusterAnimationEnd","ideasFilterOnchangeListener","typename","icondef","icon","html","anchor","divIcon","iconSize","point","iconAnchor","addMarker","visible","getBounds","contains","getLatLng","selectedLocationMarker","updateMarker","doNotCluster","points","keepCenter","showMarker","_latlng","hideMarker","isFaded","visibleParent","markerClusterGroup","getVisibleParent","ignore","getAllChildMarkers","m","setOpacity","fieldName","setFilter","result","OpenStadComponentNLMap","Preview","selectionActiveLoggedInHTML","selectionInactiveLoggedInHTML","selectionActiveNotLoggedInHTML","selectionInactiveNotLoggedInHTML","mobilePreviewLoggedInHTML","mobilePreviewNotLoggedInHTML","showNoSelectionOnMobile","what","contentHTML","addButton","loginButton","loginLink","newIdeaButton","reactTemplate","selectedLocationHTML","selectedIdeaHTML","buttonBgHTML","dispatchNewIdeaClick","buttonLabel","dispatchClosePreview","resetButton","ideaTypeValue","voteCountHTML","argcountHTML","dispatchSelectedIdeaClick","defaultBlockHTML","Search","assign","doSearchx","showSuggestions","updateSearchValue","updateSearchResult","inputfield","focus","suggestionsHTML","suggestions","$0","onSuggestionClick","hideSuggestions","handleButtonClick","vote","isViewable","voteValues","showStatusLabel","showTheme","showArea","showVoteProgressbar","showStats","showTypeIcon","newEvent","statusLabelHTML","themeAndAreaHTML","areaHTML","area","statsHTML","stats","no","statHTML","voteProgressHTML","typeIconHTML","dispatchIdeaTileClick","dispatchIdeaTileMouseOver","dispatchIdeaTileMouseOut","IdeasFilter","doFilter","fieldValue","showFilter","filterSelector","filterOptions","option","selected","doNextPendingResetAction","pendingResetActions","ideasSearchOnchangeListener","hideMobileActiveSelector","showMobileActiveSelector","setSearch","resetAction","shift","IdeasList","sortOptions","showSort","highLightIdeaId","ideaTileMouseOverListener","ideaTileMouseOutListener","updateFilter","updateSearch","ideasSortOnchangeListener","updateSort","filteredIdeas","slice","IdeasSearch","fieldNames","showSearch","showButton","searchInput","IdeasSort","latitude","longitude","a","b","ranking","Date","createdAt","getTime","_distance","sqrt","pow","setSortOrder","sortSelector","OpenStadComponentIdeasOverview","sessionStorage","jwt","getJWT","OpenStadComponentAPI","oscLocalStorage","getItem","setItem","removeItem","arguments","matches","regEx","exec","oscSessionStorage","roles","admin","moderator","editor","member","anonymous","all","owner","requiredRole","userRole","OpenStadComponentUser","getUser","logout","zoom","zoomposition","disableDefaultUI","variant","createMap","mapIsReady","rel","amaps","nlmaps","removeControl","iconCreateFunction","amapsCreateClusterIcon","onClusterAnimationEnd","addLayer","createCutoutPolygon","centerOn","editorMarker","markerData","index","indexOf","splice","removeLayer","newData","newLatLng","setLatLng","cluster","count","getChildCount","bounds","getCenter","smallest","y","sin","cos","bearing","atan2","PI","concat","delta1","delta2","outerBox","polygonStyle","Array","isArray","poly","latLngBounds","fitBounds","addTo","filterFuntion","filterFunction","applyFilter","inside","j","xi","yi","xj","yj","intersect","bagApiUrl1","bagApiUrl2","results","landelijk_id","colors","total","tmp","soFar","myColor","perc","angle","OpenStadComponentPollForm","questionMinLength","questionMaxLength","allowChoiceTitles","pollId","question","messages","questionInput","titleInput","descriptionInput","requiredUserRole","validatedResult","canSubmit","isNew","onFinished","submitButtonHTML","submitForm","titleInputHTML","addChoice","OpenStadComponentPoll","withPercentage","allowShowResultsIfNotVoted","hideEditForm","selectedChoice","showResult","showQuestion","editMode","showVoteSucceeded","parseVoteCount","voteCount","votesAbs","votesPrc","reaction","onSubmit","questionHTML","choiceHTML","submitVote","showResultButtonHTML","setShowResult","selectChoice","resultHTML","showQuestionButtonHTML","setShowQuestion","totalVotesHTML","xx","percentageHTML","scoreHTML","showEditForm","deletePoll","voteSucceededHTML","OpenStadComponentReactionForm","argumentId","parentId","sentiment","OpenStadComponentReaction","isMenuActive","isReplyFromActive","storedListener","onNewReactionStored","editedListener","onReactionEdited","reply","canDelete","isDeleted","canLike","hasUserVoted","menuHTML","canEdit","showMenu","submitDelete","toggleEditForm","editForm","likeButtonHTML","submitLike","replyButtonHTML","replyFormHTML","canReply","toggleReplyForm","repliesHTML","reactions","OpenStadComponentReactions","scrollToNewReaction","closedText","deletedListener","getElementById","reactionFormHTML"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,CAAC;;;;;;;;;;;;ACpDD,iBAAiB,mBAAO,CAAC,mEAAa;;;;;;;;;;;;ACAtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAA4D;AAChE,IAAI,SAC+B;AACnC,CAAC,qBAAqB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAC,CAAC,cAAO;AACzB;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,yCAAyC,UAAc;AACxD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uCAAuC;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD,oC;;;;;;;;;;;;ACjoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;;AAE9B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;;AAEZ;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,CAAC,EAAE,KAA0B,oE;;;;;;;;;;;;AChL7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,0BAA0B,eAAe;AACtE;;AAEO;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACngBA;AACA;AAEA;;IAEqBA,iB;;;;;AAEnB,6BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;;AAEA,QAAIC,IAAI,gCAAR;;AAEA,QAAID,KAAK,CAACE,UAAV,EAAsB;AACpBC,YAAM,CAACC,IAAP,CAAYJ,KAAK,CAACE,UAAlB,EAA8BG,OAA9B,CAAsC,UAACC,GAAD,EAAS;AAC7C,YAAIC,SAAS,GAAGP,KAAK,CAACE,UAAN,CAAiBI,GAAjB,CAAhB;AACAL,YAAI,CAACM,SAAS,CAACC,IAAX,CAAJ,GAAuBD,SAAS,CAACE,KAAjC;AACD,OAHD;AAID,KAXgB,CAanB;;;AACER,QAAI,CAACS,MAAL,GAAcT,IAAI,CAACS,MAAL,IAAeV,KAAK,CAACU,MAAnC;;AACA,QAAI,OAAOT,IAAI,CAACS,MAAZ,IAAsB,QAA1B,EAAoC;AAClC,UAAI;AACFT,YAAI,CAACS,MAAL,GAAcC,IAAI,CAACC,KAAL,CAAWX,IAAI,CAACS,MAAhB,CAAd;AACD,OAFD,CAEE,OAAOG,GAAP,EAAY,CAAE;AACjB;;AACH,QAAIC,aAAa,GAAG;AAChBC,YAAM,EAAE,IADQ;AAEnBC,SAAG,EAAE;AACAC,WAAG,EAAE,IADL;AAEAC,eAAO,EAAE,IAFT;AAGAC,sBAAc,EAAE;AAHhB,OAFc;AAOhBC,UAAI,EAAE;AAPU,KAApB;AASAnB,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+Bb,IAAI,CAACS,MAApC,EAA4CT,IAAI,CAACD,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEET,QAAI,CAACsB,KAAL,GAAatB,IAAI,CAACsB,KAAL,IAAgBtB,IAAI,CAACS,MAAL,IAAeT,IAAI,CAACS,MAAL,CAAYa,KAA3C,IAAsDvB,KAAK,CAACwB,EAA5D,iCAA0FC,QAAQ,CAAE,YAAYC,IAAI,CAACC,MAAL,EAAd,CAAlG,CAAb;AAEAC,UAAM,CAAC3B,IAAI,CAACsB,KAAN,CAAN,GAAqBtB,IAArB;AAjCiB;AAmClB;;;;sCAEiB4B,S,EAAWC,S,EAAW,CACtC;AACA;AACA;AACD;;;;EA3C4CC,4CAAK,CAACC,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLrD;AACA;AACA;AAEA;AAEA;;IAEqBC,6B;;;;;AAEnB,yCAAYjC,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR;;AAEAA,QAAI,CAACa,aAAL,GAAqB;AACjBoB,aAAO,EAAE,EADQ;AAEpB1B,UAAI,EAAE,EAFc;AAGjB2B,iBAAW,EAAE,EAHI;AAIjBC,cAAQ,EAAE,KAJO;AAKjBC,cAAQ,EAAE;AALO,KAArB;AAOApC,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AAEET,QAAI,CAACqC,KAAL,GAAa;AACX7B,WAAK,EAAET,KAAK,CAACS,KADF;AAEX8B,WAAK,EAAE;AAFI,KAAb;AAKA,UAAKC,QAAL,GAAgBxC,KAAK,CAACwC,QAAtB;AApBiB;AAsBlB;;;;mCAEuB;AAAA,UAAdC,UAAc,QAAdA,UAAc;AACxB,UAAIC,OAAO,GAAG,KAAKhC,MAAL,CAAY2B,QAAZ,GAAuB,CAAC,CAAC,KAAKC,KAAL,CAAW7B,KAApC,GAA4C,IAA1D;AACE,UAAI8B,KAAK,GAAG,EAAZ;AACA,UAAI,CAACG,OAAD,IAAYD,UAAhB,EAA4BF,KAAK,GAAG,IAAR;AAC5B,WAAKI,QAAL,CAAc;AAAED,eAAO,EAAPA,OAAF;AAAWH,aAAK,EAALA;AAAX,OAAd;AACF,aAAOG,OAAP;AACA;;;mCAEcE,I,EAAM;AACpB,UAAI3C,IAAI,GAAG,IAAX;AACE2C,UAAI,GAAGA,IAAI,IAAI,EAAf;AACF3C,UAAI,CAAC0C,QAAL,CAAcC,IAAd,EAAoB,YAAM;AACtB3C,YAAI,CAAC4C,QAAL,CAAc,EAAd;AACD,OAFH;;AAGA,UAAI,OAAO5C,IAAI,CAACuC,QAAZ,IAAwB,UAA5B,EAAwC;AACvCvC,YAAI,CAACuC,QAAL,CAAc;AAAEhC,cAAI,EAAEP,IAAI,CAACS,MAAL,CAAYF,IAApB;AAA0BC,eAAK,EAAEmC,IAAI,CAACnC;AAAtC,SAAd;AACA;AACD;;;;EA3CyDV,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACR3D;AAEA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqB+C,0B;;;;;AAEnB,sCAAY9C,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR;;AAEAA,QAAI,CAACa,aAAL,GAAqB;AACjBiC,eAAS,EAAE,IADM;AAGjBC,oBAAc,EAAE,IAHC;AAIjBC,kBAAY,EAAE,IAJG;AAKjBZ,cAAQ,EAAE,KALO;AAOjBa,WAAK,EAAE,IAPU;AAQjBC,iBAAW,EAAE,IARI;AASjBjB,aAAO,EAAE;AATQ,KAArB;AAWAjC,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AACET,QAAI,CAACS,MAAL,CAAYF,IAAZ,GAAmBP,IAAI,CAACS,MAAL,CAAYF,IAAZ,IAAoBP,IAAI,CAACS,MAAL,CAAYwC,KAAZ,CAAkBE,WAAlB,EAAvC;AAEAnD,QAAI,CAACqC,KAAL,GAAa;AACX7B,WAAK,EAAET,KAAK,CAACS,KAAN,IAAe4C;AADX,KAAb;AAIApD,QAAI,CAACqD,cAAL,GAAsBrD,IAAI,CAACqD,cAAL,CAAoBC,IAApB,CAAyBtD,IAAzB,CAAtB;AAEAA,QAAI,CAACuC,QAAL,GAAgBxC,KAAK,CAACwC,QAAtB;AAzBiB;AA2BlB;;;;mCAEuB;AAAA,UAAdC,UAAc,QAAdA,UAAc;AACtB,aAAO,KAAKe,KAAL,GAAa,KAAKA,KAAL,CAAWX,QAAX,CAAoB;AAAEJ,kBAAU,EAAVA;AAAF,OAApB,CAAb,GAAmD,IAA1D;AACF;;;mCAEcG,I,EAAM;AAClB;AACF,UAAI,OAAO,KAAKJ,QAAZ,IAAwB,UAA5B,EAAwC;AACvC,aAAKA,QAAL,CAAcI,IAAd;AACA;AACD;;;6BAEQ;AAER,UAAI3C,IAAI,GAAG,IAAX;AAEE,UAAIwD,SAAS,GAAG,IAAhB;;AACA,UAAIxD,IAAI,CAACS,MAAL,CAAYwC,KAAhB,EAAuB;AACrBO,iBAAS,gBAAG;AAAI,mBAAS,EAAC;AAAd,WAAgCxD,IAAI,CAACS,MAAL,CAAYwC,KAA5C,CAAZ;AACD;;AAED,UAAIQ,eAAe,GAAG,IAAtB;;AACA,UAAIzD,IAAI,CAACS,MAAL,CAAYyC,WAAhB,EAA6B;AAC3BO,uBAAe,gBAAG;AAAK,mBAAS,EAAC,sBAAf;AAAsC,iCAAuB,EAAE;AAAEC,kBAAM,EAAE1D,IAAI,CAACS,MAAL,CAAYyC;AAAtB;AAA/D,UAAlB;AACD;;AAED,UAAIS,SAAS,GAAG,IAAhB;;AAEA,cAAQ3D,IAAI,CAACS,MAAL,CAAYqC,SAApB;AAEE,aAAK,QAAL;AACEa,mBAAS,gBAAG,oBAAC,mDAAD;AAAyB,kBAAM,EAAE3D,IAAI,CAACS,MAAtC;AAA8C,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAAtF;AAA8F,oBAAQ,EAAER,IAAI,CAACqD,cAA7G;AAA6H,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAApI,YAAZ;AACA;;AAEF,aAAK,mBAAL;AACA,aAAK,uBAAL;AACED,mBAAS,gBAAG,oBAAC,+DAAD;AAAmC,kBAAM,kCAAO3D,IAAI,CAACS,MAAZ;AAAoBqC,uBAAS,EAAE;AAA/B,cAAzC;AAAsF,iBAAK,EAAG,KAAK/C,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAA9H;AAAsI,oBAAQ,EAAER,IAAI,CAACqD,cAArJ;AAAqK,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAA5K,YAAZ;AACA;;AAEF,aAAK,cAAL;AACED,mBAAS,gBAAG,oBAAC,yDAAD;AAA8B,kBAAM,EAAE3D,IAAI,CAACS,MAA3C;AAAmD,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAA3F;AAAmG,oBAAQ,EAAER,IAAI,CAACqD,cAAlH;AAAkI,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAzI,YAAZ;AACA;;AAEF,aAAK,oBAAL;AACA,aAAK,mBAAL;AACED,mBAAS,gBAAG,oBAAC,+DAAD;AAAmC,kBAAM;AAAIb,uBAAS,EAAE;AAAf,eAA2B9C,IAAI,CAACS,MAAhC,CAAzC;AAAmF,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAA3H;AAAmI,oBAAQ,EAAER,IAAI,CAACqD,cAAlJ;AAAkK,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAzK,YAAZ;AACA;;AAEF,aAAK,UAAL;AACED,mBAAS,gBAAG,oBAAC,qDAAD;AAA2B,kBAAM,EAAE3D,IAAI,CAACS,MAAxC;AAAgD,oBAAQ,EAAET,IAAI,CAACqD,cAA/D;AAA+E,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAtF,YAAZ;AACA;;AAEF,aAAK,QAAL;AACED,mBAAS,gBAAG,oBAAC,mDAAD;AAAyB,kBAAM,EAAE3D,IAAI,CAACS,MAAtC;AAA8C,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAAtF;AAA8F,oBAAQ,EAAER,IAAI,CAACqD,cAA7G;AAA6H,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAApI,YAAZ;AACA;;AAEF,aAAK,QAAL;AACA,aAAK,iBAAL;AACED,mBAAS,gBAAG,oBAAC,mDAAD;AAAyB,kBAAM,EAAE3D,IAAI,CAACS,MAAtC;AAA8C,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAAtF;AAA8F,oBAAQ,EAAER,IAAI,CAACqD,cAA7G;AAA6H,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAApI,YAAZ;AACA;;AAEF,aAAK,MAAL;AACED,mBAAS,gBAAG,oBAAC,sDAAD;AAAuB,kBAAM,EAAE3D,IAAI,CAACS,MAApC;AAA4C,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAApF;AAA4F,oBAAQ,EAAER,IAAI,CAACqD,cAA3G;AAA2H,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAlI,YAAZ;AACA;;AAEF,aAAK,UAAL;AACED,mBAAS,gBAAG,oBAAC,qDAAD;AAA2B,kBAAM,EAAE3D,IAAI,CAACS,MAAxC;AAAgD,iBAAK,EAAG,KAAKV,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAAxF;AAAgG,oBAAQ,EAAER,IAAI,CAACqD,cAA/G;AAA+H,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAtI,YAAZ;AACA;;AAEF,aAAK,uBAAL;AACED,mBAAS,gBAAG,oBAAC,+DAAD;AAAmC,kBAAM,kCAAO3D,IAAI,CAACS,MAAZ;AAAoBqC,uBAAS,EAAE;AAA/B,cAAzC;AAAsF,iBAAK,EAAG,KAAK/C,KAAL,CAAWS,KAAX,IAAoB,KAAKC,MAAL,CAAYD,KAA9H;AAAsI,oBAAQ,EAAER,IAAI,CAACqD,cAArJ;AAAqK,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAA5K,YAAZ;AACA;;AAEF;AA7CF;;AAgDA,0BACD;AAAK,UAAE,EAAE5D,IAAI,CAACuB,EAAd;AAAkB,WAAG,EAAE,aAAAqC,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA,SAAzB;AAAmD,iBAAS,EAAC;AAA7D,SACEJ,SADF,EAEEC,eAFF,EAGEE,SAHF,CADC;AAQD;;;;EAlHqD7D,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfxD;AAEA;;AAEA;AACA;AACA;;IAEqBgE,qB;;;;;AAEnB,iCAAY/D,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR;;AAEAA,QAAI,CAACa,aAAL,GAAqB;AACjB;AACA;AACAoC,WAAK,EAAE,IAHU;AAIjBc,WAAK,EAAE,IAJU;AAKjBC,YAAM,EAAE;AALS,KAArB;AAOAhE,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AAEET,QAAI,CAACqC,KAAL,GAAa;AACX4B,YAAM,EAAElE,KAAK,CAACkE,MAAN,IAAe;AADZ,KAAb;AAIAjE,QAAI,CAACqD,cAAL,GAAsBrD,IAAI,CAACqD,cAAL,CAAoBC,IAApB,+BAAtB;AAEAtD,QAAI,CAACgE,MAAL,GAAc,EAAd;AApBiB;AAsBlB;;;;gCAEU;AACT,aAAO,KAAK3B,KAAL,CAAW4B,MAAlB;AACF;;;mCAEwB;AAAA,UAAdzB,UAAc,QAAdA,UAAc;AACtB,UAAIxC,IAAI,GAAE,IAAV;AACA,UAAIyC,OAAO,GAAG,IAAd;AACA,UAAIyB,YAAY,GAAG,IAAnB;AACAlE,UAAI,CAACgE,MAAL,CAAY5D,OAAZ,CAAoB,UAAC+D,KAAD,EAAW;AAC7B,YAAI,CAACA,KAAK,CAACvB,QAAN,CAAe;AAAEJ,oBAAU,EAAVA;AAAF,SAAf,CAAL,EAAqC;AACnCC,iBAAO,GAAG,KAAV;AACA,cAAI,CAACyB,YAAL,EAAmBA,YAAY,GAAGC,KAAf;AACpB;AACF,OALD;AAOA,UAAID,YAAY,IAAIA,YAAY,CAACL,QAA7B,IAAyCK,YAAY,CAACL,QAAb,CAAsBO,cAAnE,EAAmFF,YAAY,CAACL,QAAb,CAAsBO,cAAtB,CAAqC;AAACC,gBAAQ,EAAE;AAAX,OAArC,EAX7D,CAYtB;;AACA,aAAO5B,OAAP;AAEF;;;mCAEcE,I,EAAM;AAClB;AACA,UAAI3C,IAAI,GAAG,IAAX;;AACA,UAAIiE,MAAM,qBAAQ,KAAK5B,KAAL,CAAW4B,MAAnB,CAAV;;AACAA,YAAM,CAACtB,IAAI,CAACpC,IAAN,CAAN,GAAoBoC,IAAI,CAACnC,KAAzB;AACF,WAAKkC,QAAL,CAAc;AAAEuB,cAAM,EAANA;AAAF,OAAd;AACA;;;6BAEQ;AAER,UAAIjE,IAAI,GAAG,IAAX;AAEE,UAAIwD,SAAS,GAAG,IAAhB;;AACA,UAAIxD,IAAI,CAACS,MAAL,CAAYwC,KAAhB,EAAuB;AACrBO,iBAAS,gBAAG;AAAI,mBAAS,EAAC;AAAd,WAAgCxD,IAAI,CAACS,MAAL,CAAYwC,KAA5C,CAAZ;AACD;;AAED,UAAIqB,SAAS,GAAG,IAAhB;;AACA,UAAItE,IAAI,CAACS,MAAL,CAAYsD,KAAhB,EAAuB;AACrBO,iBAAS,gBAAG;AAAK,mBAAS,EAAC,gBAAf;AAAgC,iCAAuB,EAAE;AAAEZ,kBAAM,EAAE1D,IAAI,CAACS,MAAL,CAAYsD;AAAtB;AAAzD,UAAZ;AACD;;AAED,UAAIQ,UAAU,GAAG,IAAjB;;AACA,UAAIvE,IAAI,CAACS,MAAL,CAAYuD,MAAZ,IAAsBhE,IAAI,CAACS,MAAL,CAAYuD,MAAZ,CAAmBQ,MAA7C,EAAqD;AACnDD,kBAAU,gBACR;AAAK,mBAAS,EAAC;AAAf,WACIvE,IAAI,CAACS,MAAL,CAAYuD,MAAZ,CAAmBS,GAAnB,CAAuB,UAACC,WAAD,EAAcC,CAAd,EAAoB;AAC3C,8BAAO,oBAAC,uDAAD;AAA4B,kBAAM,EAAED,WAApC;AAAiD,oBAAQ,EAAE1E,IAAI,CAACqD,cAAhE;AAAgF,eAAG,EAAE,aAAAO,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA,aAAvF;AAA8G,eAAG,2BAAoBe,CAApB;AAAjH,oBAAgJ,aAAAf,EAAE,EAAI;AAAE5D,gBAAI,CAACgE,MAAL,CAAYW,CAAZ,IAAiBf,EAAjB;AAAsB,WAA9K,EAAP;AACD,SAFC,CADJ,CADF;AAMD;;AAED,0BACD;AAAK,UAAE,EAAE5D,IAAI,CAACsB,KAAd;AAAqB,iBAAS,EAAC,UAA/B;AAA0C,WAAG,EAAE,aAAAsC,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAAjD,SACEJ,SADF,EAEEc,SAFF,EAGEC,UAHF,CADC;AAQD;;;;EAvFgDzE,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRnD;AACA;AACA;AAEA;;AAEA;;IAEqB8E,uB;;;;;;;;;;;;;6BAEX;AAER,UAAI5E,IAAI,GAAG,IAAX;AAEE,0BACD;AAAO,YAAI,EAAC,QAAZ;AAAqB,aAAK,EAAE,KAAKD,KAAL,CAAWS,KAAvC;AAA8C,gBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAAnE;AAA6E,mBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAAtG;AAAmH,gBAAQ,EAAE,kBAAA2C,CAAC;AAAA,iBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,iBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,WAApB,CAAJ;AAAA,SAA9H;AAAoL,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAA3L,QADC;AAID;;;;EAVkD5B,0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRrD;AACA;CAGA;;AAEA;;IAEqB8C,yB;;;;;AAEnB,qCAAY/E,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AAEA,UAAKsC,KAAL,GAAa;AACX7B,WAAK,EAAE,MAAKT,KAAL,CAAWS;AADP,KAAb;AAIA,UAAKuE,QAAL,GAAgB,MAAKA,QAAL,CAAczB,IAAd,+BAAhB;AAPiB;AASlB;;;;sCAEgB1B,S,EAAWC,S,EAAW;AACrC,UAAIrB,KAAK,GAAG,KAAKT,KAAL,CAAWS,KAAvB;AACAA,WAAK,GAAG,KAAKwE,UAAL,CAAgBxE,KAAhB,CAAR;AACA,WAAK+C,KAAL,CAAW0B,SAAX,GAAuBzE,KAAvB;AACD;;;+BAEUA,K,EAAO;AAChBA,WAAK,GAAGA,KAAK,CAAC0E,OAAN,CAAc,6DAAd,EAA6E,UAA7E,CAAR;AACA1E,WAAK,GAAGA,KAAK,CAAC0E,OAAN,CAAc,UAAd,EAA0B,EAA1B,CAAR;AACA1E,WAAK,GAAGA,KAAK,CAAC0E,OAAN,CAAc,uBAAd,EAAuC,MAAvC,CAAR;AACA,aAAO1E,KAAP;AACD;;;kCAEaqE,C,EAAGM,O,EAASC,I,EAAM;AAC9BP,OAAC,CAACQ,cAAF;AACAR,OAAC,CAACS,eAAF;AACAC,cAAQ,CAACC,WAAT,CAAqBL,OAArB,EAA6B,KAA7B,EAAmCC,IAAnC;AACA,WAAKK,OAAL;AACD;;;4BAEOZ,C,EAAG;AACT,UAAI,KAAK9E,KAAL,CAAW2F,OAAf,EAAwB;AACtB,aAAK3F,KAAL,CAAW2F,OAAX,CAAmBb,CAAnB;AACD;AACF;;;2BAEMA,C,EAAG;AACR,UAAI,KAAK9E,KAAL,CAAW4F,MAAf,EAAuB;AACrB,aAAK5F,KAAL,CAAW4F,MAAX,CAAkBd,CAAlB;AACD;;AACD,UAAI,KAAK9E,KAAL,CAAWwC,QAAf,EAAyB;AACvB,aAAKxC,KAAL,CAAWwC,QAAX,CAAoB;AAAE/B,eAAK,EAAE,KAAK6B,KAAL,CAAW7B;AAApB,SAApB;AACD;AACF;;;+BAEU;AACT,UAAIA,KAAK,GAAG,KAAK+C,KAAL,CAAW0B,SAAvB;AACAzE,WAAK,GAAG,KAAKwE,UAAL,CAAgBxE,KAAhB,CAAR;AACA,WAAKkC,QAAL,CAAc;AAAElC,aAAK,EAALA;AAAF,OAAd;;AACA,UAAI,KAAKT,KAAL,CAAW0F,OAAf,EAAwB;AACtB,aAAK1F,KAAL,CAAW0F,OAAX,CAAmBjF,KAAnB;AACD;AACF;;;6BAES;AAAA;;AACR,0BACE;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAK,iBAAS,EAAC,oDAAf;AAAoE,mBAAW,EAAE,qBAAAqE,CAAC;AAAA,iBAAI,MAAI,CAACe,aAAL,CAAmBf,CAAnB,EAAsB,MAAtB,CAAJ;AAAA;AAAlF,gBADF,eAEE;AAAK,iBAAS,EAAC,sDAAf;AAAsE,mBAAW,EAAE,qBAAAA,CAAC;AAAA,iBAAI,MAAI,CAACe,aAAL,CAAmBf,CAAnB,EAAsB,QAAtB,CAAJ;AAAA;AAApF,gBAFF,eAGE;AAAK,iBAAS,EAAC,mEAAf;AAAmF,mBAAW,EAAE,qBAAAA,CAAC;AAAA,iBAAI,MAAI,CAACe,aAAL,CAAmBf,CAAnB,EAAsB,qBAAtB,CAAJ;AAAA;AAAjG,gBAHF,eAIE;AAAK,iBAAS,EAAC,0DAAf;AAA0E,mBAAW,EAAE,qBAAAA,CAAC;AAAA,iBAAI,MAAI,CAACe,aAAL,CAAmBf,CAAnB,EAAsB,YAAtB,EAAoCgB,MAAM,CAAC,WAAD,EAAa,SAAb,CAA1C,CAAJ;AAAA;AAAxF,gBAJF,CADF,eAOE;AAAK,iBAAS,EAAC,yBAAf;AAAyC,uBAAe,EAAE,IAA1D;AACK,eAAO,EAAG,iBAAAhB,CAAC;AAAA,iBAAI,MAAI,CAACa,OAAL,CAAab,CAAb,CAAJ;AAAA,SADhB;AAEK,cAAM,EAAG,gBAAAA,CAAC;AAAA,iBAAI,MAAI,CAACc,MAAL,CAAYd,CAAZ,CAAJ;AAAA,SAFf;AAGK,eAAO,EAAG,iBAAAA,CAAC;AAAA,iBAAI,MAAI,CAACE,QAAL,EAAJ;AAAA,SAHhB,CAIK;AAJL;AAKK,WAAG,EAAE,aAAAnB,EAAE;AAAA,iBAAK,MAAI,CAACL,KAAL,GAAaK,EAAlB;AAAA;AALZ,QAPF,CADF;AAiBD;;;;EA3EoD9B,4CAAK,CAACC,S;;;;AA+E7D,SAAS+D,UAAT,CAAoB/F,KAApB,EAA2B;AACzB,sBACE;AACE,OAAG,EAAEA,KAAK,CAACgG,GADb;AAEE,eAAW,EAAE,qBAAAC,GAAG,EAAI;AAClBA,SAAG,CAACX,cAAJ,GADkB,CACI;;AACtBE,cAAQ,CAACC,WAAT,CAAqBzF,KAAK,CAACgG,GAA3B,EAAgC,KAAhC,EAAuChG,KAAK,CAACkG,GAA7C,EAFkB,CAEiC;AACpD;AALH,KAOGlG,KAAK,CAACQ,IAAN,IAAcR,KAAK,CAACgG,GAPvB,CADF;AAWD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnGD;AACA;AACA;AAEA;;AAEA;;IAEqBnB,uB;;;;;AAEnB,mCAAY7E,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG;AAChBqF,mBAAa,EAAE,KADC;AAEnBC,iBAAW,EAAE;AACZC,eAAO,EAAE,EADG;AAEZC,aAAK,EAAE;AAFK;AAFM,KAApB;AAOA,UAAK5F,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKd,KAAL,CAAWU,MAA1C,EAAkD,MAAKA,MAAL,IAAe,EAAjE,CAAd;AAEE,QAAI6F,aAAa,GAAG,EAApB;AACA,QAAI9F,KAAK,GAAGT,KAAK,CAACS,KAAN,IAAe,EAA3B;AACAA,SAAK,CAACJ,OAAN,CAAc,UAACmG,KAAD,EAAW;AACvBD,mBAAa,CAACE,IAAd,CAAmB;AACjBC,cAAM,EAAE;AAAEzF,aAAG,EAAEuF;AAAP,SADS;AAEjBG,eAAO,EAAG;AACRC,cAAI,EAAE,OADE;AAER;AACAC,cAAI,EAAE;AACJrG,gBAAI,EAAEgG,KADF,CAEJ;AACA;;AAHI,WAHE;AAQRM,kBAAQ,EAAE;AACRC,kBAAM,EAAEP;AADA;AARF;AAFO,OAAnB;AAeD,KAhBD;AAkBA,UAAKlE,KAAL,GAAa;AACXiE,mBAAa,EAAEA;AADJ,KAAb;AAjCiB;AAqClB;;;;sCAEgB1E,S,EAAWC,S,EAAW;AACrC;AACF,WAAKkF,YAAL,GAAoB,CAApB;AACE,WAAKC,KAAL,GAAa,CACX,6CADW,EAEX,+DAFW,EAGX,uFAHW,EAIX,iGAJW,EAKX,iGALW,EAMX,mFANW,CAAb;AAQA,WAAKC,YAAL;AAED;;;mCAEc;AACb,UAAIjH,IAAI,GAAG,IAAX;AACA,UAAI4G,IAAI,GAAG5G,IAAI,CAACgH,KAAL,CAAWhH,IAAI,CAAC+G,YAAhB,CAAX;;AACA,UAAIH,IAAJ,EAAU;AACX,YAAIM,OAAJ;AACAA,eAAO,GAAG3B,QAAQ,CAAC4B,aAAT,CAAuB,QAAvB,CAAV;AACAD,eAAO,CAACE,GAAR,GAAcR,IAAd;AACAM,eAAO,CAACG,KAAR,GAAgB,IAAhB;;AACA,YAAIH,OAAJ,EAAa;AACZA,iBAAO,CAACI,MAAR,GAAiB,YAAW;AACtBtH,gBAAI,CAACiH,YAAL;AACL,WAFD;;AAGA1B,kBAAQ,CAACgC,IAAT,CAAcC,WAAd,CAA0BN,OAA1B;AACA;AACC;;AACH,UAAIlH,IAAI,CAAC+G,YAAL,IAAqB/G,IAAI,CAACgH,KAAL,CAAWxC,MAApC,EAA4C;AACxCxE,YAAI,CAACyH,gBAAL;AACD;;AACHzH,UAAI,CAAC+G,YAAL;AACC;;;+BAEU;AACT,UAAItE,OAAO,GAAG,IAAd;;AACF,UAAK,KAAKiF,aAAL,IAAsB,KAAKA,aAAL,CAAmBC,QAA9C,EAAyD;AACxD,YAAIC,MAAM,GAAG,KAAKF,aAAL,CAAmBC,QAAnB,EAAb;AACAC,cAAM,CAACxH,OAAP,CAAe,UAASmG,KAAT,EAAgB;AAC9B,cAAI,CAACA,KAAK,CAACsB,QAAX,EAAqB;AACpBpF,mBAAO,GAAG,KAAV;AACA;AACD,SAJD;AAKA;;AACC,aAAOA,OAAP;AACD;;;uCAEkB;AAEjB,UAAIzC,IAAI,GAAG,IAAX;AAEF,UAAI8H,gBAAgB,GAAGvC,QAAQ,CAACwC,aAAT,CAAuB,6BAAvB,CAAvB;;AACA,UAAID,gBAAJ,EAAsB;AACrBE,gBAAQ,CAACC,cAAT,CAAwBC,0BAAxB;AACAF,gBAAQ,CAACC,cAAT,CAAwBE,8BAAxB;AACAH,gBAAQ,CAACC,cAAT,CAAwBG,8BAAxB;AACAJ,gBAAQ,CAACC,cAAT,CAAwBI,wBAAxB,EAJqB,CAMrB;AACA;AACA;;AAEA,YAAIC,gBAAgB,GAAG;AACtB;AACAC,2BAAiB,EAAE,CAAC,SAAD,CAFG;AAGtBC,iCAAuB,EAAE,IAHH;AAIlBtC,uBAAa,EAAE,KAAKzF,MAAL,CAAYyF,aAJT;AAKlBuC,sBAAY,EAAE,IALI;AAMlBC,mCAAyB,EAAE,CANT;AAOtBC,qBAAW,EAAE,KAPS;AAQtBpI,cAAI,EAAE,OARgB;AAStBqI,kBAAQ,EAAE,CATY;AAUtBC,qBAAW,EAAE,IAVS;AAWtB7B,eAAK,EAAE,KAAK3E,KAAL,CAAWiE,aAXI;AAYtBwC,gBAAM,EAAE;AACP1C,mBAAO,EAAE,KAAK3F,MAAL,CAAY0F,WAAZ,CAAwBC,OAD1B;AAEPC,iBAAK,EAAE,KAAK5F,MAAL,CAAY0F,WAAZ,CAAwBE;AAFxB,WAZc;AAgBtB0C,gCAAsB,EAAE,EAhBF;AAiBtBC,iCAAuB,EAAE,EAjBH;AAkBtBC,8BAAoB,EAAE,KAlBA;AAmBtBC,mBAAS,EAAE,8FAnBW;AAoBtBC,2BAAiB,EAAE,8BApBG;AAqBtBC,iCAAuB,EAAE,qBArBH;AAsBtBC,mCAAyB,EAAE,0BAtBL;AAuBtBC,gCAAsB,EAAE,kBAvBF;AAwBtBC,8BAAoB,EAAE,oBAxBA;AAyBtBC,0BAAgB,EAAE,OAzBI;AA0BtBC,wBAAc,EAAE,YA1BM;AA0BQ;AAC9BC,4BAAkB,EAAE,uBA3BE;AA4BtBC,0BAAgB,EAAE,YA5BI;AA4BU;AAChCC,8BAAoB,EAAE,0BA7BA;AA8BtBC,6BAAmB,EAAE,OA9BC;AA+BtBC,qCAA2B,EAAE,oBA/BP;AAgCtBC,oCAA0B,EAAE,kBAhCN;AAiCtBC,kCAAwB,EAAE,qBAjCJ;AAkCtBC,wCAA8B,EAAE,qBAlCV;AAmCtBC,0BAAgB,EAAE,eAnCI;AAoCtBC,yBAAe,EAAE,cApCK;AAqCtBC,wBAAc,EAAE,aArCM;AAsCtBC,+BAAqB,EAAE,aAtCD;AAuCtBC,kCAAwB,EAAE,OAvCJ;AAwCtBC,kCAAwB,EAAE,OAxCJ;AAyCtBC,wCAA8B,EAAE,WAzCV;AA0CtBC,uCAA6B,EAAE,MA1CT;AA2CtBC,wCAA8B,EAAE,OA3CV;AA4CtBC,gCAAsB,EAAE;AA5CF,SAAvB;AA+CG3K,YAAI,CAAC0H,aAAL,GAAqBM,QAAQ,CAAC4C,MAAT,CAAgB9C,gBAAhB,EAAkCQ,gBAAlC,CAArB;AACH,YAAIuC,gBAAJ;AACA,YAAIC,MAAM,GAAGvF,QAAQ,CAACwC,aAAT,CAAuB,iBAAvB,CAAb,CA3DqB,CA6DlB;AACA;AACA;;AAEHxC,gBAAQ,CAACwC,aAAT,CAAuB,iBAAvB,EAA0CgD,gBAA1C,CAA2D,sBAA3D,EAAmF,UAAAlG,CAAC,EAAI;AACvF,cAAIA,CAAC,CAACmG,MAAF,IAAYnG,CAAC,CAACmG,MAAF,CAAS1I,KAAzB,EAAgC;AAC/B2I,mBAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCrG,CAAC,CAACmG,MAAvC;AACA;;AACDhL,cAAI,CAACmL,8BAAL;AACA,SALD;AAOA5F,gBAAQ,CAACwC,aAAT,CAAuB,iBAAvB,EAA0CgD,gBAA1C,CAA2D,qBAA3D,EAAkF,UAAAlG,CAAC,EAAI;AACtF,cAAIA,CAAC,CAACmG,MAAF,IAAYnG,CAAC,CAACmG,MAAF,CAAS1I,KAAzB,EAAgC;AAC/B2I,mBAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCrG,CAAC,CAACmG,MAAvC;AACA;;AACDhL,cAAI,CAACmL,8BAAL;AACA,SALD;;AAOA,YAAInL,IAAI,CAACqC,KAAL,CAAW+I,UAAf,EAA2B;AAC1BpL,cAAI,CAAC0H,aAAL,CAAmB2D,QAAnB,CAA4BrL,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsBxD,MAAlD;AACA;AAED;AAED;;;qDAEiC;AAC/B,UAAI5H,IAAI,GAAG,IAAX;AACFA,UAAI,CAACqC,KAAL,CAAW7B,KAAX,GAAmB,EAAnB;;AACA,UAAK,KAAKkH,aAAL,IAAsB,KAAKA,aAAL,CAAmBC,QAA9C,EAAyD;AACxD,YAAIC,MAAM,GAAG,KAAKF,aAAL,CAAmBC,QAAnB,EAAb;AACAC,cAAM,CAACxH,OAAP,CAAe,UAACmG,KAAD,EAAW;AACzB,cAAI;AACH,gBAAIsB,QAAQ,GAAG,OAAOtB,KAAK,CAACsB,QAAb,IAAyB,QAAzB,GAAoCnH,IAAI,CAACC,KAAL,CAAW4F,KAAK,CAACsB,QAAjB,CAApC,GAAiEtB,KAAK,CAACsB,QAAtF;AACA7H,gBAAI,CAACqC,KAAL,CAAW7B,KAAX,CAAiBgG,IAAjB,CAAsBqB,QAAQ,CAAC7G,GAA/B;AACA,WAHD,CAGE,OAAMJ,GAAN,EAAW;AAAEqK,mBAAO,CAACC,GAAR,CAAYtK,GAAZ;AAAkB;AACjC,SALD;AAMA;;AACCZ,UAAI,CAACD,KAAL,CAAWwC,QAAX,CAAoB;AAAChC,YAAI,EAAEP,IAAI,CAACS,MAAL,CAAYF,IAAnB;AAAyBC,aAAK,EAAER,IAAI,CAACqC,KAAL,CAAW7B;AAA3C,OAApB;AACF;;;kDAE8BoH,M,EAAQ;AACpC,UAAI5H,IAAI,GAAG,IAAX;;AAEF,UAAI,KAAK0H,aAAT,EAAwB;AACvB,aAAKA,aAAL,CAAmB2D,QAAnB,CAA4BzD,MAA5B;AACA;AACD;;;6BAEQ;AAER,UAAI5H,IAAI,GAAG,IAAX;AAEE,UAAIsL,SAAS,GAAG,IAAhB;;AACA,UAAItL,IAAI,CAACqC,KAAL,CAAWC,KAAf,EAAsB;AACpBgJ,iBAAS,gBAAI;AAAK,mBAAS,EAAC;AAAf,kDAAb;AACD;;AAED,0BACD;AAAK,iBAAS,EAAC;AAAf,sBACC;AAAO,YAAI,EAAC,MAAZ;AAAmB,iBAAS,EAAC;AAA7B,QADD,EAEMA,SAFN,CADC;AAOD;;;;EA7NkDtJ,0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRrD;AACA;CAEA;AACA;;AACA;AAEA;;IAEqBuJ,yB;;;;;AAEnB,qCAAYxL,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR;;AACAA,QAAI,CAACuB,EAAL,GAAUxB,KAAK,CAACwB,EAAN,IAAY,2CAA2CC,QAAQ,CAAE,UAAUC,IAAI,CAACC,MAAL,EAAZ,CAAzE;AAEA1B,QAAI,CAACa,aAAL,GAAqB;AACpBN,UAAI,EAAE,OADc;AAEpBuC,eAAS,EAAE,OAFS;AAGpB0I,eAAS,EAAE,CAHS;AAIpBC,eAAS,EAAE,EAJS;AAKjBvJ,iBAAW,EAAE;AALI,KAArB;AAOAlC,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AAEET,QAAI,CAACqC,KAAL,GAAa;AACdqJ,aAAO,EAAE,KADK;AAEXlL,WAAK,EAAET,KAAK,CAACS,KAAN,IAAe,EAFX;AAGdmL,iBAAW,EAAE5L,KAAK,CAACS,KAAN,IAAeT,KAAK,CAACS,KAAN,CAAYgE,MAA3B,IAAqC;AAHpC,KAAb;AAMAxE,QAAI,CAACK,GAAL,GAAWN,KAAK,CAAC6L,MAAN,IAAgB,CAAE5L,IAAI,CAACuB,EAAL,IAAW,yBAAb,IAA2CC,QAAQ,CAAE,WAAWC,IAAI,CAACC,MAAlB,CAA9E;AAEA,UAAKa,QAAL,GAAgBxC,KAAK,CAACwC,QAAtB;AAEAvC,QAAI,CAACqD,cAAL,GAAsBrD,IAAI,CAACqD,cAAL,CAAoBC,IAApB,+BAAtB;AACAtD,QAAI,CAAC6L,YAAL,GAAoB7L,IAAI,CAAC6L,YAAL,CAAkBvI,IAAlB,+BAApB;AACAtD,QAAI,CAAC8L,WAAL,GAAmB9L,IAAI,CAAC8L,WAAL,CAAiBxI,IAAjB,+BAAnB;AACAtD,QAAI,CAAC+L,YAAL,GAAoB/L,IAAI,CAAC+L,YAAL,CAAkBzI,IAAlB,+BAApB;AA5BiB;AA8BlB;;;;8BAEQ;AACT,UAAIjB,KAAK,GAAG,EAAZ;AACAA,WAAK,CAACI,OAAN,GAAgB,IAAhB;AACAJ,WAAK,CAAC2J,OAAN,GAAgB,IAAhB;;AACA,UAAI,KAAK3J,KAAL,CAAWsJ,WAAX,GAAyB,KAAKlL,MAAL,CAAY+K,SAAzC,EAAoD;AACnDnJ,aAAK,CAAC2J,OAAN;AACA3J,aAAK,CAACI,OAAN,GAAgB,KAAhB;AACA;;AACD,UAAI,KAAKJ,KAAL,CAAWsJ,WAAX,GAAyB,KAAKlL,MAAL,CAAYgL,SAAzC,EAAoD;AACnDpJ,aAAK,CAAC2J,OAAN;AACA3J,aAAK,CAACI,OAAN,GAAgB,KAAhB;AACA;;AACD,WAAKC,QAAL,CAAcL,KAAd;AACA,aAAOA,KAAK,CAACI,OAAb;AACC;;;+BAES;AACV,WAAKC,QAAL,CAAc;AAAEuJ,mBAAW,EAAE;AAAf,OAAd;AACA,aAAO,KAAKxJ,OAAL,EAAP;AACA;;;mCAEcE,I,EAAM;AAClBA,UAAI,GAAGA,IAAI,IAAI,EAAf;AACF,WAAKD,QAAL,CAAcC,IAAd;;AACA,UAAI,OAAO,KAAKJ,QAAZ,IAAwB,UAA5B,EAAwC;AACvC,aAAKA,QAAL,CAAc;AAAEhC,cAAI,EAAE,KAAKE,MAAL,CAAYF,IAApB;AAA0BC,eAAK,EAAEmC,IAAI,CAACnC;AAAtC,SAAd;AACA;AACD;;;mCAEc;AACd,UAAI6B,KAAK,GAAG,EAAZ;AACAA,WAAK,CAACqJ,OAAN,GAAgB,IAAhB;AACArJ,WAAK,CAAC4J,WAAN,GAAoB,KAApB;AACA,WAAKvJ,QAAL,CAAcL,KAAd;AACA;;;kCAEa;AACb,UAAIA,KAAK,GAAG,EAAZ;AACAA,WAAK,CAACqJ,OAAN,GAAgB,KAAhB;AACA,WAAKhJ,QAAL,CAAcL,KAAd;AACA;;;iCAEY7B,K,EAAO;AACnB,UAAI6B,KAAK,GAAG,EAAZ;AACAA,WAAK,CAAC7B,KAAN,GAAcA,KAAK,IAAI,KAAK+C,KAAL,CAAW/C,KAAlC;AACA,UAAImL,WAAW,GAAGtJ,KAAK,CAAC7B,KAAN,CAAYgE,MAA9B;AACAnC,WAAK,CAACsJ,WAAN,GAAoBA,WAApB;AACAtJ,WAAK,CAACI,OAAN,GAAgBkJ,WAAW,IAAI,KAAKlL,MAAL,CAAY+K,SAA3B,IAAwCG,WAAW,IAAI,KAAKlL,MAAL,CAAYgL,SAAnF;AACA,WAAK/I,QAAL,CAAcL,KAAd;AACA;;;6BAEQ;AAAA;;AAER,UAAIrC,IAAI,GAAG,IAAX;AAEA,UAAIkM,OAAO,GAAG,IAAd;AACA,UAAIF,OAAO,GAAG,IAAd;;AACA,UAAIhM,IAAI,CAACqC,KAAL,CAAWqJ,OAAf,EAAwB;AACvB,YAAI1L,IAAI,CAACqC,KAAL,CAAWsJ,WAAX,GAAyB3L,IAAI,CAACS,MAAL,CAAY+K,SAAzC,EAAoD;AACnDU,iBAAO,gBAAI;AAAK,qBAAS,EAAC;AAAf,2CAA8D;AAAM,qBAAS,EAAC;AAAhB,aAAoBlM,IAAI,CAACS,MAAL,CAAY+K,SAAZ,GAAwBxL,IAAI,CAACqC,KAAL,CAAWsJ,WAAvD,CAA9D,YAAX;AACA,SAFD,MAEO;AACN,cAAIrJ,KAAK,GAAGtC,IAAI,CAACqC,KAAL,CAAWsJ,WAAX,GAAyB3L,IAAI,CAACS,MAAL,CAAYgL,SAArC,GAAiD,gBAAjD,GAAoE,EAAhF;AACAS,iBAAO,gBAAI;AAAK,qBAAS,EAAE,sBAAsB5J;AAAtC,0CAAyD;AAAM,qBAAS,EAAC;AAAhB,aAAoBtC,IAAI,CAACS,MAAL,CAAYgL,SAAZ,GAAwBzL,IAAI,CAACqC,KAAL,CAAWsJ,WAAvD,CAAzD,kBAAX;AACA;AACD;;AAED,UAAI3L,IAAI,CAACqC,KAAL,CAAW4J,WAAX,IAA0BjM,IAAI,CAACqC,KAAL,CAAW2J,OAAzC,EAAkD;AACjDA,eAAO,gBAAI;AAAK,mBAAS,EAAC,kBAAf;AAAkC,aAAG,EAAG,aAAApI,EAAE;AAAA,mBAAI,MAAI,CAAC,cAAD,CAAJ,GAAuBA,EAA3B;AAAA;AAA1C,WAA4E5D,IAAI,CAACqC,KAAL,CAAW2J,OAAvF,CAAX;AACA;;AAEC,UAAIG,SAAS,GAAG,IAAhB;;AAEA,cAAOnM,IAAI,CAACS,MAAL,CAAYqC,SAAnB;AAEE,aAAK,UAAL;AACEqJ,mBAAS,gBACP,2DAAC,qDAAD;AACE,iBAAK,EAAE,KAAK9J,KAAL,CAAW7B,KADpB;AAEE,oBAAQ,EAAER,IAAI,CAACqD,cAFjB;AAGE,mBAAO,EAAErD,IAAI,CAAC6L,YAHhB;AAIE,kBAAM,EAAE7L,IAAI,CAAC8L,WAJf;AAKE,mBAAO,EAAE9L,IAAI,CAAC+L;AALhB,YADF,CADF,CAUE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AAEF,aAAK,UAAL;AACEI,mBAAS,gBACX;AAAU,eAAG,EAAEnM,IAAI,CAACK,GAApB;AAAyB,eAAG,EAAE,aAAAuD,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA,aAAhC;AAAuD,iBAAK,EAAE,KAAKvB,KAAL,CAAW7B,KAAzE;AAAgF,oBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAArG;AAA+G,uBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAAxI;AAAqJ,oBAAQ,EAAE,kBAAA2C,CAAC;AAAA,qBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,qBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,eAApB,CAAJ;AAAA,aAAhK;AAAsN,mBAAO,EAAE,iBAAAqE,CAAC;AAAA,qBAAI7E,IAAI,CAAC+L,YAAL,EAAJ;AAAA,aAAhO;AAAyP,mBAAO,EAAE,iBAAAlH,CAAC;AAAA,qBAAI7E,IAAI,CAAC6L,YAAL,CAAkBhH,CAAlB,CAAJ;AAAA,aAAnQ;AAA6R,kBAAM,EAAE,gBAAAA,CAAC;AAAA,qBAAI7E,IAAI,CAAC8L,WAAL,CAAiBjH,CAAjB,CAAJ;AAAA;AAAtS,YADE;AAGA;;AAEF,aAAK,OAAL;AACA;AACEsH,mBAAS,gBACX;AAAO,eAAG,EAAEnM,IAAI,CAACK,GAAjB;AAAsB,eAAG,EAAE,aAAAuD,EAAE;AAAA,qBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA,aAA7B;AAAoD,iBAAK,EAAE,KAAKvB,KAAL,CAAW7B,KAAtE;AAA6E,oBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAAlG;AAA4G,uBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAArI;AAAkJ,oBAAQ,EAAE,kBAAA2C,CAAC;AAAA,qBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,qBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,eAApB,CAAJ;AAAA,aAA7J;AAAmN,mBAAO,EAAE,iBAAAqE,CAAC;AAAA,qBAAI7E,IAAI,CAAC+L,YAAL,EAAJ;AAAA,aAA7N;AAAsP,mBAAO,EAAE,iBAAAlH,CAAC;AAAA,qBAAI7E,IAAI,CAAC6L,YAAL,CAAkBhH,CAAlB,CAAJ;AAAA,aAAhQ;AAA0R,kBAAM,EAAE,gBAAAA,CAAC;AAAA,qBAAI7E,IAAI,CAAC8L,WAAL,CAAiBjH,CAAjB,CAAJ;AAAA;AAAnS,YADE;AAtCJ;;AA4CA,0BACD;AAAK,UAAE,EAAE7E,IAAI,CAACuB,EAAd;AAAkB,WAAG,EAAE,aAAAqC,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA,SAAzB;AAAmD,iBAAS,EAAC;AAA7D,sBACC;AAAK,iBAAS,EAAC;AAAf,SACEuI,SADF,EAEED,OAFF,EAGEF,OAHF,CADD,CADC;AAUD;;;;EAhKoDlK,4CAAK,CAACC,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACT7D;AACA;AACA;AAEA;;AAEA;;IAEqBqK,yB;;;;;;;;;;;;;mCAEK;AAAA,UAAd5J,UAAc,QAAdA,UAAc;AAExB,UAAIC,OAAO,GAAG,IAAd;AACE,UAAIH,KAAK,GAAG,EAAZ;;AACA,UAAI,CAAC,KAAKD,KAAL,CAAW7B,KAAZ,IAAqB,CAAC,KAAK6B,KAAL,CAAW7B,KAAX,CAAiB6L,KAAjB,CAAuB,kCAAvB,CAA1B,EAAsF;AACpF5J,eAAO,GAAG,KAAV;AACA,YAAID,UAAJ,EAAgBF,KAAK,GAAG,sBAAR;AACjB;;AACD,UAAI,KAAK7B,MAAL,CAAY2B,QAAZ,IAAwB,CAAC,KAAKC,KAAL,CAAW7B,KAAxC,EAA+C;AAC7CiC,eAAO,GAAG,KAAV;AACA,YAAID,UAAJ,EAAgBF,KAAK,GAAG,4BAAR;AACjB;;AACD,WAAKI,QAAL,CAAc;AAAED,eAAO,EAAPA,OAAF;AAAWH,aAAK,EAALA;AAAX,OAAd;AACF,aAAOG,OAAP;AACA;;;6BAES;AAET,UAAIzC,IAAI,GAAG,IAAX;AAEE,UAAIsL,SAAS,GAAG,IAAhB;;AACA,UAAItL,IAAI,CAACqC,KAAL,CAAWC,KAAf,EAAsB;AACpBgJ,iBAAS,gBAAI;AAAK,mBAAS,EAAC;AAAf,WAAiCtL,IAAI,CAACqC,KAAL,CAAWC,KAA5C,CAAb;AACD;;AAED,0BACD;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAO,YAAI,EAAC,MAAZ;AAAmB,aAAK,EAAE,KAAKvC,KAAL,CAAWS,KAArC;AAA4C,gBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAAjE;AAA2E,mBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAApG;AAAiH,gBAAQ,EAAE,kBAAA2C,CAAC;AAAA,iBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,iBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,WAApB,CAAJ;AAAA,SAA5H;AAAkL,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAzL,QADF,EAEM0H,SAFN,CADC;AAOD;;;;EAlCoDtJ,0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRvD;AACA;AACA;AAEA;;AAEA;;IAEqBsK,uB;;;;;;;;;;;;;6BAEX;AAER,UAAItM,IAAI,GAAG,IAAX;AAEE,UAAIsL,SAAS,GAAG,IAAhB;;AACA,UAAItL,IAAI,CAACqC,KAAL,CAAWC,KAAf,EAAsB;AACpBgJ,iBAAS,gBAAI;AAAK,mBAAS,EAAC;AAAf,4CAAb;AACD;;AAED,0BACD;AAAK,iBAAS,EAAC;AAAf,SACMtL,IAAI,CAACS,MAAL,CAAYwB,OAAZ,CAAoBwC,GAApB,CAAyB,UAAA8H,MAAM,EAAI;AAClC,YAAIA,MAAM,CAACC,oBAAX,EAAiC;AAC/B,8BAAO;AAAK,qBAAS,EAAC,qBAAf;AAAqC,eAAG,EAAED,MAAM,CAAC/L;AAAjD,0BAAwD;AAAK,qBAAS,2BAAqBR,IAAI,CAACqC,KAAL,CAAW7B,KAAX,IAAoB+L,MAAM,CAAC/L,KAA3B,GAAmC,0BAAnC,GAAgE,EAArF;AAAd,0BAAyG;AAAO,gBAAI,EAAC,OAAZ;AAAoB,gBAAI,EAAER,IAAI,CAACsB,KAA/B;AAAsC,iBAAK,EAAEiL,MAAM,CAAC/L,KAApD;AAA2D,oBAAQ,EAAE,kBAAAqE,CAAC;AAAA,qBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,qBAAK,EAAE+L,MAAM,CAAC/L;AAAhB,eAApB,CAAJ;AAAA;AAAtE,YAAzG,CAAxD,eAAiS;AAAK,qBAAS,EAAC,gBAAf;AAAgC,mCAAuB,EAAE;AAAEkD,oBAAM,EAAE6I,MAAM,CAACC;AAAjB;AAAzD,YAAjS,CAAP;AACD,SAFD,MAEO;AACL,8BAAO;AAAK,qBAAS,EAAC,qBAAf;AAAqC,eAAG,EAAED,MAAM,CAAC/L;AAAjD,0BAAwD;AAAK,qBAAS,2BAAqBR,IAAI,CAACqC,KAAL,CAAW7B,KAAX,IAAoB+L,MAAM,CAAC/L,KAA3B,GAAmC,0BAAnC,GAAgE,EAArF;AAAd,0BAAyG;AAAO,gBAAI,EAAC,OAAZ;AAAoB,gBAAI,EAAER,IAAI,CAACsB,KAA/B;AAAsC,iBAAK,EAAEiL,MAAM,CAAC/L,KAApD;AAA2D,oBAAQ,EAAE,kBAAAqE,CAAC;AAAA,qBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,qBAAK,EAAE+L,MAAM,CAAC/L;AAAhB,eAApB,CAAJ;AAAA;AAAtE,YAAzG,CAAxD,eAAiS;AAAK,qBAAS,EAAC;AAAf,aAAiC+L,MAAM,CAACC,oBAAP,GAA8B,IAA9B,GAAqCD,MAAM,CAACrJ,WAAP,IAAsBqJ,MAAM,CAACtJ,KAA7B,IAAsCsJ,MAAM,CAAC/L,KAAnH,CAAjS,CAAP;AACD;AACF,OANA,CADN,EAQM8K,SARN,CADC;AAaD;;;;EAxBkDtJ,0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRrD;AACA;AACA;AAEA;;AAEA;;IAEqB4C,uB;;;;;;;;;;;;;wCAEC;AAClB;AACA,UAAIpE,KAAK,GAAG,KAAK6B,KAAL,CAAW7B,KAAX,IAAsB,KAAKC,MAAL,CAAYwB,OAAZ,CAAoB,CAApB,KAA0B,KAAKxB,MAAL,CAAYwB,OAAZ,CAAoB,CAApB,EAAuBzB,KAAnF;AACA,WAAK6C,cAAL,CAAoB;AAAE7C,aAAK,EAALA;AAAF,OAApB;AACD;;;6BAEO;AAER,UAAIR,IAAI,GAAG,IAAX;AAEE,UAAIsL,SAAS,GAAG,IAAhB;;AACA,UAAItL,IAAI,CAACqC,KAAL,CAAWC,KAAf,EAAsB;AACpBgJ,iBAAS,gBAAI;AAAK,mBAAS,EAAC;AAAf,4CAAb;AACD;;AAED,0BACD;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAQ,aAAK,EAAE,KAAKjJ,KAAL,CAAW7B,KAAX,IAAoB,EAAnC;AAAuC,gBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAA5D;AAAsE,mBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAA/F;AAA4G,gBAAQ,EAAE,kBAAA2C,CAAC;AAAA,iBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,iBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,WAApB,CAAJ;AAAA,SAAvH;AAA6K,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAApL,SACM5D,IAAI,CAACS,MAAL,CAAYwB,OAAZ,CAAoBwC,GAApB,CAAyB,UAAA8H,MAAM,EAAI;AAClC,4BAAO;AAAQ,eAAK,EAAEA,MAAM,CAAC/L,KAAP,IAAgB,EAA/B;AAAmC,aAAG,EAAE+L,MAAM,CAAC/L;AAA/C,WAAuD+L,MAAM,CAACrJ,WAAP,IAAsBqJ,MAAM,CAACtJ,KAA7B,IAAsCsJ,MAAM,CAAC/L,KAApG,CAAP;AACD,OAFA,CADN,CADF,EAMM8K,SANN,CADC;AAWD;;;;EA5BkDtJ,0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRrD;;IAEMyK,M;;;;;AACJ,kBAAY1M,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,8BAAMA,KAAN;AACA,UAAKsC,KAAL,GAAa;AACX7B,WAAK,EAAE,MAAKT,KAAL,CAAWS,KADP;AAEXkM,aAAO,EAAE,MAAK3M,KAAL,CAAW2M,OAAX,IAAsB;AAFpB,KAAb;AAIA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBrJ,IAAlB,+BAApB;AANgB;AAOjB;;;;iCAEYsJ,K,EAAO;AAAA,UACVpM,KADU,GACAoM,KAAK,CAACC,MADN,CACVrM,KADU;;AAGlB,UAAG,OAAO,KAAKT,KAAL,CAAWwC,QAAlB,KAA+B,UAAlC,EAA6C;AAC3C,aAAKxC,KAAL,CAAWwC,QAAX,CAAoB/B,KAApB;AACD;;AAED,WAAKkC,QAAL,CAAc;AAAClC,aAAK,EAALA,KAAD;AAAQkM,eAAO,EAAE;AAAjB,OAAd;AACD;;;8BAES;AAER,UAAG,OAAO,KAAK3M,KAAL,CAAWwC,QAAlB,KAA+B,UAAlC,EAA6C;AAC3C,aAAKxC,KAAL,CAAWwC,QAAX,CAAoB,EAApB;AACD;;AAED,WAAKG,QAAL,CAAc;AAACgK,eAAO,EAAE;AAAV,OAAd;AAED;;;iCAEYI,G,EAAKC,G,EAAKvM,K,EAAO;AAC5B,UAAMwM,KAAK,GAAGD,GAAG,GAAGD,GAApB;AACA,UAAMG,WAAW,GAAGzM,KAAK,GAAGsM,GAA5B;AACA,aAASG,WAAW,GAAC,CAAb,GAAgBD,KAAjB,GAAwB,CAA/B;AACD;;;6BAEO;AACN,UAAIhN,IAAI,GAAG,IAAX;AADM,wBAEqBA,IAAI,CAACqC,KAF1B;AAAA,UAEE7B,KAFF,eAEEA,KAFF;AAAA,UAESkM,OAFT,eAESA,OAFT;AAAA,wBAGqB1M,IAAI,CAACD,KAH1B;AAAA,UAGE+M,GAHF,eAGEA,GAHF;AAAA,UAGOC,GAHP,eAGOA,GAHP;AAAA,UAGYG,IAHZ,eAGYA,IAHZ;AAIN,0BACE;AAAK,iBAAS,YAAKlN,IAAI,CAACD,KAAL,CAAWoN,SAAhB;AAAd,sBACE;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAK,iBAAS,EAAC;AAAf,QADF,eAEE;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAK,iBAAS,EAAC,2BAAf;AAA2C,aAAK,EAAE;AAAEC,mBAAS,EAAE,YAAYpN,IAAI,CAACqN,YAAL,CAAkBP,GAAlB,EAAuBC,GAAvB,EAA4BvM,KAA5B,CAAZ,GAAiD;AAA9D;AAAlD,QADF,CAFF,eAKE;AAAK,iBAAS,EAAC;AAAf,QALF,eAME;AAAK,iBAAS,EAAC;AAAf,QANF,eAOE;AAAK,iBAAS,EAAC;AAAf,QAPF,CADF,eAUE;AAAO,YAAI,EAAC,OAAZ;AAAoB,WAAG,EAAEsM,GAAzB;AAA8B,WAAG,EAAEC,GAAnC;AAAwC,YAAI,EAAEG,IAA9C;AAAoD,aAAK,EAAE1M,KAA3D;AAAkE,eAAO,EAAE,mBAAM;AAAE,cAAI,CAACkM,OAAL,EAAc1M,IAAI,CAACsN,OAAL;AAAiB,SAAlH;AAAqH,gBAAQ,EAAEtN,IAAI,CAAC2M,YAApI;AAAkJ,iBAAS,EAAED,OAAO,GAAG,wBAAH,GAA8B,6CAAlM;AAAiP,WAAG,EAAE,aAAA9I,EAAE;AAAA,iBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAxP,QAVF,CADF;AAcD;;;;EAtDkB9B,4CAAK,CAACC,S;;AAyDZ0K,qEAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AAEA;;AAEA;;IAEqB7H,uB;;;;;;;;;;;;;6BAEX;AAER,UAAI5E,IAAI,GAAG,IAAX;AAEE,UAAIsL,SAAS,GAAG,IAAhB;;AACA,UAAItL,IAAI,CAACqC,KAAL,CAAWC,KAAf,EAAsB;AACpBgJ,iBAAS,gBAAI;AAAK,mBAAS,EAAC;AAAf,wCAAb;AACD;;AAED,0BACD;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAU,aAAK,EAAE,KAAKvL,KAAL,CAAWS,KAA5B;AAAmC,gBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAAxD;AAAkE,mBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAA3F;AAAwG,gBAAQ,EAAE,kBAAA2C,CAAC;AAAA,iBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,iBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,WAApB,CAAJ;AAAA,SAAnH;AAAyK,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAhL,SAAwM,KAAKvB,KAAL,CAAW7B,KAAnN,CADF,EAEM8K,SAFN,CADC;AAOD;;;;EAlBkDtJ,0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRrD;AACA;AACA;AAEA;;AAEA;;IAEqBuL,qB;;;;;;;;;;;;;6BAEX;AAER,UAAIvN,IAAI,GAAG,IAAX;AAEE,UAAIsL,SAAS,GAAG,IAAhB;;AACA,UAAItL,IAAI,CAACqC,KAAL,CAAWC,KAAf,EAAsB;AACpBgJ,iBAAS,gBAAI;AAAK,mBAAS,EAAC;AAAf,wCAAb;AACD;;AAED,0BACD;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAO,YAAI,EAAC,MAAZ;AAAmB,aAAK,EAAE,KAAKvL,KAAL,CAAWS,KAArC;AAA4C,gBAAQ,EAAE,KAAKT,KAAL,CAAWoC,QAAjE;AAA2E,mBAAW,EAAE,KAAK1B,MAAL,CAAYyB,WAApG;AAAiH,gBAAQ,EAAE,kBAAA2C,CAAC;AAAA,iBAAI7E,IAAI,CAACqD,cAAL,CAAoB;AAAE7C,iBAAK,EAAER,IAAI,CAACuD,KAAL,CAAW/C;AAApB,WAApB,CAAJ;AAAA,SAA5H;AAAkL,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACuD,KAAL,GAAaK,EAAlB;AAAA;AAAzL,QADF,EAEM0H,SAFN,CADC;AAOD;;;;EAlBgDtJ,0D;;;;;;;;;;;;;ACRnD,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;CAGA;;AACA;CAGA;;CAGA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACbwL,MAAI,EAAJA,2DADa;AAEbC,WAAS,EAATA,iEAFa;AAGbC,QAAM,EAANA,6DAHa;AAIbC,aAAW,EAAXA,mEAJa;AAKbC,kBAAgB,EAAhBA,yEALa;AAMbC,UAAQ,EAARA,+DANa;AAObC,QAAM,EAANA,8DAPa;AAQbC,QAAM,EAANA,8DARa;AASbC,MAAI,EAAJA,iEATa;AAUbC,UAAQ,EAARA,gEAVa;AAWbxB,QAAM,EAANA,8DAAMA;AAXO,CAAf,E,CAcA;AACA;AACA;AACA;AACA;AACA,yB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3CA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA,a,CAEA;;;IAEqByB,Y;;;;;AAEnB,wBAAYnO,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAChBC,YAAM,EAAE,IADQ;AAEhBqN,YAAM,EAAE,IAFQ;AAGhBC,UAAI,EAAE;AACJC,uBAAe,EAAE,IADb;AAEJC,kBAAU,EAAE,KAFR;AAGJC,2BAAmB,EAAE,KAHjB;AAIJC,8BAAsB,EAAE,CAAC,UAAD,EAAY,SAAZ,EAAsB,MAAtB,EAA6B,UAA7B;AAJpB,OAHU;AAShBC,cAAQ,EAAE;AACRC,gBAAQ,EAAE,IADF;AAERC,iBAAS,EAAE,uCAFH;AAGRC,iCAAyB,EAAE,EAHnB;AAIRC,gCAAwB,EAAE;AAJlB,OATM;AAehBC,UAAI,EAAE;AACJC,mBAAW,EAAE;AADT,OAfU;AAkBhBC,YAAM,EAAE,EAlBQ;AAmBhBC,WAAK,EAAE,IAnBS;AAoBhBC,eAAS,EAAE,QApBK;AAqBhBC,eAAS,EAAE;AArBK,KAApB;AAwBA,UAAK1O,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACX+L,UAAI,EAAE,MAAKrO,KAAL,CAAWqO,IADN;AAEXD,YAAM,EAAIpO,KAAK,CAACqO,IAAN,IAAcrO,KAAK,CAACqO,IAAN,CAAW7M,EAA3B,IAAmC,MAAKd,MAAL,CAAY0N,MAF5C;AAGXiB,kBAAY,EAAE;AAHH,KAAb;AA/BiB;AAqClB;;;;sCAEgBxN,S,EAAWC,S,EAAW;AAErC,UAAI7B,IAAI,GAAG,IAAX;;AAEFA,UAAI,CAACqP,sBAAL,GAA8B,UAASzC,KAAT,EAAgB;AAC1C5M,YAAI,CAACsP,gBAAL,CAAsB1C,KAAK,CAAC5B,MAA5B;AACD,OAFH;;AAGEzF,cAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD/K,IAAI,CAACqP,sBAAtD;;AAEFrP,UAAI,CAACuP,uBAAL,GAA+B,UAAS3C,KAAT,EAAgB;AAC3C5M,YAAI,CAACwP,iBAAL,CAAuB5C,KAAK,CAAC5B,MAA7B;AACD,OAFH;;AAGEzF,cAAQ,CAACwF,gBAAT,CAA0B,sBAA1B,EAAkD/K,IAAI,CAACuP,uBAAvD;;AAEFvP,UAAI,CAACyP,mBAAL,GAA2B,UAAS7C,KAAT,EAAgB;AACvC5M,YAAI,CAAC0P,aAAL,CAAmB9C,KAAK,CAAC5B,MAAzB;AACD,OAFH;;AAGEzF,cAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD/K,IAAI,CAACyP,mBAAtD;;AAEFzP,UAAI,CAAC2P,mBAAL,GAA2B,UAAS/C,KAAT,EAAgB;AACvC5M,YAAI,CAAC4P,aAAL,CAAmBhD,KAAK,CAAC5B,MAAzB;AACD,OAFH;;AAGEzF,cAAQ,CAACwF,gBAAT,CAA0B,kBAA1B,EAA8C/K,IAAI,CAAC2P,mBAAnD;AAEA3P,UAAI,CAAC6P,SAAL;AAEF;;;2CAEuB;AACvBtK,cAAQ,CAACuK,mBAAT,CAA6B,qBAA7B,EAAoD,KAAKT,sBAAzD;AACA9J,cAAQ,CAACuK,mBAAT,CAA6B,sBAA7B,EAAqD,KAAKP,uBAA1D;AACAhK,cAAQ,CAACuK,mBAAT,CAA6B,qBAA7B,EAAoD,KAAKL,mBAAzD;AACAlK,cAAQ,CAACuK,mBAAT,CAA6B,kBAA7B,EAAiD,KAAKH,mBAAtD;AACC;;;0CAEqB9K,C,EAAG;AACvBA,OAAC,CAACS,eAAF;;AACA,UAAK,KAAK7E,MAAL,CAAYsP,YAAjB,EAAgC;AAC9BxK,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,KAAKxP,MAAL,CAAYsP,YAArC;AACD,OAFD,MAEO;AACP,YAAInD,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,qBAAvB,EAA8C;AAAElF,gBAAM,EAAE,KAAK3I,KAAL,CAAW+L;AAArB,SAA9C,CAAZ;AACA7I,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;AACF;;;mCAEc;AACb,WAAKlK,QAAL,CAAc;AACZ0M,oBAAY,EAAE;AADF,OAAd;AAGD;;;mCAEc;AACb,WAAK1M,QAAL,CAAc;AACZ0M,oBAAY,EAAE;AADF,OAAd;AAGD;;;yCAEoBvK,C,EAAG;AACtBA,OAAC,CAACS,eAAF;AACA,WAAK8J,YAAL;AACD;;;qCAEgBzM,I,EAAM;AACrB,WAAKN,KAAL,CAAW+L,IAAX,CAAgBgC,QAAhB;AACA,WAAK1N,QAAL,CAAc;AAAE0L,YAAI,EAAE,KAAK/L,KAAL,CAAW+L;AAAnB,OAAd;AACD;;;sCAEiBzL,I,EAAM;AACtB,WAAKN,KAAL,CAAW+L,IAAX,CAAgBgC,QAAhB;AACA,WAAK1N,QAAL,CAAc;AAAE0L,YAAI,EAAE,KAAK/L,KAAL,CAAW+L;AAAnB,OAAd;AACD;;;oCAEe;AACd,WAAKiC,YAAL;AACA,WAAKR,SAAL;AACD;;;oCAEe;AACd,WAAKA,SAAL;AACD;;;gCAEW;AAEV,UAAI7P,IAAI,GAAG,IAAX;AAEA,UAAImO,MAAM,GAAGnO,IAAI,CAACqC,KAAL,CAAW8L,MAAX,IAAsB,KAAK9L,KAAL,CAAW+L,IAAX,IAAmB,KAAK/L,KAAL,CAAW+L,IAAX,CAAgB7M,EAAtE;AAEA,UAAI,CAAC4M,MAAL,EAAa;AAEb,UAAInN,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAvB,uBAA0ChB,IAAI,CAACS,MAAL,CAAYK,MAAtD,mBAAwEqN,MAAxE,8FAAP;AACA,UAAInO,IAAI,CAACS,MAAL,CAAYqO,IAAZ,CAAiBC,WAArB,EAAkC/N,GAAG,IAAI,gBAAP;AAElC,UAAIC,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA4F,WAAK,CAACrF,GAAD,EAAM;AAAEC,eAAO,EAAPA;AAAF,OAAN,CAAL,CACGuP,IADH,CACQ,UAACC,QAAD,EAAc;AAClB,YAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB,MAAMC,KAAK,CAAC,uBAAD,CAAX;AAClB,eAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,OAJH,EAKGJ,IALH,CAKS,UAAAI,IAAI,EAAI;AAEb,YAAIxC,IAAI,GAAGwC,IAAX;AACA5Q,YAAI,CAAC0C,QAAL,CAAc;AAAE0L,cAAI,EAAJA;AAAF,SAAd,EAAwB,YAAW;AACjC,cAAGkC,uDAAqB,CAACO,YAAtB,CAAmCC,GAAnC,CAAuC,6BAAvC,CAAH,EAA0E;AACxEnP,kBAAM,CAACqO,QAAP,CAAgBe,IAAhB;AACAT,mEAAqB,CAACO,YAAtB,CAAmCG,GAAnC,CAAuC,6BAAvC,EAAsE,KAAtE;AACD;AACF,SALD;AAOD,OAfH,WAgBS,UAACpQ,GAAD,EAAS;AACdqK,eAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,eAAO,CAACC,GAAR,CAAYtK,GAAZ;AACD,OAnBH;AAqBD;;;iCAEY;AAAA;;AAEX,UAAIZ,IAAI,GAAG,IAAX;AAEA,UAAI,EAAGA,IAAI,CAACS,MAAL,CAAYU,IAAZ,IAAoBnB,IAAI,CAACS,MAAL,CAAYU,IAAZ,CAAiB8P,IAArC,IAA6CjR,IAAI,CAACS,MAAL,CAAYU,IAAZ,CAAiB8P,IAAjB,IAAyB,OAAzE,CAAJ,EAAwF;AACxF,UAAI,EAAG,KAAK5O,KAAL,CAAW+L,IAAX,IAAmB,KAAK/L,KAAL,CAAW+L,IAAX,CAAgB7M,EAAtC,CAAJ,EAAgD;AAEhD,UAAIP,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAvB,uBAA0ChB,IAAI,CAACS,MAAL,CAAYK,MAAtD,mBAAwE,KAAKuB,KAAL,CAAW+L,IAAX,CAAgB7M,EAAxF,CAAP;AACA,UAAIN,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA,UAAI0N,MAAM,GAAG,KAAK9L,KAAL,CAAW+L,IAAX,CAAgB7M,EAA7B,CAVW,CAUsB;;AAEjC8E,WAAK,CAACrF,GAAD,EAAM;AACTkQ,cAAM,EAAE,QADC;AAETjQ,eAAO,EAAPA;AAFS,OAAN,CAAL,CAIGuP,IAJH,CAIQ,UAACC,QAAD,EAAc;AAClB,YAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB,MAAMC,KAAK,CAAC,qBAAD,CAAX;AAClB,eAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,OAPH,EAQGJ,IARH,CAQS,UAAAI,IAAI,EAAI;AACb,YAAK,MAAI,CAACnQ,MAAL,CAAY0Q,mBAAjB,EAAuC;AACrC5L,kBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,MAAI,CAACxP,MAAL,CAAY0Q,mBAArC;AACD,SAFD,MAEO;AACP,cAAIvE,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,kBAAvB,EAA2C;AAAElF,kBAAM,EAAE;AAAEmD,oBAAM,EAANA;AAAF;AAAV,WAA3C,CAAZ;AACA5I,kBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;AACF,OAfH,WAgBS,UAAChM,GAAD,EAAS;AACdqK,eAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,eAAO,CAACC,GAAR,CAAYtK,GAAZ;AACD,OAnBH;AAqBD;;;6BAEO;AAEN,UAAIZ,IAAI,GAAG,IAAX;AACA,UAAIoO,IAAI,GAAGpO,IAAI,CAACqC,KAAL,CAAW+L,IAAtB;AAEA,UAAI,CAACA,IAAL,EAAW,OAAO,IAAP;AAEX,UAAIgD,SAAS,GAAG,IAAhB;;AAEA,UAAIpR,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBE,UAArB,EAAiC;AAC/B,YAAI+C,MAAM,GAAGC,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYyO,SAArB,EAAjB;AACA,YAAIqC,OAAO,GAAGvR,IAAI,CAACS,MAAL,CAAYwO,KAAZ,IAAqBjP,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBuC,IAAlB,CAAuB,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAAClQ,EAAJ,IAAU8P,MAAV,IAAoBI,GAAG,CAACjR,KAAJ,IAAa6Q,MAArC;AAAA,SAA1B,CAAnC;AACApG,eAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBmG,MAAlB,EAA0BE,OAA1B,EAAmCvR,IAAI,CAACS,MAAL,CAAYwO,KAA/C;;AACA,YAAIsC,OAAJ,EAAa;AACX,cAAIG,SAAS,GAAGH,OAAO,CAACI,KAAxB;AACA,cAAIC,eAAe,GAAGL,OAAO,CAACK,eAA9B;AACA,cAAIC,SAAS,GAAGN,OAAO,CAACM,SAAxB;AACAT,mBAAS,gBACP;AAAK,qBAAS,EAAC,gBAAf;AAAgC,iBAAK,EAAE;AAAEU,mBAAK,EAAED,SAAT;AAAoBD,6BAAe,EAAfA;AAApB;AAAvC,aAA+EF,SAA/E,CADF;AAGD;AACF;;AAED,UAAIK,QAAQ,GAAG,IAAf;AACA,UAAIC,iBAAiB,GAAG,IAAxB;;AACA,UAAIhS,IAAI,CAACS,MAAL,CAAYqO,IAAZ,CAAiBC,WAArB,EAAkC;AAChC,YAAIX,IAAI,CAACU,IAAL,IAAa9O,IAAI,CAACqC,KAAL,CAAW+M,YAA5B,EAA0C;AACxC2C,kBAAQ,gBACN,qFACD;AAAK,cAAE,EAAC,MAAR;AAAe,qBAAS,EAAC;AAAzB,0BAA2C,uEAAK/R,IAAI,CAACS,MAAL,CAAYqO,IAAZ,CAAiB7L,KAAjB,IAA0B,MAA/B,CAA3C,CADC,eAEE,2DAAC,uDAAD;AAAuB,kBAAM,gDAAOjD,IAAI,CAACS,MAAZ,GAAuBT,IAAI,CAACS,MAAL,CAAYqO,IAAnC;AAAyCX,oBAAM,EAAEnO,IAAI,CAACqC,KAAL,CAAW8L;AAA5D,cAA7B;AAAmG,gBAAI,EAAEC,IAAI,CAACU;AAA9G,YAFF,CADF;AAMD,SAPD,MAOO;AACL,cAAIV,IAAI,CAAC6D,GAAL,IAAY7D,IAAI,CAAC6D,GAAL,CAASC,IAAzB,EAA+B;AAC7BF,6BAAiB,gBACf;AAAK,uBAAS,EAAC;AAAf,4BACE;AAAQ,uBAAS,EAAC,sCAAlB;AAAyD,qBAAO,EAAE,iBAACpF,KAAD;AAAA,uBAAW5M,IAAI,CAACmS,oBAAL,CAA0BvF,KAA1B,CAAX;AAAA;AAAlE,0BADF,CADF;AAKD;AACF;AACF;;AAED,UAAIwF,eAAe,GAAG,IAAtB;;AACA,UAAIpS,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBC,eAArB,EAAsC;AACpC+D,uBAAe,gBACb;AAAK,mBAAS,EAAC;AAAf,wBACE,+EADF,eAEE,2DAAC,wDAAD;AAAY,gBAAM,EAAE;AAAEC,gBAAI,EAAE,MAAR;AAAgBC,mBAAO,EAAE,KAAzB;AAAgCvR,eAAG,EAAE,KAAKN,MAAL,CAAYM,GAAjD;AAAsDI,gBAAI,EAAE,KAAKV,MAAL,CAAYU,IAAxE;AAA8EL,kBAAM,EAAE,KAAKL,MAAL,CAAYK;AAAlG,WAApB;AAAgI,cAAI,EAAE,KAAKuB,KAAL,CAAW+L,IAAjJ;AAAuJ,cAAI,EAAC,YAA5J;AAAyK,eAAK,EAAEA,IAAI,CAACmE;AAArL,UAFF,CADF;AAMD;;AAED,UAAIC,eAAe,GAAG,IAAtB;;AACA,UAAKpE,IAAI,CAAC6D,GAAL,IAAY7D,IAAI,CAAC6D,GAAL,CAASC,IAA1B,EAAiC;AAC/BM,uBAAe,gBACb;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAQ,mBAAS,EAAC,sCAAlB;AAAyD,iBAAO,EAAE,iBAAC5F,KAAD;AAAA,mBAAW5M,IAAI,CAACyS,qBAAL,CAA2B7F,KAA3B,CAAX;AAAA;AAAlE,yBADF,eAEE;AAAQ,mBAAS,EAAC,wCAAlB;AAA2D,iBAAO,EAAE,iBAACA,KAAD,EAAW;AAAE,gBAAK8F,OAAO,CAAC,mBAAD,CAAZ,EAAoC1S,IAAI,CAAC2S,UAAL,CAAgB/F,KAAhB;AAAwB;AAA7I,4BAFF,CADF;AAOD;;AAED,UAAIgG,YAAY,GAAG,IAAnB;;AACA,UAAIxE,IAAI,IAAIA,IAAI,CAACyE,QAAjB,EAA2B;AACzBD,oBAAY,gBACV;AAAK,mBAAS,EAAC;AAAf,WACGxE,IAAI,CAAC0E,qBADR,eAC8B,sEAD9B,eAEE,sEAFF,EAGG1E,IAAI,CAACyE,QAHR,CADF;AAOD;;AAED,UAAIE,kBAAkB,GAAG,IAAzB;;AACA,UAAK/S,IAAI,CAACS,MAAL,CAAYgO,QAAZ,CAAqBC,QAA1B,EAAqC;AACnCqE,0BAAkB,gBAChB,qFACE,kFADF,eAEE;AAAG,cAAI,EAAC,YAAR;AAAqB,mBAAS,EAAC;AAA/B,WAAsD3E,IAAI,CAACgC,QAAL,IAAiB,CAAvE,cAFF,CADF;AAMD;;AAED,UAAI4C,aAAa,GAAG,IAApB;;AACA,UAAKhT,IAAI,CAACS,MAAL,CAAYgO,QAAZ,CAAqBC,QAA1B,EAAqC;AACnC;AACA,YAAIjO,MAAM,qBAAOT,IAAI,CAACS,MAAZ,CAAV;;AACAA,cAAM,CAACgO,QAAP,CAAgBC,QAAhB,GAA2B,KAAKjO,MAAL,CAAYgO,QAAZ,CAAqBC,QAArB,IAAiC,CAAC,KAAKjO,MAAL,CAAYgO,QAAZ,CAAqBG,yBAArB,CAA+CvC,KAA/C,CAAqD,IAAI4G,MAAJ,oBAAuB7E,IAAI,CAAC7M,EAA5B,eAArD,CAA7D;AACAd,cAAM,CAACgO,QAAP,CAAgByE,QAAhB,GAA2B,KAAKzS,MAAL,CAAYgO,QAAZ,CAAqByE,QAArB,IAAiC,KAAKzS,MAAL,CAAYgO,QAAZ,CAAqBI,wBAArB,CAA8CxC,KAA9C,CAAoD,IAAI4G,MAAJ,oBAAuB7E,IAAI,CAAC7M,EAA5B,eAApD,CAA5D;AACAyR,qBAAa,gBACX,qFACD;AAAK,YAAE,EAAC,WAAR;AAAoB,mBAAS,EAAC;AAA9B,wBAAqD,uEAAKhT,IAAI,CAACS,MAAL,CAAYgO,QAAZ,CAAqBxL,KAArB,IAA8B,UAAnC,CAArD,CADC,eAEE,2DAAC,4DAAD;AAA4B,gBAAM,kCAAOjD,IAAI,CAACS,MAAL,CAAYgO,QAAnB;AAA6BxL,iBAAK,EAAEG,SAApC;AAA+CrC,eAAG,EAAEf,IAAI,CAACS,MAAL,CAAYM,GAAhE;AAAqEI,gBAAI,EAAEnB,IAAI,CAACS,MAAL,CAAYU,IAAvF;AAA6FL,kBAAM,EAAEd,IAAI,CAACS,MAAL,CAAYK,MAAjH;AAAyHqN,kBAAM,EAAEC,IAAI,CAAC7M,EAAtI;AAA0I4R,oBAAQ,EAAEnT,IAAI,CAACS,MAAL,CAAY0S;AAAhK;AAAlC,UAFF,CADF;AAMD;;AAED,UAAIC,UAAU,GAAGhF,IAAI,CAACjN,IAAL,CAAUkS,QAAV,IAAsBjF,IAAI,CAACjN,IAAL,CAAUmS,QAAhC,IAA4ClF,IAAI,CAACjN,IAAL,CAAUoS,SAAV,GAAqB,GAArB,GAA2BnF,IAAI,CAACjN,IAAL,CAAUqS,QAAlG;;AACA,UAAI,KAAK/S,MAAL,CAAYgT,iBAAhB,EAAmC;AACjCL,kBAAU,gBAAG;AAAG,cAAI,EAAE,KAAK3S,MAAL,CAAYgT,iBAAZ,GAAgC,GAAhC,GAAsCrF,IAAI,CAACjN,IAAL,CAAUI,EAAzD;AAA6D,mBAAS,EAAC;AAAvE,WAA0F6R,UAA1F,CAAb;AACD;;AAED,UAAIM,gBAAgB,GAAG,IAAvB;;AACA,UAAI1T,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBI,sBAAjB,CAAwChK,MAA5C,EAAoD;AAClD,YAAImP,kBAAkB,GAAG3T,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBI,sBAAjB,CAAwCoF,QAAxC,CAAiD,UAAjD,iBAAgE,oFAAI;AAAG,mBAAS,EAAC,oBAAb;AAAkC,gBAAM,EAAC,QAAzC;AAAkD,cAAI,EAAG,kDAAkDC,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB;AAA7H,sBAAJ,CAAhE,GAAiP,IAA1Q;AACA,YAAI6D,iBAAiB,GAAG9T,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBI,sBAAjB,CAAwCoF,QAAxC,CAAiD,SAAjD,iBAA+D,oFAAI;AAAG,mBAAS,EAAC,mBAAb;AAAiC,gBAAM,EAAC,QAAxC;AAAiD,cAAI,EAAG,2CAA2CC,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB;AAArH,qBAAJ,CAA/D,GAAuO,IAA/P;AACA,YAAI8D,cAAc,GAAG/T,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBI,sBAAjB,CAAwCoF,QAAxC,CAAiD,MAAjD,iBAA4D,oFAAI;AAAG,mBAAS,EAAC,iBAAb;AAA+B,gBAAM,EAAC,QAAtC;AAA+C,cAAI,EAAG,qBAAqBC,kBAAkB,CAACvC,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYuT,UAArB,EAAL,CAAvC,GAAkF,QAAlF,GAA6FH,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB;AAArK,mBAAJ,CAA5D,GAAiR,IAAtS;AACA,YAAIgE,kBAAkB,GAAGjU,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBI,sBAAjB,CAAwCoF,QAAxC,CAAiD,UAAjD,iBAAgE,oFAAI;AAAG,mBAAS,EAAC,oBAAb;AAAkC,gBAAM,EAAC,QAAzC;AAAkD,cAAI,EAAG,yBAAyBC,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB;AAApG,sBAAJ,CAAhE,GAAwN,IAAjP;AAEAyD,wBAAgB,gBAChB;AAAK,mBAAS,EAAC;AAAf,wBACE,uEACGC,kBADH,EAEGG,iBAFH,EAGGC,cAHH,EAIGE,kBAJH,CADF,CADA;AAWD;;AAGD,0BACD;AAAK,UAAE,EAAEjU,IAAI,CAACuB,EAAd;AAAkB,iBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,6BAArD;AAAoF,WAAG,EAAE,aAAAvJ,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAA3F,sBAEE;AAAK,iBAAS,EAAC;AAAf,QAFF,eAIE;AAAK,iBAAS,EAAC;AAAf,sBACE;AAAK,iBAAS,EAAC;AAAf,sBAEC,uEAAK0N,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYuT,UAArB,EAAT,CAFD,eAIK;AAAK,iBAAS,EAAC;AAAf,sBAEE;AAAK,iBAAS,EAAC;AAAf,sBACE,2DAAC,6DAAD;AAAwB,cAAM,EAAE;AAAEzF,6BAAmB,EAAEvO,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBG;AAAxC,SAAhC;AAA+F,YAAI,EAAEH;AAArG,QADF,CAFF,EAMGgD,SANH,EAQGsC,gBARH,eAUE;AAAK,iBAAS,EAAC;AAAf,SACGtB,eADH,EAEGW,kBAFH,EAGGP,eAHH,CAVF,CAJL,eAsBK;AAAG,iBAAS,EAAC;AAAb,sBACE;AAAM,iBAAS,EAAC;AAAhB,iBADF,EAC+CY,UAD/C,eAEE;AAAM,iBAAS,EAAC;AAAhB,gBAFF,EAE8ChF,IAAI,CAAC8F,mBAFnD,eAGJ;AAAM,iBAAS,EAAC;AAAhB,6BAHI,eAID;AAAM,iBAAS,EAAC;AAAhB,SAAiClU,IAAI,CAACS,MAAL,CAAY0O,SAA7C,OAJC,EAIgEf,IAAI,CAAC+F,SAAL,CAAeC,KAJ/E,CAtBL,EA6BMxB,YA7BN,eA+BK;AAAG,iBAAS,EAAC;AAAb,SAAoCxE,IAAI,CAACiG,OAAzC,CA/BL,eAiCK;AAAG,iBAAS,EAAC,yBAAb;AAAuC,+BAAuB,EAAE;AAAE3Q,gBAAM,EAAE0K,IAAI,CAAClL;AAAf;AAAhE,QAjCL,EAmCM8O,iBAnCN,CADF,EAwCMD,QAxCN,EA0CMiB,aA1CN,eA4CE;AAAK,iBAAS,EAAC;AAAf,QA5CF,CAJF,CADC;AAwDD;;;;EAvXuClT,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACd1C;AACA;AAEA;AAEA;;IAEqBwU,U;;;;;AAEnB,sBAAYvU,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG;AAChBN,UAAI,EAAE,YADU;AAEhBqR,qBAAe,EAAE,SAFD;AAGhBE,WAAK,EAAE,MAHS;AAIhBO,UAAI,EAAE,MAJU;AAKhBC,aAAO,EAAE;AALO,KAApB;AAOA,UAAK7R,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACX7B,WAAK,EAAE,MAAKT,KAAL,CAAWS,KADP;AAEX+T,UAAI,EAAE;AAFK,KAAb;AAbiB;AAkBlB;;;;sCAEgB3S,S,EAAWC,S,EAAW;AACrC;AACA,UAAI2S,WAAW,GAAGlE,uDAAqB,CAACO,YAAtB,CAAmCC,GAAnC,CAAuC,+BAAvC,CAAlB;;AACA,UAAI0D,WAAJ,EAAiB;AAClB,aAAKC,MAAL;AACGnE,+DAAqB,CAACO,YAAtB,CAAmC6D,MAAnC,CAA0C,+BAA1C;AACH;AACA;;;2BAEM7P,C,EAAG;AAAA;;AAER,UAAIA,CAAJ,EAAOA,CAAC,CAACS,eAAF;AAEP,UAAI,KAAKjD,KAAL,CAAWkS,IAAf,EAAqB;AACrB,WAAK7R,QAAL,CAAc;AAAE6R,YAAI,EAAE;AAAR,OAAd;AAEA,UAAIvU,IAAI,GAAG,IAAX;AACA,UAAIgB,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAvB,uBAAyChB,IAAI,CAACS,MAAL,CAAYK,MAArD,UAAP;AACE,UAAIG,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd,CATM,CAWR;;AACA,UAAI,EAAGT,IAAI,CAACS,MAAL,CAAYU,IAAZ,IAAoBnB,IAAI,CAACS,MAAL,CAAYU,IAAZ,CAAiB8P,IAAxC,CAAJ,EAAoD;AAClDX,+DAAqB,CAACO,YAAtB,CAAmCG,GAAnC,CAAuC,+BAAvC,EAAwE,IAAxE;AACA,YAAImC,QAAQ,GAAI,2BAA2BU,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB,CAA7C,GAAwE,qBAAxF;AACA,eAAO1K,QAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyBkD,QAAhC;AACD;;AAED9M,WAAK,CAACrF,GAAD,EAAM;AACTkQ,cAAM,EAAE,MADC;AAETjQ,eAAO,EAAPA,OAFS;AAGTsG,YAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAe;AACnBxG,gBAAM,EAAEnO,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgB7M,EADL;AAEnB+Q,iBAAO,EAAEtS,IAAI,CAACS,MAAL,CAAY6R;AAFF,SAAf;AAHG,OAAN,CAAL,CAQG9B,IARH,CAQQ,UAACC,QAAD,EAAc;AAClB,YAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB,MAAMC,KAAK,CAAC,wBAAD,CAAX;AAClB,eAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,OAXH,EAYGJ,IAZH,CAYS,UAAAI,IAAI,EAAI;AAEb,YAAIgE,MAAM,GAAGhE,IAAI,CAACpM,MAAL,GAAc,CAAd,GAAkB,CAAC,CAAhC;AACA,YAAIhE,KAAK,GAAGR,IAAI,CAACqC,KAAL,CAAW7B,KAAX,GAAmBoU,MAA/B;AACA5U,YAAI,CAAC0C,QAAL,CAAc;AAAElC,eAAK,EAALA;AAAF,SAAd;AAEAR,YAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgByG,QAAhB,GAA2BjE,IAAI,CAACpM,MAAL,IAAeoM,IAAf,IAAuB,IAAlD;;AAEA,cAAI,CAAClO,QAAL,CAAc;AAAE6R,cAAI,EAAE;AAAR,SAAd;;AAEF,YAAI3H,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,gBAAvB,EAAyC;AAAElF,gBAAM,EAAE;AAAEmD,kBAAM,EAAEnO,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgB7M,EAA1B;AAA8BqT,kBAAM,EAANA;AAA9B;AAAV,SAAzC,CAAZ;AACArP,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AAEC,OAzBH,WA0BS,UAAChM,GAAD,EAAS;AACdkU,aAAK,CAAClU,GAAG,CAACmU,OAAL,CAAL;AACD,OA5BH;AA8BD;;;6BAEO;AAEN,UAAI/U,IAAI,GAAG,IAAX;AAEA,UAAIQ,KAAK,GAAGgB,QAAQ,CAACxB,IAAI,CAACqC,KAAL,CAAW7B,KAAZ,CAAR,IAA8B,CAA1C;AAED,UAAIwU,QAAQ,GAAGxT,QAAQ,CAAChB,KAAK,GAAC,GAAP,CAAR,IAAuB,CAAtC;AACA,UAAIyU,OAAO,GAAIzT,QAAQ,CAAC,CAAEhB,KAAK,GAAG,MAAMwU,QAAhB,IAA2B,EAA5B,CAAR,IAA2C,CAA1D;AACA,UAAIE,MAAM,GAAK1U,KAAK,GAAGwU,QAAQ,GAAG,GAAnB,GAAyBC,OAAO,GAAG,EAAlD;AAEC,0BACC;AAAK,UAAE,EAAEjV,IAAI,CAACuB,EAAd;AAAkB,iBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,mCAArD;AAA0F,WAAG,EAAE,aAAAvJ,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAAjG,sBACC;AAAK,iBAAS,EAAC,mBAAf;AAAmC,aAAK,EAAE;AAAEkO,eAAK,EAAE,KAAKrR,MAAL,CAAYqR,KAArB;AAA4BF,yBAAe,EAAE,KAAKnR,MAAL,CAAYmR;AAAzD;AAA1C,sBACC;AAAK,UAAE,YAAK,KAAKnR,MAAL,CAAYF,IAAjB,sBAAP;AAAiD,iBAAS,EAAC;AAA3D,SAA+EyU,QAA/E,CADD,eAEC;AAAK,UAAE,YAAK,KAAKvU,MAAL,CAAYF,IAAjB,qBAAP;AAAgD,iBAAS,EAAC;AAA1D,SAA8E0U,OAA9E,CAFD,eAGC;AAAK,UAAE,YAAK,KAAKxU,MAAL,CAAYF,IAAjB,oBAAP;AAA+C,iBAAS,EAAC;AAAzD,SAA6E2U,MAA7E,CAHD,CADD,eAMG;AAAK,iBAAS,mCAA4B,KAAKzU,MAAL,CAAYF,IAAxC,mBAAqD,KAAKR,KAAL,CAAWqO,IAAX,CAAgByG,QAAhB,GAA2B,qBAA3B,GAAmD,EAAxG,cAA8G,KAAKxS,KAAL,CAAWkS,IAAX,GAAkB,WAAlB,GAAgC,EAA9I,CAAd;AAAkK,aAAK,EAAE;AAAEzC,eAAK,EAAE,KAAKrR,MAAL,CAAYqR,KAArB;AAA4BF,yBAAe,EAAE,KAAKnR,MAAL,CAAYmR;AAAzD,SAAzK;AAAqP,eAAO,EAAG,iBAAC/M,CAAD;AAAA,iBAAO7E,IAAI,CAACyU,MAAL,CAAY5P,CAAZ,CAAP;AAAA;AAA/P,SACA7E,IAAI,CAACS,MAAL,CAAY4R,IADZ,CANH,eASG;AAAK,iBAAS,EAAC;AAAf,QATH,CADD;AAcD;;;;EAzGqCvQ,4CAAK,CAACC,S;;;;;;;;;;;;;ACP9C,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;CAGA;;CAGA;;CAGA;;AACAoT,mEAA4B,CAACC,aAA7B,GAA6C,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AAClF,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,mEAAD;AAA8B,cAAU,EAAEtV,UAA1C;AAAsD,UAAM,EAAEQ;AAA9D,IAAjB,EAA0F4U,IAA1F;AACA,CAHD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AAEA;AAEA;;IAEqBG,0B;;;;;AAEnB,sCAAYzV,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAChB0N,yBAAmB,EAAE;AADL,KAApB;AAGA,UAAK9N,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACXoT,uBAAiB,EAAE,CADR;AAEXC,WAAK,EAAE;AAFI,KAAb;AAViB;AAelB;;;;wCAEoB;AACnB,UAAIL,IAAI,GAAG9P,QAAQ,CAACwC,aAAT,YAA2B,KAAKzG,KAAhC,EAAX;AACA,WAAKoB,QAAL,CAAc;AAACgT,aAAK,EAAEL,IAAI,CAACM;AAAb,OAAd;AACD;;;yCAEqBC,K,EAAO;AAC3B,WAAKlT,QAAL,CAAc;AAAC+S,yBAAiB,EAAEG;AAApB,OAAd;AACD;;;6BAEO;AAEN,UAAI5V,IAAI,GAAG,IAAX;AACA,UAAIoO,IAAI,GAAGpO,IAAI,CAACD,KAAL,CAAWqO,IAAtB;AAEA,UAAI,CAACA,IAAL,EAAW,OAAO,IAAP;AAEX,UAAIxG,MAAM,GAAIwG,IAAI,CAAC+F,SAAL,IAAkB/F,IAAI,CAAC+F,SAAL,CAAevM,MAAlC,IAA6C,EAA1D;AACA,UAAIrB,KAAK,GAAI6H,IAAI,CAACyH,WAAL,IAAoBzH,IAAI,CAACyH,WAAL,CAAiBxV,GAAtC,IAA+C+N,IAAI,CAAC+F,SAAL,IAAkB/F,IAAI,CAAC+F,SAAL,CAAevM,MAAjC,IAA2CwG,IAAI,CAAC+F,SAAL,CAAevM,MAAf,CAAsB5H,IAAI,CAACqC,KAAL,CAAWoT,iBAAjC,CAAtG;;AAEA,UAAIzV,IAAI,CAACS,MAAL,CAAY8N,mBAAZ,IAAmC3G,MAAM,CAACpD,MAAP,GAAgB,CAAvD,EAA0D;AAExD;AACA,4BACE;AAAK,YAAE,EAAExE,IAAI,CAACsB,KAAd;AAAqB,mBAAS,EAAC;AAA/B,wBAEE;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAK,mBAAS,EAAC,gBAAf;AAAgC,eAAK,EAAEiF,KAAK,GAAG;AAAEuP,2BAAe,gBAASvP,KAAT;AAAjB,WAAH,GAA0C,EAAtF;AAA0F,aAAG,EAAE,WAAW6H,IAAI,CAAC7M;AAA/G,UADF,CAFF,eAME;AAAK,mBAAS,EAAC;AAAf,WAEGqG,MAAM,CAACnD,GAAP,CAAW,UAAEsR,KAAF,EAASpR,CAAT,EAAgB;AAC1B,cAAIqR,MAAM,GAAG,MAAMhW,IAAI,CAACqC,KAAL,CAAWqT,KAA9B;AACA,cAAIA,KAAK,GAAGM,MAAM,GAAG,EAAT,GAAY,CAAxB,CAF0B,CAG1B;;AACA,cAAIC,IAAI,GAAKP,KAAK,GAAI,IAAX,GAAoB/Q,CAA/B;AACA,8BACE;AAAK,qBAAS,EAAC,6BAAf;AAA6C,eAAG,iCAA0BA,CAA1B,CAAhD;AAA+E,iBAAK,EAAE;AAAEsR,kBAAI,EAAJA,IAAF;AAAQP,mBAAK,EAALA,KAAR;AAAeM,oBAAM,EAANA;AAAf;AAAtF,0BACE;AAAK,qBAAS,EAAC,sBAAf;AAAsC,iBAAK,EAAED,KAAK,GAAG;AAAED,6BAAe,gBAASC,KAAT,MAAjB;AAAoCG,oBAAM,EAAE,KAAGvR;AAA/C,aAAH,GAAwD,EAA1G;AAA8G,mBAAO,EAAE,iBAAAE,CAAC;AAAA,qBAAI7E,IAAI,CAACmW,oBAAL,CAA0BxR,CAA1B,CAAJ;AAAA;AAAxH,YADF,CADF;AAKD,SAVA,CAFH,CANF,CADF;AA0BD,OA7BD,MA6BO;AAEL;AACA,4BACE;AAAK,YAAE,EAAE3E,IAAI,CAACsB,KAAd;AAAqB,mBAAS,EAAC;AAA/B,wBACE;AAAK,mBAAS,EAAC,gBAAf;AAAgC,eAAK,EAAEiF,KAAK,GAAG;AAAEuP,2BAAe,gBAASvP,KAAT;AAAjB,WAAH,GAA0C,EAAtF;AAA0F,aAAG,EAAE,WAAW6H,IAAI,CAAC7M;AAA/G,UADF,CADF;AAMD;AAEF;;;;EA9EqDzB,4D;;;;;;;;;;;;;ACPxD,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;CAGA;;CAGA;;CAGA;;AACA0V,iEAA0B,CAACJ,aAA3B,GAA2C,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AAChF,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,iEAAD;AAA4B,cAAU,EAAEtV,UAAxC;AAAoD,UAAM,EAAEQ;AAA5D,IAAjB,EAAwF4U,IAAxF;AACA,CAHD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AAEA;AACA;AAEA;;IAEqBe,S;;;;;;;;;;;;;6BAEX;AAEN,UAAIpW,IAAI,GAAG,IAAX;AAEA,UAAIqW,UAAU,GAAG,IAAjB;;AACF,UAAIrW,IAAI,CAACS,MAAL,CAAY6V,MAAhB,EAAwB;AACvB;AACA;AACA;AACA;AACA;AACA;AAEGD,kBAAU,gBACR;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAK,mBAAS,EAAC,mBAAf;AAAmC,iBAAO,EAAE;AAAA,mBAAMrW,IAAI,CAACuW,0BAAL,CAAgC,QAAhC,CAAN;AAAA;AAA5C,UADF,eAEF,2DAAC,mDAAD;AAAQ,gBAAM,oBAAO,KAAK9V,MAAZ,CAAd;AAAoC,mBAAS,sBAAeT,IAAI,CAACqC,KAAL,CAAWmU,oBAAX,IAAmC,QAAnC,GAA8C,gBAA9C,GAAiE,EAAhF;AAA7C,UAFE,CADF;AAKH,OAlBO,CAoBN;;;AACA,UAAIC,eAAe,GAAG,IAAtB;AACAA,qBAAe,gBACb;AAAQ,aAAK,EAAC,OAAd;AAAsB,eAAO,EAAE;AAAA,iBAAMzW,IAAI,CAAC0W,QAAL,EAAN;AAAA,SAA/B;AAAsD,iBAAS,EAAC;AAAhE,uBADF;AAIA,UAAI1R,UAAU,GAAG,IAAjB;;AACA,UAAIhF,IAAI,CAACS,MAAL,CAAYkW,MAAZ,CAAmBnS,MAAvB,EAA+B;AAC7B,YAAIkK,QAAQ,GAAG1O,IAAI,CAAC4W,OAAL,IAAgB5W,IAAI,CAAC4W,OAAL,CAAapF,IAAb,CAAmB,UAAAmF,MAAM;AAAA,iBAAIA,MAAM,CAACtU,KAAP,CAAawU,YAAjB;AAAA,SAAzB,CAA/B;AACA7W,YAAI,CAAC4W,OAAL,GAAe,EAAf;AACA5R,kBAAU,gBACR;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAK,mBAAS,mCAA6B0J,QAAQ,GAAG,aAAH,GAAmB,EAAxD,CAAd;AAA6E,iBAAO,EAAE;AAAA,mBAAM1O,IAAI,CAACuW,0BAAL,CAAgC,SAAhC,CAAN;AAAA;AAAtF,UADF,eAEE;AAAK,mBAAS,uCAAgCvW,IAAI,CAACqC,KAAL,CAAWmU,oBAAX,IAAmC,SAAnC,GAA+C,gBAA/C,GAAkE,EAAlG;AAAd,WACIxW,IAAI,CAACS,MAAL,CAAYkW,MAAZ,CAAmBlS,GAAnB,CAAuB,UAAEqS,YAAF,EAAgBnS,CAAhB,EAAuB;AAC9C,8BACE,2DAAC,qEAAD;AAAa,kBAAM,EAAEmS,YAArB;AAAmC,qBAAS,EAAC,2BAA7C;AAAyE,eAAG,6BAAsBnS,CAAtB,CAA5E;AAAuG,eAAG,EAAE,aAAAf,EAAE;AAAA,qBAAI5D,IAAI,CAAC4W,OAAL,CAAajS,CAAb,IAAkBf,EAAtB;AAAA;AAA9G,YADF;AAGD,SAJC,CADJ,CAFF,EASC6S,eATD,CADF;AAaD;;AAED,UAAIM,qBAAqB,GAAG,IAA5B;AACAA,2BAAqB,gBACnB;AAAK,iBAAS,EAAC;AAAf,SACG/R,UADH,CADF;AAMA,0BACE;AAAK,iBAAS,gCAAyBhF,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAAjD;AAAd,SACGkJ,UADH,EAEGU,qBAFH,CADF;AAOD;;;;EA7DoCC,wE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRvC;AACA;AAEA;CAGA;AACA;;AAEA;;IAEqBC,S;;;;;AAEnB,qBAAYlX,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR;;AAEAA,QAAI,CAACa,aAAL,GAAqB;AACjBM,UAAI,EAAE,EADW;AAEpBgN,YAAM,EAAE,IAFY;AAGjB+I,oBAAc,EAAE,EAHC;AAIjBC,oBAAc,EAAE,EAJC;AAKjBC,sBAAgB,EAAE,EALD;AAMjBC,sBAAgB,EAAE,GAND;AAOjBC,0BAAoB,EAAE,GAPL;AAQjBC,0BAAoB,EAAE,IARL;AASjBvT,YAAM,EAAE;AATS,KAArB;AAWAhE,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AACET,QAAI,CAACS,MAAL,CAAYuD,MAAZ,sBAA0BhE,IAAI,CAACS,MAAL,CAAYuD,MAAtC;AAEA,QAAIA,MAAM,GAAGhE,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBpK,MAAjB,IAA2B,EAAxC;AAEA,QAAI,CAAChE,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgB+F,SAArB,EAAgCnU,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgB+F,SAAhB,GAA4B,EAA5B;AAEhC,QAAI9R,KAAK,GAAG;AACV+I,gBAAU,EAAE;AACV7J,UAAE,EAAEvB,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgB7M,EAAhB,IAAsB,EADhB;AAEVJ,YAAI,EAAEnB,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgBjN,IAAhB,IAAwB;AAFpB,OADF;AAKVqW,2BAAqB,EAAE,KALb;AAMVC,YAAM,EAAE;AANE,KAAZ;AASAzT,UAAM,CAAC5D,OAAP,CAAe,UAAC+D,KAAD,EAAW;AACxB,UAAIA,KAAK,CAAC5D,IAAV,EAAgB;AACd8B,aAAK,CAAC+I,UAAN,CAAiBjH,KAAK,CAAC5D,IAAvB,IAA+B+Q,IAAI,CAAC,qBAAqBnN,KAAK,CAAC5D,IAA5B,CAAnC;AACA4D,aAAK,CAAC3D,KAAN,GAAc8Q,IAAI,CAAC,qBAAqBnN,KAAK,CAAC5D,IAA5B,CAAlB;AACD;AACF,KALD;AAOA,QAAIyT,UAAU,GAAGhQ,MAAM,CAACwN,IAAP,CAAY,UAAArN,KAAK;AAAA,aAAIA,KAAK,CAAC5D,IAAN,IAAc,OAAlB;AAAA,KAAjB,CAAjB;;AACA,QAAIyT,UAAJ,EAAgB;AAChBA,gBAAU,CAACxI,SAAX,GAAuBxL,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiB8I,cAAxC;AACAlD,gBAAU,CAACvI,SAAX,GAAuBzL,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiB+I,cAAxC;AACC;;AAED,QAAIO,YAAY,GAAG1T,MAAM,CAACwN,IAAP,CAAY,UAAArN,KAAK;AAAA,aAAIA,KAAK,CAAC5D,IAAN,IAAc,SAAlB;AAAA,KAAjB,CAAnB;;AACA,QAAImX,YAAJ,EAAkB;AAClBA,kBAAY,CAAClM,SAAb,GAAyBxL,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBgJ,gBAA1C;AACAM,kBAAY,CAACjM,SAAb,GAAyBzL,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBiJ,gBAA1C;AACC;;AAED,QAAIM,gBAAgB,GAAG3T,MAAM,CAACwN,IAAP,CAAY,UAAArN,KAAK;AAAA,aAAIA,KAAK,CAAC5D,IAAN,IAAc,aAAlB;AAAA,KAAjB,CAAvB;;AACA,QAAIoX,gBAAJ,EAAsB;AACtBA,sBAAgB,CAACnM,SAAjB,GAA6BxL,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBkJ,oBAA9C;AACAK,sBAAgB,CAAClM,SAAjB,GAA6BzL,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBmJ,oBAA9C;AACC;;AAED,QAAIK,UAAU,GAAG5T,MAAM,CAACwN,IAAP,CAAY,UAAArN,KAAK;AAAA,aAAIA,KAAK,CAACrB,SAAN,IAAmB,cAAvB;AAAA,KAAjB,CAAjB,CA1DiB,CA0DyD;;AAC1E,QAAI8U,UAAJ,EAAgB;AAChBA,gBAAU,CAACzR,WAAX,GAAyBnG,IAAI,CAACS,MAAL,CAAY0F,WAArC;AACC;;AAED,QAAImK,uDAAqB,CAACnP,IAAtB,CAA2B0W,OAA3B,CAAoC7X,IAAI,CAACS,MAAL,CAAYU,IAAhD,EAAsD,QAAtD,CAAJ,EAAuE;AAErE;AACA,UAAInB,IAAI,CAACS,MAAL,CAAYwO,KAAZ,IAAqBjP,IAAI,CAACS,MAAL,CAAYyO,SAAZ,IAAyB,QAAlD,EAA4D;AAC1D,YAAIjN,OAAO,GAAG,EAAd;AACAjC,YAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkB7O,OAAlB,CAA0B,UAAAuG,IAAI,EAAI;AAChC,cAAI4K,OAAO,GAAG5K,IAAd;;AACA,cAAI,CAAC4K,OAAO,CAACuG,IAAT,IAAmBvG,OAAO,CAACuG,IAAR,CAAaC,YAAb,IAA6BzH,uDAAqB,CAACnP,IAAtB,CAA2B0W,OAA3B,CAAoC7X,IAAI,CAACS,MAAL,CAAYU,IAAhD,EAAsDoQ,OAAO,CAACuG,IAAR,CAAaC,YAAnE,CAApD,EAAyI;AACvI9V,mBAAO,CAACuE,IAAR,CAAa;AAAEvD,mBAAK,EAAEsO,OAAO,CAAChR,IAAjB;AAAuBC,mBAAK,EAAE+Q,OAAO,CAAChQ,EAAR,IAAcgQ,OAAO,CAAC/Q;AAApD,aAAb;AACD;AACF,SALD;AAMAR,YAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBpK,MAAjB,CAAwBwC,IAAxB,CAA6B;AAC/BjG,cAAI,EAAE,QADyB;AAE/B0C,eAAK,EAAE,gBAFwB;AAG/BzC,eAAK,EAAER,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgBiD,MAHQ;AAI3BvO,mBAAS,EAAE,iBAJgB;AAK3Bb,iBAAO,EAAPA;AAL2B,SAA7B;AAOAI,aAAK,CAAC+I,UAAN,CAAiBiG,MAAjB,GAA0BrR,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgBiD,MAA1C;AACD,OAnBoE,CAqBrE;;;AACArR,UAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBpK,MAAjB,CAAwBwC,IAAxB,CAA6B;AAC/BjG,YAAI,EAAE,UADyB;AAE/B0C,aAAK,EAAE,mBAFwB;AAG/BzC,aAAK,EAAER,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgByE,QAHQ;AAI/B/P,iBAAS,EAAE,uBAJoB;AAK/B0I,iBAAS,EAAE,CALoB;AAM/BC,iBAAS,EAAE;AANoB,OAA7B;AAQApJ,WAAK,CAAC+I,UAAN,CAAiByH,QAAjB,GAA4B7S,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgByE,QAA5C;AAED,KAhCD,MAgCO;AAEL;AACA,UAAI7S,IAAI,CAACS,MAAL,CAAYwO,KAAZ,IAAqBjP,IAAI,CAACS,MAAL,CAAYyO,SAAZ,IAAyB,QAAlD,EAA4D;AAC1DlP,YAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBpK,MAAjB,CAAwBwC,IAAxB,CAA6B;AAC/BjG,cAAI,EAAE,QADyB;AAE/BC,eAAK,EAAER,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgBiD,MAFQ;AAG/BvO,mBAAS,EAAE;AAHoB,SAA7B;AAKAT,aAAK,CAAC+I,UAAN,CAAiBiG,MAAjB,GAA0BrR,IAAI,CAACD,KAAL,CAAWqO,IAAX,CAAgBiD,MAA1C;AACD;AAEF;;AAEDrR,QAAI,CAACqC,KAAL,GAAaA,KAAb;AA7GiB;AA+GlB;;;;sCAEgBT,S,EAAWC,S,EAAW,CACtC,C,CAED;;;;+CAC0C;AAAA,UAApBmO,QAAoB,QAApBA,QAAoB;AAAA,UAAVgI,OAAU,QAAVA,OAAU;;AACxC,UAAI3V,KAAK,qBAAQ,KAAKA,KAAb,CAAT;;AACAA,WAAK,CAAC+I,UAAN,CAAiB,UAAjB,IAA+B;AAAE6M,mBAAW,EAAE,CAAEjI,QAAQ,CAACkI,GAAX,EAAgBlI,QAAQ,CAACmI,GAAzB;AAAf,OAA/B;AACA9V,WAAK,CAAC+I,UAAN,CAAiB,SAAjB,IAA8B4M,OAA9B;AACA,WAAKtV,QAAL,CAAcL,KAAd;AACA,WAAK+V,sBAAL,CAA4B/V,KAAK,CAAC+I,UAAlC;AACD;;;2CAEsBgD,I,EAAM;AAC7B,UAAIxB,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,sBAAvB,EAA+C;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAA/C,CAAZ;AACA7I,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;mCAEc;AAEb,UAAI5M,IAAI,GAAG,IAAX;AAED,UAAIyC,OAAO,GAAG,IAAd,CAJc,CAMd;;AACA,UAAIzC,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsB,UAAtB,CAAJ,EAAuC;AACvCpL,YAAI,CAAC,uBAAD,CAAJ,CAA8BqY,KAA9B,CAAoCC,OAApC,GAA8C,MAA9C;AACA,OAFA,MAEM;AACHrN,eAAO,CAACC,GAAR,CAAY,KAAZ;AACHlL,YAAI,CAAC,uBAAD,CAAJ,CAA8BqY,KAA9B,CAAoCC,OAApC,GAA8C,OAA9C;AACA7V,eAAO,GAAG,KAAV;AACA,OAbc,CAed;AACA;AACD;AACA;AACC;AACD;AACE;;;AAED,aAAOA,OAAP;AAEA;;;iCAEY;AAAA;;AAEX,UAAIzC,IAAI,GAAG,IAAX;AAEAA,UAAI,CAAC0C,QAAL,CAAc;AAAE+U,cAAM,EAAE;AAAV,OAAd,EAAgC,YAAM;AAEpC,YAAIc,UAAU,GAAGvY,IAAI,CAACwY,IAAL,CAAUC,SAAV,EAAjB;AAEA,YAAIhW,OAAO,GAAGzC,IAAI,CAACwY,IAAL,CAAU5V,QAAV,CAAmB;AAAEJ,oBAAU,EAAE;AAAd,SAAnB,CAAd;;AAED,YAAK,CAACxC,IAAI,CAAC0Y,YAAL,EAAD,IAAwB,CAACjW,OAA9B,EAAwC;AAAE;AACvCzC,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE,KAAV;AAAiBD,iCAAqB,EAAE;AAAxC,WAAd;AACA;AACD;;AAEDxX,YAAI,CAAC0C,QAAL,CAAc;AAAE8U,+BAAqB,EAAE;AAAzB,SAAd;AAED,YAAI,CAACxX,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBG,cAArB,EAAqC,OAAO4T,KAAK,CAAC,uBAAD,CAAZ;AAErC,YAAI9T,GAAG,GAAGhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAhB,GAAsB,YAAtB,GAAqChB,IAAI,CAACS,MAAL,CAAYK,MAAjD,GAA0D,OAApE;AACC,YAAIG,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAGA,YAAI8G,IAAI,GAAG;AACTyI,kBAAQ,EAAEtP,IAAI,CAACiU,SAAL;AAAiB,oBAAQ;AAAzB,aAAqC3U,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsB,UAAtB,CAArC;AADD,SAAX;AAGAlL,cAAM,CAACC,IAAP,CAAYoY,UAAZ,EAAwBnY,OAAxB,CAAgC,UAAAC,GAAG,EAAI;AACrC,cAAIgM,KAAK,GAAGhM,GAAG,CAACgM,KAAJ,CAAU,kBAAV,CAAZ;;AACA,cAAIA,KAAJ,EAAW;AACT,gBAAI,CAAC9E,IAAI,CAAC4M,SAAV,EAAqB5M,IAAI,CAAC4M,SAAL,GAAiB,EAAjB;AACrB5M,gBAAI,CAAC4M,SAAL,CAAe9H,KAAK,CAAC,CAAD,CAApB,IAA2BkM,UAAU,CAAClY,GAAD,CAArC;AACD,WAHD,MAGO;AACLkH,gBAAI,CAAClH,GAAD,CAAJ,GAAYkY,UAAU,CAAClY,GAAD,CAAtB;AACD;AACF,SARD,EAtBoC,CAgCpC;AACA;AACA;;AAEA,YAAI6Q,MAAM,GAAG,MAAb;;AACA,YAAI,OAAO,MAAI,CAAC7O,KAAL,CAAW+I,UAAX,CAAsB7J,EAA7B,IAAmC,QAAvC,EAAiD;AAC/C2P,gBAAM,GAAG,KAAT;AACAlQ,aAAG,GAAGA,GAAG,GAAG,GAAN,GAAY,MAAI,CAACqB,KAAL,CAAW+I,UAAX,CAAsB7J,EAAxC;AACD;;AAED8E,aAAK,CAACrF,GAAD,EAAM;AACTkQ,gBAAM,EAANA,MADS;AAETjQ,iBAAO,EAAPA,OAFS;AAGTsG,cAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAepN,IAAf,CAHG,CAGkB;;AAHlB,SAAN,CAAL,CAKGiJ,IALH,CAKQ,UAACC,QAAD,EAAc;AAClB,cAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,kBAAMD,QAAN;AACD;;AACD,iBAAOA,QAAQ,CAACG,IAAT,EAAP;AACD,SAVH,EAWGJ,IAXH,CAWS,UAAAI,IAAI,EAAI;AACb5Q,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE;AAAV,WAAd,EAAiC,YAAM;AACvC,gBAAI7K,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,qBAAvB,EAA8C;AAAElF,oBAAM,EAAE;AAAEoD,oBAAI,EAAEwC;AAAR;AAAV,aAA9C,CAAZ;AACArL,oBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC,WAHD;AAID,SAhBH,WAiBS,UAAChM,GAAD,EAAS;AACdqK,iBAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,iBAAO,CAACC,GAAR,CAAYtK,GAAZ;;AACA,cAAK,OAAOA,GAAG,CAACgQ,IAAX,IAAmB,UAAxB,EAAqC;AACnChQ,eAAG,CAACgQ,IAAJ,GAAWJ,IAAX,CAAgB,UAAAI,IAAI;AAAA,qBAAI5Q,IAAI,CAAC0C,QAAL,CAAc;AAAE+U,sBAAM,EAAE,KAAV;AAAiBD,qCAAqB,EAAE5G,IAAI,CAACmE;AAA7C,eAAd,CAAJ;AAAA,aAApB;AACD,WAFD,MAEO;AACL/U,gBAAI,CAAC0C,QAAL,CAAc;AAAE+U,oBAAM,EAAE,KAAV;AAAiBD,mCAAqB,EAAE5W,GAAG,CAACmU,OAAJ,IAAenU;AAAvD,aAAd;AACD;AACF,SAzBH;AA0BD,OApED;AAsED;;;6BAEO;AAAA;;AAEN,UAAIZ,IAAI,GAAG,IAAX;AAEA,UAAI2Y,qBAAqB,GAAG,IAA5B;;AACA,UAAI3Y,IAAI,CAACqC,KAAL,CAAWmV,qBAAf,EAAsC;AACpC,YAAInF,IAAI,GAAG,uFAAX;;AACA,YAAI,OAAOrS,IAAI,CAACqC,KAAL,CAAWmV,qBAAlB,IAA2C,QAA/C,EAAyD;AACvDnF,cAAI,GAAGrS,IAAI,CAACqC,KAAL,CAAWmV,qBAAlB;AACD;;AACDmB,6BAAqB,gBACnB;AAAK,mBAAS,EAAC;AAAf,WAA2CtG,IAA3C,CADF;AAGD;;AAED,UAAIuG,QAAQ,GAAG,IAAf;AACAA,cAAQ,gBACN,2DAAC,wDAAD,CAAwB,IAAxB;AAA6B,cAAM,EAAE;AAAE5U,gBAAM,EAAEhE,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBpK;AAA3B,SAArC;AAA0E,cAAM,EAAE;AAAEqN,gBAAM,EAAErR,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsBiG;AAAO;;AAAvC,SAAlF;AAAmJ,WAAG,EAAE,aAACzN,EAAD,EAAQ;AAAE5D,cAAI,CAACwY,IAAL,GAAY5U,EAAZ;AAAgB;AAAlL,QADF;AAIA,0BACD;AAAK,UAAE,EAAE5D,IAAI,CAACuB,EAAd;AAAkB,iBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,uBAArD;AAA8E,WAAG,EAAE,aAAAvJ,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAArF,sBAEE;AAAK,iBAAS,EAAC;AAAf,QAFF,eAIK;AAAM,iBAAS,EAAC;AAAhB,sBAEF,8FAFE,eAIE;AAAK,iBAAS,EAAC;AAAf,sBACH,8EADG,EAIG5D,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsBjK,IAAtB,IAA8BnB,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsBjK,IAAtB,CAA2BmS,QAJ5D,CAJF,eAWE;AAAK,iBAAS,EAAC;AAAf,sBACH,6FADG,EAIGtT,IAAI,CAACqC,KAAL,CAAW+I,UAAX,CAAsB4M,OAAtB,IAAiC,qBAJpC,eAKJ;AAAK,iBAAS,EAAC,kBAAf;AAAkC,aAAK,EAAE;AAAEM,iBAAO,EAAE;AAAX,SAAzC;AAA8D,WAAG,EAAG,aAAA1U,EAAE;AAAA,iBAAI,MAAI,CAAC,uBAAD,CAAJ,GAAgCA,EAApC;AAAA;AAAtE,qCALI,CAXF,EAmBGgV,QAnBH,eAqBE,sEArBF,EAsBGD,qBAtBH,eAuBE,sEAvBF,eAwBE;AAAG,iBAAS,sCAAgC3Y,IAAI,CAACqC,KAAL,CAAWoV,MAAX,GAAoB,eAApB,GAAsC,EAAtE,CAAZ;AAAyF,eAAO,EAAE,mBAAM;AAAE,cAAI,CAACzX,IAAI,CAACqC,KAAL,CAAWoV,MAAhB,EAAwBzX,IAAI,CAAC6Y,UAAL;AAAmB,SAArJ;AAAwJ,WAAG,EAAE,aAAAjV,EAAE;AAAA,iBAAK5D,IAAI,CAAC8Y,YAAL,GAAoBlV,EAAzB;AAAA;AAA/J,qBAxBF,eAyBE,sEAzBF,eA0BE,sEA1BF,eA2BE,sEA3BF,CAJL,CADC;AAuCD;;;;EAtSoC9B,4CAAK,CAACC,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACX7C;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;CAGA;AACA;AACA;AACA;AACA;;AAEA;;IAEqBgX,2B;;;;;AAEnB,uCAAYhZ,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR,CAJmB,CAMnB;;;AACAA,QAAI,CAACa,aAAL,GAAqB;AAEjByX,aAAO,EAAE;AACP3R,YAAI,EAAE,UADC;AAEP+O,aAAK,EAAE,IAFA;AAGPM,cAAM,EAAE;AAHD,OAFQ;AAQjBgD,uBAAiB,EAAE,IARF;AASjB/J,WAAK,EAAE,EATU;AAUjBC,eAAS,EAAE,IAVM;AAWjB8E,gBAAU,EAAE,OAXK;AAYjB0D,kBAAY,EAAE,SAZG;AAajBvW,UAAI,EAAE,EAbW;AAcjBJ,SAAG,EAAE;AACHC,WAAG,EAAE,IADF;AAEHC,eAAO,EAAE,IAFN;AAGHC,sBAAc,EAAE;AAHb,OAdY;AAmBjBkN,UAAI,EAAE;AACJ6K,sBAAc,EAAE;AADZ,OAnBW;AAsBjBC,aAAO,EAAE;AAtBQ,KAArB;AAyBAlZ,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AACET,QAAI,CAACS,MAAL,CAAY0Y,QAAZ,GAAuBnZ,IAAI,CAACS,MAAL,CAAY0Y,QAAZ,IAAwB,aAA/C,CAjCiB,CAmCjB;;AACAnZ,QAAI,CAACS,MAAL,CAAY2Y,gBAAZ,GAA+BpZ,IAAI,CAACS,MAAL,CAAY2Y,gBAAZ,IAAgCpZ,IAAI,CAACqZ,QAAL,CAAc/V,IAAd,CAAmBtD,IAAnB,CAA/D;AACAA,QAAI,CAACS,MAAL,CAAYyO,SAAZ,GAAwBlP,IAAI,CAACS,MAAL,CAAYyO,SAAZ,IAAyB,iBAAjD,CArCiB,CAuCjB;;AACA,QAAIlP,IAAI,CAACS,MAAL,CAAYwO,KAAZ,IAAqBjP,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBzK,MAA3C,EAAmD;AACjDxE,UAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkB7O,OAAlB,CAA0B,UAACkZ,KAAD,EAAW;AACnC,YAAIA,KAAK,CAAC9Y,KAAN,IAAe,CAAC8Y,KAAK,CAAC/Y,IAA1B,EAAgC;AAC9B+Y,eAAK,CAAC/Y,IAAN,GAAa+Y,KAAK,CAAC9Y,KAAnB;AACD;;AACD,YAAI8Y,KAAK,CAACC,OAAN,IAAiB,OAAOD,KAAK,CAACC,OAAb,IAAwB,QAA7C,EAAuD;AACrD,cAAI;AACFD,iBAAK,CAACC,OAAN,GAAgB7Y,IAAI,CAACC,KAAL,CAAW2Y,KAAK,CAACC,OAAjB,CAAhB;AACD,WAFD,CAEE,OAAO3Y,GAAP,EAAY;AAAEqK,mBAAO,CAACC,GAAR,CAAYoO,KAAZ;AAAoBrO,mBAAO,CAACC,GAAR,CAAYtK,GAAZ;AAAkB;AACvD;;AACD,YAAI0Y,KAAK,CAACE,QAAN,IAAkB,OAAOF,KAAK,CAACE,QAAb,IAAyB,QAA/C,EAAyD;AACvD,cAAI;AACFF,iBAAK,CAACE,QAAN,GAAiB9Y,IAAI,CAACC,KAAL,CAAW2Y,KAAK,CAACE,QAAjB,CAAjB;AACD,WAFD,CAEE,OAAO5Y,GAAP,EAAY;AAAEqK,mBAAO,CAACC,GAAR,CAAYoO,KAAZ;AAAoBrO,mBAAO,CAACC,GAAR,CAAYtK,GAAZ;AAAkB;AACvD;;AACD,YAAI0Y,KAAK,CAACG,UAAN,IAAoB,OAAOH,KAAK,CAACG,UAAb,IAA2B,QAAnD,EAA6D;AAC3D,cAAI;AACFH,iBAAK,CAACG,UAAN,GAAmB/Y,IAAI,CAACC,KAAL,CAAW2Y,KAAK,CAACG,UAAjB,CAAnB;AACD,WAFD,CAEE,OAAO7Y,GAAP,EAAY;AAAEqK,mBAAO,CAACC,GAAR,CAAYoO,KAAZ;AAAoBrO,mBAAO,CAACC,GAAR,CAAYtK,GAAZ;AAAkB;AACvD;AACF,OAnBD;AAoBD;;AAEDZ,QAAI,CAACqC,KAAL,GAAa;AACXqX,WAAK,EAAE,EADI;AAEXC,kBAAY,EAAE,EAFH;AAGXC,iBAAW,EAAE,EAHF;AAIXC,YAAM,EAAE,SAJG;AAIQ;AACnBC,iBAAW,EAAE,QALF;AAMX;AACAC,iBAAW,EAAE,IAPF;AAQXC,cAAQ,EAAE,IARC;AASX;AACAC,kBAAY,EAAE,IAVH;AAWXC,sBAAgB,EAAE;AAXP,KAAb;AA/DiB;AA6ElB;;;;sCAEgBtY,S,EAAWC,S,EAAW;AAErC,UAAI7B,IAAI,GAAG,IAAX;AAEA2B,YAAM,CAACoJ,gBAAP,CAAyB,YAAzB,EAAuC,UAAAlG,CAAC,EAAI;AAC1C7E,YAAI,CAACma,eAAL;AACA,YAAI9N,KAAK,GAAG1K,MAAM,CAACqO,QAAP,CAAgBe,IAAhB,CAAqB1E,KAArB,CAA2B,WAA3B,CAAZ;;AACA,YAAIA,KAAJ,EAAW;AACT,cAAI8B,MAAM,GAAG9B,KAAK,CAAC,CAAD,CAAlB;AACA,cAAI+B,IAAI,GAAGpO,IAAI,CAACqC,KAAL,CAAWqX,KAAX,IAAoB1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,CAAiBlI,IAAjB,CAAsB,UAAApD,IAAI;AAAA,mBAAIA,IAAI,CAAC7M,EAAL,IAAW4M,MAAf;AAAA,WAA1B,CAA/B;;AACA,cAAI9B,KAAK,CAAC,CAAD,CAAL,IAAY,GAAhB,EAAqB;AACnBrM,gBAAI,CAACoa,eAAL,CAAqBhM,IAArB;AACD,WAFD,MAEO,CACV;AACI;AACF;AACF,OAZD,EAYG,KAZH,EAJqC,CAkBrC;;AACF7I,cAAQ,CAACwF,gBAAT,CAA0B,kBAA1B,EAA8C,UAASlG,CAAT,EAAY;AAEtD;AACA7E,YAAI,CAAC6P,SAAL,CAAe,EAAf,EAHsD,CAKtD;;AACA7P,YAAI,CAACyE,GAAL,CAASA,GAAT,CAAa4V,EAAb,CAAgB,SAAhB,EAA2B,YAAW;AACpCra,cAAI,CAACsa,qBAAL;AACD,SAFD;AAGAta,YAAI,CAACyE,GAAL,CAASA,GAAT,CAAa4V,EAAb,CAAgB,SAAhB,EAA2B,YAAW;AACpCra,cAAI,CAACsa,qBAAL;AACD,SAFD;AAID,OAbH,EAnBuC,CAkCrC;;AACF/U,cAAQ,CAACwF,gBAAT,CAA0B,eAA1B,EAA2C,UAAS6B,KAAT,EAAgB;AACvD5M,YAAI,CAACua,UAAL,CAAgB3N,KAAK,CAAC5B,MAAtB;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,sBAA1B,EAAkD,UAAS6B,KAAT,EAAgB;AAC9D5M,YAAI,CAACwa,aAAL,CAAmB5N,KAAK,CAAC5B,MAAzB;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,uBAA1B,EAAmD,UAAS6B,KAAT,EAAgB;AAC/D5M,YAAI,CAACya,cAAL,CAAoB7N,KAAK,CAAC5B,MAA1B;AACD,OAFH,EAzCuC,CA6CrC;;AACDzF,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD,UAAS6B,KAAT,EAAgB;AACpE5M,YAAI,CAAC0a,cAAL,CAAoB9N,KAAK,CAAC5B,MAA1B;AACD,OAFF,EA9CsC,CAkDrC;;AACFzF,cAAQ,CAACwF,gBAAT,CAA0B,uBAA1B,EAAmD,UAAS6B,KAAT,EAAgB;AAC/D5M,YAAI,CAAC2a,oBAAL,CAA0B/N,KAAK,CAAC5B,MAAhC;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD,UAAS6B,KAAT,EAAgB;AACnE5M,YAAI,CAAC4a,mBAAL,CAAyBhO,KAAK,CAAC5B,MAA/B;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,oBAA1B,EAAgD,UAAS6B,KAAT,EAAgB;AAC5D5M,YAAI,CAAC6a,cAAL,CAAoB;AAAEzM,cAAI,EAAExB,KAAK,CAAC5B,MAAN,CAAaoD;AAArB,SAApB;AACD,OAFH;AAGA7I,cAAQ,CAACwF,gBAAT,CAA0B,yBAA1B,EAAqD,UAAS6B,KAAT,EAAgB;AACjE5M,YAAI,CAAC8a,mBAAL,CAAyB;AAAE1M,cAAI,EAAExB,KAAK,CAAC5B,MAAN,CAAaoD;AAArB,SAAzB;AACD,OAFH;AAGA7I,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD,UAAS6B,KAAT,EAAgB;AACnE5M,YAAI,CAAC+a,qBAAL;AACD,OAFH,EA/DuC,CAmErC;;AACFxV,cAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD,UAAS6B,KAAT,EAAgB;AAC7D5M,YAAI,CAACgb,WAAL,CAAiBpO,KAAK,CAAC5B,MAAN,CAAaoD,IAA9B;AACD,OAFH;AAGA7I,cAAQ,CAACwF,gBAAT,CAA0B,0BAA1B,EAAsD,UAAS6B,KAAT,EAAgB;AAClE5M,YAAI,CAACib,eAAL,CAAqBrO,KAAK,CAAC5B,MAAN,CAAaoD,IAAlC;AACD,OAFH;AAGA7I,cAAQ,CAACwF,gBAAT,CAA0B,yBAA1B,EAAqD,UAAS6B,KAAT,EAAgB;AACjE5M,YAAI,CAACkb,cAAL,CAAoBtO,KAAK,CAAC5B,MAAN,CAAaoD,IAAjC;AACD,OAFH,EA1EuC,CA8ErC;;AACF7I,cAAQ,CAACwF,gBAAT,CAA0B,gBAA1B,EAA4C,UAAS6B,KAAT,EAAgB;AACxD5M,YAAI,CAACmb,WAAL,CAAiBvO,KAAK,CAAC5B,MAAvB;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD,UAAS6B,KAAT,EAAgB;AAC7D5M,YAAI,CAACsP,gBAAL,CAAsB1C,KAAK,CAAC5B,MAA5B;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,sBAA1B,EAAkD,UAAS6B,KAAT,EAAgB;AAC9D5M,YAAI,CAACwP,iBAAL,CAAuB5C,KAAK,CAAC5B,MAA7B;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD,UAAS6B,KAAT,EAAgB;AAC7D5M,YAAI,CAACob,eAAL,CAAqBxO,KAAK,CAAC5B,MAA3B;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,kBAA1B,EAA8C,UAAS6B,KAAT,EAAgB;AAC1D5M,YAAI,CAACqb,aAAL,CAAmBzO,KAAK,CAAC5B,MAAzB;AACD,OAFH,EA3FuC,CA+FrC;;AACFzF,cAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD,UAAS6B,KAAT,EAAgB;AAC7DrH,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,GAAzB;AACAjQ,YAAI,CAACsb,eAAL,CAAqB1O,KAAK,CAAC5B,MAAN,CAAaoD,IAAlC;AACD,OAHH;AAIA7I,cAAQ,CAACwF,gBAAT,CAA0B,sBAA1B,EAAkD,UAAS6B,KAAT,EAAgB;AAC9D5M,YAAI,CAACub,gBAAL,CAAsB3O,KAAK,CAAC5B,MAAN,CAAaoD,IAAnC;AACD,OAFH;AAIA;;;oCAEiD;AAAA,UAArCgM,eAAqC,QAArCA,eAAqC;AAAA,UAApBoB,gBAAoB,QAApBA,gBAAoB;AAE/C,UAAIxb,IAAI,GAAG,IAAX;AACA,UAAIgB,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAvB,uBAA0ChB,IAAI,CAACS,MAAL,CAAYK,MAAtD,8DAAP;AACA,UAAIG,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd,CAJ+C,CAM/C;;AACA,aAAMT,IAAI,CAACyE,GAAL,CAASgX,OAAT,CAAiBjX,MAAjB,GAA0B,CAAhC,EAAmC;AACjC,YAAIkX,MAAM,GAAG1b,IAAI,CAACyE,GAAL,CAASgX,OAAT,CAAiB,CAAjB,CAAb;AACAzb,YAAI,CAACyE,GAAL,CAASkX,YAAT,CAAsBD,MAAtB;AACD;;AACD1b,UAAI,CAACyE,GAAL,CAASgX,OAAT,GAAmB,EAAnB;AAEApV,WAAK,CAACrF,GAAD,EAAM;AACTC,eAAO,EAAPA;AADS,OAAN,CAAL,CAGGuP,IAHH,CAGQ,UAACC,QAAD,EAAc;AAClB,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACD,OALH,EAMGJ,IANH,CAMS,UAAAI,IAAI,EAAI;AACb;AACA;AACAwJ,uBAAe,GAAGA,eAAe,IAAMzY,MAAM,CAACqO,QAAP,CAAgBe,IAAhB,CAAqB1E,KAArB,CAA2B,UAA3B,KAA0C1K,MAAM,CAACqO,QAAP,CAAgBe,IAAhB,CAAqB1E,KAArB,CAA2B,UAA3B,EAAuC,CAAvC,CAAjF;AACAmP,wBAAgB,GAAGA,gBAAgB,IAAM7Z,MAAM,CAACqO,QAAP,CAAgBe,IAAhB,CAAqB1E,KAArB,CAA2B,UAA3B,KAA0C1K,MAAM,CAACqO,QAAP,CAAgBe,IAAhB,CAAqB1E,KAArB,CAA2B,UAA3B,EAAuC,CAAvC,CAAnF;AACA,YAAIqN,KAAK,GAAG9I,IAAI,CAAC+F,MAAL,CAAa,UAAAvI,IAAI;AAAA,iBAAIA,IAAI,CAAC4B,QAAT;AAAA,SAAjB,CAAZ;AACA0J,aAAK,CAACjV,GAAN,CAAW,UAAA2J,IAAI,EAAI;AACjB,cAAKA,IAAI,CAAC7M,EAAL,IAAW6Y,eAAhB,EAAiC;AAC/BA,2BAAe,GAAGhM,IAAlB;AACD;;AACD,cAAKA,IAAI,CAAC7M,EAAL,IAAWia,gBAAhB,EAAkCA,gBAAgB,GAAGpN,IAAnB;AAClCA,cAAI,CAAC7H,KAAL,GAAc6H,IAAI,CAACyH,WAAL,IAAoBzH,IAAI,CAACyH,WAAL,CAAiBxV,GAAtC,IAA+C+N,IAAI,CAAC+F,SAAL,IAAkB/F,IAAI,CAAC+F,SAAL,CAAevM,MAAjC,IAA2CwG,IAAI,CAAC+F,SAAL,CAAevM,MAAf,CAAsB,CAAtB,CAA1F,IAAuH,4DAApI;AACA5H,cAAI,CAACyE,GAAL,CAASmX,OAAT,CAAiBxN,IAAjB;AACL,SAPG;AASApO,YAAI,CAACyE,GAAL,CAASoX,kBAAT;AAEA7b,YAAI,CAAC0C,QAAL,CAAc;AAAEgX,eAAK,EAALA;AAAF,SAAd,EAAyB,YAAY;AACnC1Z,cAAI,CAAC0C,QAAL,CAAc;AAAEoX,uBAAW,EAAE9Z,IAAI,CAACS,MAAL,CAAYqb,yBAAZ,GAAwC,QAAxC,GAAmD;AAAlE,WAAd,EADmC,CAEnC;AACA;;AACA,cAAI,QAAON,gBAAP,KAA2B,QAA3B,IAAuCA,gBAAgB,IAAI,IAA/D,EAAqE;AACzExb,gBAAI,CAAC+b,UAAL,CAAgB,IAAhB;AACA/b,gBAAI,CAACgc,eAAL,CAAqBR,gBAArB;AACMxb,gBAAI,CAAC0C,QAAL,CAAc;AAAEmX,oBAAM,EAAE,eAAV;AAA2BE,yBAAW,EAAEyB;AAAxC,aAAd,EAA0E,YAAW;AACnF;AACAxb,kBAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,kBAAI,CAACyE,GAAL,CAASyX,WAAT,CAAqB,EAArB;AACAlc,kBAAI,CAACgc,eAAL,CAAqBhc,IAAI,CAACqC,KAAL,CAAW0X,WAAhC;AACD,aALD;AAMD;;AACD,cAAI,QAAOK,eAAP,KAA0B,QAA1B,IAAsCA,eAAe,IAAI,IAA7D,EAAmE;AACvEpa,gBAAI,CAACgc,eAAL,CAAqB5B,eAArB;AACApa,gBAAI,CAAC+b,UAAL,CAAgB,IAAhB;AACC/b,gBAAI,CAACoa,eAAL,CAAqBA,eAArB;AACI;;AACD,cAAIzY,MAAM,CAACqO,QAAP,CAAgBe,IAAhB,CAAqB1E,KAArB,CAA2B,WAA3B,CAAJ,EAA6C;AAC3C;AACA,gBAAI0E,IAAI,GAAGpP,MAAM,CAACqO,QAAP,CAAgBe,IAA3B;AACA,gBAAI1E,KAAK,GAAG0E,IAAI,CAAC1E,KAAL,CAAW,mBAAX,CAAZ;AACA,gBAAI8P,OAAO,GAAG,EAAd;;AACA,gBAAI9P,KAAJ,EAAW;AACTA,mBAAK,CAACjM,OAAN,CAAc,UAACkZ,KAAD,EAAW;AAAA,mCACNA,KAAK,CAAC8C,KAAN,CAAY,GAAZ,CADM;AAAA;AAAA,oBAClB/b,GADkB;AAAA,oBACbgc,GADa;;AAEvBhc,mBAAG,GAAGA,GAAG,CAACic,SAAJ,CAAc,CAAd,EAAiBjc,GAAG,CAACmE,MAArB,CAAN;AACA2X,uBAAO,CAAC9b,GAAD,CAAP,GAAekc,kBAAkB,CAACF,GAAD,CAAjC;AACD,eAJD;AAKD;;AACNrc,gBAAI,CAAC+b,UAAL,CAAgBI,OAAhB;AACCnc,gBAAI,CAACwc,YAAL,CAAkBL,OAAlB;AACG;;AACDnc,cAAI,CAACsa,qBAAL;AACL,SAnCG;AAqCD,OA5DH,WA6DS,UAAC1Z,GAAD,EAAS;AACdqK,eAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,eAAO,CAACC,GAAR,CAAYtK,GAAZ;AACD,OAhEH;AAkED;;;oCAEewN,I,EAAM;AACpB,UAAIpO,IAAI,GAAG,IAAX;AACAA,UAAI,CAACgc,eAAL,CAAqB5N,IAArB,EAFoB,CAGpB;AACA;;AACA,UAAIpO,IAAI,CAACyc,OAAT,EAAkBzc,IAAI,CAACyc,OAAL,CAAa/Z,QAAb,CAAsB;AAAEoX,mBAAW,EAAE9Z,IAAI,CAACqC,KAAL,CAAWyX,WAAX,GAAyB;AAAxC,OAAtB;AAClB9Z,UAAI,CAAC0C,QAAL,CAAc;AAAEmX,cAAM,EAAE,cAAV;AAA0BE,mBAAW,EAAE3L;AAAvC,OAAd,EAA6D,YAAW;AACxE;AACEpO,YAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,YAAI,CAACyE,GAAL,CAASiY,WAAT,CAAqB;AAAEC,mBAAS,EAAE;AAAE3M,oBAAQ,EAAE;AAAEkI,iBAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,iBAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C;AAAZ;AAAb,SAArB;AACD,OAJD;AAKD;;;sCAEiB;AAChB,UAAIjY,IAAI,GAAG,IAAX,CADgB,CAEhB;AACA;;AACAA,UAAI,CAAC0C,QAAL,CAAc;AAAEmX,cAAM,EAAE;AAAV,OAAd,EAA2C,YAAW;AACpD;AACA7Z,YAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,YAAI,CAACyE,GAAL,CAASyX,WAAT,CAAqB,EAArB;AACAlc,YAAI,CAACgc,eAAL,CAAqBhc,IAAI,CAACqC,KAAL,CAAW0X,WAAhC;AACD,OALD;AAMD;;;iCAEY3L,I,EAAMwO,I,EAAM;AACvB,UAAI5c,IAAI,GAAG,IAAX;;AAEA,UAAIA,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiByO,OAArB,EAA8B;AAC5B,YAAI7b,GAAG,GAAGhB,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiByO,OAA3B;AACA7b,WAAG,GAAGA,GAAG,CAACkE,OAAJ,CAAY,SAAZ,EAAuB,OAAOkJ,IAAI,CAAC7M,EAAZ,IAAkB,QAAlB,GAA6B6M,IAAI,CAAC7M,EAAlC,GAAuC,EAA9D,CAAN;AACAP,WAAG,GAAGA,GAAG,CAACkE,OAAJ,CAAY,WAAZ,EAAyBkJ,IAAI,CAAC4B,QAAL,GAAgBtP,IAAI,CAACiU,SAAL,CAAe;AAAEuD,aAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,aAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,SAAf,CAAhB,GAA2G,EAApI,CAAN;AACAjX,WAAG,GAAGA,GAAG,CAACkE,OAAJ,CAAY,SAAZ,EAAuBkJ,IAAI,CAACiD,MAA5B,CAAN;AACArQ,WAAG,GAAGA,GAAG,CAACkE,OAAJ,CAAY,UAAZ,EAAwBkJ,IAAI,CAAC4J,OAA7B,CAAN;AACAzS,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyBjP,GAAzB;AACD,OAPD,MAOO;AACLhB,YAAI,CAAC0C,QAAL,CAAc;AAAEmX,gBAAM,EAAE,WAAV;AAAuBG,kBAAQ,EAAE5L;AAAjC,SAAd,EAAuD,YAAW;AAChEpO,cAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,cAAI,CAACyE,GAAL,CAASiY,WAAT,CAAqB;AAAEC,qBAAS,EAAE;AAAE3M,sBAAQ,EAAE5B,IAAI,IAAIA,IAAI,CAAC4B,QAAb,IAAyB;AAAEkI,mBAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,mBAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,eAAzB,IAAqGjY,IAAI,CAACyE,GAAL,CAASyV;AAA1H;AAAb,WAArB;AACA,cAAI0C,IAAJ,EAAUA,IAAI;AACf,SAJD;AAKD;AAEF;;;mCAEc;AACb,UAAI5c,IAAI,GAAG,IAAX;;AACA,UAAI,KAAKqC,KAAL,CAAW2X,QAAX,IAAuB,OAAO,KAAK3X,KAAL,CAAW2X,QAAX,CAAoBzY,EAA3B,IAAiC,QAA5D,EAAsE;AACpE,YAAI6M,IAAI,GAAGpO,IAAI,CAACqC,KAAL,CAAWqX,KAAX,CAAiBlI,IAAjB,CAAsB,UAAApD,IAAI;AAAA,iBAAIA,IAAI,CAAC7M,EAAL,IAAWvB,IAAI,CAACqC,KAAL,CAAW2X,QAAX,CAAoBzY,EAAnC;AAAA,SAA1B,CAAX;AACAvB,YAAI,CAACoa,eAAL,CAAqBhM,IAArB;AACA7I,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,OAAO7B,IAAI,CAAC7M,EAArC;AACD,OAJD,MAIO;AACLgE,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAuB,GAAvB;;AACA,YAAIjQ,IAAI,CAACqC,KAAL,CAAW2X,QAAX,IAAuBha,IAAI,CAACqC,KAAL,CAAW2X,QAAX,CAAoBhK,QAA/C,EAAyD;AACvDhQ,cAAI,CAAC0C,QAAL,CAAc;AAAEmX,kBAAM,EAAE;AAAV,WAAd,EAA+C,YAAW;AACxD;AACA7Z,gBAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,gBAAI,CAACyE,GAAL,CAASyX,WAAT,CAAqB,EAArB;AACAlc,gBAAI,CAAC+b,UAAL,CAAgB/b,IAAI,CAACqC,KAAL,CAAW2X,QAA3B;AACD,WALD;AAMD,SAPD,MAOO;AACLha,cAAI,CAAC0C,QAAL,CAAc;AAAEmX,kBAAM,EAAE;AAAV,WAAd,EAAqC,YAAW;AAC9C7Z,gBAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,gBAAI,CAACyE,GAAL,CAASyX,WAAT,CAAqB,EAArB;AACAlc,gBAAI,CAAC+b,UAAL,CAAgB,IAAhB;AACD,WAJD;AAKD;AACF;AACF;;;6BAEOe,W,EAAaC,Q,EAAU;AAE/B,UAAI/c,IAAI,GAAG,IAAX;AACE,UAAIgd,aAAa,GAAGF,WAAW,CAAC3Z,WAAZ,EAApB;AAEF,UAAI8Z,YAAY,GAAG;AAAEvD,aAAK,EAAE,EAAT;AAAawD,iBAAS,EAAE;AAAxB,OAAnB,CAL+B,CAO7B;;AACF,WAAK7a,KAAL,CAAWqX,KAAX,CAAiBtZ,OAAjB,CAAyB,UAACgO,IAAD,EAAU;AAClC,YAAInL,KAAK,GAAGqO,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYuT,UAArB,EAAJ,IAA0C,EAAtD;AACG,YAAImJ,QAAQ,GAAGla,KAAK,CAACE,WAAN,EAAf;AACH,YAAIkR,OAAO,GAAG/C,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYiX,YAArB,EAAJ,IAA4C,EAA1D;AACG,YAAI0F,SAAS,GAAG/I,OAAO,CAAClR,WAAR,EAAhB;;AACH,YAAIga,QAAQ,CAAC9Q,KAAT,CAAe2Q,aAAf,KAAiCI,SAAS,CAAC/Q,KAAV,CAAgB2Q,aAAhB,CAArC,EAAqE;AACpEC,sBAAY,CAACvD,KAAb,CAAmBlT,IAAnB,CAAwB;AACvB6L,gBAAI,EAAEpP,KADiB;AAEvBoa,mBAAO,EAAE,mBAAW;AACb;AACArd,kBAAI,CAAC2a,oBAAL,CAA0BvM,IAA1B;AACD;AALiB,WAAxB;AAOA;AACD,OAdD,EAR+B,CAwB7B;;AACA/H,WAAK,CAAC,gHAAgH2W,aAAjH,EAAgI;AACnI/b,eAAO,EAAE;AACP,0BAAgB;AADT;AAD0H,OAAhI,CAAL,CAKAuP,IALA,CAKK,UAACC,QAAD,EAAc;AACnB,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACA,OAPA,EAQGJ,IARH,CAQS,UAAAI,IAAI,EAAI;AACb,YAAIA,IAAI,IAAIA,IAAI,CAACH,QAAb,IAAyBG,IAAI,CAACH,QAAL,CAAc6M,IAAvC,IAA+C1M,IAAI,CAACH,QAAL,CAAc6M,IAAd,CAAmB9Y,MAAtE,EAA8E;AAC5EyY,sBAAY,CAACC,SAAb,GAAyBtM,IAAI,CAACH,QAAL,CAAc6M,IAAd,CAAmB7Y,GAAnB,CAAwB,UAAA8Y,KAAK,EAAI;AAAE,mBAAO;AACvElL,kBAAI,EAAEkL,KAAK,CAACC,YAD2D;AAEvEH,qBAAO,EAAE,mBAAW;AAAEI,8BAAc,CAACF,KAAK,CAAChc,EAAP,CAAd;AAA0B;AAFuB,aAAP;AAG/D,WAH4B,CAAzB;AAID;;AACDwb,gBAAQ,CAACD,WAAD,EAAcG,YAAd,CAAR;AACD,OAhBH,WAiBS,UAACrc,GAAD,EAAS;AACdqK,eAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BtK,GAA9B;AACAmc,gBAAQ,CAACD,WAAD,EAAcG,YAAd,CAAR;AACD,OApBH;;AAsBA,eAASQ,cAAT,CAAwBlc,EAAxB,EAA4B;AAC1B8E,aAAK,CAAC,mGAAmG9E,EAApG,EAAwG;AAC3GN,iBAAO,EAAE;AACP,4BAAgB;AADT;AADkG,SAAxG,CAAL,CAKAuP,IALA,CAKK,UAACC,QAAD,EAAc;AACnB,iBAAOA,QAAQ,CAACG,IAAT,EAAP;AACA,SAPA,EAQGJ,IARH,CAQS,UAAAI,IAAI,EAAI;AACb,cAAIA,IAAI,IAAIA,IAAI,CAACH,QAAb,IAAyBG,IAAI,CAACH,QAAL,CAAc6M,IAAvC,IAA+C1M,IAAI,CAACH,QAAL,CAAc6M,IAAd,CAAmB,CAAnB,CAAnD,EAA0E;AACxE,gBAAII,YAAY,GAAG9M,IAAI,CAACH,QAAL,CAAc6M,IAAd,CAAmB,CAAnB,EAAsBI,YAAzC;AACA,gBAAIrR,KAAK,GAAGqR,YAAY,CAACrR,KAAb,CAAmB,gCAAnB,CAAZ;AACArM,gBAAI,CAACyE,GAAL,CAASA,GAAT,CAAakZ,KAAb,CAAmB,IAAIC,CAAC,CAACC,MAAN,CAAaxR,KAAK,CAAC,CAAD,CAAlB,EAAuBA,KAAK,CAAC,CAAD,CAA5B,CAAnB;AACArM,gBAAI,CAACua,UAAL,CAAgB;AAAEuD,oBAAM,EAAE;AAAE5F,mBAAG,EAAE7L,KAAK,CAAC,CAAD,CAAZ;AAAiB8L,mBAAG,EAAE9L,KAAK,CAAC,CAAD;AAA3B;AAAV,aAAhB,EAA8D,IAA9D;AACD;AACF,SAfH,WAgBS,UAACzL,GAAD,EAAS;AACdqK,iBAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BtK,GAA9B;AACAmc,kBAAQ,CAACD,WAAD,EAAcG,YAAd,CAAR;AACD,SAnBH;AAqBD;AAEH;;;sCAEkB;AAClB,UAAK,KAAK5a,KAAL,CAAWyX,WAAX,IAA0B,QAA/B,EAA0C;AAAE;AACxC,eAAO,KAAKzX,KAAL,CAAWsX,YAAlB;AACD,OAFH,MAES;AACL,YAAIA,YAAY,GAAG,KAAKlV,GAAL,CAASsZ,eAAT,EAAnB;AACA,aAAKrb,QAAL,CAAc;AAAEiX,sBAAY,EAAZA;AAAF,SAAd;AACA,eAAOA,YAAP;AACD;AACF;;;wCAEmB3J,Q,EAAU;AAE5B,UAAIhQ,IAAI,GAAG,IAAX;AAEAA,UAAI,CAACyE,GAAL,IAAYzE,IAAI,CAACyE,GAAL,CAASmW,mBAAT,CAA6B5K,QAA7B,CAAZ;;AAEA,UAAIA,QAAJ,EAAe;AACb,YAAIhQ,IAAI,CAACyc,OAAL,CAAauB,QAAjB,EAA2B;AACzBhe,cAAI,CAACyc,OAAL,CAAauB,QAAb,CAAsBC,oBAAtB,CAA2C;AAAEjO,oBAAQ,EAARA,QAAF;AAAYgI,mBAAO,EAAE;AAArB,WAA3C;AACHhY,cAAI,CAACyE,GAAL,CAASyZ,YAAT,CAAsBlO,QAAtB,EAAgC,IAAhC,EAAsC,UAASY,IAAT,EAAe8K,MAAf,EAAuB;AAC5D,gBAAI1D,OAAO,GAAGpH,IAAI,IAAIA,IAAI,CAACuN,QAAb,IAAyB,qBAAvC;AACAne,gBAAI,CAACqC,KAAL,CAAW2X,QAAX,CAAoBhC,OAApB,GAA8BA,OAA9B;AACAhY,gBAAI,CAACyc,OAAL,CAAauB,QAAb,CAAsBC,oBAAtB,CAA2C;AAAEjO,sBAAQ,EAARA,QAAF;AAAYgI,qBAAO,EAAEA;AAArB,aAA3C;AACA,WAJD;AAKE;AACF,OATD,MASO;AACLhY,YAAI,CAACyE,GAAL,IAAYzE,IAAI,CAACyE,GAAL,CAAS2Z,gBAAT,EAAZ;AACA,aAAK1b,QAAL,CAAc;AAAEmX,gBAAM,EAAE,SAAV;AAAqBE,qBAAW,EAAE,IAAlC;AAAwCoC,iBAAO,EAAE,IAAjD;AAAuDnC,kBAAQ,EAAE;AAAjE,SAAd,EAAuF,YAAW,CACjG,CADD;AAED;AAEF;;;+BAEU5L,I,EAAM;AACf,UAAIpO,IAAI,GAAG,IAAX;AACA,UAAIoO,IAAJ,EAAUA,IAAI,CAACiQ,gBAAL,GAAwBjQ,IAAI,CAAC4B,QAAL,IAAiBhQ,IAAI,CAACyE,GAAL,CAAS4Z,gBAAT,CAA2B;AAAEnG,WAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,WAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,OAA3B,EAAqGjY,IAAI,CAACS,MAAL,CAAYgE,GAAZ,CAAgB6Z,OAArH,CAAzC;AACVte,UAAI,CAAC0C,QAAL,CAAc;AAAEsX,gBAAQ,EAAE5L;AAAZ,OAAd,EAAkC,YAAW;AAC3C,YAAIA,IAAJ,EAAU;AACRpO,cAAI,CAACyE,GAAL,CAAS8Z,WAAT,CAAqB;AAAC5B,qBAAS,EAAE,CAACvO,IAAI,CAAC4B,QAAN;AAAZ,WAArB,EADQ,CAER;;AACA,cAAI5B,IAAI,CAAC4B,QAAT,EAAmBhQ,IAAI,CAAC4a,mBAAL,CAAyB;AAAE1C,eAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,eAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,WAAzB;;AACnB,cAAIjY,IAAI,CAACyc,OAAT,EAAkB;AAChBzc,gBAAI,CAAC0C,QAAL,CAAc;AAAEsX,sBAAQ,EAAEha,IAAI,CAACqC,KAAL,CAAW2X;AAAvB,aAAd;;AACA,gBAAI5L,IAAI,CAAC4B,QAAT,EAAmB;AACjBhQ,kBAAI,CAACyc,OAAL,CAAaV,UAAb,iCAA6B/b,IAAI,CAACqC,KAAL,CAAW2X,QAAxC;AAAkDhC,uBAAO,EAAE;AAA3D;AACAhY,kBAAI,CAACyE,GAAL,CAASyZ,YAAT,CAAsB;AAAEhG,mBAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,mBAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,eAAtB,EAAgG,IAAhG,EAAsG,UAASrH,IAAT,EAAe8K,MAAf,EAAuB;AAC3H,oBAAI1D,OAAO,GAAGpH,IAAI,IAAIA,IAAI,CAACuN,QAAb,IAAyB,qBAAvC;AACA,oBAAInE,QAAQ,GAAGha,IAAI,CAACqC,KAAL,CAAW2X,QAA1B;AACAA,wBAAQ,CAAChC,OAAT,GAAmBA,OAAnB;AACAhY,oBAAI,CAAC0C,QAAL,CAAc;AAAEsX,0BAAQ,EAARA;AAAF,iBAAd;AACAha,oBAAI,CAACyc,OAAL,CAAaV,UAAb,iCAA6B/b,IAAI,CAACqC,KAAL,CAAW2X,QAAxC;AAAkDhC,yBAAO,EAAPA;AAAlD;AACD,eAND;AAOD,aATD,MASO;AACLhY,kBAAI,CAACyc,OAAL,CAAaV,UAAb,iCAA6B/b,IAAI,CAACqC,KAAL,CAAW2X,QAAxC;AAAkDhC,uBAAO,EAAE;AAA3D;AACD;;AACDhY,gBAAI,CAACyc,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,mBAAK,EAAE1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,CAAiB/C,MAAjB,CAAyB,UAAA8H,CAAC;AAAA,uBAAIA,CAAC,CAACld,EAAF,IAAQ6M,IAAI,CAAC7M,EAAjB;AAAA,eAA1B,CAAT;AAA0Dmd,uBAAS,EAAE,UAArE;AAAiFC,4BAAc,EAAE,IAAjG;AAAuGC,oBAAM,EAAE;AAAE1G,mBAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,mBAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,eAA/G;AAAyLxM,uBAAS,EAAE;AAApM,aAAzB;AACD;AACF,SApBD,MAoBO;AACLzL,cAAI,CAACyE,GAAL,CAAS2Z,gBAAT;;AACA,cAAIpe,IAAI,CAACyc,OAAT,EAAkB;AAChBzc,gBAAI,CAACyc,OAAL,CAAaV,UAAb,CAAwB,IAAxB;AACA/b,gBAAI,CAACyc,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,mBAAK,EAAE1Z,IAAI,CAAC+d,eAAL,EAAT;AAAiCY,4BAAc,EAAE;AAAjD,aAAzB;AACD;AACF;AACF,OA5BD;AA6BD;;;oCAEevQ,I,EAAM;AACpB;AACA;AACA,WAAK6L,YAAL,GAAoB7L,IAApB;;AACA,UAAIA,IAAJ,EAAU;AACR,aAAK3J,GAAL,CAAS8Z,WAAT,CAAqB;AAAC5B,mBAAS,EAAEvO;AAAZ,SAArB;;AACA,YAAI,KAAKqO,OAAT,EAAkB;AAChB,eAAKA,OAAL,CAAaT,eAAb,CAA6B5N,IAA7B;AACA,eAAKqO,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,iBAAK,EAAE,KAAKrX,KAAL,CAAWqX,KAAX,CAAiB/C,MAAjB,CAAyB,UAAA8H,CAAC;AAAA,qBAAIA,CAAC,CAACld,EAAF,IAAQ6M,IAAI,CAAC7M,EAAjB;AAAA,aAA1B,CAAT;AAA0Dmd,qBAAS,EAAE,UAArE;AAAiFC,0BAAc,EAAE,IAAjG;AAAuGC,kBAAM,EAAE;AAAE1G,iBAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,iBAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,aAA/G;AAAyLxM,qBAAS,EAAE;AAApM,WAAzB;AACD;AACF,OAND,MAMO;AACL,aAAKhH,GAAL,IAAY,KAAKA,GAAL,CAAS2Z,gBAAT,EAAZ;;AACA,YAAI,KAAK3B,OAAT,EAAkB;AAChB,eAAKA,OAAL,CAAaT,eAAb,CAA6B,IAA7B;AACA,eAAKS,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,iBAAK,EAAE,KAAKqE,eAAL,EAAT;AAAiCY,0BAAc,EAAE;AAAjD,WAAzB;AACD;AACF;AACF;;;+BAES/R,K,EAAOiS,mB,EAAqB;AAEtC,UAAK,KAAKxc,KAAL,CAAWyX,WAAX,IAA0B,QAA/B,EAA0C;AAAE;AAC3C,aAAK2C,OAAL,CAAa/Z,QAAb,CAAsB;AAAEoX,qBAAW,EAAE;AAAf,SAAtB;AACA,aAAKpX,QAAL,CAAc;AAAEoX,qBAAW,EAAE;AAAf,SAAd,EAAyC,YAAW;AACnD,eAAKrV,GAAL,CAASA,GAAT,CAAawX,cAAb;AACA,SAFD;AAGA;AACA;;AAEC,cAAQ,KAAK5Z,KAAL,CAAWwX,MAAnB;AAEE,aAAK,cAAL;AACE;;AAEF,aAAK,WAAL;AACE,cAAIwE,gBAAgB,GAAG,KAAK5Z,GAAL,CAAS4Z,gBAAT,CAA2BzR,KAAK,CAACkR,MAAjC,EAAyC,KAAKrd,MAAL,CAAYgE,GAAZ,CAAgB6Z,OAAzD,CAAvB;AACA,cAAID,gBAAJ,EAAsB,KAAKzD,mBAAL,CAAyBhO,KAAK,CAACkR,MAA/B;AACtB;;AAEF;AACE,cAAI,CAAE,KAAK7D,YAAL,IAAqB,KAAKxV,GAAL,CAASyV,gBAAhC,KAAsD,CAAC2E,mBAA3D,EAAgF;AAC9E,iBAAKnc,QAAL,iCAAmB,KAAKL,KAAxB;AAA+BwX,oBAAM,EAAE,SAAvC;AAAkDE,yBAAW,EAAE;AAA/D;AACAxU,oBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAuB,GAAvB;AACA,iBAAK+L,eAAL,CAAqB,IAArB;AACA,iBAAKpB,mBAAL,CAAyB,IAAzB;AACA,iBAAKmB,UAAL,CAAgB,IAAhB;AACA,iBAAKU,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,mBAAK,EAAE,KAAKqE,eAAL,EAAT;AAAiCY,4BAAc,EAAE;AAAjD,aAAzB;AACD,WAPD,MAOO;AACL,gBAAI,CAAC,KAAKle,MAAL,CAAYuY,iBAAjB,EAAoC;AACpC,iBAAKtW,QAAL,iCAAmB,KAAKL,KAAxB;AAA+BwX,oBAAM,EAAE,mBAAvC;AAA4DE,yBAAW,EAAE;AAAzE;AACA,iBAAKiC,eAAL,CAAqB,IAArB;AACA,gBAAIG,OAAO,GAAG;AAAE5a,gBAAE,EAAE,UAAN;AAAkByO,sBAAQ,EAAE;AAAEiI,2BAAW,EAAE,CAAErL,KAAK,CAACkR,MAAN,CAAa5F,GAAf,EAAoBtL,KAAK,CAACkR,MAAN,CAAa3F,GAAjC;AAAf;AAA5B,aAAd;AACA,iBAAK4D,UAAL,CAAgBI,OAAhB;AACD;;AACD,eAAK1X,GAAL,CAASqa,YAAT;AACAvZ,kBAAQ,CAACwC,aAAT,CAAuB,wBAAvB,EAAiDgX,QAAjD,CAA0D,CAA1D,EAA4D,CAA5D;AA1BJ;AA4BD;;;kCAEYnS,K,EAAO;AAEpB,UAAK,KAAKvK,KAAL,CAAWyX,WAAX,IAA0B,QAA/B,EAA0C;AAAE;AAC3C,aAAK2C,OAAL,CAAa/Z,QAAb,CAAsB;AAAEoX,qBAAW,EAAE;AAAf,SAAtB;AACA,aAAKpX,QAAL,CAAc;AAAEoX,qBAAW,EAAE;AAAf,SAAd,EAAyC,YAAW;AACnD,eAAKrV,GAAL,CAASA,GAAT,CAAawX,cAAb;AACA,SAFD;AAGA;AACA;;AAED,cAAQ,KAAK5Z,KAAL,CAAWwX,MAAnB;AAEI,aAAK,cAAL;AACE;;AAEF,aAAK,WAAL;AACE;;AAEF;AACE,cAAI,KAAKxX,KAAL,CAAW2X,QAAf,EAAyB;AACvB,iBAAKtX,QAAL,CAAc;AAAEmX,oBAAM,EAAE,SAAV;AAAqBE,yBAAW,EAAE;AAAlC,aAAd;AACA,iBAAKgC,UAAL,CAAgB,IAAhB;AACA,iBAAKpB,oBAAL,CAA0B,IAA1B;AACD,WAJD,MAIO;AACL,iBAAKjY,QAAL,CAAc;AAAEmX,oBAAM,EAAE,eAAV;AAA2BE,yBAAW,EAAEnN,KAAK,CAACC,MAAN,CAAalK;AAArD,aAAd;AACA,iBAAKoZ,UAAL,CAAgB,IAAhB;AACA,iBAAKpB,oBAAL,CAA0B/N,KAAK,CAACC,MAAN,CAAalK,IAAvC;AACD;;AACD4C,kBAAQ,CAACwC,aAAT,CAAuB,wBAAvB,EAAiDgX,QAAjD,CAA0D,CAA1D,EAA4D,CAA5D;AAlBN;AAqBC;;;mCAEanS,K,EAAO;AAErB,UAAK,KAAKvK,KAAL,CAAWyX,WAAX,IAA0B,QAA/B,EAA0C;AAAE;AAC3C,aAAK2C,OAAL,CAAa/Z,QAAb,CAAsB;AAAEoX,qBAAW,EAAE;AAAf,SAAtB;AACA,aAAKpX,QAAL,CAAc;AAAEoX,qBAAW,EAAE;AAAf,SAAd,EAAyC,YAAW;AACnD,eAAKrV,GAAL,CAASA,GAAT,CAAawX,cAAb;AACA,SAFD;AAGA;AACA;;AAEC,WAAKvZ,QAAL,iCAAmB,KAAKL,KAAxB;AAA+BwX,cAAM,EAAE,SAAvC;AAAkDE,mBAAW,EAAE;AAA/D;AACA,WAAKgC,UAAL,CAAgB,IAAhB;AACA,WAAKC,eAAL,CAAqB,IAArB;AACD;;;4CAEuB;AACtB,UAAIhc,IAAI,GAAG,IAAX;AACA,UAAI,CAACA,IAAI,CAACyE,GAAV,EAAe;AACfzE,UAAI,CAACyE,GAAL,CAASqa,YAAT;;AACA,cAAQ9e,IAAI,CAACqC,KAAL,CAAWwX,MAAnB;AAEE,aAAK,cAAL;AACE;;AAEF,aAAK,WAAL;AACE;;AAEF,aAAK,eAAL;AACA,aAAK,mBAAL;AACE,cAAI7Z,IAAI,CAACyc,OAAT,EAAkB;AAChB,gBAAIxC,YAAY,GAAGja,IAAI,CAACqC,KAAL,CAAW0X,WAAX,IAA0B/Z,IAAI,CAACia,YAA/B,IAA+Cja,IAAI,CAACqC,KAAL,CAAW2X,QAA7E;;AACA,gBAAIC,YAAY,IAAIA,YAApB,EAAkC;AAChCja,kBAAI,CAACyc,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,qBAAK,EAAE1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,CAAiB/C,MAAjB,CAAyB,UAAA8H,CAAC;AAAA,yBAAIA,CAAC,CAACld,EAAF,IAAQ0Y,YAAY,CAAC1Y,EAAzB;AAAA,iBAA1B,CAAT;AAAkEmd,yBAAS,EAAE,UAA7E;AAAyFC,8BAAc,EAAE,IAAzG;AAA+GC,sBAAM,EAAE;AAAE1G,qBAAG,EAAE+B,YAAY,CAACjK,QAAb,CAAsBiI,WAAtB,CAAkC,CAAlC,CAAP;AAA6CE,qBAAG,EAAE8B,YAAY,CAACjK,QAAb,CAAsBiI,WAAtB,CAAkC,CAAlC;AAAlD,iBAAvH;AAAiNxM,yBAAS,EAAE;AAA5N,eAAzB;AACD;AACF;;AACD;;AAEF;AACE,cAAIzL,IAAI,CAACyc,OAAT,EAAkB;AAChBzc,gBAAI,CAACyc,OAAL,CAAa+B,WAAb,CAAyB;AAAE9E,mBAAK,EAAE1Z,IAAI,CAAC+d,eAAL,EAAT;AAAiCY,4BAAc,EAAE;AAAjD,aAAzB;AACD;;AArBL;AAwBD;;;qCAEevQ,I,EAAM;AACpB,WAAK1L,QAAL,iCAAmB,KAAKL,KAAxB;AAA+B2X,gBAAQ,oBAAO5L,IAAP,CAAvC;AAAsD2L,mBAAW,EAAE3L;AAAnE;AACD;;;yCAEmBA,I,EAAM;AACxB,UAAI,KAAK/L,KAAL,CAAW2X,QAAf,EAAyB,KAAK+B,UAAL,CAAgB,IAAhB;AACzB,UAAIlC,MAAM,GAAGzL,IAAI,GAAG,eAAH,GAAqB,SAAtC;;AACA,UAAIA,IAAJ,EAAU;AACR;AACA7I,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAuB,OAAK7B,IAAI,CAAC7M,EAAjC;AACD,OAHD,MAGO;AACLgE,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,GAAzB;AACD;;AACD,WAAKvN,QAAL,iCAAmB,KAAKL,KAAxB;AAA+BwX,cAAM,EAANA,MAA/B;AAAuCE,mBAAW,EAAE3L;AAApD,UAA4D,YAAW;AACrE,aAAK4N,eAAL,CAAqB5N,IAArB;AACD,OAFD;AAGD;;;gCAEWA,I,EAAM;AAChB;AACA,UAAI,KAAK/L,KAAL,CAAW2X,QAAf,EAAyB,KAAK+B,UAAL,CAAgB,IAAhB;AACzB,WAAKrZ,QAAL,CAAc;AAAEmX,cAAM,EAAE,eAAV;AAA2BE,mBAAW,EAAE3L;AAAxC,OAAd,EAA8D,YAAW;AACvE,aAAK4N,eAAL,CAAqB5N,IAArB,EADuE,CAEvE;AACA;;AACA7I,gBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,OAAO7B,IAAI,CAAC7M,EAArC;AACD,OALD;AAMD;;;oCAEe6M,I,EAAM;AACpB,UAAIpO,IAAI,GAAG,IAAX;AACA,UAAIgQ,QAAQ,GAAG;AAAEkI,WAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,WAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B;AAA1C,OAAf;AACAjY,UAAI,CAACwc,YAAL,CAAkBpO,IAAlB,EAAwB,YAAM;AAC5B;AACApO,YAAI,CAACyc,OAAL,CAAauB,QAAb,CAAsBC,oBAAtB,CAA2C;AAAEjO,kBAAQ,EAARA,QAAF;AAAYgI,iBAAO,EAAE;AAArB,SAA3C;AACFhY,YAAI,CAACyE,GAAL,CAASyZ,YAAT,CAAsBlO,QAAtB,EAAgC,IAAhC,EAAsC,UAASY,IAAT,EAAe8K,MAAf,EAAuB;AAC5D,cAAI1D,OAAO,GAAGpH,IAAI,IAAIA,IAAI,CAACuN,QAAb,IAAyB,qBAAvC;AACAne,cAAI,CAACqC,KAAL,CAAW2X,QAAX,CAAoBhC,OAApB,GAA8BA,OAA9B;AACAhY,cAAI,CAACyc,OAAL,CAAauB,QAAb,CAAsBC,oBAAtB,CAA2C;AAAEjO,oBAAQ,EAARA,QAAF;AAAYgI,mBAAO,EAAEA;AAArB,WAA3C;AACA,SAJD;AAKC,OARD;AASD;;;kCAEa7J,M,EAAQ;AACpB,UAAInO,IAAI,GAAG,IAAX;AACAA,UAAI,CAAC+b,UAAL,CAAgB,IAAhB;AACA/b,UAAI,CAACgc,eAAL,CAAqB,IAArB;AACAhc,UAAI,CAAC4a,mBAAL,CAAyB,IAAzB;AACA5a,UAAI,CAAC0C,QAAL,CAAc;AAAEmX,cAAM,EAAE;AAAV,OAAd,EAAqC,YAAW;AAC9C7Z,YAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;AACAjc,YAAI,CAACyE,GAAL,CAASoX,kBAAT;AACA7b,YAAI,CAAC6P,SAAL,CAAe,EAAf;AACD,OAJD;AAKD;;;sCAEiBzB,I,EAAM;AACtBnD,aAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BkD,IAAI,CAAC7M,EAAhC;AACAuT,WAAK,CAAC,MAAD,CAAL;AACD;;;+CAE6B;AAAA,UAAR1G,IAAQ,SAARA,IAAQ;AAC5B;AACA7I,cAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,OAAO7B,IAAI,CAAC7M,EAArC;AACD;;;0CAEwB;AAAA;;AAAA,UAAR6M,IAAQ,SAARA,IAAQ;AACvB,UAAIpO,IAAI,GAAG,IAAX;AACA,UAAIga,QAAQ,GAAG,KAAK3X,KAAL,CAAW2X,QAAX,IAAuB,EAAtC;AACAA,cAAQ,CAAC3I,MAAT,GAAkBjD,IAAI,CAACiD,MAAvB;AACArR,UAAI,CAACwc,YAAL,CAAkBxC,QAAlB,EAA4B,YAAM;AAChC,YAAI,MAAI,CAAC3X,KAAL,CAAW2X,QAAX,IAAuB,MAAI,CAAC3X,KAAL,CAAW2X,QAAX,CAAoBhK,QAA/C,EAAyD;AACvD,cAAIA,QAAQ,GAAG;AAAEkI,eAAG,EAAE,MAAI,CAAC7V,KAAL,CAAW2X,QAAX,CAAoBhK,QAApB,CAA6BiI,WAA7B,CAAyC,CAAzC,CAAP;AAAoDE,eAAG,EAAE,MAAI,CAAC9V,KAAL,CAAW2X,QAAX,CAAoBhK,QAApB,CAA6BiI,WAA7B,CAAyC,CAAzC;AAAzD,WAAf,CADuD,CAEzD;;AACEjY,cAAI,CAACyc,OAAL,CAAauB,QAAb,CAAsBC,oBAAtB,CAA2C;AAAEjO,oBAAQ,EAARA,QAAF;AAAYgI,mBAAO,EAAE;AAArB,WAA3C;AACFhY,cAAI,CAACyE,GAAL,CAASyZ,YAAT,CAAsBlO,QAAtB,EAAgC,IAAhC,EAAsC,UAASY,IAAT,EAAe8K,MAAf,EAAuB;AAC5D,gBAAI1D,OAAO,GAAGpH,IAAI,IAAIA,IAAI,CAACuN,QAAb,IAAyB,qBAAvC;AACAne,gBAAI,CAACqC,KAAL,CAAW2X,QAAX,CAAoBhC,OAApB,GAA8BA,OAA9B;AACAhY,gBAAI,CAACyc,OAAL,CAAauB,QAAb,CAAsBC,oBAAtB,CAA2C;AAAEjO,sBAAQ,EAARA,QAAF;AAAYgI,qBAAO,EAAEA;AAArB,aAA3C;AACA,WAJD;AAKC;AACF,OAXD;AAYD;;;oCAGe5J,I,EAAM;AACpB,UAAIpO,IAAI,GAAG,IAAX;AACAA,UAAI,CAAC+b,UAAL,CAAgB,IAAhB;AACF/b,UAAI,CAACoa,eAAL,CAAqBhM,IAArB;AACEpO,UAAI,CAAC6P,SAAL,CAAe;AAAC2L,wBAAgB,EAAEpN,IAAI,CAAC7M;AAAxB,OAAf;AACD;;;gCAEWoB,I,EAAM;AAChB,UAAIyL,IAAI,GAAG,KAAK/L,KAAL,CAAWqX,KAAX,CAAiBlI,IAAjB,CAAuB,UAAApD,IAAI;AAAA,eAAIA,IAAI,CAAC7M,EAAL,IAAWoB,IAAI,CAACwL,MAApB;AAAA,OAA3B,CAAX;AACAC,UAAI,CAACmE,GAAL,IAAY5P,IAAI,CAACiS,MAAjB;AACD;;;qCAEgBjS,I,EAAM;AACrB,UAAIyL,IAAI,GAAG,KAAK/L,KAAL,CAAWqX,KAAX,CAAiBlI,IAAjB,CAAuB,UAAApD,IAAI;AAAA,eAAIA,IAAI,CAAC7M,EAAL,IAAWoB,IAAI,CAACwL,MAApB;AAAA,OAA3B,CAAX;AACAC,UAAI,CAACgC,QAAL;AACA4O,gBAAU,CAAC,UAAAna,CAAC,EAAI;AAAElD,cAAM,CAACqO,QAAP,CAAgBe,IAAhB,2BAAwCpO,IAAI,CAACpB,EAA7C;AAAmD,OAA3D,EAA6D,IAA7D,CAAV;AACD;;;sCAEiBoB,I,EAAM;AACtB,UAAIyL,IAAI,GAAG,KAAK/L,KAAL,CAAWqX,KAAX,CAAiBlI,IAAjB,CAAuB,UAAApD,IAAI;AAAA,eAAIA,IAAI,CAAC7M,EAAL,IAAWoB,IAAI,CAACwL,MAApB;AAAA,OAA3B,CAAX;AACAC,UAAI,CAACgC,QAAL;AACD;;;mCAEcuG,M,EAAQ;AACrB,WAAKqF,eAAL,CAAqB,IAArB;AACF,WAAKD,UAAL,CAAgB,IAAhB;AACA,WAAKnB,mBAAL,CAAyB,IAAzB;AACA,WAAKlY,QAAL,CAAc;AAAEmX,cAAM,EAAE;AAAV,OAAd;AACA,WAAKS,qBAAL,GALuB,CAKO;AAC7B;;;oCAEelM,I,EAAM;AACpB,WAAK3J,GAAL,CAAS8Z,WAAT,CAAqB;AAAE5B,iBAAS,EAAEvO;AAAb,OAArB;AACA,WAAK3J,GAAL,CAASqa,YAAT;AACD;;;mCAEc1Q,I,EAAM;AACnB,WAAK3J,GAAL,CAAS2Z,gBAAT;;AACA,UAAI,KAAKnE,YAAT,EAAuB;AACrB,aAAKxV,GAAL,CAAS8Z,WAAT,CAAqB;AAAC5B,mBAAS,EAAE,KAAK1C;AAAjB,SAArB;AACD;;AACD,UAAI,KAAKxV,GAAL,CAASyV,gBAAb,EAA+B;AAC7B,aAAKzV,GAAL,CAAS8Z,WAAT,CAAqB,EAArB;AACD;;AACD,WAAK9Z,GAAL,CAASqa,YAAT;AACD;;;0CAEqB1Q,I,EAAM;AAC1B7I,cAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAuB,OAAK,KAAK5N,KAAL,CAAW0X,WAAX,CAAuBxY,EAAnD;AACD;;;4CAEuB;AACtB,UAAIvB,IAAI,GAAG,IAAX;AACA,UAAIA,IAAI,CAACyc,OAAT,EAAkBzc,IAAI,CAACyc,OAAL,CAAa/Z,QAAb,CAAsB;AAAEoX,mBAAW,EAAE9Z,IAAI,CAACqC,KAAL,CAAWyX,WAAX,IAA0B,QAA1B,GAAqC,QAArC,GAAgD;AAA/D,OAAtB;AAClB9Z,UAAI,CAAC0C,QAAL,CAAc;AAAEoX,mBAAW,EAAE9Z,IAAI,CAACqC,KAAL,CAAWyX,WAAX,IAA0B,QAA1B,GAAqC,QAArC,GAAgD;AAA/D,OAAd,EAAyF,YAAW;AAClG9Z,YAAI,CAACyE,GAAL,CAASA,GAAT,CAAawX,cAAb;;AACA,YAAI,KAAK5Z,KAAL,CAAWwX,MAAX,IAAqB,mBAArB,IAA4C,KAAKxX,KAAL,CAAWwX,MAAX,IAAqB,eAArE,EAAsF;AACpF,cAAII,YAAY,GAAGja,IAAI,CAACqC,KAAL,CAAW0X,WAAX,IAA0B/Z,IAAI,CAACia,YAA/B,IAA+Cja,IAAI,CAACqC,KAAL,CAAW2X,QAA7E;AACAha,cAAI,CAACyE,GAAL,CAASoX,kBAAT;AACD;AACF,OAND;AAOD;;;6BAEO;AAAA;;AAEN,UAAIoD,QAAQ,GAAG,IAAf,CAFM,CAEe;;AACrB,UAAIja,UAAU,GAAG,IAAjB;AACA,UAAIka,eAAe,GAAG,IAAtB;;AAEA,cAAO,KAAK7c,KAAL,CAAWwX,MAAlB;AAEE,aAAK,cAAL;AACEoF,kBAAQ,gBACT,2DAAC,oDAAD;AAAS,kBAAM,EAAE,KAAKxe,MAAtB;AAA8B,uBAAW,EAAC,SAA1C;AAAoD,gBAAI,EAAE,KAAK4B,KAAL,CAAW0X,WAArE;AAAkF,qBAAS,EAAC,uBAA5F;AAAoH,eAAG,EAAE,aAAAnW,EAAE;AAAA,qBAAK,MAAI,CAAC6Y,OAAL,GAAe7Y,EAApB;AAAA;AAA3H,YADC;AAGAoB,oBAAU,gBACZ;AAAK,qBAAS,EAAC;AAAf,0BAAqC;AAAK,qBAAS,EAAC,gBAAf;AAAgC,mBAAO,EAAE;AAAA,qBAAM,MAAI,CAACma,qBAAL,EAAN;AAAA;AAAzC,oCAArC,CADE;AAGA;;AAEF,aAAK,WAAL;AACEF,kBAAQ,gBACT,2DAAC,oDAAD;AAAS,kBAAM,EAAE,KAAKxe,MAAtB;AAA8B,uBAAW,EAAC,MAA1C;AAAiD,gBAAI,kCAAO,KAAK4B,KAAL,CAAW2X,QAAlB;AAA4B7Y,kBAAI,EAAE,KAAKkB,KAAL,CAAW2X,QAAX,IAAuB,KAAK3X,KAAL,CAAW2X,QAAX,CAAoB7Y,IAA3C,IAAmD,KAAKV,MAAL,CAAYU;AAAjG,cAArD;AAA8J,qBAAS,EAAC,uBAAxK;AAAgM,eAAG,EAAE,aAAAyC,EAAE;AAAA,qBAAK,MAAI,CAAC6Y,OAAL,GAAe7Y,EAApB;AAAA;AAAvM,YADC;AAGAoB,oBAAU,gBACZ;AAAK,qBAAS,EAAC;AAAf,0BAAqC;AAAK,qBAAS,EAAC,gBAAf;AAAgC,mBAAO,EAAE;AAAA,qBAAM,MAAI,CAACoa,YAAL,EAAN;AAAA;AAAzC,4BAAgF,KAAK/c,KAAL,CAAW2X,QAAX,IAAuB,OAAO,KAAK3X,KAAL,CAAW2X,QAAX,CAAoBzY,EAA3B,IAAiC,QAAxD,GAAmE,MAAnE,GAA4E,WAA5J,CAArC,CADE;AAGA;;AAEF,aAAK,mBAAL;AACA,aAAK,eAAL;AACE,cAAI,KAAKc,KAAL,CAAWwX,MAAX,IAAqB,mBAAzB,EAA8C;AAC5C,gBAAI,KAAKxX,KAAL,CAAW2X,QAAX,IAAuB,KAAK3X,KAAL,CAAW2X,QAAX,CAAoBqE,gBAA/C,EAAiE;AAC/Da,6BAAe,gBACb,2DAAC,oDAAD;AAAS,sBAAM,kCAAO,KAAKze,MAAZ;AAAoB6X,yBAAO,EAAE;AAAE3R,wBAAI,EAAE;AAAR;AAA7B,kBAAf;AAAyE,gCAAgB,EAAE,KAAKtE,KAAL,CAAW2X;AAAtG,gBADF;AAGD;AACF,WAND,MAMO;AACLkF,2BAAe,gBACb;AAAK,uBAAS,EAAC,gCAAf;AAAgD,qBAAO,EAAG,mBAAO;AAAE,sBAAI,CAACxc,QAAL,CAAc;AAAEoX,6BAAW,EAAE;AAAf,iBAAd;;AAA0C,sBAAI,CAAC2C,OAAL,CAAa/Z,QAAb,CAAsB;AAAEoX,6BAAW,EAAE;AAAf,iBAAtB;;AAAkDvU,wBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,OAAO,MAAI,CAAC5N,KAAL,CAAW0X,WAAX,CAAuBxY,EAAvD;AAA2D;AAAoD;AAA9Q,4BACE;AAAK,uBAAS,EAAC,WAAf;AAA2B,mBAAK,EAAE;AAAEuU,+BAAe,gBAAS,KAAKzT,KAAL,CAAW0X,WAAX,IAA0B,KAAK1X,KAAL,CAAW0X,WAAX,CAAuBxT,KAA1D;AAAjB;AAAlC,cADF,EAEI+K,IAAI,CAAC,KAAKjP,KAAL,CAAW0X,WAAX,qCAAoD,KAAKtZ,MAAL,CAAYuT,UAAhE,CAAD,CAFR,CADF;AAMD;;AACDiL,kBAAQ,gBACT,2DAAC,oDAAD;AAAS,kBAAM,EAAE,KAAKxe,MAAtB;AAA8B,cAAE,EAAC,uBAAjC;AAAyD,qBAAS,EAAC,uBAAnE;AAA2F,uBAAW,EAAE,KAAK4B,KAAL,CAAWyX,WAAnH;AAAgI,eAAG,EAAE,aAAAlW,EAAE;AAAA,qBAAK,MAAI,CAAC6Y,OAAL,GAAe7Y,EAApB;AAAA;AAAvI,YADC;AAGAoB,oBAAU,gBACR,2DAAC,sDAAD;AAAW,kBAAM,EAAE,KAAKvE,MAAxB;AAAgC,qBAAS,EAAC;AAA1C,YADF;AAGA;;AAEF;AACEwe,kBAAQ,gBACT,2DAAC,oDAAD;AAAS,kBAAM,EAAE,KAAKxe,MAAtB;AAA8B,cAAE,EAAC,uBAAjC;AAAyD,qBAAS,EAAC,uBAAnE;AAA2F,uBAAW,EAAE,KAAK4B,KAAL,CAAWyX,WAAnH;AAAgI,eAAG,EAAE,aAAAlW,EAAE;AAAA,qBAAK,MAAI,CAAC6Y,OAAL,GAAe7Y,EAApB;AAAA;AAAvI,YADC;AAGAoB,oBAAU,gBACR,2DAAC,sDAAD;AAAW,kBAAM,EAAE,KAAKvE,MAAxB;AAAgC,qBAAS,EAAC;AAA1C,YADF;AAGAye,yBAAe,GAAG,IAAlB;AACA;AApDJ;;AAwDA,UAAIG,QAAQ,GAAG,EAAf;AACA,UAAIC,UAAU,GAAG,IAAjB;;AACA,UAAK,KAAK7e,MAAL,CAAY6X,OAAZ,CAAoB3R,IAApB,IAA4B,QAAjC,EAA4C;AAC1C3B,kBAAU,GAAG,IAAb;AACAia,gBAAQ,GAAG,IAAX;AACAC,uBAAe,GAAG,IAAlB;AACA,YAAIK,UAAU,GAAG,IAAjB;AACA,YAAI,KAAK9e,MAAL,CAAY+e,iBAAhB,EAAmCD,UAAU,gBAAG;AAAQ,iBAAO,EAAE,mBAAM;AAAEha,oBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,MAAI,CAACxP,MAAL,CAAY+e,iBAArC;AAAwD,WAAjF;AAAmF,mBAAS,EAAC,iBAA7F;AAA+G,eAAK,EAAE;AAACC,oBAAQ,EAAE,UAAX;AAAuBC,eAAG,EAAE,EAA5B;AAAgCC,iBAAK,EAAE;AAAvC;AAAtH,uCAAb;AACnCL,kBAAU,gBACR;AAAK,eAAK,EAAE;AAAEG,oBAAQ,EAAE,UAAZ;AAAwBC,eAAG,EAAE,CAA7B;AAAgCzJ,gBAAI,EAAE,CAAtC;AAAyC0J,iBAAK,EAAE,CAAhD;AAAmDC,kBAAM,EAAE,CAA3D;AAA8D1J,kBAAM,EAAE;AAAtE;AAAZ,WACGqJ,UADH,CADF;AAIA,YAAI,KAAK9e,MAAL,CAAY6X,OAAZ,CAAoB5C,KAAxB,EAA+B2J,QAAQ,CAAC3J,KAAT,GAAiB,KAAKjV,MAAL,CAAY6X,OAAZ,CAAoB5C,KAArC;AAC/B,YAAI,KAAKjV,MAAL,CAAY6X,OAAZ,CAAoBtC,MAAxB,EAAgCqJ,QAAQ,CAACrJ,MAAT,GAAkB,KAAKvV,MAAL,CAAY6X,OAAZ,CAAoBtC,MAAtC;AACjC;;AAED,0BACD;AAAK,UAAE,EAAE,KAAK1U,KAAd;AAAqB,iBAAS,8CAAuC,KAAKe,KAAL,CAAWwX,MAAlD,yBAAuE,KAAKxX,KAAL,CAAWyX,WAAlF,CAA9B;AAA+H,aAAK,EAAEuF,QAAtI;AAAgJ,WAAG,EAAE,aAAAzb,EAAE;AAAA,iBAAK,MAAI,CAACC,QAAL,GAAgBD,EAArB;AAAA;AAAvJ,SACMoB,UADN,EAEMia,QAFN,eAGK;AAAK,iBAAS,sDAA+C,KAAKxe,MAAL,CAAY6X,OAAZ,CAAoB3R,IAAnE;AAAd,sBACD,2DAAC,gDAAD;AAAK,UAAE,EAAE,KAAKrF,KAAL,GAAa,MAAtB;AAA8B,cAAM,kCAAO,KAAKb,MAAL,CAAYgE,GAAnB;AAAwBwK,eAAK,EAAE,KAAKxO,MAAL,CAAYwO,KAA3C;AAAkDC,mBAAS,EAAE,KAAKzO,MAAL,CAAYyO,SAAzE;AAAoF2Q,qBAAW,EAAE,KAAKpf,MAAL,CAAY6X,OAAZ,CAAoB3R,IAApB,IAA4B,QAA5B,GAAuC,KAAvC,GAA+C;AAAhJ,UAApC;AAA4L,WAAG,EAAE,aAAA/C,EAAE;AAAA,iBAAK,MAAI,CAACa,GAAL,GAAWb,EAAhB;AAAA;AAAnM,QADC,CAHL,EAMM0b,UANN,EAOMJ,eAPN,CADC;AAYD;;;;EAp1BsDpf,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBzD;AACA;AAEA;AAEA;;IAEqBggB,c;;;;;;;;;;;;;6BAEX;AAEN,UAAI9f,IAAI,GAAG,IAAX;AAEA,UAAI0Z,KAAK,GAAG,OAAO1Z,IAAI,CAACD,KAAL,CAAW2Z,KAAlB,IAA2B,WAA3B,GAAyC1Z,IAAI,CAACD,KAAL,CAAW2Z,KAApD,GAA4D1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,IAAoB,EAA5F;AAEA,UAAIqG,QAAQ,gBAAI;AAAI,iBAAS,EAAC;AAAd,SAA2B/f,IAAI,CAACS,MAAL,CAAYwC,KAAvC,QAAgDyW,KAAK,CAAClV,MAAtD,MAAhB;AAEA,0BACD;AAAK,UAAE,EAAExE,IAAI,CAACuB,EAAd;AAAkB,iBAAS,+BAAwBvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAAhD;AAA3B,sBAEK,2DAAC,wEAAD;AAAgB,cAAM,EAAEnN,IAAI,CAACS,MAA7B;AAAqC,qBAAa,EAAET,IAAI,CAACD,KAAL,CAAWigB,aAA/D;AAA8E,iBAAS,EAAC;AAAxF,QAFL,eAGK,2DAAC,mEAAD;AAAW,cAAM,oBAAOhgB,IAAI,CAACS,MAAL,CAAYwf,IAAnB,CAAjB;AAA4C,aAAK,EAAEvG,KAAnD;AAA0D,gBAAQ,EAAE,CAAC1Z,IAAI,CAACD,KAAL,CAAW4e,cAAhF;AAAgG,iBAAS,EAAC,2BAA1G;AAAsI,WAAG,EAAE,aAAA/a,EAAE;AAAA,iBAAI5D,IAAI,CAACkgB,MAAL,GAActc,EAAlB;AAAA;AAA7I,QAHL,EAKMmc,QALN,eAOK,2DAAC,mEAAD;AAAW,cAAM,EAAE/f,IAAI,CAACS,MAAxB;AAAgC,aAAK,EAAEiZ,KAAvC;AAA8C,iBAAS,EAAC;AAAxD,QAPL,CADC;AAaD;;;;EAvByCyG,uE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACP5C;AACA;AAEA;AACA;AACA;AACA;AAEA,a,CAEA;AACA;;;IAEqBC,O;;;;;AAEnB,mBAAYrgB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAChByX,aAAO,EAAE;AACP3R,YAAI,EAAE,MADC;AAEP0Z,eAAO,EAAE,CAFF;AAGPL,qBAAa,EAAE;AAHR,OADO;AAMhB5R,UAAI,EAAE;AACJ6K,sBAAc,EAAE,IADZ;AAEJ5K,uBAAe,EAAE;AAFb,OANU;AAUhBI,cAAQ,EAAE;AACRC,gBAAQ,EAAE,IADF;AAERE,iCAAyB,EAAE;AAFnB,OAVM;AAchBK,WAAK,EAAE;AAdS,KAApB;AAiBE,UAAKxO,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4CV,KAAK,CAACU,MAAN,IAAgB,EAA5D,CAAd;AACA,UAAKA,MAAL,CAAY0S,QAAZ,GAAuB,MAAK1S,MAAL,CAAY0S,QAAZ,IAAwB,2BAA2BU,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB,CAA5F,CAvBiB,CAwBjB;;AACA,QAAIlQ,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAArB,IAAwC,CAACvgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBqH,uBAAlE,EAA2F;AACzF,YAAK9f,MAAL,CAAYyY,OAAZ,CAAoBqH,uBAApB,GAA8CxgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAAnE;AACD;;AACD,QAAIvgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAArB,IAAwC,CAACvgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBsH,0BAAlE,EAA8F;AAC5F,YAAK/f,MAAL,CAAYyY,OAAZ,CAAoBsH,0BAApB,GAAiDzgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAAtE;AACD;;AAED,UAAKje,KAAL,GAAa;AACXoe,sBAAgB,EAAE,MAAKhgB,MAAL,CAAYigB,YADnB;AAEXzG,kBAAY,EAAE7W,SAFH;AAGX+Y,aAAO,EAAE/Y,SAHE;AAIXsW,WAAK,EAAE,EAJI;AAKXI,iBAAW,EAAE/Z,KAAK,CAAC+Z,WAAN,IAAqB;AALvB,KAAb;AAhCiB;AAwClB;;;;sCAEgBlY,S,EAAWC,S,EAAW;AAErC,UAAI7B,IAAI,GAAG,IAAX;AAEFuF,cAAQ,CAACwF,gBAAT,CAA0B,uBAA1B,EAAmD,UAAS6B,KAAT,EAAgB;AAC/D5M,YAAI,CAACgc,eAAL,CAAqBpP,KAAK,CAAC5B,MAA3B;AACD,OAFH;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD,UAAS6B,KAAT,EAAgB;AACnE5M,YAAI,CAAC+b,UAAL,CAAgBnP,KAAK,CAAC5B,MAAtB;AACD,OAFH;AAIC;;;sCAE0K;AAAA,4BAA7J0O,KAA6J;AAAA,UAA7JA,KAA6J,2BAArJ,KAAKrX,KAAL,CAAWqX,KAA0I;AAAA,gCAAnIgF,SAAmI;AAAA,UAAnIA,SAAmI,+BAAvH,KAAKrc,KAAL,CAAWoe,gBAA4G;AAAA,UAA1F9B,cAA0F,QAA1FA,cAA0F;AAAA,6BAA1EC,MAA0E;AAAA,UAA1EA,MAA0E,4BAAjE;AAAE1G,WAAG,EAAE,iBAAP;AAA0BC,WAAG,EAAE;AAA/B,OAAiE;AAAA,UAAb1M,SAAa,QAAbA,SAAa;AACzKiO,WAAK,GAAG,KAAKiH,IAAL,GAAY,KAAKA,IAAL,CAAUT,MAAV,CAAiBU,MAAjB,CAAwB;AAAElH,aAAK,EAALA,KAAF;AAASgF,iBAAS,EAATA,SAAT;AAAoBE,cAAM,EAANA;AAApB,OAAxB,CAAZ,GAAoE,EAA5E;AACA,WAAKlc,QAAL,CAAc;AAAEgX,aAAK,EAALA;AAAF,OAAd;AACD,K,CAED;;;;oCACgBtL,I,EAAM;AACpB,WAAK1L,QAAL,iCAAmB,KAAKL,KAAxB;AAA+B4X,oBAAY,EAAE7L,IAA7C;AAAmD+N,eAAO,EAAE;AAA5D;AACD;;;+BAEU/N,I,EAAM;AACf,WAAK1L,QAAL,iCAAmB,KAAKL,KAAxB;AAA+B8Z,eAAO,EAAE/N,IAAxC;AAA8C6L,oBAAY,EAAE;AAA5D;AACD;;;gDAE2BpV,C,EAAG;AAC7BA,OAAC,CAACS,eAAF;AACF,UAAIsH,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,2BAAvB,EAAoD;AAAElF,cAAM,EAAE;AAAV,OAApD,CAAZ;AACAzF,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;6BAEQ;AAAA;;AAEP,UAAI5M,IAAI,GAAG,IAAX;;AAEA,UAAIS,MAAM,qBAAOT,IAAI,CAACS,MAAZ,CAAV,CAJO,CAKP;;;AACA,UAAK,KAAKV,KAAL,CAAWqO,IAAX,IAAmB,KAAKrO,KAAL,CAAWqO,IAAX,CAAgB+F,SAAnC,IAAgD,KAAKpU,KAAL,CAAWqO,IAAX,CAAgB+F,SAAhB,CAA0BxN,IAA1E,KAAoF,KAAK5G,KAAL,CAAWqO,IAAX,CAAgB+F,SAAhB,CAA0BxN,IAA1B,IAAkC,MAAlC,IAA4C,KAAK5G,KAAL,CAAWqO,IAAX,CAAgB+F,SAAhB,CAA0BxN,IAA1B,IAAkC,UAAlK,CAAL,EAAsL;AACpLlG,cAAM,CAACwO,KAAP,GAAe,CAAC;AAAC,kBAAQ,MAAT;AAAgB,mBAAS,eAAzB;AAAyC,mBAAS,MAAlD;AAAyD,yBAAe,wBAAxE;AAAiG,6BAAmB,SAApH;AAA8H,uBAAa;AAA3I,SAAD,EAAqJ;AAAC,kBAAQ,UAAT;AAAoB,mBAAS,eAA7B;AAA6C,mBAAS,UAAtD;AAAiE,6BAAmB,SAApF;AAA8F,uBAAa;AAA3G,SAArJ,CAAf;AACAxO,cAAM,CAACyO,SAAP,GAAmB,gBAAnB;AACAzO,cAAM,CAAC6N,UAAP,GAAoB,IAApB;AACD,OAVM,CAYP;;;AACA,UAAItO,IAAI,CAACD,KAAL,CAAW8gB,WAAX,IAA0B,SAA9B,EAAyC;AACvC,4BACE,2DAAC,+DAAD;AAAa,gBAAM,EAAEpgB,MAArB;AAA6B,cAAI,EAAE,KAAKV,KAAL,CAAWqO,IAA9C;AAAoD,mBAAS,EAAEpO,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,0BAAvF;AAAmH,aAAG,EAAE,aAAAvJ,EAAE;AAAA,mBAAK,MAAI,CAACkd,WAAL,GAAmBld,EAAxB;AAAA;AAA1H,UADF;AAGD,OAjBM,CAmBP;;;AACA,UAAI5D,IAAI,CAACD,KAAL,CAAW8gB,WAAX,IAA0B,MAA9B,EAAsC;AACpC,4BACD,2DAAC,sDAAD;AAAU,gBAAM,EAAEpgB,MAAlB;AAA0B,cAAI,EAAE,KAAKV,KAAL,CAAWqO,IAA3C;AAAiD,mBAAS,EAAC,uBAA3D;AAAmF,aAAG,EAAE,aAAAxK,EAAE;AAAA,mBAAK,MAAI,CAACoa,QAAL,GAAgBpa,EAArB;AAAA;AAA1F,UADC;AAGD,OAxBM,CA0BP;;;AACA,UAAI8V,KAAK,GAAG1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAvB;AAEA,UAAIqH,aAAa,GAAG,EAApB;AACA,UAAIC,kBAAkB,GAAG,IAAzB;AACA,UAAIC,WAAW,GAAG,EAAlB;AACA,UAAIxV,SAAS,GAAG,IAAhB;AACA,UAAIkT,cAAc,GAAG,KAArB,CAjCO,CAmCP;;AACA,UAAI3e,IAAI,CAACqC,KAAL,CAAW8Z,OAAf,EAAwB;AACtB4E,qBAAa,GAAG,aAAhB;AACAE,mBAAW,GAAG,wBAAd;AACAxV,iBAAS,GAAG,CAAZ;AACAkT,sBAAc,GAAG,IAAjB;AACD,OAzCM,CA2CP;;;AACA,UAAI3e,IAAI,CAACqC,KAAL,CAAW4X,YAAf,EAA6B;AAC3B8G,qBAAa,GAAG,aAAhB;AACAE,mBAAW,GAAG,cAAd;AACAxV,iBAAS,GAAG,CAAZ;AACAkT,sBAAc,GAAG,IAAjB;AACD;;AAED,UAAI,CAACoC,aAAL,EAAoBA,aAAa,GAAG,eAAhB,CAnDb,CAqDP;;AACA,UAAI,CAAC/gB,IAAI,CAACqC,KAAL,CAAW8Z,OAAZ,IAAuB,CAACnc,IAAI,CAACqC,KAAL,CAAW4X,YAAvC,EAAqD;AACnDgH,mBAAW,aAAMxgB,MAAM,CAAC0Y,QAAb,6BAAwCnZ,IAAI,CAACqC,KAAL,CAAWqX,KAAX,IAAoB1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,CAAiBlV,MAArC,IAA+C,CAAvF,MAAX;AACD;;AAED,UAAIxE,IAAI,CAACqC,KAAL,CAAWyX,WAAX,IAA0B,QAA9B,EAAwC;AACtCmH,mBAAW,GAAG,qBAAd;AACD;;AAEDD,wBAAkB,gBAChB;AAAK,iBAAS,EAAC,qBAAf;AAAqC,eAAO,EAAG,iBAAAnc,CAAC;AAAA,iBAAI7E,IAAI,CAACkhB,2BAAL,CAAiCrc,CAAjC,CAAJ;AAAA;AAAhD,SACGoc,WADH,CADF;AAMA,UAAIhe,KAAK,GAAGxC,MAAM,CAAC0Y,QAAP,GAAkB,GAAlB,GAAwB4H,aAApC;AAEAtgB,YAAM,CAAC6X,OAAP,CAAe6I,yBAAf,GAA2C,IAA3C;AAEA,0BACD;AAAK,UAAE,EAAEnhB,IAAI,CAACD,KAAL,CAAWwB,EAApB;AAAwB,iBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,aAA3D;AAA0E,WAAG,EAAE,aAAAvJ,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAAjF,SACMod,kBADN,eAEE;AAAK,iBAAS,EAAC;AAAf,sBACK,2DAAC,oDAAD;AAAS,cAAM,EAAEvgB,MAAjB;AAAyB,oBAAY,EAAET,IAAI,CAACqC,KAAL,CAAW4X,YAAlD;AAAgE,wBAAgB,EAAEja,IAAI,CAACqC,KAAL,CAAW8Z;AAA7F,QADL,eAEE,2DAAC,2DAAD;AAAe,cAAM,EAAE1b,MAAvB;AAA+B,aAAK,EAAET,IAAI,CAACqC,KAAL,CAAWqX,KAAjD;AAAwD,iBAAS,EAAEjO,SAAnE;AAA8E,sBAAc,EAAEkT,cAA9F;AAA8G,aAAK,EAAE1b,KAArH;AAA4H,WAAG,EAAE,aAAAW,EAAE;AAAA,iBAAK5D,IAAI,CAAC2gB,IAAL,GAAY/c,EAAjB;AAAA;AAAnI,QAFF,CAFF,CADC;AAWD;;;;EAhKkC9B,4CAAK,CAACC,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACb3C;AACA;AACA;AAEA;;IAEqBqf,G;;;;;AAEnB,eAAYrhB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,UAAKc,aAAL,GAAqB;AACjBwgB,gBAAU,EAAE;AACVC,wBAAgB,EAAE,GADR;AAEVC,2BAAmB,EAAE;AAFX,OADK;AAKjBtS,WAAK,EAAE;AALU,KAArB;AAOA,UAAKxO,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgB,MAAKR,aAArB,EAAoC,MAAKJ,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd,CAZmB,CAcjB;;AACA,UAAKA,MAAL,CAAY6d,OAAZ,GAAsB,MAAK7d,MAAL,CAAY6d,OAAlC;AACA,UAAK7d,MAAL,CAAY+gB,iBAAZ,GAAgC,MAAK/gB,MAAL,CAAY+gB,iBAAZ,IAAiC,SAAjE;AAEA,UAAK9H,KAAL,GAAa,EAAb;AAEA,UAAKrX,KAAL,GAAa;AACXuU,aAAO,EAAE;AADE,KAAb;AApBiB;AAwBlB;;;;sCAEgBhV,S,EAAWC,S,EAAW;AAErC,iFAAwBD,SAAxB,EAAmCC,SAAnC;;AAEA,UAAI7B,IAAI,GAAG,IAAX;;AAEAA,UAAI,CAACyhB,8BAAL,GAAsC,UAAS7U,KAAT,EAAgB;AACpD5M,YAAI,CAAC0hB,wBAAL,CAA8B9U,KAAK,CAAC5B,MAApC;AACD,OAFD;;AAGFzF,cAAQ,CAACwF,gBAAT,CAA0B,+BAA1B,EAA2D/K,IAAI,CAACyhB,8BAAhE;;AAEEzhB,UAAI,CAAC2hB,2BAAL,GAAmC,UAAS/U,KAAT,EAAgB;AACjD5M,YAAI,CAAC0a,cAAL,CAAoB9N,KAAK,CAAC5B,MAA1B;AACD,OAFD;;AAGDzF,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD/K,IAAI,CAAC2hB,2BAA5D;AAED;;;2CAEuB;AACvBpc,cAAQ,CAACuK,mBAAT,CAA6B,+BAA7B,EAA8D9P,IAAI,CAACyhB,8BAAnE;AACElc,cAAQ,CAACuK,mBAAT,CAA6B,2BAA7B,EAA0D,KAAK6R,2BAA/D;AACD;;;4BAEOvT,I,EAAM;AACZ,UAAIpO,IAAI,GAAG,IAAX;AACAA,UAAI,CAAC0Z,KAAL,CAAWlT,IAAX,CAAgB4H,IAAhB,EAFY,CAGZ;;AACA,UAAIwT,QAAQ,GAAGxT,IAAI,IAAIpO,IAAI,CAACS,MAAL,CAAYyO,SAApB,GAAgCoC,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYyO,SAArB,EAApC,GAAwE,QAAvF;AACF,UAAIqC,OAAO,GAAGvR,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBuC,IAAlB,CAAuB,UAAA8H,KAAK;AAAA,eAAIsI,QAAQ,KAAMtI,KAAK,CAAC/X,EAAN,IAAYqgB,QAAZ,IAAwBtI,KAAK,CAAC/Y,IAAN,IAAcqhB,QAA5C,CAAZ;AAAA,OAA5B,CAAd;AACE,UAAI,CAACrQ,OAAL,EAAcA,OAAO,GAAG,EAAV;AACf,UAAIO,KAAK,GAAGP,OAAO,CAACO,KAAR,IAAiBP,OAAO,CAACK,eAAzB,IAA4C,SAAxD;AACC,UAAIiQ,OAAO,GAAOtQ,OAAO,CAACgI,OAAR,IAAmBhI,OAAO,CAACuQ,IAA/B,IAA2C;AAAEC,YAAI,mFAAmEjQ,KAAnE,eAAN;AAA2F4D,aAAK,EAAE,EAAlG;AAAsGM,cAAM,EAAE,EAA9G;AAAkHgM,cAAM,EAAE,CAAC,EAAD,EAAK,EAAL;AAA1H,OAAzD;AACF,UAAIF,IAAI,GAAGlE,CAAC,CAACqE,OAAF,CAAU;AAAEF,YAAI,EAAEF,OAAO,CAACE,IAAhB;AAAsB5U,iBAAS,EAAE,uBAAjC;AAA0D+U,gBAAQ,EAAEtE,CAAC,CAACuE,KAAF,CAAQN,OAAO,CAACnM,KAAhB,EAAuBmM,OAAO,CAAC7L,MAA/B,CAApE;AAA4GoM,kBAAU,EAAEP,OAAO,CAACG;AAAhI,OAAV,CAAX;AACEhiB,UAAI,CAACqiB,SAAL,CAAe;AAAEnK,WAAG,EAAE9J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAAP;AAAqCE,WAAG,EAAE/J,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,CAA1C;AAAwEtV,YAAI,EAAEyL,IAA9E;AAAoF0T,YAAI,EAAJA;AAApF,OAAf;AACD;;;sCAEiB;AAChB,UAAI9hB,IAAI,GAAG,IAAX;AACA,UAAI2Z,YAAY,GAAG3Z,IAAI,CAACyb,OAAL,CACd9E,MADc,CACN,UAAA+E,MAAM;AAAA,eAAIA,MAAM,CAAC4G,OAAP,IAAkB5G,MAAM,CAAC/Y,IAAzB,IAAiC3C,IAAI,CAACyE,GAAL,CAAS8d,SAAT,GAAqBC,QAArB,CAA8B9G,MAAM,CAAC+G,SAAP,EAA9B,CAArC;AAAA,OADA,EAEdhe,GAFc,CAET,UAAAiX,MAAM;AAAA,eAAIA,MAAM,CAAC/Y,IAAX;AAAA,OAFG,CAAnB;AAGA3C,UAAI,CAAC0C,QAAL,CAAc;AAAEiX,oBAAY,EAAZA;AAAF,OAAd;AACA,aAAOA,YAAP;AACD;;;wCAEmB3J,Q,EAAU;AAC5B,WAAKkK,gBAAL,GAAwBlK,QAAxB;;AACA,UAAI,KAAKkK,gBAAT,EAA2B;AACzB,YAAI,KAAKwI,sBAAT,EAAiC;AAC/B,eAAKC,YAAL,CAAkB,KAAKD,sBAAvB,EAA+C;AAAE1S,oBAAQ,EAARA;AAAF,WAA/C;AACD,SAFD,MAEO;AACP,cAAI8R,IAAI,GAAGlE,CAAC,CAACqE,OAAF,CAAU;AAAEF,gBAAI,EAAE,krCAAR;AAA4rC5U,qBAAS,EAAE,uBAAvsC;AAAguC+U,oBAAQ,EAAEtE,CAAC,CAACuE,KAAF,CAAQ,EAAR,EAAY,EAAZ,CAA1uC;AAA2vCC,sBAAU,EAAE,CAAC,EAAD,EAAK,EAAL;AAAvwC,WAAV,CAAX;AACE,eAAKM,sBAAL,GAA8B,KAAKL,SAAL,iCAAoBrS,QAApB;AAA8B8R,gBAAI,EAAJA,IAA9B;AAAoCc,wBAAY,EAAE;AAAlD,aAA9B;AACD;AACF,OAPD,MAOO;AACL,YAAI,KAAKF,sBAAT,EAAiC;AAC/B,eAAK/G,YAAL,CAAkB,KAAK+G,sBAAvB;AACD;;AACD,aAAKA,sBAAL,GAA8B,IAA9B;AACD;AACF;;;uCAEkBG,M,EAAQ;AACzB,kFAAyBA,MAAM,IAAM,KAAKpiB,MAAL,CAAY+gB,iBAAZ,IAAiC,SAAjC,IAA8C,KAAK/gB,MAAL,CAAY6d,OAAtE,IAAmF,KAAK7C,OAAjH;AACD;;;sCAEiC;AAAA,iCAApBqH,UAAoB;AAAA,UAApBA,UAAoB,gCAAT,KAAS;AACjC,UAAI9iB,IAAI,GAAG,IAAX;AACCA,UAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAACsb,MAAD,EAAY;AAC/B1b,YAAI,CAAC+iB,UAAL,CAAgBrH,MAAhB;AACD,OAFD,EAFgC,CAKhC;AACD;;;uCAE0B;AAAA,UAAbiB,SAAa,SAAbA,SAAa;AAC1B,UAAI3c,IAAI,GAAG,IAAX;AACC,UAAI2c,SAAS,IAAIA,SAAS,CAAC3M,QAA3B,EAAqChQ,IAAI,CAAC6b,kBAAL,CAAwB,CAAEc,SAAS,CAAC3M,QAAZ,CAAxB;AACrChQ,UAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAACsb,MAAD,EAAY;AAC/B,YAAI,EAAEiB,SAAS,IAAIA,SAAS,CAAC3M,QAAvB,IAAmC2M,SAAS,CAAC3M,QAAV,CAAmBkI,GAAnB,IAA0BwD,MAAM,CAACsH,OAAP,CAAe9K,GAA5E,IAAmFyE,SAAS,CAAC3M,QAAV,CAAmBmI,GAAnB,IAA0BuD,MAAM,CAACsH,OAAP,CAAe7K,GAA9H,CAAJ,EAAwI;AACtInY,cAAI,CAACijB,UAAL,CAAgBvH,MAAhB;AACD;AACF,OAJD;AAKD;;;uCAE0B;AAAA,UAAbiB,SAAa,SAAbA,SAAa;AACzB,UAAI3c,IAAI,GAAG,IAAX;AACAA,UAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAACsb,MAAD,EAAY;AAC/B,YAAIiB,SAAS,IAAIjB,MAAM,CAAC/Y,IAApB,IAA4B+Y,MAAM,CAAC/Y,IAAP,CAAYpB,EAAxC,IAA8Cob,SAAS,CAACpb,EAAV,IAAgBma,MAAM,CAAC/Y,IAAP,CAAYpB,EAA9E,EAAkF;AAChF,cAAIma,MAAM,CAAC/Y,IAAX,EAAiB+Y,MAAM,CAAC/Y,IAAP,CAAYugB,OAAZ,GAAsB,KAAtB;AAClB,SAFD,MAEO;AACL,cAAIxH,MAAM,CAAC/Y,IAAX,EAAiB+Y,MAAM,CAAC/Y,IAAP,CAAYugB,OAAZ,GAAsB,IAAtB;AACjB,cAAIC,aAAa,GAAGnjB,IAAI,CAACojB,kBAAL,IAA2BpjB,IAAI,CAACojB,kBAAL,CAAwBC,gBAAxB,CAAyC3H,MAAzC,CAA/C;AACA,cAAI4H,MAAM,GAAGH,aAAa,IAAIA,aAAa,CAACI,kBAA/B,IAAqDJ,aAAa,CAACI,kBAAd,GAAmC/R,IAAnC,CAAyC,UAAAgS,CAAC;AAAA,mBAAIA,CAAC,CAAC7gB,IAAF,IAAU6gB,CAAC,CAAC7gB,IAAF,CAAOugB,OAAP,KAAmB,KAAjC;AAAA,WAA1C,CAAlE;;AACA,cAAI,CAACI,MAAD,IAAWH,aAAf,EAA8B;AAC5BA,yBAAa,CAACM,UAAd,CAAyB,GAAzB;AACD;AACF;AACF,OAXD;AAYD,K,CAED;;;;mCACe;AACb,UAAIzjB,IAAI,GAAG,IAAX;AACAA,UAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAACsb,MAAD,EAAY;AAC/B,YAAIyH,aAAa,GAAGnjB,IAAI,CAACojB,kBAAL,IAA2BpjB,IAAI,CAACojB,kBAAL,CAAwBC,gBAAxB,CAAyC3H,MAAzC,CAA/C;;AACA,YAAIyH,aAAa,IAAIzH,MAAM,CAAC4G,OAA5B,EAAqC;AACnC,cAAIgB,MAAM,GAAGH,aAAa,IAAIA,aAAa,CAACI,kBAA/B,IAAqDJ,aAAa,CAACI,kBAAd,GAAmC/R,IAAnC,CAAyC,UAAAgS,CAAC;AAAA,mBAAIA,CAAC,CAAC7gB,IAAF,IAAU6gB,CAAC,CAAC7gB,IAAF,CAAOugB,OAAP,KAAmB,KAAjC;AAAA,WAA1C,CAAlE;AACAC,uBAAa,CAACM,UAAd,CAAyB,CAACH,MAAD,IAAW5H,MAAM,CAAC/Y,IAAlB,IAA0B+Y,MAAM,CAAC/Y,IAAP,CAAYugB,OAAtC,GAAgD,GAAhD,GAAsD,CAA/E;AACD;AACF,OAND;AAOD;;;uCAEkB;AACjB,UAAIljB,IAAI,GAAG,IAAX,CADiB,CAEjB;;AACAA,UAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAACsb,MAAD,EAAY;AAC/B,YAAIA,MAAM,CAAC/Y,IAAX,EAAiB+Y,MAAM,CAAC/Y,IAAP,CAAYugB,OAAZ,GAAsB,KAAtB;AACjB,YAAIC,aAAa,GAAGnjB,IAAI,CAACojB,kBAAL,IAA2BpjB,IAAI,CAACojB,kBAAL,CAAwBC,gBAAxB,CAAyC3H,MAAzC,CAA/C;;AACE,YAAIyH,aAAJ,EAAmB;AACjBA,uBAAa,CAACM,UAAd,CAAyB,CAAzB;AACD;AACJ,OAND;AAOD;;;+CAE0B;AACzB,WAAK3E,YAAL;AACD;;;mCAEcnI,M,EAAQ;AACrB;AACA,UAAI3W,IAAI,GAAG,IAAX;AACA,UAAI4W,OAAO,GAAG5W,IAAI,CAACqC,KAAL,CAAWuU,OAAzB;AACAA,aAAO,CAACD,MAAM,CAAC+M,SAAR,CAAP,GAA4B/M,MAA5B;AACA3W,UAAI,CAAC0C,QAAL,CAAc;AAAEkU,eAAO,EAAPA;AAAF,OAAd,EAA2B,YAAM;AAChC5W,YAAI,CAAC2jB,SAAL,CAAe,UAASjI,MAAT,EAAiB;AAC7B,cAAIkI,MAAM,GAAG,IAAb;AACA1jB,gBAAM,CAACC,IAAP,CAAYH,IAAI,CAACqC,KAAL,CAAWuU,OAAvB,EAAgCxW,OAAhC,CAAwC,UAACsjB,SAAD,EAAe;AACrD,gBAAI/M,MAAM,GAAG3W,IAAI,CAACqC,KAAL,CAAWuU,OAAX,CAAmB8M,SAAnB,CAAb;;AACF,gBAAI/M,MAAM,CAACnW,KAAP,IAAgBmW,MAAM,CAACnW,KAAP,KAAiB,GAArC,EAA0C;AACzC,kBAAIkb,MAAM,CAAC/Y,IAAP,IAAe,CAAC2O,IAAI,uBAAgBqF,MAAM,CAAC+M,SAAvB,EAApB,IAA2DpS,IAAI,uBAAgBqF,MAAM,CAAC+M,SAAvB,EAAJ,IAA2C/M,MAAM,CAACnW,KAAjH,EAAwHojB,MAAM,GAAG,KAAT;AACxH;AACA,WALD;AAMA,iBAAOA,MAAP;AACF,SATD;AAUA,OAXD;AAYD;;;;EA7K8BC,wD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNjC;AACA;AAEA;AACA;AAEA,a,CAEA;AACA;;;IAEqBC,O;;;;;AAEnB,mBAAY/jB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAChByX,aAAO,EAAE;AACP3R,YAAI,EAAC;AADE,OADO;AAIhB5F,SAAG,EAAE,EAJW;AAMhBmY,aAAO,EAAE;AACPqH,+BAAuB,EAAE,kcADlB;AAEPC,kCAA0B,EAAE,kcAFrB;AAGPuD,mCAA2B,EAAE,mGAHtB;AAIPC,qCAA6B,EAAE,4EAJxB;AAKPC,sCAA8B,EAAE,kJALzB;AAMPC,wCAAgC,EAAE,iFAN3B;AAOPC,iCAAyB,EAAE,mDAPpB;AAQPC,oCAA4B,EAAE,wIARvB;AASPC,+BAAuB,EAAE;AATlB,OANO;AAiBhBjW,UAAI,EAAE;AACJ6K,sBAAc,EAAE,IADZ;AAEJ5K,uBAAe,EAAE;AAFb;AAjBU,KAApB;AAsBE,UAAK5N,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4CV,KAAK,CAACU,MAAN,IAAgB,EAA5D,CAAd;AACA,UAAKA,MAAL,CAAY0S,QAAZ,GAAuB,MAAK1S,MAAL,CAAY0S,QAAZ,IAAwB,2BAA2BU,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB,CAA5F,CA5BiB,CA8BjB;;AACAlQ,SAAK,CAACU,MAAN,CAAayY,OAAb,GAAuBnZ,KAAK,CAACU,MAAN,CAAayY,OAAb,IAAwB,EAA/C;;AACA,QAAInZ,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAArB,IAAwC,CAACvgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBqH,uBAAlE,EAA2F;AACzF,YAAK9f,MAAL,CAAYyY,OAAZ,CAAoBqH,uBAApB,GAA8CxgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAAnE;AACD;;AACD,QAAIvgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAArB,IAAwC,CAACvgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBsH,0BAAlE,EAA8F;AAC5F,YAAK/f,MAAL,CAAYyY,OAAZ,CAAoBsH,0BAApB,GAAiDzgB,KAAK,CAACU,MAAN,CAAayY,OAAb,CAAqBoH,eAAtE;AACD,KArCgB,CAuCjB;;;AACA,UAAKje,KAAL,GAAa,EAAb;AAxCiB;AA2ClB;;;;8CAEyBwC,C,EAAGuJ,I,EAAM;AACnC,UAAIxB,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,4BAAvB,EAAqD;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAArD,CAAZ;AACA7I,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;yCAEoB/H,C,EAAGuJ,I,EAAM;AAC9B,UAAIxB,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,oBAAvB,EAA6C;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAA7C,CAAZ;AACA7I,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;8CAEyB/H,C,EAAGuJ,I,EAAM;AACnC,UAAIxB,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,yBAAvB,EAAkD;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAAlD,CAAZ;AACA7I,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;yCAEoB/H,C,EAAGyf,I,EAAM;AAC5Bzf,OAAC,CAACS,eAAF;AACA,UAAIsH,KAAJ;AACA,UAAI0X,IAAI,IAAI,MAAZ,EAAwB1X,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,uBAAvB,EAAoD;AAAElF,cAAM,EAAE;AAAV,OAApD,CAAR;AACxB,UAAIsZ,IAAI,IAAI,UAAZ,EAAwB1X,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,2BAAvB,EAAoD;AAAElF,cAAM,EAAE;AAAV,OAApD,CAAR;AAC1BzF,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;6BAEQ;AAAA;;AAEP,UAAI5M,IAAI,GAAG,IAAX,CAFO,CAIP;;AACA,UAAKA,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoB3R,IAApB,IAA4B,eAAjC,EAAkD;AAEhD,YAAI4d,WAAW,GAAG,KAAK9jB,MAAL,CAAYM,GAAZ,CAAgBG,cAAhB,GAAiC,KAAKT,MAAL,CAAYyY,OAAZ,CAAoBiL,yBAArD,GAAiF,KAAK1jB,MAAL,CAAYyY,OAAZ,CAAoBkL,4BAAvH;AAEA,YAAII,UAAS,GAAG,IAAhB;AAAsB,YAAIC,YAAW,GAAG,IAAlB;AAAwB,YAAIC,UAAS,GAAG,IAAhB;;AAC9C,YAAI,KAAKjkB,MAAL,CAAYM,GAAZ,CAAgBG,cAApB,EAAoC;AAClC,cAAI,KAAKT,MAAL,CAAY2N,IAAZ,CAAiB6K,cAArB,EAAqC;AACnCuL,sBAAS,gBACP;AAAQ,uBAAS,EAAC,4BAAlB;AAA+C,qBAAO,EAAE,iBAAC5X,KAAD,EAAW;AAAE,sBAAI,CAACmO,qBAAL,CAA2BnO,KAA3B;;AAAmC,sBAAI,CAACiO,cAAL,CAAoBjO,KAApB;AAA2B,eAAnI;AAAsI,iBAAG,EAAE,aAAAhJ,EAAE;AAAA,uBAAK5D,IAAI,CAAC2kB,aAAL,GAAqB/gB,EAA1B;AAAA;AAA7I,sCADF;AAGD;AACF,SAND,MAMO;AACL,cAAI,KAAKnD,MAAL,CAAY2N,IAAZ,CAAiB6K,cAArB,EAAqC;AACnCwL,wBAAW,gBACT;AAAQ,qBAAO,EAAE,mBAAM;AAAElf,wBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,2BAA2B4D,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB,CAAtE;AAAgG,eAAzH;AAA2H,uBAAS,EAAC;AAArI,0BADF;AAGAyU,sBAAS,GAAG,4GAAZ;AACD;AACF;;AAEDH,mBAAW,GAAGA,WAAW,CAACrf,OAAZ,CAAoB,cAApB,EAAoC,KAAKnF,KAAL,CAAWma,gBAAX,CAA4BlC,OAA5B,IAAuC,EAA3E,CAAd;AACAuM,mBAAW,GAAGA,WAAW,CAACrf,OAAZ,CAAoB,gBAApB,EAAsCwf,UAAtC,CAAd;AAEAH,mBAAW,GAAGjU,uDAAqB,CAACsU,aAAtB,CAAoC;AAAE7C,cAAI,EAAEwC,WAAR;AAAqBC,mBAAS,EAATA,UAArB;AAAgCC,qBAAW,EAAXA;AAAhC,SAApC,CAAd;AAEA,4BACF;AAAK,mBAAS,EAAC;AAAf,WACEF,WADF,CADE;AAMD,OApCM,CAsCP;;;AAEA,UAAIM,oBAAoB,GAAG,IAA3B;AACA,UAAIC,gBAAgB,GAAG,IAAvB;AACA,UAAI/D,aAAa,GAAG,EAApB;AACA,UAAIC,kBAAkB,GAAG,IAAzB;AACA,UAAIC,WAAW,GAAG,EAAlB,CA5CO,CA8CP;;AACA,UAAIuD,SAAS,GAAG,IAAhB;AAAsB,UAAIC,WAAW,GAAG,IAAlB;AAAwB,UAAIC,SAAS,GAAG,IAAhB;;AAE9C,UAAI1kB,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiB6K,cAArB,EAAqC;AACnC,YAAIjZ,IAAI,CAACS,MAAL,CAAYwO,KAAZ,IAAqBjP,IAAI,CAACS,MAAL,CAAYyO,SAAZ,IAAyB,QAAlD,EAA4D;AAC1DsV,mBAAS,gBACP;AAAM,qBAAS,EAAC;AAAhB,aACGxkB,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBxK,GAAlB,CACC,UAACkC,IAAD,EAAOhC,CAAP,EAAa;AACX,gBAAI4M,OAAO,GAAG5K,IAAd;;AACA,gBAAI,CAAC4K,OAAO,CAACuG,IAAT,IAAmBvG,OAAO,CAACuG,IAAR,CAAaC,YAAb,IAA6BzH,uDAAqB,CAACnP,IAAtB,CAA2B0W,OAA3B,CAAoC7X,IAAI,CAACS,MAAL,CAAYU,IAAhD,EAAsDoQ,OAAO,CAACuG,IAAR,CAAaC,YAAnE,CAApD,EAAyI;AACvI,kBAAIgN,YAAY,GAAGxT,OAAO,gBAAG;AAAK,yBAAS,EAAC,6BAAf;AAA6C,uCAAuB,EAAE;AAAE7N,wBAAM,EAAE6N,OAAO,CAACkI,UAAR,IAAsBlI,OAAO,CAACkI,UAAR,CAAmBsI,IAAzC,IAAiD;AAA3D;AAAtE,gBAAH,GAAmJ,IAA7K;AACA,kCAAQ;AAAQ,yBAAS,EAAE,iCAAkCxQ,OAAO,IAAIA,OAAO,CAACuG,IAAnB,IAA2BvG,OAAO,CAACuG,IAAR,CAAaC,YAAxC,0CAAuFxG,OAAO,CAACuG,IAAR,CAAaC,YAApG,IAAqH,EAAvJ,CAAnB;AAAgL,uBAAO,EAAE,iBAACnL,KAAD;AAAA,yBAAW5M,IAAI,CAACglB,oBAAL,CAA0BpY,KAA1B,EAAiC;AAACyE,0BAAM,EAAEE,OAAO,CAAChQ,EAAR,IAAcgQ,OAAO,CAAChR;AAA/B,mBAAjC,CAAX;AAAA,iBAAzL;AAA4Q,mBAAG,uBAAgBoE,CAAhB;AAA/Q,iBAAqSogB,YAArS,EAAoTxT,OAAO,IAAIA,OAAO,CAAC0T,WAAnB,IAAkC,sBAAtV,CAAR;AACD,aAHD,MAGO,OAAO,IAAP;AACR,WAPF,CADH,CADF;AAaD,SAdD,MAcO;AACLT,mBAAS,gBACP;AAAQ,qBAAS,EAAC,4BAAlB;AAA+C,mBAAO,EAAE,iBAAC5X,KAAD;AAAA,qBAAW5M,IAAI,CAACglB,oBAAL,CAA0BpY,KAA1B,CAAX;AAAA;AAAxD,oCADF;AAGD;;AACD6X,mBAAW,gBACT;AAAQ,iBAAO,EAAE,mBAAM;AAAElf,oBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyB,MAAI,CAACxP,MAAL,CAAY0S,QAArC;AAA+C,WAAxE;AAA0E,mBAAS,EAAC;AAApF,sBADF;AAGAuR,iBAAS,mDAA4C,KAAKjkB,MAAL,CAAY0S,QAAxD,MAAT;AACD,OAzEM,CA2EP;;;AACA,UAAInT,IAAI,CAACD,KAAL,CAAWma,gBAAf,EAAiC;AAC/B,YAAIqK,YAAW,GAAG,IAAlB;;AACA,YAAIvkB,IAAI,CAACD,KAAL,CAAWma,gBAAX,CAA4BmE,gBAAhC,EAAkD;AAChD,cAAIre,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBG,cAApB,EAAoC;AAClCqjB,wBAAW,GAAGvkB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoB6K,2BAAlC;AACD,WAFD,MAEO;AACLQ,wBAAW,GAAGvkB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoB+K,8BAAlC;AACD;AACF,SAND,MAMO;AACL,cAAIjkB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBG,cAApB,EAAoC;AAClCqjB,wBAAW,GAAGvkB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoB8K,6BAAlC;AACD,WAFD,MAEO;AACLO,wBAAW,GAAGvkB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoBgL,gCAAlC;AACD;AACF;;AAEDK,oBAAW,GAAGA,YAAW,CAACrf,OAAZ,CAAoB,cAApB,EAAoClF,IAAI,CAACD,KAAL,CAAWma,gBAAX,CAA4BlC,OAA5B,IAAuC,EAA3E,CAAd;AACAuM,oBAAW,GAAGA,YAAW,CAACrf,OAAZ,CAAoB,gBAApB,EAAsCwf,SAAtC,CAAd;AACAH,oBAAW,GAAGjU,uDAAqB,CAACsU,aAAtB,CAAoC;AAAE7C,cAAI,EAAEwC,YAAR;AAAqBC,mBAAS,EAATA,SAArB;AAAgCC,qBAAW,EAAXA;AAAhC,SAApC,CAAd;AAEAI,4BAAoB,gBACrB;AAAK,mBAAS,EAAC;AAAf,wBACK;AAAQ,mBAAS,EAAC,wBAAlB;AAA2C,iBAAO,EAAE,iBAACjY,KAAD;AAAA,mBAAW5M,IAAI,CAACklB,oBAAL,CAA0BtY,KAA1B,EAAiC,UAAjC,CAAX;AAAA,WAApD;AAA6G,aAAG,EAAE,aAAAhJ,EAAE;AAAA,mBAAK5D,IAAI,CAACmlB,WAAL,GAAmBvhB,EAAxB;AAAA;AAApH,UADL,EAEM2gB,YAFN,CADC;AAQAxD,qBAAa,GAAG,aAAhB;AACAE,mBAAW,GAAG,wBAAd;AACD,OA1GM,CA4GP;;;AACA,UAAIjhB,IAAI,CAACD,KAAL,CAAWka,YAAf,EAA6B;AAC3B,YAAI7L,IAAI,GAAGpO,IAAI,CAACD,KAAL,CAAWka,YAAtB;AACA,YAAImL,aAAJ;;AACA,YAAI;AACFA,uBAAa,GAAG9T,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYyO,SAArB,EAApB;AACD,SAFD,CAEE,OAAOtO,GAAP,EAAY;AACZwkB,uBAAa,GAAG,EAAhB;AACD;;AACD,YAAI7T,OAAO,GAAGvR,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBuC,IAAlB,CAAuB,UAAA8H,KAAK;AAAA,iBAAIA,KAAK,CAAC/Y,IAAN,IAAc6kB,aAAd,IAA+B9L,KAAK,CAAC/X,EAAN,IAAY6jB,aAA/C;AAAA,SAA5B,CAAd;;AACA,YAAI,CAAC7T,OAAD,IAAY,CAACA,OAAO,CAACiI,QAAzB,EAAmC;AAAEjI,iBAAO,GAAG;AAAEiI,oBAAQ,EAAE;AAAEuI,kBAAI,EAAE;AAAR;AAAZ,WAAV;AAAuC,SATjD,CASkD;;;AAC7E,YAAIsD,aAAa,GAAG,IAApB;;AACA,YAAI,KAAK5kB,MAAL,CAAY2N,IAAZ,CAAiBC,eAArB,EAAsC;AACpCgX,uBAAa,gBACX;AAAK,qBAAS,EAAC;AAAf,aACGjX,IAAI,CAACmE,GAAL,IAAY,CADf,CADF;AAID;;AACD,YAAI+S,YAAY,GAAG,IAAnB;;AACA,YAAI,KAAK7kB,MAAL,CAAYgO,QAAZ,CAAqBC,QAArB,IAAiC,CAAC,KAAKjO,MAAL,CAAYgO,QAAZ,CAAqBG,yBAArB,CAA+CvC,KAA/C,CAAqD,IAAI4G,MAAJ,oBAAuB7E,IAAI,CAAC7M,EAA5B,eAArD,CAAtC,EAAwI;AACtI+jB,sBAAY,gBACV;AAAK,qBAAS,EAAC;AAAf,aACGlX,IAAI,CAACgC,QAAL,IAAiB,CADpB,CADF;AAID;;AACD0U,wBAAgB,gBACjB;AAAK,mBAAS,EAAC,2BAAf;AAA2C,iBAAO,EAAE,iBAAClY,KAAD;AAAA,mBAAW5M,IAAI,CAACulB,yBAAL,CAA+B3Y,KAA/B,EAAsC5M,IAAI,CAACD,KAAL,CAAWka,YAAjD,CAAX;AAAA;AAApD,wBACK;AAAQ,mBAAS,EAAC,wBAAlB;AAA2C,iBAAO,EAAE,iBAACrN,KAAD;AAAA,mBAAW5M,IAAI,CAACklB,oBAAL,CAA0BtY,KAA1B,EAAiC,MAAjC,CAAX;AAAA,WAApD;AAAyG,aAAG,EAAE,aAAAhJ,EAAE;AAAA,mBAAK5D,IAAI,CAACmlB,WAAL,GAAmBvhB,EAAxB;AAAA;AAAhH,UADL,eAEK,sFAFL,eAGK;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAK,mBAAS,EAAC;AAAf,wBACE,2DAAC,6DAAD;AAAwB,gBAAM,EAAE,EAAhC;AAAoC,cAAI,EAAEwK,IAA1C;AAAgD,aAAG,EAAE,WAAWA,IAAI,CAAC7M;AAArE,UADF,CADF,eAIE;AAAK,mBAAS,EAAC;AAAf,wBACE,uEAAM+P,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYuT,UAArB,EAAV,CADF,eAEE;AAAK,mBAAS,EAAC;AAAf,WACI1C,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYiX,YAArB,EADR,CAFF,eAKE;AAAK,mBAAS,EAAC;AAAf,WACG2N,aADH,EAEGC,YAFH,eAGE;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAK,mBAAS,EAAC,kBAAf;AAAkC,iCAAuB,EAAE;AAAE5hB,kBAAM,EAAE6N,OAAO,CAACiI,QAAR,CAAiBuI;AAA3B;AAA3D,UADF,CAHF,CALF,CAJF,eAiBE;AAAK,mBAAS,EAAC;AAAf,UAjBF,CAHL,CADC;AAyBAhB,qBAAa,GAAG,aAAhB;AACAE,mBAAW,GAAG,cAAd;AACD;;AAED,UAAIuE,gBAAgB,GAAG,IAAvB;;AACA,UAAI,CAACX,oBAAD,IAAyB,CAACC,gBAA9B,EAAgD;AAC9C,YAAIxE,eAAe,GAAGtgB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoBsH,0BAA1C;AACA,YAAIxgB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBG,cAApB,EAAoCof,eAAe,GAAGtgB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoBqH,uBAAtC;AACpCD,uBAAe,GAAGA,eAAe,CAACpb,OAAhB,CAAwB,gBAAxB,EAA0Cwf,SAA1C,CAAlB;AACApE,uBAAe,GAAGhQ,uDAAqB,CAACsU,aAAtB,CAAoC;AAAE7C,cAAI,EAAEzB,eAAR;AAAyBkE,mBAAS,EAATA,SAAzB;AAAoCC,qBAAW,EAAXA;AAApC,SAApC,CAAlB;AACAe,wBAAgB,gBACjB;AAAK,mBAAS,qCAA+BxlB,IAAI,CAACS,MAAL,CAAYyY,OAAZ,CAAoBmL,uBAApB,GAA8C,wBAA9C,GAAyE,EAAxG;AAAd,WAA8H/D,eAA9H,CADC;AAGAW,mBAAW,aAAMjhB,IAAI,CAACS,MAAL,CAAY0Y,QAAlB,6BAA6CnZ,IAAI,CAACqC,KAAL,CAAWqX,KAAX,IAAoB1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,CAAiBlV,MAArC,IAA+C,CAA5F,MAAX;AAED,OA7KM,CA+KP;;;AACA,0BACD;AAAK,iBAAS,EAAC;AAAf,SACMghB,gBADN,EAEMX,oBAFN,EAGMC,gBAHN,CADC;AASD;;;;EA/PkChjB,4CAAK,CAACC,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACX3C;AAEA;;IAEqB0jB,M;;;;;AAEnB,kBAAY1lB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG,EAApB;AAEA,UAAKJ,MAAL,GAAcP,MAAM,CAACwlB,MAAP,CAAc7kB,aAAd,EAA6B,MAAKd,KAAL,CAAWU,MAAX,IAAqB,EAAlD,CAAd;AAEE,UAAKA,MAAL,CAAY2Y,gBAAZ,GAA+B,MAAK3Y,MAAL,CAAY2Y,gBAAZ,IAAgC,MAAKuM,SAAL,CAAeriB,IAAf,+BAA/D;AAGA,UAAKjB,KAAL,GAAa;AACdya,iBAAW,EAAE,EADC;AAEdG,kBAAY,EAAE;AAAEC,iBAAS,EAAE,EAAb;AAAiBxD,aAAK,EAAE;AAAxB,OAFA;AAGdkM,qBAAe,EAAE;AAHH,KAAb;AAXiB;AAiBlB;;;;sCAEgBhkB,S,EAAWC,S,EAAW,CACvC;;;iCAEarB,K,EAAO;AAElB,WAAKqlB,iBAAL,CAAuBrlB,KAAvB;;AAEF,UAAIA,KAAK,CAACgE,MAAN,IAAe,CAAnB,EAAsB;AACrB,aAAK/D,MAAL,CAAY2Y,gBAAZ,CAA6B5Y,KAA7B,EAAoC,KAAKslB,kBAAL,CAAwBxiB,IAAxB,CAA6B,IAA7B,CAApC;AACA,OANmB,CAQpB;AACA;AACA;;AAEC;;;sCAEiBsJ,K,EAAO;AACzB,UAAI5M,IAAI,GAAG,IAAX;;AACE,UAAIA,IAAI,CAACqC,KAAL,CAAWya,WAAf,EAA4B;AAC1B9c,YAAI,CAAC0C,QAAL,CAAc;AAAEoa,qBAAW,EAAE;AAAf,SAAd,EAAmC,YAAM;AACvC9c,cAAI,CAAC+lB,UAAL,CAAgBC,KAAhB;AACD,SAFD;AAGD;AACF;;;sCAEiBxlB,K,EAAO;AACvB,WAAKkC,QAAL,CAAc;AACfoa,mBAAW,EAAEtc,KADE;AAEfolB,uBAAe,EAAEplB,KAAK,CAACgE,MAAN,IAAe,CAAf,GAAmB,IAAnB,GAA0B;AAF5B,OAAd;AAID;;;sCAEiB;AAChB,WAAK9B,QAAL,CAAc;AAAEkjB,uBAAe,EAAE,KAAKvjB,KAAL,CAAWya,WAAX,CAAuBtY,MAAvB,IAAiC,CAAjC,GAAqC,IAArC,GAA4C;AAA/D,OAAd;AACF;;;sCAEiB;AACjB,UAAIxE,IAAI,GAAG,IAAX,CADiB,CAEjB;;AACAgf,gBAAU,CAAC,YAAU;AAAChf,YAAI,CAAC0C,QAAL,CAAc;AAAEkjB,yBAAe,EAAE;AAAnB,SAAd;AAA2C,OAAvD,EAAyD,GAAzD,CAAV;AACA;;;uCAEkB9I,W,EAAaG,Y,EAAc;AAC7C;AACE,WAAKva,QAAL,iCAAkB,KAAKL,KAAvB;AAA8B4a,oBAAY,EAAZA,YAA9B;AAA4C2I,uBAAe,EAAE9I,WAAW,CAACtY,MAAZ,IAAsB,CAAtB,GAA0B,IAA1B,GAAiC;AAA9F;AACF;;;8BAEShE,K,EAAO;AAChByK,aAAO,CAACC,GAAR,CAAY,6BAAZ;AACA;;;sCAEkBmH,I,EAAMzF,K,EAAOgQ,I,EAAM;AACnC,WAAKiJ,iBAAL,CAAuBxT,IAAvB;AACA,UAAIuK,IAAJ,EAAUA,IAAI,CAAChQ,KAAD,CAAJ;AACX;;;6BAEO;AAEN,UAAI5M,IAAI,GAAG,IAAX;AAEF,UAAIimB,eAAe,GAAG,IAAtB;;AACA,UAAIjmB,IAAI,CAACqC,KAAL,CAAWujB,eAAf,EAAgC;AAC/BK,uBAAe,gBACd;AAAK,mBAAS,EAAC,wBAAf;AAAwC,aAAG,EAAE,aAAAriB,EAAE;AAAA,mBAAK5D,IAAI,CAACkmB,WAAL,GAAmBtiB,EAAxB;AAAA;AAA/C,wBAEQ5D,IAAI,CAACqC,KAAL,CAAW4a,YAAX,CAAwBC,SAAxB,CAAkCzY,GAAlC,CAAsC,UAACmf,MAAD,EAASjf,CAAT,EAAe;AAC3D,cAAI0N,IAAI,GAAGuR,MAAM,CAACvR,IAAP,CAAYnN,OAAZ,CAAoB,IAAI+N,MAAJ,CAAWjT,IAAI,CAACqC,KAAL,CAAWya,WAAtB,EAAmC,IAAnC,CAApB,EAA8D,UAACqJ,EAAD;AAAA,mBAAQ,aAAaA,EAAb,GAAkB,WAA1B;AAAA,WAA9D,CAAX;AACM,8BAAO;AAAK,qBAAS,EAAC,kDAAf;AAAkE,mBAAO,EAAG,iBAAAvZ,KAAK;AAAA,qBAAI5M,IAAI,CAAComB,iBAAL,CAAuBxC,MAAM,CAACvR,IAA9B,EAAoCzF,KAApC,EAA2CgX,MAAM,CAACvG,OAAlD,CAAJ;AAAA,aAAjF;AAAkJ,eAAG,EAAE,mBAAmB1Y,CAA1K;AAA6K,mCAAuB,EAAE;AAACjB,oBAAM,EAAE2O;AAAT;AAAtM,YAAP;AACD,SAHC,CAFR,eAMC;AAAK,mBAAS,EAAC;AAAf,UAND,EAOG,KAAK5R,MAAL,CAAYwC,KAPf,OAQQjD,IAAI,CAACqC,KAAL,CAAW4a,YAAX,CAAwBvD,KAAxB,CAA8BjV,GAA9B,CAAkC,UAACmf,MAAD,EAASjf,CAAT,EAAe;AACvD,cAAI0N,IAAI,GAAGuR,MAAM,CAACvR,IAAP,CAAYnN,OAAZ,CAAoB,IAAI+N,MAAJ,CAAWjT,IAAI,CAACqC,KAAL,CAAWya,WAAtB,EAAmC,IAAnC,CAApB,EAA8D,UAACqJ,EAAD;AAAA,mBAAQ,aAAaA,EAAb,GAAkB,WAA1B;AAAA,WAA9D,CAAX;AACM,8BAAO;AAAK,qBAAS,EAAC,kDAAf;AAAkE,mBAAO,EAAG,iBAAAvZ,KAAK;AAAA,qBAAI5M,IAAI,CAAComB,iBAAL,CAAuBxC,MAAM,CAACvR,IAA9B,EAAoCzF,KAApC,EAA2CgX,MAAM,CAACvG,OAAlD,CAAJ;AAAA,aAAjF;AAAkJ,eAAG,EAAE,mBAAmB1Y,CAA1K;AAA6K,mCAAuB,EAAE;AAACjB,oBAAM,EAAE2O;AAAT;AAAtM,YAAP;AACD,SAHC,CARR,CADD;AAeA;;AAEC,0BACD;AAAK,UAAE,EAAErS,IAAI,CAACuB,EAAd;AAAkB,iBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,YAArD;AAAmE,WAAG,EAAE,aAAAvJ,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAA1E,SAEEqiB,eAFF,eAGC;AAAO,YAAI,EAAC,MAAZ;AAAmB,aAAK,EAAE,KAAK5jB,KAAL,CAAWya,WAArC;AAAkD,mBAAW,EAAC,mBAA9D;AAAkF,gBAAQ,EAAE;AAAA,iBAAM9c,IAAI,CAAC2M,YAAL,CAAmB3M,IAAI,CAAC+lB,UAAL,CAAgBvlB,KAAnC,CAAN;AAAA,SAA5F;AAA8I,cAAM,EAAE;AAAA,iBAAMR,IAAI,CAACqmB,eAAL,EAAN;AAAA,SAAtJ;AAAoL,eAAO,EAAE;AAAA,iBAAMrmB,IAAI,CAAC4lB,eAAL,EAAN;AAAA,SAA7L;AAA2N,iBAAS,EAAC,oCAArO;AAA0Q,WAAG,EAAE,aAAAhiB,EAAE;AAAA,iBAAK5D,IAAI,CAAC+lB,UAAL,GAAkBniB,EAAvB;AAAA;AAAjR,QAHD,eAIK;AAAQ,iBAAS,6BAAuB,KAAKvB,KAAL,CAAWya,WAAX,GAAyB,aAAzB,GAAyC,EAAhE,CAAjB;AAAwF,eAAO,EAAE,iBAAClQ,KAAD;AAAA,iBAAW5M,IAAI,CAACsmB,iBAAL,CAAuB1Z,KAAvB,CAAX;AAAA,SAAjG;AAA2I,WAAG,EAAE,aAAAhJ,EAAE;AAAA,iBAAK5D,IAAI,CAACmlB,WAAL,GAAmBvhB,EAAxB;AAAA;AAAlJ,QAJL,CADC;AAUD;;;;EA/GiC9B,4CAAK,CAACC,S;;;;;;;;;;;;;ACJ1C,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;CAGA;;AACA;CAGA;;CAGA;;CAGA;;AACAgX,mEAA2B,CAAC3D,aAA5B,GAA4C,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AACjF,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,mEAAD;AAA6B,cAAU,EAAEtV,UAAzC;AAAqD,UAAM,EAAEQ;AAA7D,IAAjB,EAAyF4U,IAAzF;AACA,CAHD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AAEA;AACA;CAGA;AACA;AACA;AACA;AACA;;AAEA;;IAEqB8K,a;;;;;AAEnB,yBAAYpgB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAEhBuN,UAAI,EAAC;AACHC,uBAAe,EAAE,IADd;AACoB;AACvB2F,kBAAU,EAAE,OAFT;AAGH0D,oBAAY,EAAE;AAHX,OAFW;AAQhBjJ,cAAQ,EAAE;AACRC,gBAAQ,EAAE,IADF;AAERE,iCAAyB,EAAE;AAFnB,OARM;AAahB2X,UAAI,EAAE;AACJC,kBAAU,EAAE,IADR;AAEJC,kBAAU,EAAE,CAAE;AAAEjmB,eAAK,EAAE;AAAT,SAAF,EAAoB;AAAEA,eAAK,EAAE;AAAT,SAApB;AAFR,OAbU;AAkBhByO,WAAK,EAAE,EAlBS;AAmBhBC,eAAS,EAAE;AAnBK,KAApB,CALmB,CA2BjB;;AACA,YAAQnP,KAAK,CAACU,MAAN,CAAa6X,OAAb,IAAwBvY,KAAK,CAACU,MAAN,CAAa6X,OAAb,CAAqB3R,IAArD;AACE,WAAK,MAAL;AACE9F,qBAAa,CAACyX,OAAd,GAAwB;AACtB+H,iBAAO,EAAE,CADa;AAEtBqG,yBAAe,EAAE,KAFK;AAGtBC,mBAAS,EAAE,KAHW;AAItBC,kBAAQ,EAAE,KAJY;AAKtBC,6BAAmB,EAAE,KALC;AAMtBC,mBAAS,EAAE,IANW;AAOtBC,sBAAY,EAAE;AAPQ,SAAxB;AASA;;AACF,WAAK,MAAL;AACElmB,qBAAa,CAACyX,OAAd,GAAwB;AACtB+H,iBAAO,EAAE,CADa;AAEtBqG,yBAAe,EAAE,KAFK;AAGtBC,mBAAS,EAAE,IAHW;AAItBC,kBAAQ,EAAE,IAJY;AAKtBC,6BAAmB,EAAE,KALC;AAMtBC,mBAAS,EAAE,KANW;AAOtBC,sBAAY,EAAE;AAPQ,SAAxB;AASA;;AACF;AACElmB,qBAAa,CAACyX,OAAd,GAAwB;AACtB3R,cAAI,EAAE,OADgB;AAEtB0Z,iBAAO,EAAE,CAFa;AAGtBqG,yBAAe,EAAE,IAHK;AAItBC,mBAAS,EAAE,KAJW;AAKtBC,kBAAQ,EAAE,KALY;AAMtBC,6BAAmB,EAAE,IANC;AAOtBC,mBAAS,EAAE,IAPW;AAQtBC,sBAAY,EAAE;AARQ,SAAxB;AAxBJ;;AAoCF,UAAKtmB,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACX+L,UAAI,EAAE,MAAKrO,KAAL,CAAWqO,IAAX,IAAmB;AADd,KAAb;AAlEiB;AAsElB;;;;0CAEqBxB,K,EAAOwB,I,EAAM;AACjCxB,WAAK,CAACtH,eAAN;AACF,UAAI0hB,QAAQ,GAAG,IAAIrlB,MAAM,CAACuO,WAAX,CAAuB,qBAAvB,EAA8C;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAA9C,CAAf;AACA7I,cAAQ,CAAC4K,aAAT,CAAuB6W,QAAvB;AACC;;;8CAEyBpa,K,EAAOwB,I,EAAM;AACrCxB,WAAK,CAACtH,eAAN;AACF,UAAI0hB,QAAQ,GAAG,IAAIrlB,MAAM,CAACuO,WAAX,CAAuB,0BAAvB,EAAmD;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAAnD,CAAf;AACA7I,cAAQ,CAAC4K,aAAT,CAAuB6W,QAAvB;AACC;;;6CAEwBpa,K,EAAOwB,I,EAAM;AACpCxB,WAAK,CAACtH,eAAN;AACF,UAAI0hB,QAAQ,GAAG,IAAIrlB,MAAM,CAACuO,WAAX,CAAuB,yBAAvB,EAAkD;AAAElF,cAAM,EAAE;AAAEoD,cAAI,EAAJA;AAAF;AAAV,OAAlD,CAAf;AACA7I,cAAQ,CAAC4K,aAAT,CAAuB6W,QAAvB;AACC;;;6BAEO;AAEN,UAAIhnB,IAAI,GAAG,IAAX;AACA,UAAIoO,IAAI,GAAGpO,IAAI,CAACqC,KAAL,CAAW+L,IAAtB,CAHM,CAKN;;AACA,UAAI6Y,eAAe,GAAG,IAAtB;;AACA,UAAIjnB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBoO,eAAxB,EAAyC,CACxC,CARK,CAUN;;;AACA,UAAIQ,gBAAgB,GAAG,IAAvB;;AACA,UAAIlnB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBqO,SAApB,IAAiC3mB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBsO,QAAzD,EAAmE;AACjE,YAAIO,QAAQ,GAAG,IAAf;;AACA,YAAInnB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBsO,QAApB,IAAgCxY,IAAI,CAAC+F,SAAL,CAAeiT,IAAnD,EAAyD;AACvDD,kBAAQ,gBAAG;AAAK,qBAAS,EAAC;AAAf,aAA2B/Y,IAAI,CAAC+F,SAAL,CAAeiT,IAA1C,CAAX;AACD;;AACDF,wBAAgB,gBACd;AAAK,mBAAS,EAAC;AAAf,WACIlnB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBqO,SAApB,IAAiCvY,IAAI,CAAC+F,SAAL,CAAeC,KAAhD,iBAA0D;AAAK,mBAAS,EAAC;AAAf,WAA4BhG,IAAI,CAAC+F,SAAL,CAAeC,KAA3C,CAD9D,EAEIpU,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBqO,SAApB,IAAiCvY,IAAI,CAAC+F,SAAL,CAAeC,KAAhD,IAAyDpU,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBsO,QAA7E,IAAyFxY,IAAI,CAAC+F,SAAL,CAAeiT,IAAxG,iBAAiH;AAAK,mBAAS,EAAC;AAAf,UAFrH,EAGIpnB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBsO,QAApB,IAAgCxY,IAAI,CAAC+F,SAAL,CAAeiT,IAA/C,iBAAwD;AAAK,mBAAS,EAAC;AAAf,WAA2BhZ,IAAI,CAAC+F,SAAL,CAAeiT,IAA1C,CAH5D,CADF;AAMD,OAvBK,CAyBN;;;AACA,UAAIC,SAAS,GAAG,IAAhB;;AACA,UAAIrnB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBwO,SAAxB,EAAmC;AACjC,YAAIQ,KAAK,GAAG,EAAZ;;AACA,YAAK,KAAK7mB,MAAL,CAAY2N,IAAZ,CAAiBC,eAAjB,IAAoC,KAAK5N,MAAL,CAAY8lB,IAAZ,CAAiBC,UAAjB,IAA+B,IAAnE,IAA2E,KAAK/lB,MAAL,CAAY8lB,IAAZ,CAAiBE,UAAjB,CAA4BjV,IAA5B,CAAiC,UAAA6K,GAAG;AAAA,iBAAIA,GAAG,CAAC7b,KAAJ,KAAc,KAAlB;AAAA,SAApC,CAAhF,EAAgJ;AAC9I8mB,eAAK,CAAC9gB,IAAN,eACE;AAAK,qBAAS,EAAC;AAAf,aACG4H,IAAI,CAACmE,GAAL,IAAY,CADf,CADF;AAID;;AACD,YAAK,KAAK9R,MAAL,CAAY2N,IAAZ,CAAiBC,eAAjB,IAAoC,KAAK5N,MAAL,CAAY8lB,IAAZ,CAAiBC,UAAjB,IAA+B,IAAnE,IAA2E,KAAK/lB,MAAL,CAAY8lB,IAAZ,CAAiBE,UAAjB,CAA4BjV,IAA5B,CAAiC,UAAA6K,GAAG;AAAA,iBAAIA,GAAG,CAAC7b,KAAJ,KAAc,IAAlB;AAAA,SAApC,CAAhF,EAA+I;AAC7I8mB,eAAK,CAAC9gB,IAAN,eACE;AAAK,qBAAS,EAAC;AAAf,aACG4H,IAAI,CAACmZ,EAAL,IAAW,CADd,CADF;AAID;;AACD,YAAIjC,YAAY,GAAG,IAAnB;;AACA,YAAI,KAAK7kB,MAAL,CAAYgO,QAAZ,CAAqBC,QAArB,IAAiC,CAAC,KAAKjO,MAAL,CAAYgO,QAAZ,CAAqBG,yBAArB,CAA+CvC,KAA/C,CAAqD,IAAI4G,MAAJ,oBAAuB7E,IAAI,CAAC7M,EAA5B,eAArD,CAAtC,EAAwI;AACtI+lB,eAAK,CAAC9gB,IAAN,eACE;AAAK,qBAAS,EAAC;AAAf,aACG4H,IAAI,CAACgC,QAAL,IAAiB,CADpB,CADF;AAID;;AACDiX,iBAAS,gBACP;AAAK,mBAAS,EAAC;AAAf,WACIC,KAAK,CAAC7iB,GAAN,CAAU,UAAC+iB,QAAD,EAAW7iB,CAAX,EAAiB;AAC3B,8BAAO;AAAK,qBAAS,EAAC,UAAf;AAA0B,eAAG,qBAAcyJ,IAAI,CAAC7M,EAAnB,cAAyBoD,CAAzB;AAA7B,aAA4D6iB,QAA5D,CAAP;AACD,SAFC,CADJ,CADF;AAOD;;AAED,UAAIC,gBAAgB,GAAG,IAAvB;;AACA,UAAIznB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoBuO,mBAAxB,EAA6C;AAC3CY,wBAAgB,gBACd,2FADF;AAGD,OA9DK,CAgEN;;;AACA,UAAIC,YAAY,GAAG,IAAnB;;AACA,UAAI1nB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoByO,YAAxB,EAAsC;AACpC,YAAI3B,aAAJ;;AACF,YAAI;AACHA,uBAAa,GAAG9T,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAYyO,SAArB,EAApB;AACA,SAFD,CAEE,OAAOtO,GAAP,EAAY;AACbwkB,uBAAa,GAAG,EAAhB;AACA;;AACD,YAAI7T,OAAO,GAAGvR,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBuC,IAAlB,CAAuB,UAAA8H,KAAK;AAAA,iBAAI8L,aAAa,KAAM9L,KAAK,CAAC/X,EAAN,IAAY6jB,aAAZ,IAA6B9L,KAAK,CAAC/Y,IAAN,IAAc6kB,aAAjD,CAAjB;AAAA,SAA5B,CAAd;;AACA,YAAI,CAAC7T,OAAD,IAAY,CAACA,OAAO,CAACiI,QAAzB,EAAmC;AAAEjI,iBAAO,GAAG;AAAEiI,oBAAQ,EAAE;AAAEuI,kBAAI,EAAE;AAAR;AAAZ,WAAV;AAAuC,SARtC,CAQuC;;;AAC3E,YAAI;AACF,cAAK,OAAOxQ,OAAO,CAACiI,QAAf,IAA2B,QAAhC,EAA2CjI,OAAO,CAACiI,QAAR,GAAmB9Y,IAAI,CAACC,KAAL,CAAW4Q,OAAO,CAACiI,QAAnB,CAAnB;AAC5C,SAFD,CAEE,OAAM5Y,GAAN,EAAW,CAAE;;AACf,YAAI2Q,OAAO,CAACiI,QAAR,CAAiBuI,IAArB,EAA2B;AACzB2F,sBAAY,gBACV;AAAK,qBAAS,EAAC;AAAf,0BACE;AAAK,qBAAS,EAAC,sBAAf;AAAsC,mCAAuB,EAAE;AAAEhkB,oBAAM,EAAE6N,OAAO,CAACiI,QAAR,CAAiBuI;AAA3B;AAA/D,YADF,CADF;AAID;AACF,OApFK,CAsFN;;;AACA,0BACD;AAAK,UAAE,EAAE/hB,IAAI,CAACsB,KAAd;AAAqB,iBAAS,0CAAmCtB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoB3R,IAAvD,cAA+D3G,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAAvF,CAA9B;AAA2H,eAAO,EAAE,iBAAAP,KAAK;AAAA,iBAAI5M,IAAI,CAAC2nB,qBAAL,CAA2B/a,KAA3B,EAAkCwB,IAAlC,CAAJ;AAAA,SAAzI;AAAsL,mBAAW,EAAE,qBAAAxB,KAAK;AAAA,iBAAI5M,IAAI,CAAC4nB,yBAAL,CAA+Bhb,KAA/B,EAAsCwB,IAAtC,CAAJ;AAAA,SAAxM;AAAyP,kBAAU,EAAE,oBAAAxB,KAAK;AAAA,iBAAI5M,IAAI,CAAC6nB,wBAAL,CAA8Bjb,KAA9B,EAAqCwB,IAArC,CAAJ;AAAA;AAA1Q,sBACK;AAAK,iBAAS,EAAC;AAAf,sBACE,2DAAC,6DAAD;AAAwB,cAAM,EAAE,EAAhC;AAAoC,YAAI,EAAEA,IAA1C;AAAgD,WAAG,EAAE,WAAWA,IAAI,CAAC7M;AAArE,QADF,CADL,eAIK;AAAK,iBAAS,EAAC;AAAf,SACG0lB,eADH,eAEE;AAAI,iBAAS,EAAC;AAAd,SAA4B3V,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiB4F,UAA1B,EAAhC,CAFF,EAGGkT,gBAHH,eAIE;AAAK,iBAAS,EAAC;AAAf,SACI5V,IAAI,gBAAStR,IAAI,CAACS,MAAL,CAAY2N,IAAZ,CAAiBsJ,YAA1B,EADR,CAJF,EAOG+P,gBAPH,EAQGJ,SARH,CAJL,EAkBMK,YAlBN,CADC;AAuBD;;;;EA1MwC5nB,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACf3C;AACA;AAEA;AAEA;;IAEqBgoB,W;;;;;AAEnB,uBAAY/nB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG,EAApB;AAEA,UAAKJ,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAKsnB,QAAL,GAAgB,MAAKA,QAAL,CAAczkB,IAAd,+BAAhB;AACA,UAAKqgB,SAAL,GAAiB,MAAKA,SAAL,CAAergB,IAAf,+BAAjB;AAEA,UAAKjB,KAAL,GAAa;AACXwU,kBAAY,EAAE,MAAKpW,MAAL,CAAYigB;AADf,KAAb;AAXiB;AAelB;;;;sCAEgB9e,S,EAAWC,S,EAAW;AACrC,UAAI,KAAKQ,KAAL,CAAWwU,YAAf,EAA6B,KAAK8M,SAAL,CAAe;AAAEnjB,aAAK,EAAE,KAAK6B,KAAL,CAAWwU;AAApB,OAAf;AAC9B;;;6BAEQ6C,K,EAAOlZ,K,EAAO;AAErB,UAAIR,IAAI,GAAG,IAAX;AACAQ,WAAK,GAAGA,KAAK,IAAI,KAAK6B,KAAL,CAAWwU,YAA5B,CAHqB,CAIrB;;AAEA6C,WAAK,GAAGA,KAAK,CAAC/C,MAAN,CAAa,UAAAvI,IAAI,EAAI;AAC3B,YAAIsV,SAAS,GAAG1jB,IAAI,CAACS,MAAL,CAAYijB,SAA5B;AACA,YAAIsE,UAAU,GAAG1W,IAAI,gBAASoS,SAAT,EAArB;AACA,eAAOsE,UAAU,IAAIxnB,KAArB;AACD,OAJO,CAAR;AAMA,aAAOkZ,KAAP;AAED;;;oCAEoB;AAAA,UAATlZ,KAAS,QAATA,KAAS;AAEnB,UAAIR,IAAI,GAAG,IAAX;AAEA,WAAK0C,QAAL,CAAc;AACZmU,oBAAY,EAAErW;AADF,OAAd,EAEG,YAAW;AACZ,YAAIoM,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,2BAAvB,EAAoD;AAAElF,gBAAM,EAAE;AAAE0Y,qBAAS,EAAE1jB,IAAI,CAACS,MAAL,CAAYijB,SAAzB;AAAoCljB,iBAAK,EAALA,KAApC;AAA2CunB,oBAAQ,EAAE/nB,IAAI,CAAC+nB;AAA1D;AAAV,SAApD,CAAZ;AACFxiB,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC,OALD;AAOD;;;6BAEO;AAEN,UAAI5M,IAAI,GAAG,IAAX;;AAEA,UAAIA,IAAI,CAACS,MAAL,CAAYwnB,UAAZ,IAA0B,KAA9B,EAAqC;AACnC,eAAO,IAAP;AACD;;AAED,UAAI7W,SAAS,GAAG,IAAhB;AACA,UAAKpR,IAAI,CAACS,MAAL,CAAYkR,KAAjB,EAAyBP,SAAS,gBAAI;AAAK,iBAAS,EAAC;AAAf,SAAmCpR,IAAI,CAACS,MAAL,CAAYkR,KAA/C,MAAb;AAEzB,0BACE;AAAK,iBAAS,6BAAsB3R,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAA9C;AAAd,SACGiE,SADH,eAEE;AAAQ,aAAK,EAAEpR,IAAI,CAACqC,KAAL,CAAWwU,YAA1B;AAAwC,gBAAQ,EAAE;AAAA,iBAAM7W,IAAI,CAAC2jB,SAAL,CAAe;AAAEnjB,iBAAK,EAAER,IAAI,CAACkoB,cAAL,CAAoB1nB;AAA7B,WAAf,CAAN;AAAA,SAAlD;AAA8G,iBAAS,EAAC,oBAAxH;AAA6I,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACkoB,cAAL,GAAsBtkB,EAA3B;AAAA;AAApJ,SACI5D,IAAI,CAACS,MAAL,CAAY0nB,aAAZ,CAA0B1jB,GAA1B,CAA8B,UAAC2jB,MAAD,EAASzjB,CAAT,EAAe;AAC7C,YAAI0jB,QAAQ,GAAG,IAAf;AACA,4BAAO;AAAQ,eAAK,EAAGD,MAAM,CAAC5nB,KAAvB;AAA+B,aAAG,EAAE,mBAAmBmE;AAAvD,WAA4DyjB,MAAM,CAACzW,KAAnE,CAAP;AACD,OAHC,CADJ,CAFF,CADF;AAYD;;;;EA3EsC7R,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPzC;AACA;AAEA;AACA;AACA;AAEA;;IAEqBkX,c;;;;;AAEnB,0BAAYjX,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG;AAChByX,aAAO,EAAE;AADO,KAApB;AAGA,UAAK7X,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK6nB,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BhlB,IAA9B,+BAAhC;AAEA,UAAKjB,KAAL,GAAa;AACXkmB,yBAAmB,EAAE;AADV,KAAb;AAXiB;AAelB;;;;sCAEgB3mB,S,EAAWC,S,EAAW;AAErC,UAAI7B,IAAI,GAAG,IAAX;;AAEAA,UAAI,CAACwoB,2BAAL,GAAmC,UAAS5b,KAAT,EAAgB;AACjD5M,YAAI,CAACsoB,wBAAL;AACD,OAFD;;AAGD/iB,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD/K,IAAI,CAACwoB,2BAA5D;;AAECxoB,UAAI,CAAC2hB,2BAAL,GAAmC,UAAS/U,KAAT,EAAgB;AACjD5M,YAAI,CAACyoB,wBAAL;AACAzoB,YAAI,CAACsoB,wBAAL;AACD,OAHD;;AAID/iB,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD/K,IAAI,CAAC2hB,2BAA5D;AAED;;;2CAEuB;AACrBpc,cAAQ,CAACuK,mBAAT,CAA6B,2BAA7B,EAA0D,KAAK0Y,2BAA/D;AACAjjB,cAAQ,CAACuK,mBAAT,CAA6B,2BAA7B,EAA0D,KAAK6R,2BAA/D;AACD;;;+CAE0B/L,K,EAAO;AAChC,UAAI,KAAKvT,KAAL,CAAWmU,oBAAX,IAAmCZ,KAAvC,EAA8C;AAC5C,aAAK8S,wBAAL,CAA8B9S,KAA9B;AACD,OAFD,MAEO;AACL,aAAK6S,wBAAL;AACD;AACF;;;6CAEwB7S,K,EAAO;AAC9B,WAAKlT,QAAL,CAAc;AAAE8T,4BAAoB,EAAEZ;AAAxB,OAAd;AACD;;;+CAE0B;AACzB,WAAKlT,QAAL,CAAc;AAAE8T,4BAAoB,EAAE;AAAxB,OAAd;AACD;;;+BAEU;AACT,UAAIxW,IAAI,GAAG,IAAX;AACAA,UAAI,CAACsW,MAAL,IAAetW,IAAI,CAACqC,KAAL,CAAWkmB,mBAAX,CAA+B/hB,IAA/B,CAAoCxG,IAAI,CAACsW,MAAL,CAAYqS,SAAhD,CAAf;AACA3oB,UAAI,CAAC4W,OAAL,IAAgB5W,IAAI,CAAC4W,OAAL,CAAaxW,OAAb,CAAqB,UAACuW,MAAD,EAAY;AAC/C3W,YAAI,CAACqC,KAAL,CAAWkmB,mBAAX,CAA+B/hB,IAA/B,CAAoCmQ,MAAM,CAACgN,SAA3C;AACD,OAFe,CAAhB;AAGA3jB,UAAI,CAACsoB,wBAAL;AACD;;;+CAE0B;AACzB,UAAIM,WAAW,GAAG,KAAKvmB,KAAL,CAAWkmB,mBAAX,CAA+BM,KAA/B,EAAlB;AACAD,iBAAW,IAAIA,WAAW,CAAC;AAAEpoB,aAAK,EAAE;AAAT,OAAD,CAA1B;AACD;;;6BAEO;AAEN,UAAIR,IAAI,GAAG,IAAX;AAEA,UAAIggB,aAAa,GAAG,OAAOhgB,IAAI,CAACD,KAAL,CAAWigB,aAAlB,IAAmC,WAAnC,GAAiDhgB,IAAI,CAACD,KAAL,CAAWigB,aAA5D,GAA4EhgB,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoB0H,aAApH;;AACA,UAAI,CAACA,aAAL,EAAoB;AAClB,eAAO,IAAP;AACD;;AAED,UAAI3J,UAAU,GAAG,IAAjB;;AACA,UAAIrW,IAAI,CAACS,MAAL,CAAY6V,MAAhB,EAAwB;AACtBD,kBAAU,gBACR;AAAK,mBAAS;AAAd,wBACE;AAAK,mBAAS,EAAC,yBAAf;AAAyC,iBAAO,EAAE;AAAA,mBAAMrW,IAAI,CAACuW,0BAAL,CAAgC,QAAhC,CAAN;AAAA;AAAlD,UADF,eAEE,2DAAC,yDAAD;AAAa,gBAAM,EAAGvW,IAAI,CAACS,MAAL,CAAY6V,MAAlC;AAA2C,mBAAS,YAAKtW,IAAI,CAACqC,KAAL,CAAWmU,oBAAX,IAAmC,QAAnC,GAA8C,gBAA9C,GAAiE,EAAtE,CAApD;AAAgI,aAAG,EAAE,aAAA5S,EAAE;AAAA,mBAAI5D,IAAI,CAACsW,MAAL,GAAc1S,EAAlB;AAAA;AAAvI,UAFF,CADF;AAMD,OAjBK,CAmBN;;;AACA,UAAI6S,eAAe,GAAG,IAAtB;AACAA,qBAAe,gBACb;AAAQ,aAAK,EAAC,OAAd;AAAsB,eAAO,EAAE;AAAA,iBAAMzW,IAAI,CAAC0W,QAAL,EAAN;AAAA,SAA/B;AAAsD,iBAAS,EAAC;AAAhE,uBADF;AAIA,UAAI1R,UAAU,GAAG,IAAjB;;AACA,UAAIhF,IAAI,CAACS,MAAL,CAAYkW,MAAZ,CAAmBnS,MAAvB,EAA+B;AAC7B,YAAIkK,QAAQ,GAAG1O,IAAI,CAAC4W,OAAL,IAAgB5W,IAAI,CAAC4W,OAAL,CAAapF,IAAb,CAAmB,UAAAmF,MAAM;AAAA,iBAAIA,MAAM,CAACtU,KAAP,CAAawU,YAAjB;AAAA,SAAzB,CAA/B;AACA7W,YAAI,CAAC4W,OAAL,GAAe,EAAf;AACA5R,kBAAU,gBACR;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAK,mBAAS,mCAA6B0J,QAAQ,GAAG,aAAH,GAAmB,EAAxD,CAAd;AAA6E,iBAAO,EAAE;AAAA,mBAAM1O,IAAI,CAACuW,0BAAL,CAAgC,SAAhC,CAAN;AAAA;AAAtF,UADF,eAEE;AAAK,mBAAS,uCAAgCvW,IAAI,CAACqC,KAAL,CAAWmU,oBAAX,IAAmC,SAAnC,GAA+C,gBAA/C,GAAkE,EAAlG;AAAd,WACIxW,IAAI,CAACS,MAAL,CAAYkW,MAAZ,CAAmBlS,GAAnB,CAAuB,UAAEqS,YAAF,EAAgBnS,CAAhB,EAAuB;AAC9C,8BACE,2DAAC,yDAAD;AAAa,kBAAM,EAAEmS,YAArB;AAAmC,qBAAS,EAAC,2BAA7C;AAAyE,eAAG,6BAAsBnS,CAAtB,CAA5E;AAAuG,eAAG,EAAE,aAAAf,EAAE;AAAA,qBAAI5D,IAAI,CAAC4W,OAAL,CAAajS,CAAb,IAAkBf,EAAtB;AAAA;AAA9G,YADF;AAGD,SAJC,CADJ,CAFF,EASC6S,eATD,CADF;AAaD;;AAED,UAAIM,qBAAqB,GAAG,IAA5B;AACAA,2BAAqB,gBACnB;AAAK,iBAAS,EAAC;AAAf,SACG/R,UADH,CADF;AAMA,0BACE;AAAK,iBAAS,gCAAyBhF,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAAjD;AAAd,SACGkJ,UADH,EAEGU,qBAFH,CADF;AAOD;;;;EAjIyCjX,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACT5C;AACA;AAEA;AACA;CAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;IAEqBgpB,S;;;;;AAEnB,qBAAY/oB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAChByX,aAAO,EAAE;AACPrV,aAAK,EAAE,aADA;AAEP;AACA0D,YAAI,EAAE,OAHC;AAIP;AACA0Z,eAAO,EAAE,CALF;AAMPc,iCAAyB,EAAE;AANpB,OADO;AAShB/S,UAAI,EAAC;AACH4F,kBAAU,EAAE,OADT;AAEH0D,oBAAY,EAAE;AAFX,OATW;AAahBuI,UAAI,EAAE;AACJ8I,mBAAW,EAAE,CAAC;AAAEvoB,eAAK,EAAE,kBAAT;AAA6BmR,eAAK,EAAE;AAApC,SAAD,EAAwD;AAAEnR,eAAK,EAAE,iBAAT;AAA4BmR,eAAK,EAAE;AAAnC,SAAxD,CADT;AAEJqX,gBAAQ,EAAE,IAFN;AAGJtI,oBAAY,EAAE;AAHV,OAbU;AAkBhBzR,WAAK,EAAE;AAlBS,KAApB;AAqBA,UAAKxO,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACX4mB,qBAAe,EAAE;AADN,KAAb;AA5BiB;AAgClB;;;;sCAEgBrnB,S,EAAWC,S,EAAW;AAErC,UAAI7B,IAAI,GAAG,IAAX;;AAEAA,UAAI,CAACkpB,yBAAL,GAAiC,UAAStc,KAAT,EAAgB;AAC/C5M,YAAI,CAACib,eAAL,CAAqBrO,KAAK,CAAC5B,MAA3B;AACD,OAFD;;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,0BAA1B,EAAsD/K,IAAI,CAACkpB,yBAA3D;;AAEAlpB,UAAI,CAACmpB,wBAAL,GAAgC,UAASvc,KAAT,EAAgB;AAC9C5M,YAAI,CAACkb,cAAL,CAAoBtO,KAAK,CAAC5B,MAA1B;AACD,OAFD;;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,yBAA1B,EAAqD/K,IAAI,CAACmpB,wBAA1D;AAEF;;;2CAEuB;AACrB5jB,cAAQ,CAACuK,mBAAT,CAA6B,0BAA7B,EAAyD,KAAKoZ,yBAA9D;AACA3jB,cAAQ,CAACuK,mBAAT,CAA6B,yBAA7B,EAAwD,KAAKqZ,wBAA7D;AACD;;;0CAEyB;AAAA,UAAR/a,IAAQ,QAARA,IAAQ;AACxB,WAAK1L,QAAL,CAAc;AAAEumB,uBAAe,EAAE7a,IAAI,CAAC7M;AAAxB,OAAd;AACD;;;0CAEwB;AAAA,UAAR6M,IAAQ,SAARA,IAAQ;AACvB,WAAK1L,QAAL,CAAc;AAAEumB,uBAAe,EAAE;AAAnB,OAAd;AACD;;;6BAEO;AAAA;;AAEN,UAAIjpB,IAAI,GAAG,IAAX;AACA,UAAI0Z,KAAK,GAAG1Z,IAAI,CAACD,KAAL,CAAW2Z,KAAX,IAAoB,EAAhC;AAEA,0BACE;AAAK,iBAAS,oCAA6B1Z,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAArD;AAAd,sBACE;AAAK,iBAAS,EAAC;AAAf,SACIuM,KAAK,CAACjV,GAAN,CAAU,UAAC2J,IAAD,EAAOzJ,CAAP,EAAa;AACvB,4BACE,2DAAC,sDAAD;AAAU,gBAAM,EAAE3E,IAAI,CAACS,MAAvB;AAA+B,cAAI,EAAE2N,IAArC;AAA2C,mBAAS,gBAASpO,IAAI,CAACS,MAAL,CAAY6X,OAAZ,CAAoB+H,OAA7B,qBAA+C,MAAI,CAAC5f,MAAL,CAAY6X,OAAZ,CAAoB6I,yBAApB,IAAiDnhB,IAAI,CAACqC,KAAL,CAAW4mB,eAA5D,IAA+EjpB,IAAI,CAACqC,KAAL,CAAW4mB,eAAX,IAA8B7a,IAAI,CAAC7M,EAAlH,GAAuH,iBAAvH,GAA2I,EAA1L,CAApD;AAAoP,aAAG,0BAAmB6M,IAAI,CAAC7M,EAAxB;AAAvP,UADF;AAGD,OAJC,CADJ,CADF,CADF;AAYD;;;;EAlFoCzB,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBvC;AACA;AAEA;AACA;AACA;AACA;AACA;CAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;IAEqBqgB,a;;;;;AAEnB,yBAAYpgB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN,EAFiB,CAInB;;AACA,QAAIc,aAAa,GAAG;AAChBC,YAAM,EAAE,IADQ;AAEhBmC,WAAK,EAAE,aAFS;AAGhBqV,aAAO,EAAE;AACP0H,qBAAa,EAAE;AADR,OAHO;AAMhB5R,UAAI,EAAC;AACH4F,kBAAU,EAAE,OADT;AAEH0D,oBAAY,EAAE;AAFX,OANW;AAUhBuI,UAAI,EAAE;AACJ+I,gBAAQ,EAAE,IADN;AAEJtI,oBAAY,EAAE;AAFV,OAVU;AAchB/J,YAAM,EAAE,EAdQ;AAehB1H,WAAK,EAAE,EAfS;AAgBhBE,eAAS,EAAE;AAhBK,KAApB;AAmBA,UAAK1O,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACXqX,WAAK,EAAE,MAAK3Z,KAAL,CAAW2Z,KAAX,IAAoB,EADhB;AAEX9C,aAAO,EAAE,EAFE;AAGXN,YAAM,EAAE;AAHG,KAAb;AA1BiB;AAgClB;;;;sCAEgB1U,S,EAAWC,S,EAAW;AACrC,UAAI7B,IAAI,GAAG,IAAX;;AAEAA,UAAI,CAAC2hB,2BAAL,GAAmC,UAAS/U,KAAT,EAAgB;AACjD5M,YAAI,CAACopB,YAAL,CAAkBxc,KAAK,CAAC5B,MAAxB;AACD,OAFD;;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD/K,IAAI,CAAC2hB,2BAA5D;;AAEA3hB,UAAI,CAACwoB,2BAAL,GAAmC,UAAS5b,KAAT,EAAgB;AACjD5M,YAAI,CAACqpB,YAAL,CAAkBzc,KAAK,CAAC5B,MAAxB;AACD,OAFD;;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,2BAA1B,EAAuD/K,IAAI,CAACwoB,2BAA5D;;AAEAxoB,UAAI,CAACspB,yBAAL,GAAiC,UAAS1c,KAAT,EAAgB;AAC/C5M,YAAI,CAACupB,UAAL,CAAgB3c,KAAK,CAAC5B,MAAtB;AACD,OAFD;;AAGAzF,cAAQ,CAACwF,gBAAT,CAA0B,yBAA1B,EAAqD/K,IAAI,CAACspB,yBAA1D;;AAEA,UAAI,OAAOtpB,IAAI,CAACD,KAAL,CAAW2Z,KAAlB,IAA2B,WAA/B,EAA4C;AAC1C1Z,YAAI,CAAC6P,SAAL;AACD;AAEH;;;2CAEuB;AACrBtK,cAAQ,CAACuK,mBAAT,CAA6B,2BAA7B,EAA0D,KAAK6R,2BAA/D;AACApc,cAAQ,CAACuK,mBAAT,CAA6B,2BAA7B,EAA0D,KAAK0Y,2BAA/D;AACAjjB,cAAQ,CAACuK,mBAAT,CAA6B,yBAA7B,EAAwD,KAAKwZ,yBAA7D;AACD;;;gCAEW;AAEV,UAAItpB,IAAI,GAAG,IAAX;AAEA,UAAIgB,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAvB,uBAA0ChB,IAAI,CAACS,MAAL,CAAYK,MAAtD,0DAAP;AACA,UAAIG,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA4F,WAAK,CAACrF,GAAD,EAAM;AAAEC,eAAO,EAAPA;AAAF,OAAN,CAAL,CACGuP,IADH,CACQ,UAACC,QAAD,EAAc;AAClB,YAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB,MAAMC,KAAK,CAAC,uBAAD,CAAX;AAClB,eAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,OAJH,EAKGJ,IALH,CAKS,UAAAI,IAAI,EAAI;AAEb,YAAI8I,KAAK,GAAG9I,IAAZ;AACA8I,aAAK,GAAG1Z,IAAI,CAACkgB,MAAL,CAAYU,MAAZ,CAAmB;AAAElH,eAAK,EAALA;AAAF,SAAnB,CAAR;AACA1Z,YAAI,CAAC0C,QAAL,CAAc;AAAEgX,eAAK,EAALA;AAAF,SAAd,EAAyB,YAAW,CACnC,CADD;AAGD,OAZH,WAaS,UAAC9Y,GAAD,EAAS;AACdqK,eAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,eAAO,CAACC,GAAR,CAAYtK,GAAZ;AACD,OAhBH;AAkBD;;;iCAEY+V,M,EAAQ;AACnB;AACA,UAAIC,OAAO,qBAAQ,KAAKvU,KAAL,CAAWuU,OAAnB,CAAX;;AACA,UAAID,MAAM,CAACnW,KAAX,EAAkB;AAChBoW,eAAO,CAACD,MAAM,CAAC+M,SAAR,CAAP,GAA4B;AAAEljB,eAAK,EAAEmW,MAAM,CAACnW,KAAhB;AAAuBunB,kBAAQ,EAAEpR,MAAM,CAACoR;AAAxC,SAA5B;AACD,OAFD,MAEO;AACL,eAAOnR,OAAO,CAACD,MAAM,CAAC+M,SAAR,CAAd;AACD;;AACD,WAAKhhB,QAAL,CAAc;AAAEkU,eAAO,EAAPA;AAAF,OAAd;AACD;;;iCAEYN,M,EAAQ;AACnB;AACA,UAAIA,MAAM,CAAC9V,KAAX,EAAkB;AAChB8V,cAAM,GAAG;AAAE9V,eAAK,EAAE8V,MAAM,CAAC9V,KAAhB;AAAuB6Y,kBAAQ,EAAE/C,MAAM,CAAC+C;AAAxC,SAAT;AACD,OAFD,MAEO;AACL/C,cAAM,GAAG,IAAT;AACD;;AACD,WAAK5T,QAAL,CAAc;AAAE4T,cAAM,EAANA;AAAF,OAAd;AACD;;;+BAEUoD,K,EAAO;AAChB,WAAKhX,QAAL,CAAc;AAAEgX,aAAK,EAALA;AAAF,OAAd;AACD;;;6BAEO;AAEN,UAAI1Z,IAAI,GAAG,IAAX;AAEA,UAAI0Z,KAAK,GAAG,OAAO1Z,IAAI,CAACD,KAAL,CAAW2Z,KAAlB,IAA2B,WAA3B,GAAyC1Z,IAAI,CAACD,KAAL,CAAW2Z,KAApD,GAA4D1Z,IAAI,CAACqC,KAAL,CAAWqX,KAAX,IAAoB,EAA5F;AAEA,UAAI8P,aAAa,GAAG9P,KAApB;AACAxZ,YAAM,CAACC,IAAP,CAAYH,IAAI,CAACqC,KAAL,CAAWuU,OAAvB,EAAgCxW,OAAhC,CAAwC,UAACC,GAAD,EAAS;AAC/C,YAAIsW,MAAM,GAAG3W,IAAI,CAACqC,KAAL,CAAWuU,OAAX,CAAmBvW,GAAnB,CAAb;AACAmpB,qBAAa,GAAG7S,MAAM,CAACoR,QAAP,CAAgByB,aAAhB,CAAhB;AACD,OAHD;;AAIA,UAAIxpB,IAAI,CAACqC,KAAL,CAAWiU,MAAf,EAAuB;AACrBkT,qBAAa,GAAGxpB,IAAI,CAACqC,KAAL,CAAWiU,MAAX,CAAkB+C,QAAlB,CAA2BmQ,aAA3B,CAAhB;AACD;;AACD,UAAI,KAAKzpB,KAAL,CAAW0L,SAAf,EAA0B;AACxB+d,qBAAa,GAAG9P,KAAK,CAAC+P,KAAN,CAAY,CAAZ,EAAe,KAAK1pB,KAAL,CAAW0L,SAA1B,CAAhB;AACD;;AAED,UAAIsU,QAAQ,gBAAI;AAAI,iBAAS,EAAC;AAAd,SAA2B/f,IAAI,CAACS,MAAL,CAAYwC,KAAvC,QAAgDumB,aAAa,CAAChlB,MAA9D,MAAhB;AAEA,0BACD;AAAK,UAAE,EAAExE,IAAI,CAACuB,EAAd;AAAkB,iBAAS,+BAAwBvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAAhD;AAA3B,sBAEK,2DAAC,4DAAD;AAAgB,cAAM,EAAEnN,IAAI,CAACS,MAA7B;AAAqC,qBAAa,EAAET,IAAI,CAACD,KAAL,CAAWigB,aAA/D;AAA8E,iBAAS,EAAC;AAAxF,QAFL,eAGK,2DAAC,uDAAD;AAAW,cAAM,oBAAOhgB,IAAI,CAACS,MAAL,CAAYwf,IAAnB,CAAjB;AAA4C,aAAK,EAAEvG,KAAnD;AAA0D,gBAAQ,EAAE,CAAC1Z,IAAI,CAACD,KAAL,CAAW4e,cAAhF;AAAgG,iBAAS,EAAC,2BAA1G;AAAsI,WAAG,EAAE,aAAA/a,EAAE;AAAA,iBAAI5D,IAAI,CAACkgB,MAAL,GAActc,EAAlB;AAAA;AAA7I,QAHL,EAKMmc,QALN,eAOK,2DAAC,uDAAD;AAAW,cAAM,EAAE/f,IAAI,CAACS,MAAxB;AAAgC,aAAK,EAAE+oB,aAAvC;AAAsD,iBAAS,EAAC;AAAhE,QAPL,CADC;AAaD;;;;EAvJwC1pB,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpB3C;AACA;AAEA;AAEA,a,CAEA;AACA;AACA;AACA;AACA;AACA;;;IAIqB4pB,W;;;;;AAEnB,uBAAY3pB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG;AAChBqB,iBAAW,EAAE,QADG;AAEhBynB,gBAAU,EAAE,CAAC,OAAD,EAAU,SAAV,CAFI;AAGhBC,gBAAU,EAAE,IAHI;AAIhBC,gBAAU,EAAE,KAJI;AAKhBjE,qBAAe,EAAE,KALD;AAMhBlF,kBAAY,EAAE;AANE,KAApB;AAQA,UAAKjgB,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4Y,QAAL,GAAgB,MAAKA,QAAL,CAAc/V,IAAd,+BAAhB;AACA,UAAKqlB,SAAL,GAAiB,MAAKA,SAAL,CAAerlB,IAAf,+BAAjB;AAEA,UAAKjB,KAAL,GAAa;AACXwU,kBAAY,EAAE,MAAKpW,MAAL,CAAYigB;AADf,KAAb;AAjBiB;AAqBlB;;;;sCAEgB9e,S,EAAWC,S,EAAW;AACrC,UAAI,KAAKQ,KAAL,CAAWwU,YAAf,EAA6B,KAAK8M,SAAL,CAAe;AAAEnjB,aAAK,EAAE,KAAK6B,KAAL,CAAWwU;AAApB,OAAf;AAC9B;;;6BAEQ6C,K,EAAOlZ,K,EAAO;AAErB,UAAIR,IAAI,GAAG,IAAX;AACAQ,WAAK,GAAGA,KAAK,IAAI,KAAK6B,KAAL,CAAWwU,YAA5B;AAEA5L,aAAO,CAACC,GAAR,CAAY,IAAZ,EAAkB1K,KAAlB;AAEAkZ,WAAK,GAAGA,KAAK,CAAC/C,MAAN,CAAa,UAAAvI,IAAI,EAAI;AAC3B,YAAImP,KAAK,GAAG,KAAZ;AACAvd,YAAI,CAACS,MAAL,CAAYkpB,UAAZ,CAAuBvpB,OAAvB,CAA+B,UAACsjB,SAAD,EAAe;AAC5C,cAAIsE,UAAU,GAAG1W,IAAI,gBAASoS,SAAT,EAArB;AACA,cAAKsE,UAAU,CAAC3b,KAAX,CAAkB,IAAI4G,MAAJ,CAAWzS,KAAX,EAAkB,GAAlB,CAAlB,CAAL,EAAkD+c,KAAK,GAAG,IAAR;AACnD,SAHD;AAIA,eAAOA,KAAP;AACD,OAPO,CAAR;AASA,aAAO7D,KAAP;AAED;;;oCAEoB;AAAA,UAATlZ,KAAS,QAATA,KAAS;AAEnB,UAAIR,IAAI,GAAG,IAAX;AAEA,WAAK0C,QAAL,CAAc;AACZmU,oBAAY,EAAErW;AADF,OAAd,EAEG,YAAW;AACZ,YAAIoM,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,2BAAvB,EAAoD;AAAElF,gBAAM,EAAE;AAAExK,iBAAK,EAALA,KAAF;AAAS6Y,oBAAQ,EAAErZ,IAAI,CAACqZ;AAAxB;AAAV,SAApD,CAAZ;AACF9T,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC,OALD;AAOD;;;sCAEgB,CAChB;;;sCAEgB,CAChB;;;6BAEO;AAEN,UAAI5M,IAAI,GAAG,IAAX;;AAEA,UAAIA,IAAI,CAACS,MAAL,CAAYmpB,UAAZ,IAA0B,KAA9B,EAAqC;AACnC,eAAO,IAAP;AACD;;AAED,UAAIxY,SAAS,GAAG,IAAhB;AACA,UAAKpR,IAAI,CAACS,MAAL,CAAYkR,KAAjB,EAAyBP,SAAS,gBAAI;AAAK,iBAAS,EAAC;AAAf,SAAmCpR,IAAI,CAACS,MAAL,CAAYkR,KAA/C,MAAb,CATnB,CAWN;;AACA,UAAIsU,eAAe,GAAG,IAAtB;AAEA,0BACE;AAAK,iBAAS,6BAAsBjmB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAA9C;AAAd,SACGiE,SADH,EAED6U,eAFC,eAGF;AAAO,YAAI,EAAC,MAAZ;AAAmB,aAAK,EAAE,KAAK5jB,KAAL,CAAWwU,YAArC;AAAmD,mBAAW,EAAE7W,IAAI,CAACS,MAAL,CAAYyB,WAA5E;AAAyF,gBAAQ,EAAE;AAAA,iBAAMlC,IAAI,CAAC2oB,SAAL,CAAe;AAAEnoB,iBAAK,EAAER,IAAI,CAAC8pB,WAAL,CAAiBtpB;AAA1B,WAAf,CAAN;AAAA,SAAnG;AAA6J,cAAM,EAAE;AAAA,iBAAMR,IAAI,CAACqmB,eAAL,EAAN;AAAA,SAArK;AAAmM,eAAO,EAAE;AAAA,iBAAMrmB,IAAI,CAAC4lB,eAAL,EAAN;AAAA,SAA5M;AAA0O,iBAAS,EAAC,0CAApP;AAA+R,WAAG,EAAE,aAAAhiB,EAAE;AAAA,iBAAI5D,IAAI,CAAC8pB,WAAL,GAAmBlmB,EAAvB;AAAA;AAAtS,QAHE,eAIE;AAAQ,iBAAS,mCAA6B,KAAKvB,KAAL,CAAWwU,YAAX,GAA0B,aAA1B,GAA0C,EAAvE,CAAjB;AAA+F,eAAO,EAAE,iBAACjK,KAAD;AAAA,iBAAW5M,IAAI,CAAC2oB,SAAL,CAAe;AAAEnoB,iBAAK,EAAE;AAAT,WAAf,CAAX;AAAA,SAAxG;AAAkJ,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACmlB,WAAL,GAAmBvhB,EAAxB;AAAA;AAAzJ,QAJF,CADF;AASD;;;;EA3FsC9D,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBzC;AACA;AAEA;AAEA;;IAEqBiqB,S;;;;;AAEnB,qBAAYhqB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;AAEF,QAAIc,aAAa,GAAG;AAChB8Q,WAAK,EAAE,IADS;AAEhBoX,iBAAW,EAAE,CAAC;AAAEvoB,aAAK,EAAE,kBAAT;AAA6BmR,aAAK,EAAE;AAApC,OAAD,EAAyD;AAAEnR,aAAK,EAAE,iBAAT;AAA4BmR,aAAK,EAAE;AAAnC,OAAzD,EAA8G;AAAEnR,aAAK,EAAE,OAAT;AAAkBmR,aAAK,EAAE;AAAzB,OAA9G,EAAkJ;AAAEnR,aAAK,EAAE,QAAT;AAAmBmR,aAAK,EAAE;AAA1B,OAAlJ,EAA6L;AAAEnR,aAAK,EAAE,YAAT;AAAuBmR,aAAK,EAAE;AAA9B,OAA7L,EAA6O;AAAEnR,aAAK,EAAE,WAAT;AAAsBmR,aAAK,EAAE;AAA7B,OAA7O,EAA4R;AAAEnR,aAAK,EAAE,WAAT;AAAsBmR,aAAK,EAAE;AAA7B,OAA5R,EAA8U;AAAEnR,aAAK,EAAE,UAAT;AAAqBmR,aAAK,EAAE;AAA5B,OAA9U,EAA+X;AAAEnR,aAAK,EAAE,aAAT;AAAwBmR,aAAK,EAAE;AAA/B,OAA/X,CAFG;AAGhB+O,kBAAY,EAAE,kBAHE;AAIhBsI,cAAQ,EAAE,IAJM;AAKnBpK,YAAM,EAAE;AACPoL,gBAAQ,EAAE,iBADH;AAEPC,iBAAS,EAAE;AAFJ;AALW,KAApB;AAUA,UAAKxpB,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBR,aAAhB,EAA+B,MAAKJ,MAApC,EAA4C,MAAKV,KAAL,CAAWU,MAAX,IAAqB,EAAjE,CAAd;AAEE,UAAK4B,KAAL,GAAa;AACXwU,kBAAY,EAAE,MAAKpW,MAAL,CAAYigB;AADf,KAAb;AAhBiB;AAoBlB;;;;iCAEoC;AAAA,UAA5BhH,KAA4B,QAA5BA,KAA4B;AAAA,UAArBgF,SAAqB,QAArBA,SAAqB;AAAA,UAAVE,MAAU,QAAVA,MAAU;AAEnCF,eAAS,GAAGA,SAAS,IAAI,KAAKrc,KAAL,CAAWwU,YAApC;;AAEF,cAAO6H,SAAP;AACC,aAAK,OAAL;AACChF,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,gBAAID,CAAC,CAACjnB,KAAF,CAAQE,WAAR,KAAwBgnB,CAAC,CAAClnB,KAAF,CAAQE,WAAR,EAA5B,EAAmD;AAAE,qBAAO,CAAC,CAAR;AAAY;;AAAC,gBAAIgnB,CAAC,CAAClnB,KAAF,CAAQE,WAAR,KAAwB+mB,CAAC,CAACjnB,KAAF,CAAQE,WAAR,EAA5B,EAAmD;AAAE,qBAAO,CAAP;AAAW;;AAAC,mBAAO,CAAP;AAAW,WAA1K,CAAR;AACA;;AACD,aAAK,aAAL;AACCuW,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAOD,CAAC,CAACE,OAAF,GAAYD,CAAC,CAACC,OAArB;AAA8B,WAA1D,CAAR;AACA;;AACD,aAAK,WAAL;AACC1Q,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAOD,CAAC,CAAC3X,GAAF,GAAQ4X,CAAC,CAAC5X,GAAjB;AAAsB,WAAlD,CAAR;AACA;;AACD,aAAK,YAAL;AACCmH,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAOA,CAAC,CAAC5X,GAAF,GAAQ2X,CAAC,CAAC3X,GAAjB;AAAsB,WAAlD,CAAR;AACA;;AACD,aAAK,kBAAL;AACCmH,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAO,IAAIE,IAAJ,CAASF,CAAC,CAACG,SAAX,EAAsBC,OAAtB,KAAkC,IAAIF,IAAJ,CAASH,CAAC,CAACI,SAAX,EAAsBC,OAAtB,EAAzC;AAA0E,WAAtG,CAAR;AACA;;AACD,aAAK,iBAAL;AACC7Q,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAO,IAAIE,IAAJ,CAASH,CAAC,CAACI,SAAX,EAAsBC,OAAtB,KAAkC,IAAIF,IAAJ,CAASF,CAAC,CAACG,SAAX,EAAsBC,OAAtB,EAAzC;AAA0E,WAAtG,CAAR;AACA;;AACD,aAAK,UAAL;AACK3L,gBAAM,GAAGA,MAAM,IAAI,KAAKne,MAAL,CAAYme,MAA/B;AACJlF,eAAK,GAAGA,KAAK,CACNjV,GADC,CACI,UAAA2J,IAAI,EAAI;AAAEA,gBAAI,CAACoc,SAAL,GAAiB/oB,IAAI,CAACgpB,IAAL,CAAWhpB,IAAI,CAACipB,GAAL,CAAUtc,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,IAA+B2G,MAAM,CAAC1G,GAAhD,EAAqD,CAArD,IAA2DzW,IAAI,CAACipB,GAAL,CAAUtc,IAAI,CAAC4B,QAAL,CAAciI,WAAd,CAA0B,CAA1B,IAA+B2G,MAAM,CAACzG,GAAhD,EAAqD,CAArD,CAAtE,CAAjB;AAAmJ,mBAAO/J,IAAP;AAAc,WAD/K,EAED6R,IAFC,CAEK,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAOD,CAAC,CAACM,SAAF,GAAcL,CAAC,CAACK,SAAvB;AAAkC,WAFvD,CAAR;AAGA;;AACD,aAAK,WAAL;AACC9Q,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAOA,CAAC,CAAC/Z,QAAF,GAAa8Z,CAAC,CAAC9Z,QAAtB;AAAgC,WAA5D,CAAR;AACA;;AACD,aAAK,UAAL;AACCsJ,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAOD,CAAC,CAAC9Z,QAAF,GAAa+Z,CAAC,CAAC/Z,QAAtB;AAAgC,WAA5D,CAAR;AACA;;AACD,aAAK,QAAL;AACA;AACCsJ,eAAK,GAAGA,KAAK,CAACuG,IAAN,CAAY,UAASiK,CAAT,EAAWC,CAAX,EAAc;AAAE,mBAAO1oB,IAAI,CAACC,MAAL,KAAgB,GAAvB;AAA4B,WAAxD,CAAR;AACA;AAlCF;;AAqCE,aAAOgY,KAAP;AAED;;;wCAE2B;AAAA,UAAbgF,SAAa,SAAbA,SAAa;AAE1B,UAAI1e,IAAI,GAAG,IAAX;AACA,UAAI0Z,KAAK,GAAG1Z,IAAI,CAACD,KAAL,CAAW2Z,KAAX,IAAoB,EAAhC;AAEAA,WAAK,GAAG1Z,IAAI,CAAC4gB,MAAL,CAAY;AAAElH,aAAK,EAALA,KAAF;AAASgF,iBAAS,EAATA;AAAT,OAAZ,CAAR;AAEA,WAAKhc,QAAL,CAAc;AACZgX,aAAK,EAALA,KADY;AAEZ7C,oBAAY,EAAE6H;AAFF,OAAd,EAGG,YAAW;AACZ,YAAI9R,KAAK,GAAG,IAAIjL,MAAM,CAACuO,WAAX,CAAuB,yBAAvB,EAAkD;AAAElF,gBAAM,EAAE0O;AAAV,SAAlD,CAAZ;AACFnU,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC,OAND;AAQD;;;6BAEO;AAEN,UAAI5M,IAAI,GAAG,IAAX;AACA,UAAI0Z,KAAK,GAAG1Z,IAAI,CAACD,KAAL,CAAW2Z,KAAX,IAAoB,EAAhC;AAEA,UAAIsP,QAAQ,GAAG,OAAOhpB,IAAI,CAACD,KAAL,CAAWipB,QAAlB,IAA8B,WAA9B,GAA4ChpB,IAAI,CAACD,KAAL,CAAWipB,QAAvD,GAAkEhpB,IAAI,CAACS,MAAL,CAAYuoB,QAA7F;;AACA,UAAI,CAACA,QAAL,EAAe;AACb,eAAO,IAAP;AACD;;AAED,UAAI5X,SAAS,GAAG,IAAhB;AACA,UAAKpR,IAAI,CAACS,MAAL,CAAYkR,KAAjB,EAAyBP,SAAS,gBAAI;AAAK,iBAAS,EAAC;AAAf,SAAiCpR,IAAI,CAACS,MAAL,CAAYkR,KAA7C,MAAb;AAEzB,0BACE;AAAK,iBAAS,2BAAoB3R,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,EAA5C;AAAd,SACGiE,SADH,eAEE;AAAQ,oBAAY,EAAEpR,IAAI,CAACqC,KAAL,CAAWwU,YAAjC;AAA+C,gBAAQ,EAAE;AAAA,iBAAM7W,IAAI,CAAC2qB,YAAL,CAAkB;AAAEjM,qBAAS,EAAE1e,IAAI,CAAC4qB,YAAL,CAAkBpqB;AAA/B,WAAlB,CAAN;AAAA,SAAzD;AAA0H,iBAAS,EAAC,oBAApI;AAAyJ,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAAC4qB,YAAL,GAAoBhnB,EAAzB;AAAA;AAAhK,SACI5D,IAAI,CAACS,MAAL,CAAYsoB,WAAZ,CAAwBtkB,GAAxB,CAA4B,UAAC2jB,MAAD,EAASzjB,CAAT,EAAe;AAC3C,YAAI0jB,QAAQ,GAAG,IAAf;AACA,4BAAO;AAAQ,eAAK,EAAGD,MAAM,CAAC5nB,KAAvB;AAA+B,aAAG,EAAE,iBAAiBmE;AAArD,WAA0DyjB,MAAM,CAACzW,KAAjE,CAAP;AACD,OAHC,CADJ,CAFF,CADF;AAYD;;;;EA/GoC7R,4D;;;;;;;;;;;;;ACPvC,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;CAGA;;CAGA;;AACA;AACA;AACA;AACA;AACA;CAGA;;AACA+qB,qEAA8B,CAACzV,aAA/B,GAA+C,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AACpF,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,qEAAD;AAAgC,cAAU,EAAEtV,UAA5C;AAAwD,UAAM,EAAEQ;AAAhE,IAAjB,EAA4F4U,IAA5F;AACA,CAHD;;;;;;;;;;;;;ACnBA,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;CAGA;;AACA;CAGA;;CAGA;;AACA;AACA;AACA;AACA;AACA;AAEA,IAAI/E,qBAAqB,GAAG;AAC1BvP,KAAG,EAAHA,yDAD0B;AAE1BI,MAAI,EAAJA,0DAF0B;AAG1B0P,cAAY,EAAZA,6DAH0B;AAI1Bia,gBAAc,EAAdA,+DAJ0B;AAK1BlG,eAAa,EAAbA,8DAAaA;AALa,CAA5B;AAOetU,oFAAf,E;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAA;AACA;AAEe,yEAAS7P,MAAT,EAAiB;AAE9B,MAAIQ,OAAO,GAAGG,4CAAK,CAACC,SAAN,CAAgB;AAAE,oBAAgB;AAAlB,GAAhB,EAAwDZ,MAAM,IAAIA,MAAM,CAACM,GAAjB,IAAwBN,MAAM,CAACM,GAAP,CAAWE,OAA3F,CAAd;AAEA,MAAI8pB,GAAG,GAAGC,gEAAM,EAAhB;;AACA,MAAID,GAAJ,EAAS;AACP9pB,WAAO,GAAGG,4CAAK,CAACC,SAAN,CAAgB;AAAE,yBAAmB,YAAY0pB;AAAjC,KAAhB,EAAwD9pB,OAAxD,CAAV;AACD;;AAED,SAAOA,OAAP;AAED,C;;;;;;;;;;;;ACdD;AAAA;AAAA;AAEA,IAAIgqB,oBAAoB,GAAG;AACzB1a,YAAU,EAAVA,uDAAUA;AADe,CAA3B;AAIe0a,mFAAf,E;;;;;;;;;;;;;;;ACNA,IAAIC,eAAe,GAAG,EAAtB;;AAEAA,eAAe,CAACpa,GAAhB,GAAsB,UAASvQ,IAAT,EAAe;AAEpC,MAAIC,KAAK,GAAGqQ,YAAY,CAACsa,OAAb,CAAqB5qB,IAArB,CAAZ;;AAEA,MAAI;AACHC,SAAK,GAAGE,IAAI,CAACC,KAAL,CAAWH,KAAX,CAAR;AACA,GAFD,CAEE,OAAMI,GAAN,EAAW,CAAE;;AAEf,SAAOJ,KAAP;AAEA,CAVD;;AAYA0qB,eAAe,CAACla,GAAhB,GAAsB,UAASzQ,IAAT,EAAeC,KAAf,EAAsB;AAE3C,MAAK,OAAOD,IAAP,IAAe,QAApB,EAA+B;AAE/B,MAAK,OAAOC,KAAP,IAAgB,WAArB,EAAmCA,KAAK,GAAG,EAAR;;AACnC,MAAK,QAAOA,KAAP,KAAgB,QAArB,EAAgC;AAC/B,QAAI;AACHA,WAAK,GAAGE,IAAI,CAACiU,SAAL,CAAenU,KAAf,CAAR;AACA,KAFD,CAEE,OAAMI,GAAN,EAAW,CAAE;AACf;;AAAA;AAEDiQ,cAAY,CAACua,OAAb,CAAsB7qB,IAAtB,EAA4BC,KAA5B;AAEA,CAbD;;AAgBA0qB,eAAe,CAACxW,MAAhB,GAAyB,UAASnU,IAAT,EAAe;AACtCsQ,cAAY,CAACwa,UAAb,CAAwB9qB,IAAxB;AACD,CAFD;;AAIe2qB,8EAAf,E;;;;;;;;;;;;AClCA;AAAA;AAAA;CAEA;;AAEe,+EAAsB;AAAA,uBAAXnJ,IAAW;AAAA,MAAXA,IAAW,0BAAN,EAAM;AAEnC,MAAI3c,IAAI,GAAGkmB,SAAS,CAAC,CAAD,CAApB;AACA,SAAOlmB,IAAI,CAAC2c,IAAZ;AAEA,MAAIwJ,OAAO,GAAG,CAAd;AAEArrB,QAAM,CAACC,IAAP,CAAYiF,IAAZ,EAAkBhF,OAAlB,CAA0B,UAACC,GAAD,EAAS;AAEjC,QAAImrB,KAAK,GAAG,IAAIvY,MAAJ,6BAAgC5S,GAAhC,yBAAyD,GAAzD,CAAZ;AACA,QAAIgM,KAAK,GAAGmf,KAAK,CAACC,IAAN,CAAW1J,IAAX,CAAZ;;AAEA,QAAI1V,KAAJ,EAAW;AACTkf,aAAO;AACPxJ,UAAI,gBACF,+CACA;AAAM,+BAAuB,EAAE;AAAEre,gBAAM,EAAE2I,KAAK,CAAC,CAAD;AAAf;AAA/B,QADA,EAECjH,IAAI,CAAC/E,GAAD,CAFL,eAGA;AAAM,+BAAuB,EAAE;AAAEqD,gBAAM,EAAE2I,KAAK,CAAC,CAAD;AAAf;AAA/B,QAHA,CADF;AAOD;AAEF,GAhBD;AAkBA,MAAIkf,OAAO,IAAI,CAAf,EAAkBxJ,IAAI,gBAAG;AAAM,2BAAuB,EAAE;AAAEre,YAAM,EAAEqe;AAAV;AAA/B,IAAP;AAClB,SAAOA,IAAP;AAED,C;;;;;;;;;;;;;;;AChCD,IAAI2J,iBAAiB,GAAG,EAAxB;;AAEAA,iBAAiB,CAAC5a,GAAlB,GAAwB,UAASvQ,IAAT,EAAe;AAEtC,MAAIC,KAAK,GAAGsqB,cAAc,CAACK,OAAf,CAAuB5qB,IAAvB,CAAZ;;AAEA,MAAI;AACHC,SAAK,GAAGE,IAAI,CAACC,KAAL,CAAWH,KAAX,CAAR;AACA,GAFD,CAEE,OAAMI,GAAN,EAAW,CAAE;;AAEf,SAAOJ,KAAP;AAEA,CAVD;;AAYAkrB,iBAAiB,CAAC1a,GAAlB,GAAwB,UAASzQ,IAAT,EAAeC,KAAf,EAAsB;AAE7C,MAAK,OAAOD,IAAP,IAAe,QAApB,EAA+B;AAE/B,MAAK,OAAOC,KAAP,IAAgB,WAArB,EAAmCA,KAAK,GAAG,EAAR;;AACnC,MAAK,QAAOA,KAAP,KAAgB,QAArB,EAAgC;AAC/B,QAAI;AACHA,WAAK,GAAGE,IAAI,CAACiU,SAAL,CAAenU,KAAf,CAAR;AACA,KAFD,CAEE,OAAMI,GAAN,EAAW,CAAE;AACf;;AAAA;AAEDkqB,gBAAc,CAACM,OAAf,CAAwB7qB,IAAxB,EAA8BC,KAA9B;AAEA,CAbD;;AAgBAkrB,iBAAiB,CAAChX,MAAlB,GAA2B,UAASnU,IAAT,EAAe;AACxCuqB,gBAAc,CAACO,UAAf,CAA0B9qB,IAA1B;AACD,CAFD;;AAIemrB,gFAAf,E;;;;;;;;;;;;AClCA;AAAA;AAAA;AAEe,yEAASjrB,MAAT,EAAiB;AAE9B,MAAIsqB,GAAJ,CAF8B,CAI9B;;AACA,MAAI1e,KAAK,GAAG1K,MAAM,CAACqO,QAAP,CAAgBsG,MAAhB,CAAuBjK,KAAvB,CAA6B,4EAA7B,CAAZ;;AACA,MAAIA,KAAJ,EAAW;AACT0e,OAAG,GAAG1e,KAAK,CAAC,CAAD,CAAX;AACAye,+DAAc,CAAC9Z,GAAf,CAAmB,SAAnB,EAA8B+Z,GAA9B;AACA,QAAIzU,MAAM,GAAG/Q,QAAQ,CAACyK,QAAT,CAAkBsG,MAAlB,CAAyBpR,OAAzB,CAAiC,SAAS6lB,GAA1C,EAA+C,EAA/C,CAAb;AACA,QAAIzU,MAAM,IAAI,GAAd,EAAmBA,MAAM,GAAG,EAAT;AACnB/Q,YAAQ,CAACyK,QAAT,CAAkBsG,MAAlB,GAA2BA,MAA3B;AACD;;AAEDyU,KAAG,GAAGD,2DAAc,CAACha,GAAf,CAAmB,SAAnB,CAAN;;AAEA,MAAIrQ,MAAM,IAAIA,MAAM,CAACsqB,GAArB,EAA0B;AACxBA,OAAG,GAAGtqB,MAAM,CAACsqB,GAAb;AACAD,+DAAc,CAAC9Z,GAAf,CAAmB,SAAnB,EAA8B+Z,GAA9B;AACD;;AAED,SAAOA,GAAP;AAED,C;;;;;;;;;;;;ACzBD;AAAA;AAAA;AAAA;AACA;AAEe,yEAAStqB,MAAT,EAAiBmc,IAAjB,EAAuB;AAEpCA,MAAI,GAAGA,IAAI,IAAI,UAASzb,IAAT,EAAe;AAC5B8J,WAAO,CAACC,GAAR,CAAY,4BAAZ;AACAD,WAAO,CAACC,GAAR,CAAY/J,IAAZ;AACD,GAHD;;AAKA,MAAIA,IAAI,GAAGV,MAAM,CAACU,IAAP,IAAe2pB,2DAAc,CAACha,GAAf,CAAmB,UAAnB,CAA1B;;AAEA,MAAI3P,IAAJ,EAAU;AACR;AACA,WAAOyb,IAAI,CAAC,IAAD,EAAOzb,IAAP,CAAX;AACD,GAZmC,CAcpC;;;AACA,MAAI4pB,GAAG,GAAGC,2DAAM,CAACvqB,MAAD,CAAhB;;AAEA,MAAI,CAACsqB,GAAL,EAAU;AACR;AACA,WAAOnO,IAAI,CAAC,IAAD,EAAO,EAAP,CAAX;AACD,GApBmC,CAsBpC;;;AACA,MAAI5b,GAAG,aAAMP,MAAM,CAACM,GAAP,CAAWC,GAAjB,yBAAuCP,MAAM,CAACK,MAA9C,QAAP;AACA,MAAIG,OAAO,GAAG;AAAE,wCAA+B8pB,GAA/B,CAAF;AAAwC,oBAAgB;AAAxD,GAAd;AACA1kB,OAAK,CAACrF,GAAD,EAAM;AAAEC,WAAO,EAAPA;AAAF,GAAN,CAAL,CACGuP,IADH,CACQ,UAACC,QAAD,EAAc;AAClB,QAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB,MAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;AAClB,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAJH,EAKGJ,IALH,CAKS,UAACI,IAAD,EAAU;AACfka,+DAAc,CAAC9Z,GAAf,CAAmB,UAAnB,EAA+BJ,IAA/B;AACAgM,QAAI,CAAC,IAAD,EAAOhM,IAAP,CAAJ;AACD,GARH,WASS,UAAChQ,GAAD,EAAS;AACdgc,QAAI,CAAChc,GAAD,CAAJ;AACD,GAXH;AAaD,C;;;;;;;;;;;;ACzCD;AAAA;AAAA;AAAA;AACA;AAEA,IAAI+qB,KAAK,GAAG;AACVC,OAAK,EAAE,CAAC,OAAD,EAAU,WAAV,EAAuB,QAAvB,EAAiC,QAAjC,EAA2C,WAA3C,EAAwD,KAAxD,CADG;AAEVC,WAAS,EAAE,CAAC,WAAD,EAAc,QAAd,EAAwB,QAAxB,EAAkC,WAAlC,EAA+C,KAA/C,CAFD;AAGVC,QAAM,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,WAArB,EAAkC,KAAlC,CAHE;AAIVC,QAAM,EAAE,CAAC,QAAD,EAAW,WAAX,EAAwB,KAAxB,CAJE;AAKVC,WAAS,EAAE,CAAC,WAAD,EAAc,KAAd,CALD;AAMVC,KAAG,EAAE,CAAC,KAAD,CANK;AAMM;AAChBC,OAAK,EAAE,IAPG,CAOG;;AAPH,CAAZ;AAUe,yEAAS/qB,IAAT,EAAegrB,YAAf,EAA6B;AAC1C,MAAIC,QAAQ,GAAGjrB,IAAI,CAAC8P,IAApB;AACA,MAAI,CAAC/Q,MAAM,CAACC,IAAP,CAAYwrB,KAAZ,EAAmB/X,QAAnB,CAA4BwY,QAA5B,CAAL,EAA4CA,QAAQ,GAAG,KAAX;AAC5C,SAAOT,KAAK,CAACS,QAAD,CAAL,CAAgBxY,QAAhB,CAAyBuY,YAAzB,CAAP;AACD,C;;;;;;;;;;;;ACjBD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA,IAAIE,qBAAqB,GAAG;AAC1BC,SAAO,EAAPA,oDAD0B;AAE1BtB,QAAM,EAANA,mDAF0B;AAG1BuB,QAAM,EAANA,kDAH0B;AAI1B1U,SAAO,EAAPA,oDAAOA;AAJmB,CAA5B;AAOewU,oFAAf,E;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AACA;AAEe,yEAAS5rB,MAAT,EAAiBmc,IAAjB,EAAuB;AAEpCA,MAAI,GAAGA,IAAI,IAAI,UAASzb,IAAT,EAAe;AAC5B8J,WAAO,CAACC,GAAR,CAAY,2BAAZ;AACD,GAFD;;AAIA,MAAI/J,IAAI,GAAGV,MAAM,CAACU,IAAP,IAAe2pB,2DAAc,CAACha,GAAf,CAAmB,UAAnB,CAA1B;;AAEA,MAAI3P,IAAJ,EAAU;AACR;AACA,WAAOyb,IAAI,CAAC,IAAD,EAAOzb,IAAP,CAAX;AACD,GAXmC,CAapC;;;AACA,MAAI4pB,GAAG,GAAGC,2DAAM,CAACvqB,MAAD,CAAhB;;AAEA,MAAI,CAACsqB,GAAL,EAAU;AACR;AACA,WAAOnO,IAAI,CAAC,IAAD,EAAO,EAAP,CAAX;AACD,GAnBmC,CAqBpC;;;AACA,MAAI5b,GAAG,GAAGP,MAAM,CAACM,GAAP,CAAWC,GAAX,GAAiB,cAAjB,GAAkCP,MAAM,CAACK,MAAzC,GAAkD,KAA5D;AACA,MAAIG,OAAO,GAAG;AAAE,uBAAmB,YAAY8pB,GAAjC;AAAsC,oBAAgB;AAAtD,GAAd;AACA1kB,OAAK,CAACrF,GAAD,EAAM;AAAEC,WAAO,EAAPA;AAAF,GAAN,CAAL,CACGuP,IADH,CACQ,UAACC,QAAD,EAAc;AAClB,QAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB,MAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;AAClB,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAJH,EAKGJ,IALH,CAKS,UAAAI,IAAI,EAAI;AACbka,+DAAc,CAAC9Z,GAAf,CAAmB,UAAnB,EAA+BJ,IAA/B;AACAgM,QAAI,CAAC,IAAD,EAAOhM,IAAP,CAAJ;AACD,GARH,WASS,UAAChQ,GAAD,EAAS;AACdgc,QAAI,CAAChc,GAAD,CAAJ;AACD,GAXH;AAaD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCD;AACA;AACA;AACA;AAEA;;IAEqBijB,sB;;;;;AAEnB,kCAAY9jB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;;AAEF,QAAIC,IAAI,gCAAR,CAJmB,CAMnB;;;AACA,QAAIa,aAAa,GAAG;AACnBgM,YAAM,EAAE7M,IAAI,CAACsB,KADM;AAEnB+W,WAAK,EAAE,WAFY;AAGnBqD,YAAM,EAAE,KAHW;AAInBpF,YAAM,EAAE,KAJW;AAKnBsI,YAAM,EAAE;AACPoL,gBAAQ,EAAE,iBADH;AAEPC,iBAAS,EAAE;AAFJ,OALW;AASnBuC,UAAI,EAAE,EATa;AAUnBC,kBAAY,EAAO,YAVA;AAWnBC,sBAAgB,EAAG,IAXA;AAYnBpO,aAAO,EAAG,IAZS;AAanBkD,uBAAiB,EAAE;AAbA,KAApB;AAeAxhB,QAAI,CAACS,MAAL,GAAcP,MAAM,CAACwlB,MAAP,CAAc7kB,aAAd,EAA6Bb,IAAI,CAACS,MAAL,IAAe,EAA5C,CAAd,CAtBmB,CAwBnB;;AACAT,QAAI,CAAC+G,YAAL,GAAoB,CAApB;AACA/G,QAAI,CAACgH,KAAL,GAAa,CACZ;AAAEL,UAAI,EAAE,KAAR;AAAesJ,UAAI,EAAE;AAArB,KADY,EAEZ;AAAEtJ,UAAI,EAAE,QAAR;AAAkBS,SAAG,EAAE;AAAvB,KAFY,CAAb;;AAIA,YAAOpH,IAAI,CAACS,MAAL,CAAYksB,OAAnB;AACC,WAAK,OAAL;AACC;AACA3sB,YAAI,CAACgH,KAAL,CAAWR,IAAX,CAAgB;AAAEG,cAAI,EAAE,QAAR;AAAkBS,aAAG,EAAE;AAAvB,SAAhB;AACA;;AACD;AACCpH,YAAI,CAACgH,KAAL,CAAWR,IAAX,CAAgB;AAAEG,cAAI,EAAE,KAAR;AAAesJ,cAAI,EAAE;AAArB,SAAhB;AACAjQ,YAAI,CAACgH,KAAL,CAAWR,IAAX,CAAgB;AAAEG,cAAI,EAAE,QAAR;AAAkBS,aAAG,EAAE;AAAvB,SAAhB;AAPF;;AASApH,QAAI,CAACgH,KAAL,CAAWR,IAAX,CAAgB;AAAEG,UAAI,EAAE,KAAR;AAAesJ,UAAI,EAAE;AAArB,KAAhB;AACAjQ,QAAI,CAACgH,KAAL,CAAWR,IAAX,CAAgB;AAAEG,UAAI,EAAE,QAAR;AAAkBS,SAAG,EAAE;AAAvB,KAAhB;AAEApH,QAAI,CAACyb,OAAL,GAAezb,IAAI,CAACS,MAAL,CAAYgb,OAAZ,IAAuB,EAAtC;AA1CmB;AA4ClB;;;;sCAEgB7Z,S,EAAWC,S,EAAW;AACrC,UAAI7B,IAAI,GAAG,IAAX;AACAA,UAAI,CAACiH,YAAL,CAAkB,YAAW;AAC3B;AACH;AACAjH,YAAI,CAAC4sB,SAAL,GAH8B,CAI9B;;AACA5sB,YAAI,CAAC6sB,UAAL,GAAkB,IAAlB;AACA,YAAIjgB,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,kBAAhB,EAAoC;AAAElF,gBAAM,EAAE;AAAEzJ,cAAE,EAAEvB,IAAI,CAACsB;AAAX;AAAV,SAApC,CAAZ;AACAiE,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACE,OARD;AASF;;;iCAEagQ,I,EAAM;AACjB,UAAI5c,IAAI,GAAG,IAAX;AACA,UAAI4G,IAAI,GAAG5G,IAAI,CAACgH,KAAL,CAAWhH,IAAI,CAAC+G,YAAhB,CAAX;;AACA,UAAIH,IAAJ,EAAU;AACX,YAAIM,OAAJ;;AACA,YAAIN,IAAI,CAACD,IAAL,KAAc,QAAlB,EAA4B;AAC3BO,iBAAO,GAAG3B,QAAQ,CAAC4B,aAAT,CAAuB,QAAvB,CAAV;AACAD,iBAAO,CAACE,GAAR,GAAcR,IAAI,CAACQ,GAAnB;AACAF,iBAAO,CAACG,KAAR,GAAgB,IAAhB;AACA;;AACD,YAAIT,IAAI,CAACD,IAAL,KAAc,KAAlB,EAAyB;AACxBO,iBAAO,GAAG3B,QAAQ,CAAC4B,aAAT,CAAuB,MAAvB,CAAV;AACAD,iBAAO,CAAC+I,IAAR,GAAerJ,IAAI,CAACqJ,IAApB;AACA/I,iBAAO,CAAC4lB,GAAR,GAAc,YAAd;AACA;;AACD,YAAI5lB,OAAJ,EAAa;AACZA,iBAAO,CAACI,MAAR,GAAiB,YAAW;AACtBtH,gBAAI,CAACiH,YAAL,CAAkB2V,IAAlB;AACL,WAFD;;AAGA,eAAK/Y,QAAL,CAAc2D,WAAd,CAA0BN,OAA1B;AACA;AACC;;AACH,UAAIlH,IAAI,CAAC+G,YAAL,IAAqB/G,IAAI,CAACgH,KAAL,CAAWxC,MAApC,EAA4C;AACxCoY,YAAI;AACL;;AACH5c,UAAI,CAAC+G,YAAL;AACC;;;gCAEU;AAEX,UAAI/G,IAAI,GAAG,IAAX,CAFW,CAIX;;AACA,cAAOA,IAAI,CAACS,MAAL,CAAYksB,OAAnB;AACC,aAAK,OAAL;AACC3sB,cAAI,CAACyE,GAAL,GAAWsoB,KAAK,CAACH,SAAN,mBAAqB5sB,IAAI,CAACS,MAA1B,EAAX;AACA;;AACD;AACCT,cAAI,CAACyE,GAAL,GAAWuoB,MAAM,CAACJ,SAAP,CAAiB5sB,IAAI,CAACS,MAAtB,CAAX;AALF;;AAQE,UAAIT,IAAI,CAACS,MAAL,CAAYof,WAAZ,IAA2B,KAA/B,EAAsC;AACpC7f,YAAI,CAACyE,GAAL,CAASwoB,aAAT,CAAuBjtB,IAAI,CAACyE,GAAL,CAASob,WAAhC;AACD,OAfQ,CAiBX;;;AACA,UAAI7f,IAAI,CAACS,MAAL,CAAY4gB,UAAZ,IAA0BrhB,IAAI,CAACS,MAAL,CAAY4gB,UAAZ,CAAuB3S,QAAjD,IAA6DkP,CAAC,CAACwF,kBAAnE,EAAuF;AACtF,YAAI8J,kBAAkB,GAAGltB,IAAI,CAACS,MAAL,CAAY4gB,UAAZ,CAAuB6L,kBAAvB,IAA6CC,kEAAsB,CAAC7pB,IAAvB,CAA4BtD,IAA5B,CAAtE,CADsF,CACkB;;AACxG,YAAIktB,kBAAkB,IAAI,OAAOA,kBAAP,IAA6B,QAAvD,EAAiEA,kBAAkB,GAAG5b,IAAI,CAAC4b,kBAAD,CAAzB;AACjEltB,YAAI,CAACojB,kBAAL,GAA0BxF,CAAC,CAACwF,kBAAF,CAAqB;AAAC8J,4BAAkB,EAAlBA,kBAAD;AAAqB3L,6BAAmB,EAAEvhB,IAAI,CAACS,MAAL,CAAY4gB,UAAZ,CAAuBE,mBAAjE;AAAsFD,0BAAgB,EAAEthB,IAAI,CAACS,MAAL,CAAY4gB,UAAZ,CAAuBC,gBAAvB,IAA2C;AAAnJ,SAArB,CAA1B;AACAthB,YAAI,CAACojB,kBAAL,CAAwB/I,EAAxB,CAA2B,cAA3B,EAA2Cra,IAAI,CAACya,cAAhD;AACAza,YAAI,CAACojB,kBAAL,CAAwB/I,EAAxB,CAA2B,cAA3B,EAA2Cra,IAAI,CAACotB,qBAAhD;AACAptB,YAAI,CAACyE,GAAL,CAAS4oB,QAAT,CAAkBrtB,IAAI,CAACojB,kBAAvB;AACA,OAzBU,CA2BX;;;AACApjB,UAAI,CAACyE,GAAL,CAAS4V,EAAT,CAAY,OAAZ,EAAqBra,IAAI,CAACua,UAA1B,EA5BW,CA8BX;;AACA,UAAIva,IAAI,CAACS,MAAL,CAAY6d,OAAhB,EAAyB;AACxBte,YAAI,CAACstB,mBAAL,CAA0BttB,IAAI,CAACS,MAAL,CAAY6d,OAAtC;AACA,OAjCU,CAmCX;;;AACA,UAAIte,IAAI,CAACyb,OAAL,CAAajX,MAAjB,EAAyB;AACxBxE,YAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAASsb,MAAT,EAAiB;AACrC1b,cAAI,CAACqiB,SAAL,CAAgB3G,MAAhB;AACA,SAFD;AAGA,OAxCU,CA0CV;;;AACA,UAAI1b,IAAI,CAACS,MAAL,CAAY+gB,iBAAhB,EAAmC;AAClC,YAAI+L,QAAQ,GAAKvtB,IAAI,CAACS,MAAL,CAAY+gB,iBAAZ,IAAiC,SAAjC,IAA8CxhB,IAAI,CAACS,MAAL,CAAY6d,OAA5D,IAA2Ete,IAAI,CAACyb,OAAL,IAAgBzb,IAAI,CAACyb,OAAL,CAAajX,MAA7B,IAAuCxE,IAAI,CAACyb,OAAtI;;AACA,YAAIzb,IAAI,CAACwtB,YAAT,EAAuB;AACtB,cAAIxtB,IAAI,CAACwtB,YAAL,CAAkB/N,QAAtB,EAAgC;AAC/B8N,oBAAQ,GAAG,CAACvtB,IAAI,CAACwtB,YAAN,CAAX;AACA,WAFD,MAEO;AACND,oBAAQ,GAAGvtB,IAAI,CAACS,MAAL,CAAY6d,OAAvB;AACA;AACD;;AACD,YAAIiP,QAAJ,EAAc;AACbvtB,cAAI,CAAC6b,kBAAL,CAAyB0R,QAAzB;AACA;AACD;AAEF;;;+BAEUE,U,EAAY;AACtB,UAAIztB,IAAI,GAAG,IAAX;AACEytB,gBAAU,CAACrtB,OAAX,CAAmB,UAACsb,MAAD,EAAY;AAC7B1b,YAAI,CAACqiB,SAAL,CAAe3G,MAAf;AACD,OAFD;AAGD;;;8BAEQ+R,U,EAAY;AAErB,UAAIztB,IAAI,GAAG,IAAX;AAEA,UAAI8hB,IAAI,GAAG2L,UAAU,CAAC3L,IAAtB;;AACA,UAAI,CAACA,IAAL,EAAW;AACV,YAAIoL,kBAAkB,GAAGltB,IAAI,CAACS,MAAL,CAAYysB,kBAArC;;AACA,YAAIA,kBAAkB,IAAI,OAAOA,kBAAP,IAA6B,QAAvD,EAAiE;AAChEA,4BAAkB,GAAG5b,IAAI,CAAC4b,kBAAD,CAAzB;AACApL,cAAI,GAAGoL,kBAAkB,EAAzB;AACA;AACD;;AAED,UAAIxR,MAAJ;;AACA,UAAIoG,IAAJ,EAAU;AACTpG,cAAM,GAAGkC,CAAC,CAAClC,MAAF,CAAS,CAAC+R,UAAU,CAACvV,GAAZ,EAAiBuV,UAAU,CAACtV,GAA5B,CAAT,EAA2C;AAAE2J,cAAI,EAAJA;AAAF,SAA3C,CAAT;AACA,OAFD,MAEO;AACNpG,cAAM,GAAGkC,CAAC,CAAClC,MAAF,CAAS,CAAC+R,UAAU,CAACvV,GAAZ,EAAiBuV,UAAU,CAACtV,GAA5B,CAAT,CAAT;AACA;;AAECuD,YAAM,CAAC4G,OAAP,GAAiB,IAAjB;AACF5G,YAAM,CAAC/Y,IAAP,GAAc8qB,UAAU,CAAC9qB,IAAzB;AACA+Y,YAAM,CAACkH,YAAP,GAAsB6K,UAAU,CAAC7K,YAAjC;;AAEA,UAAI6K,UAAU,CAACxd,IAAf,EAAqB;AACpBwd,kBAAU,CAACpQ,OAAX,GAAqB,YAAW;AAC/B9X,kBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyBwd,UAAU,CAACxd,IAApC;AACA,SAFD;AAGA;;AACD,UAAIoN,OAAO,GAAGrd,IAAI,CAACwa,aAAnB;;AACA,UAAI6C,OAAJ,EAAa;AACZ,YAAI,OAAOA,OAAP,IAAkB,QAAtB,EAAgCA,OAAO,GAAG/L,IAAI,CAAC+L,OAAD,CAAd,CADpB,CAEZ;;AACA3B,cAAM,CAACrB,EAAP,CAAU,OAAV,EAAmBgD,OAAnB;AACA;;AAED,UAAIrd,IAAI,CAACojB,kBAAL,IAA2B,CAACqK,UAAU,CAAC7K,YAA3C,EAAyD;AACxD5iB,YAAI,CAACojB,kBAAL,CAAwBiK,QAAxB,CAAiC3R,MAAjC;AACA,OAFD,MAEO;AACN1b,YAAI,CAACyE,GAAL,CAAS4oB,QAAT,CAAkB3R,MAAlB;AACA;;AAED1b,UAAI,CAACyb,OAAL,CAAajV,IAAb,CAAkBkV,MAAlB;AAEA,aAAOA,MAAP;AAEA;;;iCAEYA,M,EAAQ;AAClB,UAAI,CAACA,MAAL,EAAa;AACb,UAAIgS,KAAK,GAAG,KAAKjS,OAAL,CAAakS,OAAb,CAAqBjS,MAArB,CAAZ;;AACA,UAAIgS,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,aAAKjS,OAAL,CAAamS,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AACF,aAAKjpB,GAAL,CAASopB,WAAT,CAAqBnS,MAArB;AACD,aAAK0H,kBAAL,CAAwByK,WAAxB,CAAoCnS,MAApC;AACE;AACF;;;iCAEWA,M,EAAQoS,O,EAAS;AAC3B,UAAIA,OAAO,CAAC9d,QAAZ,EAAsB;AACpB,YAAI+d,SAAS,GAAG,IAAInQ,CAAC,CAACC,MAAN,CAAaiQ,OAAO,CAAC9d,QAAR,CAAiBkI,GAA9B,EAAmC4V,OAAO,CAAC9d,QAAR,CAAiBmI,GAApD,CAAhB;AACAuD,cAAM,CAACsS,SAAP,CAAiBD,SAAjB;AACD;AACF;;;sCAEgBE,O,EAAS;AAC1B,UAAIC,KAAK,GAAGD,OAAO,CAACE,aAAR,EAAZ;AACA,aAAOvQ,CAAC,CAACqE,OAAF,CAAU;AAAEF,YAAI,EAAEmM,KAAR;AAAe/gB,iBAAS,EAAE,wBAA1B;AAAoD+U,gBAAQ,EAAEtE,CAAC,CAACuE,KAAF,CAAQ,EAAR,EAAY,EAAZ,CAA9D;AAA+EC,kBAAU,EAAE,CAAC,EAAD,EAAK,EAAL;AAA3F,OAAV,CAAP;AACA;;;wCAEmB9D,O,EAAS;AAE5B,UAAIte,IAAI,GAAG,IAAX,CAF4B,CAI5B;;AACA,UAAIouB,MAAM,GAAGxQ,CAAC,CAACU,OAAF,CAAUA,OAAV,EAAmBiE,SAAnB,EAAb;AACA,UAAI3D,MAAM,GAAGwP,MAAM,CAACC,SAAP,EAAb;AAEA,UAAIC,QAAQ,GAAG,CAAf;AAAkB,UAAIZ,KAAK,GAAG,CAAZ;AAElBpP,aAAO,CAACle,OAAR,CAAgB,UAAU+hB,KAAV,EAAiBxd,CAAjB,EAAqB;AACpC,YAAI4pB,CAAC,GAAG9sB,IAAI,CAAC+sB,GAAL,CAASrM,KAAK,CAAChK,GAAN,GAAUyG,MAAM,CAACzG,GAA1B,IAAiC1W,IAAI,CAACgtB,GAAL,CAAStM,KAAK,CAACjK,GAAf,CAAzC;AACA,YAAIuG,CAAC,GAAGhd,IAAI,CAACgtB,GAAL,CAAS7P,MAAM,CAAC1G,GAAhB,IAAqBzW,IAAI,CAAC+sB,GAAL,CAASrM,KAAK,CAACjK,GAAf,CAArB,GAA2CzW,IAAI,CAAC+sB,GAAL,CAAS5P,MAAM,CAAC1G,GAAhB,IAAqBzW,IAAI,CAACgtB,GAAL,CAAStM,KAAK,CAACjK,GAAf,CAArB,GAAyCzW,IAAI,CAACgtB,GAAL,CAAStM,KAAK,CAAChK,GAAN,GAAUyG,MAAM,CAACzG,GAA1B,CAA5F;AACA,YAAIuW,OAAO,GAAGjtB,IAAI,CAACktB,KAAL,CAAWJ,CAAX,EAAc9P,CAAd,IAAmB,GAAnB,GAAyBhd,IAAI,CAACmtB,EAA5C;;AACA,YAAI,KAAKF,OAAL,GAAeJ,QAAnB,EAA6B;AAC5BA,kBAAQ,GAAG,KAAKI,OAAhB;AACAhB,eAAK,GAAG/oB,CAAR;AACA;AACD,OARD;AAUA,UAAIulB,CAAC,GAAG5L,OAAO,CAACmL,KAAR,CAAc,CAAd,EAAiBiE,KAAjB,CAAR;AACA,UAAIvD,CAAC,GAAG7L,OAAO,CAACmL,KAAR,CAAciE,KAAd,EAAqBpP,OAAO,CAAC9Z,MAA7B,CAAR;AACA8Z,aAAO,GAAG6L,CAAC,CAAC0E,MAAF,CAAS3E,CAAT,CAAV,CAtB4B,CAwB5B;AACA;;AACA,UAAI4E,MAAM,GAAG,IAAb;AACA,UAAIC,MAAM,GAAG,CAAb;AACA,UAAIC,QAAQ,GAAG,CACd;AAAC9W,WAAG,EAAE,CAAC,EAAD,GAAM6W,MAAZ;AAAoB5W,WAAG,EAAG,CAAC,GAAD,GAAO2W;AAAjC,OADc,EAEd;AAAC5W,WAAG,EAAE,CAAC,EAAD,GAAM6W,MAAZ;AAAoB5W,WAAG,EAAM;AAA7B,OAFc,EAGd;AAACD,WAAG,EAAE,CAAC,EAAD,GAAM6W,MAAZ;AAAoB5W,WAAG,EAAI,MAAM2W;AAAjC,OAHc,EAId;AAAC5W,WAAG,EAAI,CAAR;AAAoBC,WAAG,EAAI,MAAM2W;AAAjC,OAJc,EAKd;AAAC5W,WAAG,EAAG,KAAK6W,MAAZ;AAAoB5W,WAAG,EAAI,MAAM2W;AAAjC,OALc,EAMd;AAAC5W,WAAG,EAAG,KAAK6W,MAAZ;AAAoB5W,WAAG,EAAM;AAA7B,OANc,EAOd;AAACD,WAAG,EAAG,KAAK6W,MAAZ;AAAoB5W,WAAG,EAAG,CAAC,GAAD,GAAO2W;AAAjC,OAPc,EAQd;AAAC5W,WAAG,EAAG,KAAK6W,MAAZ;AAAoB5W,WAAG,EAAG,CAAC,GAAD,GAAO2W;AAAjC,OARc,EASd;AAAC5W,WAAG,EAAI,CAAR;AAAoBC,WAAG,EAAG,CAAC,GAAD,GAAO2W;AAAjC,OATc,CAAf,CA5B4B,CAwC5B;;AACA,UAAIG,YAAY,GAAG/uB,MAAM,CAACwlB,MAAP,CAAc;AAChC,iBAAS,MADuB;AAEhC,qBAAa,MAFmB;AAGhC,uBAAe;AAHiB,OAAd,EAIhB1lB,IAAI,CAACS,MAAL,CAAYwuB,YAJI,CAAnB;AAMA,UAAIrL,MAAM,GAAGhG,CAAC,CAACU,OAAF,CAAU,CAAC0Q,QAAD,EAAW1Q,OAAX,CAAV,EAA+B2Q,YAA/B,CAAb;AACEjvB,UAAI,CAACyE,GAAL,CAAS4oB,QAAT,CAAkBzJ,MAAlB;AAEA,aAAOA,MAAP;AAEF;;;kCAEctF,O,EAAS;AACtB,UAAIte,IAAI,GAAG,IAAX;;AACC,UAAIse,OAAJ,EAAa;AACXte,YAAI,CAACyE,GAAL,CAASopB,WAAT,CAAqBvP,OAArB;AACD;AACF;;;uCAEmBuE,M,EAAS;AAE5B,UAAI7iB,IAAI,GAAG,IAAX;;AAEC,UAAI,CAACkvB,KAAK,CAACC,OAAN,CAActM,MAAd,CAAL,EAA4B;AAC1B7iB,YAAI,CAACyE,GAAL,CAASkZ,KAAT,CAAe,IAAIC,CAAC,CAACC,MAAN,CAAa7d,IAAI,CAACS,MAAL,CAAYme,MAAZ,CAAmBoL,QAAhC,EAA0ChqB,IAAI,CAACS,MAAL,CAAYme,MAAZ,CAAmBqL,SAA7D,CAAf;AACA;AACD;;AAEF,UAAImF,IAAI,GAAG,EAAX;AACAvM,YAAM,CAACziB,OAAP,CAAe,UAAS+hB,KAAT,EAAgB;AAC9B,YAAIA,KAAK,CAACa,OAAV,EAAmB;AAClBb,eAAK,GAAGA,KAAK,CAACa,OAAd;AACA,SAFD,MAEO,IAAIb,KAAK,CAAC1C,QAAV,EAAoB;AAC1B0C,eAAK,GAAGA,KAAK,CAAC1C,QAAN,CAAexH,WAAf,GAA6B;AAAEC,eAAG,EAAEiK,KAAK,CAAC1C,QAAN,CAAexH,WAAf,CAA2B,CAA3B,CAAP;AAAsCE,eAAG,EAAEgK,KAAK,CAAC1C,QAAN,CAAexH,WAAf,CAA2B,CAA3B;AAA3C,WAA7B,GAA2GkK,KAAK,CAAC1C,QAAzH;AACA;;AACD2P,YAAI,CAAC5oB,IAAL,CAAU2b,KAAV;AACA,OAPD;;AASC,UAAIiN,IAAI,CAAC5qB,MAAL,IAAe,CAAnB,EAAsB;AACpBxE,YAAI,CAACyE,GAAL,CAASkZ,KAAT,CAAe,IAAIC,CAAC,CAACC,MAAN,CAAauR,IAAI,CAAC,CAAD,CAAJ,CAAQlX,GAArB,EAA0BkX,IAAI,CAAC,CAAD,CAAJ,CAAQjX,GAAlC,CAAf;AACD,OAFD,MAEO;AACN,YAAIiW,MAAM,GAAGxQ,CAAC,CAACyR,YAAF,CAAeD,IAAf,CAAb;AACApvB,YAAI,CAACyE,GAAL,CAAS6qB,SAAT,CAAmBlB,MAAnB;AACA,OAxB0B,CA0B5B;AACA;;AAEA;;;gCAEW3S,O,EAAS;AACpB,UAAIzb,IAAI,GAAG,IAAX;AACCyb,aAAO,CAACrb,OAAR,CAAgB,UAACsb,MAAD,EAAY;AAC1B1b,YAAI,CAAC+iB,UAAL,CAAgBrH,MAAhB;AACD,OAFD;AAGD;;;+BAEUA,M,EAAQ;AAClB,UAAI1b,IAAI,GAAG,IAAX;AACC0b,YAAM,CAAC4G,OAAP,GAAiB,IAAjB;;AACD,UAAItiB,IAAI,CAACojB,kBAAL,IAA2B,CAAC1H,MAAM,CAACkH,YAAvC,EAAqD;AACpD5iB,YAAI,CAACojB,kBAAL,CAAwBiK,QAAxB,CAAiC3R,MAAjC;AACA,OAFD,MAEO;AACNA,cAAM,CAAC6T,KAAP,CAAavvB,IAAI,CAACyE,GAAlB;AACA;AACD;;;gCAEWgX,O,EAAS;AACpB,UAAIzb,IAAI,GAAG,IAAX;AACCyb,aAAO,CAACrb,OAAR,CAAgB,UAACsb,MAAD,EAAY;AAC1B1b,YAAI,CAACijB,UAAL,CAAgBvH,MAAhB;AACD,OAFD;AAGD;;;+BAEUA,M,EAAQ;AAClB,UAAI1b,IAAI,GAAG,IAAX;AACC0b,YAAM,CAAC4G,OAAP,GAAiB,KAAjB;;AACD,UAAItiB,IAAI,CAACojB,kBAAL,IAA2B,CAAC1H,MAAM,CAACkH,YAAvC,EAAqD;AACpD5iB,YAAI,CAACojB,kBAAL,CAAwByK,WAAxB,CAAoCnS,MAApC;AACA,OAFD,MAEO;AACNA,cAAM,CAAChH,MAAP,CAAc1U,IAAI,CAACyE,GAAnB;AACA;AACD;;;8BAES+qB,a,EAAe;AACxB,UAAIxvB,IAAI,GAAG,IAAX;AACAA,UAAI,CAACyvB,cAAL,GAAsBD,aAAtB;AACAxvB,UAAI,CAAC0vB,WAAL;AACA;;;kCAEa;AACb,UAAI1vB,IAAI,GAAG,IAAX;;AACA,UAAIA,IAAI,CAACyvB,cAAT,EAAyB;AACxBzvB,YAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAASsb,MAAT,EAAiB;AACrC,cAAK1b,IAAI,CAACyvB,cAAL,CAAoB/T,MAApB,CAAL,EAAmC;AAClC1b,gBAAI,CAAC+iB,UAAL,CAAgBrH,MAAhB;AACA,WAFD,MAEO;AACN1b,gBAAI,CAACijB,UAAL,CAAgBvH,MAAhB;AACA;AACD,SAND;AAOA,OARD,MAQO;AACN1b,YAAI,CAACyb,OAAL,CAAarb,OAAb,CAAqB,UAASsb,MAAT,EAAiB;AACrC1b,cAAI,CAAC+iB,UAAL,CAAgBrH,MAAhB;AACA,SAFD;AAGA;AACD;;;qCAEgByG,K,EAAO7D,O,EAAS;AAE/B,UAAI,CAAC6D,KAAL,EAAY,OAAO,KAAP;AACZ,UAAI,CAAC7D,OAAL,EAAc,OAAO,IAAP,CAHiB,CAKhC;;AAEC,UAAIG,CAAC,GAAG0D,KAAK,CAACjK,GAAd;AAAA,UAAmBqW,CAAC,GAAGpM,KAAK,CAAChK,GAA7B;AAEA,UAAIwX,MAAM,GAAG,KAAb;;AACA,WAAK,IAAIhrB,CAAC,GAAG,CAAR,EAAWirB,CAAC,GAAGtR,OAAO,CAAC9Z,MAAR,GAAiB,CAArC,EAAwCG,CAAC,GAAG2Z,OAAO,CAAC9Z,MAApD,EAA4DorB,CAAC,GAAGjrB,CAAC,EAAjE,EAAqE;AACjE,YAAIkrB,EAAE,GAAGvR,OAAO,CAAC3Z,CAAD,CAAP,CAAWuT,GAApB;AAAA,YAAyB4X,EAAE,GAAGxR,OAAO,CAAC3Z,CAAD,CAAP,CAAWwT,GAAzC;AACA,YAAI4X,EAAE,GAAGzR,OAAO,CAACsR,CAAD,CAAP,CAAW1X,GAApB;AAAA,YAAyB8X,EAAE,GAAG1R,OAAO,CAACsR,CAAD,CAAP,CAAWzX,GAAzC;AAEA,YAAI8X,SAAS,GAAKH,EAAE,GAAGvB,CAAN,IAAayB,EAAE,GAAGzB,CAAnB,IACR9P,CAAC,GAAG,CAACsR,EAAE,GAAGF,EAAN,KAAatB,CAAC,GAAGuB,EAAjB,KAAwBE,EAAE,GAAGF,EAA7B,IAAmCD,EAD/C;AAEA,YAAII,SAAJ,EAAeN,MAAM,GAAG,CAACA,MAAV;AAClB;;AAED,aAAOA,MAAP;AAED;;;iCAEY7R,M,EAAQpC,M,EAAQkB,I,EAAM;AAEjC;AACA,UAAIsT,UAAU,GAAG,4FAAjB;AACA,UAAIC,UAAU,GAAG,wEAAjB;AAED,UAAInwB,IAAI,GAAG,IAAX;AAEA8d,YAAM,GAAGA,MAAM,IAAI,EAAnB;AAEA,UAAI9c,GAAG,GAAGkvB,UAAU,CACjBhrB,OADO,CACC,aADD,EACgB4Y,MAAM,CAAC5F,GADvB,EAEPhT,OAFO,CAEC,aAFD,EAEgB4Y,MAAM,CAAC3F,GAFvB,CAAV;AAKA9R,WAAK,CAACrF,GAAD,CAAL,CACIwP,IADJ,CACS,UAACC,QAAD,EAAc;AAClB,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACD,OAHJ,EAIIJ,IAJJ,CAIU,UAAAI,IAAI,EAAI;AAChB,YAAIrP,EAAE,GAAGqP,IAAI,IAAIA,IAAI,CAACwf,OAAb,IAAwBxf,IAAI,CAACwf,OAAL,CAAa,CAAb,CAAxB,IAA2Cxf,IAAI,CAACwf,OAAL,CAAa,CAAb,EAAgBC,YAApE;AACA,YAAIrvB,GAAG,GAAGmvB,UAAU,CACjBjrB,OADO,CACC,YADD,EACe3D,EADf,CAAV;AAEE8E,aAAK,CAACrF,GAAD,CAAL,CACIwP,IADJ,CACS,UAACC,QAAD,EAAc;AAClB,iBAAOA,QAAQ,CAACG,IAAT,EAAP;AACD,SAHJ,EAIIJ,IAJJ,CAIU,UAAAI,IAAI,EAAI;AAClBA,cAAI,CAACsH,GAAL,GAAW4F,MAAM,CAAC5F,GAAlB;AACAtH,cAAI,CAACuH,GAAL,GAAW2F,MAAM,CAAC3F,GAAlB;AACA,cAAIyE,IAAJ,EAAUA,IAAI,CAAChM,IAAD,EAAO8K,MAAP,CAAJ;AACN,SARJ;AASA,OAjBJ,WAkBU,UAAC9a,GAAD,EAAS;AACdqK,eAAO,CAACC,GAAR,CAAY,uBAAZ;AACAD,eAAO,CAACC,GAAR,CAAYtK,GAAZ;AACH,YAAIgc,IAAJ,EAAUA,IAAI,CAAC,EAAD,EAAKlB,MAAL,CAAJ;AACR,OAtBJ;AAwBA;;;+BAES1Q,M,EAAQ;AAClB,UAAI4B,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,eAAhB,EAAiC;AAAElF,cAAM,EAANA;AAAF,OAAjC,CAAZ;AACAzF,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;kCAEY5B,M,EAAQ;AACrB,UAAI4B,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,sBAAhB,EAAwC;AAAElF,cAAM,EAANA;AAAF,OAAxC,CAAZ;AACAzF,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;mCAEa5B,M,EAAQ;AACtB,UAAI4B,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,uBAAhB,EAAyC;AAAElF,cAAM,EAANA;AAAF,OAAzC,CAAZ;AACAzF,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;0CAEoB5B,M,EAAQ;AAC7B,UAAI4B,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,+BAAhB,EAAiD;AAAElF,cAAM,EAANA;AAAF,OAAjD,CAAZ;AACAzF,cAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC;;;6BAEO;AAAA;;AAEN,0BACD;AAAK,UAAE,EAAE,KAAKtL,KAAd;AAAqB,iBAAS,EAAE,KAAKvB,KAAL,CAAWoN,SAAX,IAAwB,WAAxD;AAAqE,WAAG,EAAE,aAAAvJ,EAAE;AAAA,iBAAK,MAAI,CAACC,QAAL,GAAgBD,EAArB;AAAA;AAA5E,sBACC;AAAK,UAAE,EAAE,KAAKtC,KAAL,GAAa;AAAtB,QADD,CADC;AAMD;;;;EAldiDxB,4D;;;;;;;;;;;;;ACPpD,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;CAGA;;CAGA;;CAGA;;AACA+jB,0DAAsB,CAACzO,aAAvB,GAAuC,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AAC5E,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,0DAAD;AAAwB,cAAU,EAAEtV,UAApC;AAAgD,UAAM,EAAEQ;AAAxD,IAAjB,EAAoF4U,IAApF;AACA,CAHD;;;;;;;;;;;;;;ACdA;AAAA;AAAe,SAAS8X,sBAAT,CAAgCc,OAAhC,EAAyC;AAEtD,MAAIjuB,IAAI,GAAG,IAAX;AACA,MAAIkuB,KAAK,GAAGD,OAAO,CAACE,aAAR,EAAZ,CAHsD,CAKtD;;AACA,MAAI1S,OAAO,GAAGwS,OAAO,CAAC1K,kBAAR,EAAd;AAEA,MAAI+M,MAAM,GAAG,EAAb;AACA,MAAIC,KAAK,GAAG9U,OAAO,CAACjX,MAApB;AACA,MAAI0e,OAAO,GAAG,KAAd;AACAzH,SAAO,CAACrb,OAAR,CAAgB,UAACkZ,KAAD,EAAW;AACzB,QAAI3S,IAAI,GAAG2S,KAAK,CAAC3W,IAAN,IAAc2O,IAAI,sBAAetR,IAAI,CAACS,MAAL,CAAYyO,SAA3B,EAA7B;AACA,QAAIshB,GAAG,GAAGxwB,IAAI,CAACS,MAAL,CAAYwO,KAAZ,CAAkBuC,IAAlB,CAAuB,UAAA8H,KAAK;AAAA,aAAI3S,IAAI,KAAM2S,KAAK,CAAC/X,EAAN,IAAYoF,IAAZ,IAAoB2S,KAAK,CAAC/Y,IAAN,IAAcoG,IAAxC,CAAR;AAAA,KAA5B,CAAV;AACA,QAAImL,KAAK,GAAG0e,GAAG,KAAMA,GAAG,CAAC1e,KAAJ,IAAa0e,GAAG,CAAC5e,eAAvB,CAAH,IAA+C,SAA3D;AACA,QAAKjL,IAAI,IAAIvD,SAAb,EAAyBuD,IAAI,GAAG,OAAP;AACzB,QAAK,CAAC2pB,MAAM,CAACxe,KAAD,CAAZ,EAAsBwe,MAAM,CAACxe,KAAD,CAAN,GAAgB,CAAhB;AACtBwe,UAAM,CAACxe,KAAD,CAAN;AACA,QAAIwH,KAAK,CAAC3W,IAAN,IAAc2W,KAAK,CAAC3W,IAAN,CAAWugB,OAA7B,EAAsCA,OAAO,GAAG,IAAV;AACvC,GARD;AAUA,MAAInB,IAAI,GAAG,wEAAX;AAEA,MAAI0O,KAAK,GAAG,CAAZ;AACAvwB,QAAM,CAACC,IAAP,CAAYmwB,MAAZ,EAAoBlwB,OAApB,CAA4B,UAACC,GAAD,EAAS;AACnC,QAAIqwB,OAAO,GAAGrwB,GAAd;AACA,QAAIswB,IAAI,GAAG,MAAML,MAAM,CAACjwB,GAAD,CAAZ,GAAoBkwB,KAA/B;AACA,QAAIK,KAAK,GAAIH,KAAK,GAAG,GAAT,GAAgB,GAA5B;AAEA1O,QAAI,qLAGyB6O,KAHzB,gDAIeF,OAJf,kFAMyBC,IANzB,6BAAJ;AAQAF,SAAK,GAAGA,KAAK,GAAGE,IAAhB;AACD,GAdD;AAgBA5O,MAAI,IAAI,qIAAqImM,KAArI,GAA6I,eAArJ;AAEA,SAAOtQ,CAAC,CAACqE,OAAF,CAAU;AAAEF,QAAI,EAAEA,IAAR;AAAc5U,aAAS,EAAE,8CAAzB;AAAyE+U,YAAQ,EAAEtE,CAAC,CAACuE,KAAF,CAAQ,EAAR,EAAY,EAAZ,CAAnF;AAAoGC,cAAU,EAAE,CAAC,EAAD,EAAK,EAAL,CAAhH;AAA0Hc,WAAO,EAAPA;AAA1H,GAAV,CAAP;AAED,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5CD;AACA;AAEA;AACA;AAEA;AAEA;;IAEqB2N,yB;;;;;AAEnB,qCAAY9wB,KAAZ,EAAmB;AAAA;;AAAA;;AAEjB,8BAAMA,KAAN;;AAEA,QAAIC,IAAI,gCAAR;;AAEAA,QAAI,CAACa,aAAL,GAAqB;AACnBM,UAAI,EAAE,EADa;AAEnB2vB,uBAAiB,EAAE,EAFA;AAGnBC,uBAAiB,EAAE,GAHA;AAInB7Z,oBAAc,EAAE,EAJG;AAKnBC,oBAAc,EAAE,GALG;AAMnBG,0BAAoB,EAAE,EANH;AAOnBC,0BAAoB,EAAE,GAPH;AAQnByZ,uBAAiB,EAAE;AARA,KAArB;AAWAhxB,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCd,KAAK,CAACU,MAAN,IAAgB,EAApD,CAAd;AAEAT,QAAI,CAACqC,KAAL,GAAa;AACXlB,UAAI,EAAEpB,KAAK,CAACoB,IADD;AAEX8vB,YAAM,EAAElxB,KAAK,CAACkxB,MAFH;AAGXniB,UAAI,EAAE/O,KAAK,CAAC+O,IAHD;AAIX2I,YAAM,EAAE;AAJG,KAAb;AAnBiB;AA0BlB;;;;sCAEiB7V,S,EAAWC,S,EAAW;AAEtC,UAAI7B,IAAI,GAAG,IAAX,CAFsC,CAItC;;AACA,UAAI,EAAGA,IAAI,CAACqC,KAAL,CAAWlB,IAAX,IAAmBnB,IAAI,CAACqC,KAAL,CAAWlB,IAAX,CAAgB8P,IAAtC,CAAJ,EAAkD;AAChDX,+DAAqB,CAACnP,IAAtB,CAA2BmrB,OAA3B,CAAmC;AAAEnrB,cAAI,EAAEnB,IAAI,CAACS,MAAL,CAAYU,IAApB;AAA0B4pB,aAAG,EAAE/qB,IAAI,CAACS,MAAL,CAAYsqB,GAA3C;AAAgDjqB,gBAAM,EAAEd,IAAI,CAACS,MAAL,CAAYK,MAApE;AAA4EC,aAAG,EAAEf,IAAI,CAACS,MAAL,CAAYM;AAA7F,SAAnC,EAAuI,UAACH,GAAD,EAAMO,IAAN,EAAe;AACpJnB,cAAI,CAAC0C,QAAL,CAAc;AAAEvB,gBAAI,EAAJA;AAAF,WAAd,EAAwB,YAAM;AAC5B,gBAAK,CAACnB,IAAI,CAACqC,KAAL,CAAWyM,IAAjB,EAAwB9O,IAAI,CAAC6P,SAAL;AACzB,WAFD;AAGD,SAJD;AAKD,OAND,MAMO;AACL,YAAK,CAAC7P,IAAI,CAACqC,KAAL,CAAWyM,IAAjB,EAAwB9O,IAAI,CAAC6P,SAAL;AACzB;AAEF;;;8BAES+M,I,EAAM;AAEd,UAAI5c,IAAI,GAAG,IAAX;;AACA,UAAI,CAACA,IAAI,CAACqC,KAAL,CAAW4uB,MAAhB,EAAwB;AACtB,eAAOjxB,IAAI,CAAC0C,QAAL,CAAc;AAAEoM,cAAI,EAAE;AAC3BoiB,oBAAQ,EAAE,EADiB;AAE3BjvB,mBAAO,EAAE;AAAE,mBAAK,EAAP;AAAW,mBAAK;AAAhB;AAFkB;AAAR,SAAd,CAAP;AAID;;AAED,UAAIjB,GAAG,aAAMhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAzC,uBAA8DhB,IAAI,CAACS,MAAL,CAAYK,MAA1E,mBAA6Fd,IAAI,CAACS,MAAL,CAAY0N,MAAzG,mBAA2HnO,IAAI,CAACS,MAAL,CAAYwwB,MAAvI,4BAAP;AACA,UAAIhwB,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA4F,WAAK,CAACrF,GAAD,EAAM;AAAEC,eAAO,EAAPA;AAAF,OAAN,CAAL,CACGuP,IADH,CACS,UAASC,QAAT,EAAmB;AACxB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,iBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,cAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,OANH,EAOG7B,IAPH,CAOQ,UAASI,IAAT,EAAe;AAEnB,YAAIvO,KAAK,qBAAQrC,IAAI,CAACqC,KAAb,CAAT;;AACAA,aAAK,CAACyM,IAAN,GAAa8B,IAAb;AAEA5Q,YAAI,CAAC0C,QAAL,CAAcL,KAAd,EAAqB,YAAW;AAC9B,cAAIua,IAAJ,EAAU,OAAOA,IAAI,EAAX;AACX,SAFD;AAID,OAhBH,WAiBS,UAASta,KAAT,EAAgB;AACrB2I,eAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,aAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAE,iBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,SAA9D;AACD,OApBH;AAsBD;;;sCAEiB;AAEhB,UAAInxB,IAAI,GAAG,IAAX;AACA,UAAI8O,IAAI,GAAG9O,IAAI,CAACqC,KAAL,CAAWyM,IAAtB;AAEA,UAAIsiB,aAAa,GAAGpxB,IAAI,CAAC,gBAAD,CAAxB;AACA,UAAIyC,OAAO,GAAG2uB,aAAa,CAACxuB,QAAd,EAAd;AACA,UAAIghB,MAAM,GAAG;AAAEsN,gBAAQ,EAAEE,aAAa,CAAC/uB,KAAd,CAAoB7B,KAAhC;AAAuCyB,eAAO,EAAE;AAAhD,OAAb;AAEA/B,YAAM,CAACC,IAAP,CAAY2O,IAAI,CAAC7M,OAAjB,EAA0B7B,OAA1B,CAAkC,UAACC,GAAD,EAAS;AACzC,YAAIgxB,UAAU,GAAGrxB,IAAI,uBAAgBK,GAAhB,EAArB;AACA,YAAIixB,gBAAgB,GAAGtxB,IAAI,6BAAsBK,GAAtB,EAA3B;AACA,YAAI,EAAGgxB,UAAU,IAAIA,UAAU,CAAChvB,KAAX,CAAiB7B,KAAlC,KAA6C,CAAC8wB,gBAAgB,CAACjvB,KAAjB,CAAuB7B,KAAzE,EAAgF;AAChFojB,cAAM,CAAC3hB,OAAP,CAAe5B,GAAf,IAAsB,EAAtB;;AACA,YAAIL,IAAI,CAACS,MAAL,CAAYuwB,iBAAZ,IAAiCK,UAAU,CAAChvB,KAAX,CAAiB7B,KAAtD,EAA6D;AAC3DojB,gBAAM,CAAC3hB,OAAP,CAAe5B,GAAf,EAAoB4C,KAApB,GAA4BouB,UAAU,CAAChvB,KAAX,CAAiB7B,KAA7C;AACA,cAAI,CAAC6wB,UAAU,CAACzuB,QAAX,EAAL,EAA4BH,OAAO,GAAG,KAAV;AAC7B;;AACD,YAAI6uB,gBAAgB,CAACjvB,KAAjB,CAAuB7B,KAA3B,EAAkC;AAChCojB,gBAAM,CAAC3hB,OAAP,CAAe5B,GAAf,EAAoB6C,WAApB,GAAkCouB,gBAAgB,CAACjvB,KAAjB,CAAuB7B,KAAzD;AACA,cAAI,CAAC8wB,gBAAgB,CAAC1uB,QAAjB,EAAL,EAAkCH,OAAO,GAAG,KAAV;AACnC;AACF,OAbD;AAeA,UAAI,CAACA,OAAL,EAAc,OAAO,IAAP;AACd,UAAIvC,MAAM,CAACC,IAAP,CAAYyjB,MAAM,CAAC3hB,OAAnB,EAA4BuC,MAA5B,GAAqC,CAAzC,EAA4C,OAAO,IAAP;AAC5C,aAAOof,MAAP;AAED;;;mCAEcjhB,I,EAAM;AAEnB,UAAI3C,IAAI,GAAG,IAAX;;AACA,UAAI8O,IAAI,qBAAQ9O,IAAI,CAACqC,KAAL,CAAWyM,IAAnB,CAAR;;AAEA,UAAInM,IAAI,CAAC4J,MAAT,EAAiB;AACfuC,YAAI,CAAC7M,OAAL,CAAcU,IAAI,CAAC4J,MAAL,CAAYhL,EAA1B,IAAiC;AAC/B0B,eAAK,EAAEjD,IAAI,CAACS,MAAL,CAAYuwB,iBAAZ,IAAiCruB,IAAI,CAAC4J,MAAL,CAAYtJ,KADrB;AAE/BC,qBAAW,EAAEP,IAAI,CAAC4J,MAAL,CAAYrJ;AAFM,SAAjC;AAID;;AAED,UAAIP,IAAI,CAACuuB,QAAT,EAAmB;AACjBpiB,YAAI,CAACoiB,QAAL,GAAgBvuB,IAAI,CAACuuB,QAArB;AACD;;AAED,WAAKxuB,QAAL,CAAc;AAAEoM,YAAI,EAAJA;AAAF,OAAd,EAAwB,YAAM,CAC7B,CADD;AAGD;;;gCAEW;AACV,UAAI9O,IAAI,GAAG,IAAX;;AACA,UAAI8O,IAAI,qBAAQ9O,IAAI,CAACqC,KAAL,CAAWyM,IAAnB,CAAR;;AACA,UAAI3O,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAY2O,IAAI,CAAC7M,OAAjB,EAA0Bge,IAA1B,EAAX;AACA,UAAI5f,GAAG,GAAGmB,QAAQ,CAAErB,IAAI,CAACA,IAAI,CAACqE,MAAL,GAAY,CAAb,CAAN,CAAR,GAAkC,CAA5C;AACAsK,UAAI,CAAC7M,OAAL,CAAc5B,GAAd,IAAsB,EAAtB;AACAL,UAAI,CAAC0C,QAAL,CAAc;AAAEoM,YAAI,EAAJA;AAAF,OAAd;AACD;;;gCAEW;AACV,UAAI,KAAKzM,KAAL,CAAWyM,IAAX,IAAmB,KAAKzM,KAAL,CAAWyM,IAAX,CAAgBmD,GAAvC,EAA4C;AAC1C,eAAO,KAAK5P,KAAL,CAAWyM,IAAX,CAAgBmD,GAAhB,CAAoBC,IAA3B;AACD,OAFD,MAEO;AACL,YAAIqf,gBAAgB,GAAG,KAAK9wB,MAAL,CAAY8wB,gBAAnC;AACA,YAAInF,QAAQ,GAAG,KAAKrsB,KAAL,CAAWoB,IAAX,IAAmB,KAAKpB,KAAL,CAAWoB,IAAX,CAAgB8P,IAAlD,CAFK,CAGL;AACA;;AACA,eAAQsgB,gBAAgB,IAAI,WAApB,IAAmCnF,QAAnC,IACNmF,gBAAgB,IAAI,QAApB,KAAkCnF,QAAQ,IAAI,QAAZ,IAAwBA,QAAQ,IAAI,OAAtE,CADM,IAENmF,gBAAgB,IAAI,OAApB,IAA+BnF,QAAQ,IAAI,OAF7C;AAGD;AACF;;;iCAEY;AAEX,UAAIpsB,IAAI,GAAG,IAAX;AAEAA,UAAI,CAAC0C,QAAL,CAAc;AAAE+U,cAAM,EAAE;AAAV,OAAd,EAAgC,YAAM;AAEpC,YAAI+Z,eAAe,GAAGxxB,IAAI,CAACwxB,eAAL,EAAtB;;AACA,YAAI,CAACA,eAAL,EAAsB;AACpBxxB,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE;AAAV,WAAd;AACA;AACD;;AAED,YAAI,CAACzX,IAAI,CAACyxB,SAAL,EAAL,EAAuB,OAAO3c,KAAK,CAAC,uBAAD,CAAZ;AAEvB,YAAI4c,KAAK,GAAG,IAAZ;AACA,YAAI1wB,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAA1C,uBAA4DhB,IAAI,CAACS,MAAL,CAAYK,MAAxE,mBAAyFd,IAAI,CAACS,MAAL,CAAY0N,MAArG,UAAP;AACA,YAAI+C,MAAM,GAAG,MAAb;;AACA,YAAIlR,IAAI,CAACqC,KAAL,CAAWyM,IAAX,IAAmB9O,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBvN,EAAvC,EAA2C;AACzCP,aAAG,eAAShB,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBvN,EAAzB,CAAH;AACA2P,gBAAM,GAAG,KAAT;AACAwgB,eAAK,GAAG,KAAR;AACD;;AACD,YAAIzwB,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA,YAAI8G,IAAI,GAAGiqB,eAAX;AAEAnrB,aAAK,CAACrF,GAAD,EAAM;AACTkQ,gBAAM,EAANA,MADS;AAETjQ,iBAAO,EAAPA,OAFS;AAGTsG,cAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAepN,IAAf;AAHG,SAAN,CAAL,CAKGiJ,IALH,CAKS,UAASC,QAAT,EAAmB;AACxB,cAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,mBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,gBAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,SAVH,EAWG7B,IAXH,CAWQ,UAASI,IAAT,EAAe;AAErB,cAAIhE,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,qBAAhB,EAAuC;AAAElF,kBAAM,EAAE4F;AAAV,WAAvC,CAAZ;AACE,cAAI,CAAC8gB,KAAL,EAAY9kB,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,iBAAhB,EAAmC;AAAElF,kBAAM,EAAE4F;AAAV,WAAnC,CAAR;AAEdrL,kBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;;AACE,cAAI,OAAO5M,IAAI,CAACS,MAAL,CAAYkxB,UAAnB,IAAiC,UAArC,EAAiD;AAC/C3xB,gBAAI,CAACS,MAAL,CAAYkxB,UAAZ,CAAuBH,eAAvB;AACD;AAEF,SArBH,WAsBS,UAASlvB,KAAT,EAAgB;AACrB2I,iBAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,eAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAErc,iBAAK,CAACqc,QAAD,CAAL;AAAiB,mBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,WAA/E;AACAnxB,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE;AAAV,WAAd;AACD,SA1BH;AA4BD,OAlDD;AAoDD;;;6BAEQ;AAAA;;AAEP,UAAIzX,IAAI,GAAG,IAAX;AACA,UAAI8O,IAAI,GAAG9O,IAAI,CAACqC,KAAL,CAAWyM,IAAX,IAAmB,EAA9B;AAEA,UAAIH,SAAS,GAAG,IAAhB;;AACA,UAAI3O,IAAI,CAACS,MAAL,CAAYkO,SAAhB,EAA2B;AACzBA,iBAAS,gBACP;AAAK,mBAAS,EAAC;AAAf,WAA4B3O,IAAI,CAACS,MAAL,CAAYkO,SAAxC,CADF;AAGD;;AAED,UAAIijB,gBAAgB,GAAG,IAAvB;;AACA,UAAI5xB,IAAI,CAACyxB,SAAL,EAAJ,EAAsB;AACpBG,wBAAgB,gBACd;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAQ,mBAAS,EAAC,iBAAlB;AAAoC,iBAAO,EAAE,mBAAM;AAAE,gBAAI5xB,IAAI,CAACS,MAAL,CAAYkxB,UAAhB,EAA4B3xB,IAAI,CAACS,MAAL,CAAYkxB,UAAZ;AAA2B;AAA5G,mBADF,eAED;AAAQ,iBAAO,EAAE,iBAAC9sB,CAAD,EAAO;AAAE,gBAAI,CAAC7E,IAAI,CAACqC,KAAL,CAAWoV,MAAhB,EAAwBzX,IAAI,CAAC6xB,UAAL;AAAoB,WAAtE;AAAwE,mBAAS,2CAAqC7xB,IAAI,CAACqC,KAAL,CAAWoV,MAAX,GAAoB,eAApB,GAAsC,EAA3E;AAAjF,uBAFC,CADF;AAMD,OAPD,MAOO;AACLma,wBAAgB,gBACd;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAQ,mBAAS,EAAC,iBAAlB;AAAoC,iBAAO,EAAE,mBAAM;AAAE,gBAAI5xB,IAAI,CAACS,MAAL,CAAYkxB,UAAhB,EAA4B3xB,IAAI,CAACS,MAAL,CAAYkxB,UAAZ;AAA2B;AAA5G,mBADF,eAEE;AAAQ,iBAAO,EAAE,mBAAM;AAAErhB,mEAAqB,CAACO,YAAtB,CAAmCG,GAAnC,CAAuC,6BAAvC,EAAsE,IAAtE;AAA6EzL,oBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyBjQ,IAAI,CAACS,MAAL,CAAY0S,QAArC;AAAgD,WAAtJ;AAAwJ,mBAAS,EAAC;AAAlK,sBAFF,CADF;AAMD;;AAED,0BACE;AAAK,UAAE,EAAEnT,IAAI,CAACsB,KAAd;AAAqB,iBAAS,EAAC,UAA/B;AAA0C,WAAG,EAAE,aAAAsC,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAAjD,SACG+K,SADH,eAGE,+EAHF,eAIE,2DAAC,wDAAD,CAAwB,gBAAxB;AAAyC,cAAM,EAAE;AAAE7L,mBAAS,EAAE,MAAb;AAAqB0I,mBAAS,EAAExL,IAAI,CAACS,MAAL,CAAYqwB,iBAA5C;AAA+DrlB,mBAAS,EAAEzL,IAAI,CAACS,MAAL,CAAYswB,iBAAtF;AAAyG7uB,qBAAW,EAAE;AAAtH,SAAjD;AAAkL,aAAK,EAAE4M,IAAI,CAACoiB,QAA9L;AAAwM,gBAAQ,EAAG,kBAAAvuB,IAAI;AAAA,iBAAI3C,IAAI,CAACqD,cAAL,CAAoB;AAAE6tB,oBAAQ,EAAEvuB,IAAI,CAACnC;AAAjB,WAApB,CAAJ;AAAA,SAAvN;AAA2Q,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,kBAAJ,GAAyB4D,EAA9B;AAAA;AAAlR,QAJF,eAME,4FANF,eAOE;AAAI,iBAAS,EAAC;AAAd,SACGkL,IAAI,IAAIA,IAAI,CAAC7M,OAAb,IAAwB/B,MAAM,CAACC,IAAP,CAAY2O,IAAI,CAAC7M,OAAjB,EAA0Bge,IAA1B,GAAiCxb,GAAjC,CAAqC,UAACpE,GAAD,EAAS;AACrE,YAAIkM,MAAM,GAAGuC,IAAI,CAAC7M,OAAL,CAAa5B,GAAb,CAAb;AACA,YAAIyxB,cAAc,GAAG,IAArB;AACA,YAAI9xB,IAAI,CAACS,MAAL,CAAYuwB,iBAAhB,EAAmCc,cAAc,gBAAG,2DAAC,wDAAD,CAAwB,gBAAxB;AAAyC,gBAAM,EAAE;AAAEhvB,qBAAS,EAAE,MAAb;AAAqB0I,qBAAS,EAAExL,IAAI,CAACS,MAAL,CAAYyW,cAA5C;AAA4DzL,qBAAS,EAAEzL,IAAI,CAACS,MAAL,CAAY0W,cAAnF;AAAmGjV,uBAAW,EAAE;AAAhH,WAAjD;AAA4K,eAAK,EAAEqK,MAAM,CAACtJ,KAA1L;AAAiM,kBAAQ,EAAG,kBAAAN,IAAI;AAAA,mBAAI3C,IAAI,CAACqD,cAAL,CAAoB;AAAEkJ,oBAAM,EAAE;AAAEhL,kBAAE,EAAElB,GAAN;AAAW4C,qBAAK,EAAEN,IAAI,CAACnC;AAAvB;AAAV,aAApB,CAAJ;AAAA,WAAhN;AAAsR,aAAG,EAAE,aAAAoD,EAAE;AAAA,mBAAK5D,IAAI,uBAAgBK,GAAhB,EAAJ,GAA6BuD,EAAlC;AAAA;AAA7R,UAAjB;AACnC,4BACE;AAAI,mBAAS,EAAC,sBAAd;AAAqC,aAAG,oBAAavD,GAAb;AAAxC,WACGyxB,cADH,eAEE,2DAAC,wDAAD,CAAwB,gBAAxB;AAAyC,gBAAM,EAAE;AAAEhvB,qBAAS,EAAE,MAAb;AAAqB0I,qBAAS,EAAExL,IAAI,CAACS,MAAL,CAAY6W,oBAA5C;AAAkE7L,qBAAS,EAAEzL,IAAI,CAACS,MAAL,CAAY8W,oBAAzF;AAA+GrV,uBAAW,EAAE;AAA5H,WAAjD;AAA+L,eAAK,EAAEqK,MAAM,CAACrJ,WAA7M;AAA0N,kBAAQ,EAAG,kBAAAP,IAAI;AAAA,mBAAI3C,IAAI,CAACqD,cAAL,CAAoB;AAAEkJ,oBAAM,EAAE;AAAEhL,kBAAE,EAAElB,GAAN;AAAW6C,2BAAW,EAAEP,IAAI,CAACnC;AAA7B;AAAV,aAApB,CAAJ;AAAA,WAAzO;AAAqT,aAAG,EAAE,aAAAoD,EAAE;AAAA,mBAAK5D,IAAI,6BAAsBK,GAAtB,EAAJ,GAAmCuD,EAAxC;AAAA;AAA5T,UAFF,CADF;AAMD,OAVwB,CAD3B,CAPF,eAqBE;AAAG,iBAAS,EAAC,uBAAb;AAAqC,eAAO,EAAG,iBAAAiB,CAAC;AAAA,iBAAI,MAAI,CAACktB,SAAL,EAAJ;AAAA;AAAhD,+CArBF,EAuBGH,gBAvBH,CADF;AA6BD;;;;EAlRoD9xB,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVvD;AACA;AAEA;AACA;AAEA;AACA;AAEA;;IAEqBkyB,qB;;;;;AAEnB,iCAAYjyB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEA,QAAIC,IAAI,gCAAR;;AACAA,QAAI,CAACuB,EAAL,GAAUxB,KAAK,CAACwB,EAAN,uBAA0BC,QAAQ,CAAE,UAAUC,IAAI,CAACC,MAAL,EAAZ,CAAlC,CAAV;AAEA1B,QAAI,CAACa,aAAL,GAAqB;AACnBC,YAAM,EAAE,IADW;AAEnBqN,YAAM,EAAE,IAFW;AAGnBlL,WAAK,EAAE,IAHY;AAGN;AACbiU,oBAAc,EAAE,EAJG;AAKnBC,oBAAc,EAAE,GALG;AAMnBG,0BAAoB,EAAE,EANH;AAOnBC,0BAAoB,EAAE,GAPH;AAQnBpW,UAAI,EAAE,IARa;AASnBgS,cAAQ,EAAE,EATS;AAUnBpS,SAAG,EAAE;AACHC,WAAG,EAAE,IADF;AAEHC,eAAO,EAAE;AAFN,OAVc;AAcnBswB,sBAAgB,EAAE,QAdC;AAenBU,oBAAc,EAAE,IAfG;AAgBnBjB,uBAAiB,EAAE,IAhBA;AAiBnBkB,gCAA0B,EAAE;AAjBT,KAArB;AAoBAlyB,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AACAT,QAAI,CAACS,MAAL,CAAY0S,QAAZ,GAAuBnT,IAAI,CAACS,MAAL,CAAY0S,QAAZ,IAAwB,2BAA2BU,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB,CAA5F;AACAjQ,QAAI,CAACmyB,YAAL,GAAoBnyB,IAAI,CAACmyB,YAAL,CAAkB7uB,IAAlB,CAAuBtD,IAAvB,CAApB;AAEAA,QAAI,CAACqC,KAAL,GAAa;AACXlB,UAAI,EAAEnB,IAAI,CAACS,MAAL,CAAYU,IADP;AAEX2N,UAAI,EAAE/O,KAAK,CAAC+O,IAFD;AAGXmiB,YAAM,EAAIlxB,KAAK,CAAC+O,IAAN,IAAc/O,KAAK,CAAC+O,IAAN,CAAWvN,EAA3B,IAAmCvB,IAAI,CAACS,MAAL,CAAYwwB,MAH5C;AAIXmB,oBAAc,EAAE,IAJL;AAKXC,gBAAU,EAAE,KALD;AAMXC,kBAAY,EAAE,KANH;AAOXC,cAAQ,EAAE,KAPC;AAQXC,uBAAiB,EAAE;AARR,KAAb;;AAWA,QAAIxyB,IAAI,CAACqC,KAAL,CAAWyM,IAAf,EAAqB;AACnB9O,UAAI,CAACyyB,cAAL,CAAoBzyB,IAAI,CAACqC,KAAL,CAAWyM,IAA/B;;AACA,UAAI9O,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgB+F,QAApB,EAA8B;AAC5B7U,YAAI,CAACqC,KAAL,CAAW+vB,cAAX,GAA4BpyB,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgB+F,QAA5C;AACD;AACF;;AA9CgB;AAgDlB;;;;sCAEiBjT,S,EAAWC,S,EAAW;AAEtC,UAAI7B,IAAI,GAAG,IAAX,CAFsC,CAItC;;AACA,UAAI,EAAGA,IAAI,CAACqC,KAAL,CAAWlB,IAAX,IAAmBnB,IAAI,CAACqC,KAAL,CAAWlB,IAAX,CAAgB8P,IAAtC,CAAJ,EAAkD;AAChDX,+DAAqB,CAACnP,IAAtB,CAA2BmrB,OAA3B,CAAmC;AAAEnrB,cAAI,EAAEnB,IAAI,CAACS,MAAL,CAAYU,IAApB;AAA0B4pB,aAAG,EAAE/qB,IAAI,CAACS,MAAL,CAAYsqB,GAA3C;AAAgDjqB,gBAAM,EAAEd,IAAI,CAACS,MAAL,CAAYK,MAApE;AAA4EC,aAAG,EAAEf,IAAI,CAACS,MAAL,CAAYM;AAA7F,SAAnC,EAAuI,UAACH,GAAD,EAAMO,IAAN,EAAe;AACpJnB,cAAI,CAAC0C,QAAL,CAAc;AAAEvB,gBAAI,EAAJA;AAAF,WAAd,EAAwB,YAAM;AAC5B,gBAAI,CAACnB,IAAI,CAACqC,KAAL,CAAWyM,IAAZ,IAAoB9O,IAAI,CAACS,MAAL,CAAY0N,MAApC,EAA4CnO,IAAI,CAAC6P,SAAL;AAC7C,WAFD;AAGD,SAJD;AAKD,OAND,MAMO;AACL,YAAI,CAAC7P,IAAI,CAACqC,KAAL,CAAWyM,IAAZ,IAAoB9O,IAAI,CAACS,MAAL,CAAY0N,MAApC,EAA4CnO,IAAI,CAAC6P,SAAL;AAC7C,OAbqC,CAetC;AACA;AACA;;AAED;;;8BAES+M,I,EAAM;AAEd,UAAI5c,IAAI,GAAG,IAAX;;AAEA,UAAI,CAACA,IAAI,CAACqC,KAAL,CAAW4uB,MAAhB,EAAwB;AACtB;AACA,eAAOjxB,IAAI,CAAC0C,QAAL,CAAc;AAAE6vB,kBAAQ,EAAE;AAAZ,SAAd,EAAkC,YAAK,CAC7C,CADM,CAAP;AAED;;AAED,UAAIvxB,GAAG,aAAMhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAzC,uBAA8DhB,IAAI,CAACS,MAAL,CAAYK,MAA1E,mBAA6Fd,IAAI,CAACS,MAAL,CAAY0N,MAAzG,mBAA2HnO,IAAI,CAACqC,KAAL,CAAW4uB,MAAtI,2DAAP;AACA,UAAIhwB,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA4F,WAAK,CAACrF,GAAD,EAAM;AAAEC,eAAO,EAAPA;AAAF,OAAN,CAAL,CACGuP,IADH,CACS,UAASC,QAAT,EAAmB;AACxB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,iBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,cAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,OANH,EAOG7B,IAPH,CAOQ,UAASI,IAAT,EAAe;AAEnB,YAAIvO,KAAK,mCAAQrC,IAAI,CAACqC,KAAb;AAAoBgwB,oBAAU,EAAE,KAAhC;AAAuCC,sBAAY,EAAE;AAArD,UAAT;;AACAjwB,aAAK,CAACyM,IAAN,GAAa8B,IAAb;AACAvO,aAAK,CAAC4uB,MAAN,GAAergB,IAAI,CAACrP,EAApB;AAEAvB,YAAI,CAACyyB,cAAL,CAAoBpwB,KAAK,CAACyM,IAA1B;;AAEA,YAAIzM,KAAK,CAACyM,IAAN,CAAW+F,QAAf,EAAyB;AACvBxS,eAAK,CAAC+vB,cAAN,GAAuB/vB,KAAK,CAACyM,IAAN,CAAW+F,QAAlC;AACD;;AAED7U,YAAI,CAAC0C,QAAL,CAAcL,KAAd,EAAqB,YAAW;AAC9B,cAAIua,IAAJ,EAAU,OAAOA,IAAI,EAAX;AACX,SAFD;AAID,OAvBH,WAwBS,UAASta,KAAT,EAAgB;AACrB2I,eAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,aAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAE,iBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,SAA9D;AACD,OA3BH;AA6BD;;;mCAEcriB,I,EAAM;AACnB,UAAI9O,IAAI,GAAG,IAAX;;AACA,UAAI8O,IAAI,CAAC4jB,SAAT,EAAoB;AAClBxyB,cAAM,CAACC,IAAP,CAAY2O,IAAI,CAAC7M,OAAjB,EAA0Bge,IAA1B,GAAiC7f,OAAjC,CAAyC,UAACC,GAAD,EAAS;AAChD,cAAIkM,MAAM,GAAGuC,IAAI,CAAC7M,OAAL,CAAa5B,GAAb,CAAb;AACAkM,gBAAM,CAAComB,QAAP,GAAkB7jB,IAAI,CAAC4jB,SAAL,CAAeryB,GAAf,CAAlB;AACAkM,gBAAM,CAACqmB,QAAP,GAAkBpxB,QAAQ,CAAC,OAAQsN,IAAI,CAAC4jB,SAAL,CAAeryB,GAAf,IAAsByO,IAAI,CAAC4jB,SAAL,CAAenC,KAA7C,CAAD,CAA1B;AACAhkB,gBAAM,CAACqmB,QAAP,GAAkBrmB,MAAM,CAACqmB,QAAP,IAAmB,CAArC;AACD,SALD;AAMD;AAEF;;;mCAEc;AACb,WAAKlwB,QAAL,CAAc;AAAE6vB,gBAAQ,EAAE;AAAZ,OAAd;AACD;;;mCAEc;AACb,WAAK7vB,QAAL,CAAc;AACZ6vB,gBAAQ,EAAE;AADE,OAAd,EAEG,YAAW;AACZ,aAAK1iB,SAAL;AACD,OAJD;AAKD;;;oCAEe;AACd,WAAKnN,QAAL,CAAc;AAAE2vB,kBAAU,EAAE;AAAd,OAAd;AACD;;;sCAEiB;AAChB,WAAK3vB,QAAL,CAAc;AAAE4vB,oBAAY,EAAE;AAAhB,OAAd;AACD;;;iCAEY3vB,I,EAAM;AACjB,WAAKD,QAAL,CAAc;AAAE0vB,sBAAc,EAAEzvB,IAAI,CAAC4J;AAAvB,OAAd;AACD;;;qCAEgBsmB,Q,EAAU;AACzB,WAAKhjB,SAAL;AACD;;;8BAES;AACR,aAAO,CAAC,CAAC,KAAKxN,KAAL,CAAW+vB,cAApB;AACD;;;gCAEW;AACV,UAAIb,gBAAgB,GAAG,KAAK9wB,MAAL,CAAY8wB,gBAAnC;AACA,UAAInF,QAAQ,GAAG,KAAK/pB,KAAL,CAAWlB,IAAX,IAAmB,KAAKkB,KAAL,CAAWlB,IAAX,CAAgB8P,IAAlD,CAFU,CAGV;;AACA,aAAQsgB,gBAAgB,IAAI,WAApB,IAAmCnF,QAAnC,IACAmF,gBAAgB,IAAI,QAApB,KAAkCnF,QAAQ,IAAI,QAAZ,IAAwBA,QAAQ,IAAI,OAAtE,CADA,IAEAmF,gBAAgB,IAAI,OAApB,IAA+BnF,QAAQ,IAAI,OAFnD;AAGD;;;iCAEY;AAEX,UAAIpsB,IAAI,GAAG,IAAX;AAEAA,UAAI,CAAC0C,QAAL,CAAc;AAAE+U,cAAM,EAAE;AAAV,OAAd,EAAgC,YAAM;AAEpC,YAAI,CAACzX,IAAI,CAACyC,OAAL,EAAL,EAAqB;AACnBzC,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE,KAAV;AAAiBhV,mBAAO,EAAE;AAA1B,WAAd;AACA;AACD;;AAED,YAAI,CAACzC,IAAI,CAACyxB,SAAL,EAAL,EAAuB,OAAO3c,KAAK,CAAC,uBAAD,CAAZ;AAEvB,YAAI9T,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAA1C,uBAA4DhB,IAAI,CAACS,MAAL,CAAYK,MAAxE,mBAAyFd,IAAI,CAACS,MAAL,CAAY0N,MAArG,mBAAsHnO,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBvN,EAAtI,UAAP;AACA,YAAIN,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AACA,YAAIyQ,MAAM,GAAG,MAAb;AAEA,YAAI3J,IAAI,GAAG;AACTgF,gBAAM,EAAEvM,IAAI,CAACqC,KAAL,CAAW+vB;AADV,SAAX;AAIA/rB,aAAK,CAACrF,GAAD,EAAM;AACTkQ,gBAAM,EAANA,MADS;AAETjQ,iBAAO,EAAPA,OAFS;AAGTsG,cAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAepN,IAAf;AAHG,SAAN,CAAL,CAKGiJ,IALH,CAKS,UAASC,QAAT,EAAmB;AACxB,cAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,mBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,gBAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,SAVH,EAWG7B,IAXH,CAWQ,UAASI,IAAT,EAAe;AAEnB5Q,cAAI,CAAC6P,SAAL,CAAgB,YAAM;AACpB7P,gBAAI,CAAC0C,QAAL,CAAc;AAAE+U,oBAAM,EAAE,KAAV;AAAiB+a,+BAAiB,EAAE;AAApC,aAAd,EAA2D,YAAM;AACjE,kBAAI5lB,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,gBAAhB,EAAkC;AAAElF,sBAAM,EAAE4F;AAAV,eAAlC,CAAZ;AACArL,sBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC,aAHD;AAID,WALD;;AAOA,cAAI,OAAO5M,IAAI,CAACS,MAAL,CAAYqyB,QAAnB,IAA+B,UAAnC,EAA+C;AAC7C9yB,gBAAI,CAACS,MAAL,CAAYqyB,QAAZ,CAAqB;AAAE5vB,yBAAW,EAAElD,IAAI,CAACqC,KAAL,CAAWa;AAA1B,aAArB;AACD;AAEF,SAxBH,WAyBS,UAASZ,KAAT,EAAgB;AACrBA,eAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAErc,iBAAK,CAACqc,QAAD,CAAL;AAAiB,mBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,WAA/E;AACAnxB,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE,KAAV;AAAiBhV,mBAAO,EAAE;AAA1B,WAAd;AACD,SA5BH;AA8BD,OA/CD;AAiDD;;;iCAEY;AAEX,UAAIzC,IAAI,GAAG,IAAX;AAEAA,UAAI,CAAC0C,QAAL,CAAc;AAAE+U,cAAM,EAAE;AAAV,OAAd,EAAgC,YAAM;AAEpC,YAAI3I,IAAI,GAAG9O,IAAI,CAACqC,KAAL,CAAWyM,IAAtB;AACA,YAAI,EAAGA,IAAI,IAAIA,IAAI,CAACmD,GAAb,IAAoBnD,IAAI,CAACmD,GAAL,UAAvB,CAAJ,EAA8C,OAAO6C,KAAK,CAAC,mCAAD,CAAZ;AAC9C,YAAI,EAAGhG,IAAI,IAAIA,IAAI,CAACvN,EAAhB,CAAJ,EAA0B,OAAOuT,KAAK,CAAC,mCAAD,CAAZ;AAE1B,YAAI9T,GAAG,aAAOhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAA1C,uBAA4DhB,IAAI,CAACS,MAAL,CAAYK,MAAxE,mBAAyFd,IAAI,CAACS,MAAL,CAAY0N,MAArG,mBAAsHnO,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBvN,EAAtI,CAAP;AACA,YAAI2P,MAAM,GAAG,QAAb;AACA,YAAIjQ,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA4F,aAAK,CAACrF,GAAD,EAAM;AACTkQ,gBAAM,EAANA,MADS;AAETjQ,iBAAO,EAAPA;AAFS,SAAN,CAAL,CAIGuP,IAJH,CAIS,UAASC,QAAT,EAAmB;AACxB,cAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,mBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,gBAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,SATH,EAUG7B,IAVH,CAUQ,UAASI,IAAT,EAAe;AAErB,cAAIhE,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,kBAAhB,EAAoC;AAAElF,kBAAM,EAAE4F;AAAV,WAApC,CAAZ;AACArL,kBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AAEC,SAfH,WAgBS,UAAStK,KAAT,EAAgB;AACrB2I,iBAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,eAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAErc,iBAAK,CAACqc,QAAD,CAAL;AAAiB,mBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,WAA/E;AACAnxB,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE;AAAV,WAAd;AACD,SApBH;AAsBD,OAhCD;AAkCD;;;6BAEQ;AAAA;;AAEP,UAAIzX,IAAI,GAAG,IAAX;AACA,UAAI8O,IAAI,GAAG9O,IAAI,CAACqC,KAAL,CAAWyM,IAAX,IAAmB,EAA9B;;AAEA,UAAI9O,IAAI,CAACqC,KAAL,CAAWkwB,QAAf,EAAyB;AAEvB,4BACE;AAAK,YAAE,EAAE,KAAKhxB,EAAd;AAAkB,mBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,UAArD;AAAiE,aAAG,EAAE,aAACvJ,EAAD,EAAQ;AAAE,kBAAI,CAACC,QAAL,GAAgBD,EAAhB;AAAqB;AAArG,wBACE,2DAAC,sDAAD;AAA2B,gBAAM,kCAAO5D,IAAI,CAACS,MAAZ;AAAoBkxB,sBAAU,EAAE3xB,IAAI,CAACmyB;AAArC,YAAjC;AAAsF,gBAAM,EAAEnyB,IAAI,CAACqC,KAAL,CAAWyM,IAAX,IAAmB9O,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBvN,EAAjI;AAAqI,cAAI,EAAEvB,IAAI,CAACqC,KAAL,CAAWyM,IAAtJ;AAA4J,cAAI,EAAE9O,IAAI,CAACqC,KAAL,CAAWlB;AAA7K,UADF,CADF;AAMD,OARD,MAQO;AAEL,YAAI4xB,YAAY,GAAG,IAAnB;;AACA,YAAMjkB,IAAI,IAAIA,IAAI,CAAC7M,OAAb,IAAwB,CAAC6M,IAAI,CAAC+F,QAAhC,IAA8C7U,IAAI,CAACqC,KAAL,CAAWiwB,YAA7D,EAA2E;AAEzE,cAAI7xB,MAAM,GAAG;AAAEF,gBAAI,EAAE,YAAR;AAAsB0B,mBAAO,EAAE;AAA/B,WAAb;AACA/B,gBAAM,CAACC,IAAP,CAAY2O,IAAI,CAAC7M,OAAjB,EAA0Bge,IAA1B,GAAiCxb,GAAjC,CAAqC,UAAApE,GAAG,EAAI;AAC1C,gBAAI2yB,UAAU,GAAGhzB,IAAI,CAACS,MAAL,CAAYuwB,iBAAZ,IAAiCliB,IAAI,CAAC7M,OAAL,CAAa5B,GAAb,EAAkB4C,KAAnD,iBAAkE6L,IAAI,CAAC7M,OAAL,CAAa5B,GAAb,EAAkB4C,KAApF,aAAmG,EAApH;AACA+vB,sBAAU,IAAIlkB,IAAI,CAAC7M,OAAL,CAAa5B,GAAb,EAAkB6C,WAAlB,IAAiC,EAA/C;AACAzC,kBAAM,CAACwB,OAAP,CAAeuE,IAAf,CAAoB;AAClBgG,kCAAoB,EAAEwmB,UADJ;AAElBxyB,mBAAK,EAAEH;AAFW,aAApB;AAID,WAPD;AASA,cAAIuxB,gBAAgB,GAAG,IAAvB;;AACA,cAAI5xB,IAAI,CAACyxB,SAAL,EAAJ,EAAsB;AACpBG,4BAAgB,gBAAI;AAAQ,qBAAO,EAAE,iBAAC/sB,CAAD,EAAO;AAAE,oBAAI,CAAC7E,IAAI,CAACqC,KAAL,CAAWoV,MAAhB,EAAwBzX,IAAI,CAACizB,UAAL;AAAoB,eAAtE;AAAwE,uBAAS,2BAAqB,CAACjzB,IAAI,CAACyC,OAAL,EAAD,GAAkB,eAAlB,GAAoC,EAAzD;AAAjF,yBAApB;AACD,WAFD,MAEO;AACLmvB,4BAAgB,gBAAI;AAAQ,qBAAO,EAAE,mBAAM;AAAEthB,uEAAqB,CAACO,YAAtB,CAAmCG,GAAnC,CAAuC,wBAAvC,EAAiE,IAAjE;AAAwEzL,wBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyBjQ,IAAI,CAACS,MAAL,CAAY0S,QAArC;AAAgD,eAAjJ;AAAmJ,uBAAS,EAAC;AAA7J,0BAApB;AACD;;AAED,cAAI+f,oBAAoB,GAAG,IAA3B;AACA,cAAIlzB,IAAI,CAACS,MAAL,CAAYyxB,0BAAZ,IAA2C,EAAEpjB,IAAI,CAAC+F,QAAL,IAAiB7U,IAAI,CAACqC,KAAL,CAAWgwB,UAA9B,CAA/C,EAA0Fa,oBAAoB,gBAAI;AAAG,qBAAS,EAAC,wBAAb;AAAsC,mBAAO,EAAG,iBAAAruB,CAAC;AAAA,qBAAI,MAAI,CAACsuB,aAAL,EAAJ;AAAA;AAAjD,kCAAxB;AAE1FJ,sBAAY,gBACV;AAAK,qBAAS,EAAC;AAAf,0BACE,2DAAC,wDAAD,CAAwB,MAAxB;AAA+B,kBAAM,EAAEtyB,MAAvC;AAA+C,iBAAK,EAAET,IAAI,CAACqC,KAAL,CAAW+vB,cAAjE;AAAiF,oBAAQ,EAAG,kBAAAzvB,IAAI;AAAA,qBAAI3C,IAAI,CAACozB,YAAL,CAAkB;AAAE7mB,sBAAM,EAAE5J,IAAI,CAACnC;AAAf,eAAlB,CAAJ;AAAA,aAAhG;AAAgJ,eAAG,EAAE,aAAAoD,EAAE;AAAA,qBAAK5D,IAAI,CAACkD,WAAL,GAAmBU,EAAxB;AAAA;AAAvJ,YADF,eAEE;AAAK,qBAAS,EAAC;AAAf,aACGguB,gBADH,EAEGsB,oBAFH,CAFF,CADF;AASD;;AAED,YAAIG,UAAU,GAAG,IAAjB;;AACA,YAAKvkB,IAAI,KAAMA,IAAI,CAAC+F,QAAL,IAAiB7U,IAAI,CAACqC,KAAL,CAAWgwB,UAAlC,CAAT,EAA0D;AAExD,cAAIiB,sBAAsB,GAAG,IAA7B;AACA,cAAI,CAACtzB,IAAI,CAACqC,KAAL,CAAWiwB,YAAZ,IAA4B,EAAExjB,IAAI,IAAIA,IAAI,CAAC7M,OAAb,IAAwB,CAAC6M,IAAI,CAAC+F,QAAhC,CAAhC,EAA2Eye,sBAAsB,gBAAI;AAAG,qBAAS,EAAC,0BAAb;AAAwC,mBAAO,EAAG,iBAAAzuB,CAAC;AAAA,qBAAI,MAAI,CAAC0uB,eAAL,EAAJ;AAAA;AAAnD,8BAA1B;AAE3E,cAAIC,cAAc,GAAG,IAArB;;AACA,cAAI1kB,IAAI,CAAC4jB,SAAL,IAAkB5jB,IAAI,CAAC4jB,SAAL,CAAenC,KAArC,EAA4C;AAC1C,gBAAIkD,EAAE,GAAG3kB,IAAI,CAAC4jB,SAAL,CAAenC,KAAf,IAAwB,CAAxB,GAA4B,MAA5B,GAAqC,SAA9C;AACAiD,0BAAc,gBAAG,mFAAa1kB,IAAI,CAAC4jB,SAAL,CAAenC,KAA5B,OAAoCkD,EAApC,eAAuC,sEAAvC,eAA4C,sEAA5C,CAAjB;AACD;;AAEDJ,oBAAU,gBACR;AAAI,qBAAS,EAAC;AAAd,aACGnzB,MAAM,CAACC,IAAP,CAAY2O,IAAI,CAAC7M,OAAjB,EAA0Bge,IAA1B,GAAiCxb,GAAjC,CAAqC,UAAApE,GAAG,EAAI;AAC3C,gBAAIkM,MAAM,GAAGuC,IAAI,CAAC7M,OAAL,CAAa5B,GAAb,CAAb;AACA,gBAAImD,SAAS,GAAG,IAAhB;AACA,gBAAIxD,IAAI,CAACS,MAAL,CAAYuwB,iBAAZ,IAAiCzkB,MAAM,CAACtJ,KAA5C,EAAmDO,SAAS,gBAAI,uEAAK+I,MAAM,CAACtJ,KAAZ,CAAb;AACnD,gBAAIQ,eAAe,GAAG,IAAtB;AACA,gBAAI8I,MAAM,CAACrJ,WAAX,EAAwBO,eAAe,gBAAI,wEAAM8I,MAAM,CAACrJ,WAAb,CAAnB;AACxB,gBAAIwwB,cAAc,GAAG,IAArB;;AACA,gBAAI1zB,IAAI,CAACS,MAAL,CAAYwxB,cAAhB,EAAgC;AAC9ByB,4BAAc,gBAAG;AAAK,yBAAS,EAAC;AAAf,iBAAiCnnB,MAAM,CAACqmB,QAAxC,MAAjB;AACD;;AACD,gBAAIe,SAAS,gBACX;AAAK,uBAAS,EAAC;AAAf,eACGnwB,SADH,EAEGC,eAFH,eAGE;AAAK,uBAAS,0BAAmBzD,IAAI,CAACS,MAAL,CAAYwxB,cAAZ,GAA6B,sBAA7B,GAAsD,EAAzE;AAAd,4BACE;AAAK,uBAAS,EAAC;AAAf,cADF,eAEE;AAAK,uBAAS,EAAC,yBAAf;AAAyC,mBAAK,EAAE;AAAEvc,qBAAK,EAAE,CAAEnJ,MAAM,CAACqmB,QAAP,IAAmB,CAArB,IAA2B;AAApC;AAAhD,cAFF,CAHF,EAOIc,cAPJ,CADF;AAWA,gCACE;AAAI,uBAAS,EAAC,YAAd;AAA2B,iBAAG,oBAAarzB,GAAb;AAA9B,eACGszB,SADH,CADF;AAKD,WA1BA,CADH,EA4BGH,cA5BH,EA6BGF,sBA7BH,CADF;AAiCD;;AAED,YAAI9gB,eAAe,GAAG,IAAtB;;AACA,YAAIxS,IAAI,CAACqC,KAAL,CAAWyM,IAAX,IAAmB9O,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBmD,GAAnC,IAA0CjS,IAAI,CAACqC,KAAL,CAAWyM,IAAX,CAAgBmD,GAAhB,CAAoBC,IAAlE,EAAwE;AACtEM,yBAAe,gBACb;AAAK,qBAAS,EAAC;AAAf,0BACE;AAAQ,qBAAS,EAAC,yBAAlB;AAA4C,mBAAO,EAAE,iBAAA5F,KAAK;AAAA,qBAAI5M,IAAI,CAAC4zB,YAAL,EAAJ;AAAA;AAA1D,2BADF,eAEE;AAAQ,qBAAS,EAAC,2BAAlB;AAA8C,mBAAO,EAAE,iBAAAhnB,KAAK,EAAI;AAAE,kBAAI8F,OAAO,CAAC,kBAAD,CAAX,EAAiC1S,IAAI,CAAC6zB,UAAL;AAAmB;AAAtH,8BAFF,CADF;AAKD;;AAED,YAAIC,iBAAiB,GAAG,IAAxB;;AACA,YAAI9zB,IAAI,CAACqC,KAAL,CAAWmwB,iBAAf,EAAkC;AAChCsB,2BAAiB,gBAAG;AAAK,qBAAS,EAAC;AAAf,qCAApB;AACD;;AAED,4BACE;AAAK,YAAE,EAAE,KAAKvyB,EAAd;AAAkB,mBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,UAArD;AAAiE,aAAG,EAAE,aAACvJ,EAAD,EAAQ;AAAE,kBAAI,CAACC,QAAL,GAAgBD,EAAhB;AAAqB;AAArG,WACG4O,eADH,EAEGshB,iBAFH,eAGE,uEAAKhlB,IAAI,CAACoiB,QAAV,CAHF,EAIG6B,YAJH,EAKGM,UALH,eAME,sEANF,eAMO,sEANP,CADF;AAWD;AAEF;;;;EArYgDvzB,4D;;;;;;;;;;;;;ACXnD,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;CAGA;;CAGA;;CAGA;;AACAkyB,2DAAqB,CAAC5c,aAAtB,GAAsC,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AAC3E,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,2DAAD;AAAuB,cAAU,EAAEtV,UAAnC;AAA+C,UAAM,EAAEQ;AAAvD,IAAjB,EAAmF4U,IAAnF;AACA,CAHD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AAEA;AACA;AAEA;AAEA;;IAEqB0e,6B;;;;;AAEnB,yCAAYh0B,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEA,QAAIC,IAAI,gCAAR;;AAEAA,QAAI,CAACa,aAAL,GAAqB;AACnBmzB,gBAAU,EAAE,IADO;AAEnBjzB,SAAG,EAAE;AACHC,WAAG,EAAE,IADF;AAEHC,eAAO,EAAE;AAFN,OAFc;AAMnBE,UAAI,EAAE,EANa;AAOnBmW,0BAAoB,EAAE,EAPH;AAQnBC,0BAAoB,EAAE,GARH;AASnBga,sBAAgB,EAAE,QATC;AAUnB5iB,eAAS,EAAE,EAVQ;AAWnBzM,iBAAW,EAAE;AAXM,KAArB;AAcAlC,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCd,KAAK,CAACU,MAAN,IAAgB,EAApD,CAAd;AACAT,QAAI,CAACS,MAAL,CAAY0S,QAAZ,GAAuBnT,IAAI,CAACS,MAAL,CAAY0S,QAAZ,IAAwB,2BAA2BU,kBAAkB,CAACtO,QAAQ,CAACyK,QAAT,CAAkBC,IAAnB,CAA5F;AAEAjQ,QAAI,CAACqC,KAAL,GAAa;AACXa,iBAAW,EAAElD,IAAI,CAACS,MAAL,CAAYyC,WAAZ,IAA2B,EAD7B;AAEXT,aAAO,EAAE,KAFE;AAGXgV,YAAM,EAAE;AAHG,KAAb;AAtBiB;AA4BlB;;;;mCAEc9U,I,EAAM;AACnBA,UAAI,GAAGA,IAAI,IAAI,EAAf;AACA,UAAIA,IAAI,CAACO,WAAT,EAAsBP,IAAI,CAACF,OAAL,GAAe,KAAKS,WAAL,CAAiBT,OAAjB,EAAf;AACtB,WAAKC,QAAL,CAAcC,IAAd;AACD;;;gCAEW;AACV,UAAI4uB,gBAAgB,GAAG,KAAK9wB,MAAL,CAAY8wB,gBAAnC;AACA,UAAInF,QAAQ,GAAG,KAAKrsB,KAAL,CAAWoB,IAAX,IAAmB,KAAKpB,KAAL,CAAWoB,IAAX,CAAgB8P,IAAlD,CAFU,CAGV;;AACA,aAAQsgB,gBAAgB,IAAI,WAApB,IAAmCnF,QAAnC,IACCmF,gBAAgB,IAAI,QAApB,KAAkCnF,QAAQ,IAAI,QAAZ,IAAwBA,QAAQ,IAAI,OAAtE,CADD,IAECmF,gBAAgB,IAAI,OAApB,IAA+BnF,QAAQ,IAAI,OAFpD;AAGD;;;iCAEY;AAEX,UAAIpsB,IAAI,GAAG,IAAX;AAEAA,UAAI,CAAC0C,QAAL,CAAc;AAAE+U,cAAM,EAAE;AAAV,OAAd,EAAgC,YAAM;AAEpC,YAAIhV,OAAO,GAAGzC,IAAI,CAACkD,WAAL,CAAiBN,QAAjB,CAA0B;AAAEqJ,qBAAW,EAAE;AAAf,SAA1B,CAAd;;AACA,YAAI,CAACxJ,OAAL,EAAc;AACZzC,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE,KAAV;AAAiBhV,mBAAO,EAAE;AAA1B,WAAd;AACA;AACD;;AAED,YAAI,CAACzC,IAAI,CAACyxB,SAAL,EAAL,EAAuB,OAAO3c,KAAK,CAAC,uBAAD,CAAZ;AAEvB,YAAI9T,GAAG,aAAMhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAzC,uBAA8DhB,IAAI,CAACS,MAAL,CAAYK,MAA1E,mBAA6Fd,IAAI,CAACS,MAAL,CAAY0N,MAAzG,sBAAgInO,IAAI,CAACS,MAAL,CAAYuzB,UAAZ,cAA+Bh0B,IAAI,CAACS,MAAL,CAAYuzB,UAA3C,IAA0D,EAA1L,CAAP;AACA,YAAI/yB,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AACA,YAAIyQ,MAAM,GAAGlR,IAAI,CAACS,MAAL,CAAYuzB,UAAZ,GAAyB,KAAzB,GAAiC,MAA9C;AAEA,YAAIzsB,IAAI,GAAG;AACT0sB,kBAAQ,EAAEj0B,IAAI,CAACS,MAAL,CAAYwzB,QADb;AAETC,mBAAS,EAAEl0B,IAAI,CAACS,MAAL,CAAYyzB,SAFd;AAGThxB,qBAAW,EAAElD,IAAI,CAACqC,KAAL,CAAWa;AAHf,SAAX;AAMAmD,aAAK,CAACrF,GAAD,EAAM;AACTkQ,gBAAM,EAANA,MADS;AAETjQ,iBAAO,EAAPA,OAFS;AAGTsG,cAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAepN,IAAf;AAHG,SAAN,CAAL,CAKGiJ,IALH,CAKS,UAASC,QAAT,EAAmB;AACxB,cAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,mBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,gBAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,SAVH,EAWG7B,IAXH,CAWQ,UAASI,IAAT,EAAe;AAEnB,cAAI,OAAO5Q,IAAI,CAACS,MAAL,CAAYqyB,QAAnB,IAA+B,UAAnC,EAA+C;AAC7C9yB,gBAAI,CAACS,MAAL,CAAYqyB,QAAZ,CAAqB;AAAE5vB,yBAAW,EAAElD,IAAI,CAACqC,KAAL,CAAWa;AAA1B,aAArB;AACD;;AAEDlD,cAAI,CAAC0C,QAAL,CAAc;AAAEQ,uBAAW,EAAE,EAAf;AAAmBuU,kBAAM,EAAE,KAA3B;AAAkChV,mBAAO,EAAE;AAA3C,WAAd,EAAkE,YAAM;AAEtEzC,gBAAI,CAACkD,WAAL,CAAiBG,cAAjB,CAAgC;AAAE7C,mBAAK,EAAE;AAAT,aAAhC;;AAEA,gBAAIR,IAAI,CAACS,MAAL,CAAYuzB,UAAhB,EAA4B;AAC5B,kBAAIpnB,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,qBAAhB,EAAuC;AAAElF,sBAAM,EAAE4F;AAAV,eAAvC,CAAZ;AACArL,sBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AACC,aAHD,MAGO;AACP,kBAAIA,MAAK,GAAG,IAAIsD,WAAJ,CAAgB,yBAAhB,EAA2C;AAAElF,sBAAM,EAAE4F;AAAV,eAA3C,CAAZ;;AACArL,sBAAQ,CAAC4K,aAAT,CAAuBvD,MAAvB;AACC;AACF,WAXD;AAcD,SA/BH,WAgCS,UAAStK,KAAT,EAAgB;AACrBA,eAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAErc,iBAAK,CAACqc,QAAD,CAAL;AAAiB,mBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,WAA/E;AACAnxB,cAAI,CAAC0C,QAAL,CAAc;AAAE+U,kBAAM,EAAE,KAAV;AAAiBhV,mBAAO,EAAE;AAA1B,WAAd;AACD,SAnCH;AAqCD,OAzDD;AA2DD;;;6BAEQ;AAEP,UAAIzC,IAAI,GAAG,IAAX;AAEA,UAAIS,MAAM,GAAG;AACX6W,4BAAoB,EAAEtX,IAAI,CAACS,MAAL,CAAY6W,oBAAZ,IAAoC,EAD/C;AAEXC,4BAAoB,EAAEvX,IAAI,CAACS,MAAL,CAAY8W,oBAAZ,IAAoC;AAF/C,OAAb;AAKA,UAAI5I,SAAS,GAAG,IAAhB;;AACA,UAAI3O,IAAI,CAACS,MAAL,CAAYkO,SAAhB,EAA2B;AACzBA,iBAAS,gBACP;AAAK,mBAAS,EAAC;AAAf,WAA4B3O,IAAI,CAACS,MAAL,CAAYkO,SAAxC,CADF;AAGD;;AAED,UAAIijB,gBAAgB,GAAG,IAAvB;;AACA,UAAI5xB,IAAI,CAACyxB,SAAL,EAAJ,EAAsB;AACpBG,wBAAgB,gBACd;AAAK,mBAAS,EAAC;AAAf,wBACD;AAAQ,iBAAO,EAAE,iBAAC/sB,CAAD,EAAO;AAAE,gBAAI,CAAC7E,IAAI,CAACqC,KAAL,CAAWoV,MAAhB,EAAwBzX,IAAI,CAAC6xB,UAAL;AAAoB,WAAtE;AAAwE,mBAAS,2BAAqB,CAAC7xB,IAAI,CAACqC,KAAL,CAAWI,OAAZ,IAAuBzC,IAAI,CAACqC,KAAL,CAAWoV,MAAlC,GAA2C,eAA3C,GAA6D,EAAlF;AAAjF,uBADC,CADF;AAKD,OAND,MAMO;AACLma,wBAAgB,gBACd;AAAK,mBAAS,EAAC;AAAf,wBACE;AAAQ,iBAAO,EAAE,mBAAM;AAAEthB,mEAAqB,CAACO,YAAtB,CAAmCG,GAAnC,CAAuC,6BAAvC,EAAsE,IAAtE;AAA6EzL,oBAAQ,CAACyK,QAAT,CAAkBC,IAAlB,GAAyBjQ,IAAI,CAACS,MAAL,CAAY0S,QAArC;AAAgD,WAAtJ;AAAwJ,mBAAS,EAAC;AAAlK,sBADF,CADF;AAKD;;AAED,0BACE;AAAK,UAAE,EAAEnT,IAAI,CAACsB,KAAd;AAAqB,iBAAS,EAAC,EAA/B;AAAkC,WAAG,EAAE,aAAAsC,EAAE;AAAA,iBAAK5D,IAAI,CAAC6D,QAAL,GAAgBD,EAArB;AAAA;AAAzC,SACG+K,SADH,eAEE,2DAAC,wDAAD,CAAwB,gBAAxB;AAAyC,gBAAQ,EAAE,KAAK8iB,SAAL,KAAmB,IAAnB,GAA0B,IAA7E;AAAmF,cAAM,EAAE;AAAE3uB,mBAAS,EAAE,UAAb;AAAyB0I,mBAAS,EAAE/K,MAAM,CAAC6W,oBAA3C;AAAiE7L,mBAAS,EAAEhL,MAAM,CAAC8W,oBAAnF;AAAyGrV,qBAAW,EAAElC,IAAI,CAACS,MAAL,CAAYyB;AAAlI,SAA3F;AAA4O,aAAK,EAAElC,IAAI,CAACqC,KAAL,CAAWa,WAA9P;AAA2Q,gBAAQ,EAAG,kBAAAP,IAAI;AAAA,iBAAI3C,IAAI,CAACqD,cAAL,CAAoB;AAAEH,uBAAW,EAAEP,IAAI,CAACnC;AAApB,WAApB,CAAJ;AAAA,SAA1R;AAAiV,WAAG,EAAE,aAAAoD,EAAE;AAAA,iBAAK5D,IAAI,CAACkD,WAAL,GAAmBU,EAAxB;AAAA;AAAxV,QAFF,EAGGguB,gBAHH,CADF;AAQD;;;;EAvJwD9xB,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACV3D;AACA;AACA;AAEA;AACA;AAEA;AAEA;;IAEqBq0B,yB;;;;;AAEnB,qCAAYp0B,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEA,QAAIC,IAAI,gCAAR;;AACAA,QAAI,CAACuB,EAAL,GAAUxB,KAAK,CAACwB,EAAN,2BAA8BC,QAAQ,CAAE,UAAUC,IAAI,CAACC,MAAL,EAAZ,CAAtC,CAAV;AAEA1B,QAAI,CAACa,aAAL,GAAqB;AACnBC,YAAM,EAAE,IADW;AAEnBqN,YAAM,EAAE,IAFW;AAGnBlL,WAAK,EAAE,IAHY;AAInBqU,0BAAoB,EAAE,EAJH;AAKnBC,0BAAoB,EAAE,GALH;AAMnBxW,SAAG,EAAE;AACHC,WAAG,EAAE,IADF;AAEHC,eAAO,EAAE;AAFN,OANc;AAUnBswB,sBAAgB,EAAE;AAVC,KAArB;AAaAvxB,QAAI,CAACS,MAAL,GAAcP,MAAM,CAACwlB,MAAP,CAAc1lB,IAAI,CAACa,aAAnB,EAAkCd,KAAK,CAACU,MAAN,IAAgB,EAAlD,CAAd;AAEAT,QAAI,CAACqC,KAAL,GAAa;AACXlB,UAAI,EAAEpB,KAAK,CAACoB,IADD;AAEXizB,kBAAY,EAAE,KAFH;AAGXC,uBAAiB,EAAE,KAHR;AAIX9B,cAAQ,EAAE;AAJC,KAAb;AArBiB;AA4BlB;;;;sCAEiB3wB,S,EAAWC,S,EAAW;AAEtC,UAAI7B,IAAI,GAAG,IAAX;AAEA,WAAKs0B,cAAL,GAAsB/uB,QAAQ,CAACwF,gBAAT,CAA0B,yBAA1B,EAAqD,UAAS6B,KAAT,EAAgB;AACzF5M,YAAI,CAACu0B,mBAAL,CAAyB3nB,KAAK,CAAC5B,MAA/B;AACD,OAFqB,CAAtB;AAIA,WAAKwpB,cAAL,GAAsBjvB,QAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD,UAAS6B,KAAT,EAAgB;AACrF5M,YAAI,CAACy0B,gBAAL,CAAsB7nB,KAAK,CAAC5B,MAA5B;AACD,OAFqB,CAAtB;AAID;;;2CAEsB;AACvBzF,cAAQ,CAACuK,mBAAT,CAA6B,yBAA7B,EAAwD,KAAKwkB,cAA7D;AACA/uB,cAAQ,CAACuK,mBAAT,CAA6B,qBAA7B,EAAoD,KAAK0kB,cAAzD;AACC;;;+BAEU;AACT,WAAK9xB,QAAL,CAAc;AAAE0xB,oBAAY,EAAE;AAAhB,OAAd;AACD;;;sCAEiB;AAChB,WAAK1xB,QAAL,CAAc;AAAE2xB,yBAAiB,EAAE,CAAC,KAAKhyB,KAAL,CAAWgyB;AAAjC,OAAd;AACD;;;mCAEc/P,I,EAAM;AACnB,WAAK5hB,QAAL,CAAc;AAAE6vB,gBAAQ,EAAE,CAAC,KAAKlwB,KAAL,CAAWkwB;AAAxB,OAAd;AACD;;;8BAES;AACR,aAAO,KAAKxyB,KAAL,CAAW4C,IAAX,CAAgBsP,GAAhB,CAAoBC,IAA3B;AACD;;;gCAEW;AACV,aAAO,KAAKnS,KAAL,CAAW4C,IAAX,CAAgBsP,GAAhB,UAAP;AACD;;;8BAES;AACR,UAAI,KAAKxR,MAAL,CAAYyS,QAAhB,EAA0B,OAAO,KAAP;AAC1B,UAAIqe,gBAAgB,GAAG,KAAK9wB,MAAL,CAAY8wB,gBAAnC;AACA,UAAInF,QAAQ,GAAG,KAAKrsB,KAAL,CAAWoB,IAAX,IAAmB,KAAKpB,KAAL,CAAWoB,IAAX,CAAgB8P,IAAlD;AACA,aAAUsgB,gBAAgB,IAAI,WAApB,IAAmCnF,QAArC,IACEmF,gBAAgB,IAAI,QAApB,KAAkCnF,QAAQ,IAAI,QAAZ,IAAwBA,QAAQ,IAAI,OAAtE,CADF,IAEEmF,gBAAgB,IAAI,OAApB,IAA+BnF,QAAQ,IAAI,OAFrD;AAGD;;;+BAEU;AACT,aAAO,KAAKrsB,KAAL,CAAW4C,IAAX,CAAgBsP,GAAhB,CAAoByiB,KAA3B;AACD;;;mCAEc;AAEb,UAAI10B,IAAI,GAAG,IAAX;AAEA,UAAI,CAACA,IAAI,CAAC20B,SAAL,EAAL,EAAuB,OAAO7f,KAAK,CAAC,sCAAD,CAAZ;AAEvB,UAAI9T,GAAG,aAAMhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAzC,uBAA8DhB,IAAI,CAACS,MAAL,CAAYK,MAA1E,mBAA6Fd,IAAI,CAACS,MAAL,CAAY0N,MAAzG,uBAAgInO,IAAI,CAACD,KAAL,CAAW4C,IAAX,CAAgBpB,EAAhJ,CAAP;AACA,UAAIN,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA,UAAI8G,IAAI,GAAG,EAAX;AAEAlB,WAAK,CAACrF,GAAD,EAAM;AACTkQ,cAAM,EAAE,QADC;AAETjQ,eAAO,EAAPA,OAFS;AAGTsG,YAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAepN,IAAf;AAHG,OAAN,CAAL,CAKGiJ,IALH,CAKS,UAASC,QAAT,EAAmB;AACxB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,iBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,cAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,OAVH,EAWG7B,IAXH,CAWQ,UAASI,IAAT,EAAe;AACnB5Q,YAAI,CAAC0C,QAAL,CAAc;AAAEkyB,mBAAS,EAAE;AAAb,SAAd;AAEF,YAAIhoB,KAAK,GAAG,IAAIsD,WAAJ,CAAgB,sBAAhB,EAAwC;AAAElF,gBAAM,EAAE;AAAEmD,kBAAM,EAAEnO,IAAI,CAACS,MAAL,CAAY0N;AAAtB;AAAV,SAAxC,CAAZ;AACA5I,gBAAQ,CAAC4K,aAAT,CAAuBvD,KAAvB;AAEC,OAjBH,WAkBS,UAAStK,KAAT,EAAgB;AACrB2I,eAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,aAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAE,iBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,SAA9D;AACD,OArBH;AAuBD;;;iCAEY;AAEX,UAAInxB,IAAI,GAAG,IAAX;AAEA,UAAI,CAACA,IAAI,CAAC60B,OAAL,EAAL,EAAqB,OAAO/f,KAAK,CAAC,gCAAD,CAAZ;AAErB,UAAI9T,GAAG,aAAMhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAzC,uBAA8DhB,IAAI,CAACS,MAAL,CAAYK,MAA1E,mBAA6Fd,IAAI,CAACS,MAAL,CAAY0N,MAAzG,uBAAgInO,IAAI,CAACD,KAAL,CAAW4C,IAAX,CAAgBpB,EAAhJ,UAAP;AACA,UAAIN,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA,UAAI8G,IAAI,GAAG,EAAX;AAEAlB,WAAK,CAACrF,GAAD,EAAM;AACTkQ,cAAM,EAAE,MADC;AAETjQ,eAAO,EAAPA,OAFS;AAGTsG,YAAI,EAAE7G,IAAI,CAACiU,SAAL,CAAepN,IAAf;AAHG,OAAN,CAAL,CAKGiJ,IALH,CAKS,UAASC,QAAT,EAAmB;AACxB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,iBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,cAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,OAVH,EAWG7B,IAXH,CAWQ,UAASI,IAAT,EAAe;AACnB;AACA5Q,YAAI,CAAC0C,QAAL,CAAc;AAAE6P,aAAG,EAAE3B,IAAI,CAAC2B,GAAZ;AAAiBuiB,sBAAY,EAAElkB,IAAI,CAACkkB;AAApC,SAAd;AACD,OAdH,WAeS,UAASxyB,KAAT,EAAgB;AACrB2I,eAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,aAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAE,iBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,SAA9D;AACD,OAlBH;AAoBD;;;wCAEmB0B,Q,EAAU;AAC5B,WAAKnwB,QAAL,CAAc;AAAE0xB,oBAAY,EAAE,KAAhB;AAAuBC,yBAAiB,EAAE;AAA1C,OAAd;AACD;;;qCAEgBxB,Q,EAAU;AACzB,UAAIA,QAAQ,CAACtxB,EAAT,IAAe,KAAKxB,KAAL,CAAW4C,IAAX,CAAgBpB,EAAnC,EAAuC;AACrC,aAAKmB,QAAL,CAAc;AAAE6vB,kBAAQ,EAAE,KAAZ;AAAmB6B,sBAAY,EAAE;AAAjC,SAAd;AACD;AACF;;;6BAEQ;AAEP,UAAIp0B,IAAI,GAAG,IAAX;AACA,UAAI2C,IAAI,GAAG3C,IAAI,CAACD,KAAL,CAAW4C,IAAX,IAAmB;AAAEsP,WAAG,EAAE;AAAP,OAA9B;AAEA,UAAItP,IAAI,CAACiyB,SAAT,EAAoB,OAAO,IAAP;AAEpB,UAAIG,QAAQ,GAAG,IAAf;;AACA,UAAK/0B,IAAI,CAACg1B,OAAL,MAAkBh1B,IAAI,CAAC20B,SAAL,EAAvB,EAA0C;AACxCI,gBAAQ,gBACN;AAAK,mBAAS,6BAA0B/0B,IAAI,CAACqC,KAAL,CAAW+xB,YAAX,GAA0B,gCAA1B,GAA6D,EAAvF,CAAd;AAA4G,iBAAO,EAAG,mBAAM;AAAEp0B,gBAAI,CAACi1B,QAAL;AAAkB;AAAhJ,wBACE;AAAG,mBAAS,EAAC,qBAAb;AAAmC,eAAK,EAAC,sBAAzC;AAAgE,iBAAO,EAAG,mBAAM;AAAE,gBAAIviB,OAAO,CAAC,oBAAD,CAAX,EAAmC1S,IAAI,CAACk1B,YAAL;AAAsB;AAA3I,UADF,eAEE;AAAG,mBAAS,EAAC,mBAAb;AAAiC,eAAK,EAAC,mBAAvC;AAA2D,iBAAO,EAAG;AAAA,mBAAMl1B,IAAI,CAACm1B,cAAL,EAAN;AAAA;AAArE,UAFF,CADF;AAMD;;AAED,UAAI1xB,eAAe,gBAAI;AAAK,iBAAS,EAAC;AAAf,SAA2Cd,IAAI,CAACO,WAAhD,CAAvB;;AACA,UAAIlD,IAAI,CAACqC,KAAL,CAAWkwB,QAAf,EAAyB;AACvB9uB,uBAAe,gBACb;AAAK,mBAAS,EAAC;AAAf,wBACE,2DAAC,0DAAD;AAA+B,gBAAM,kCAAOzD,IAAI,CAACS,MAAZ;AAAoByC,uBAAW,EAAEP,IAAI,CAACO,WAAtC;AAAmD8wB,sBAAU,EAAErxB,IAAI,CAACpB;AAApE,YAArC;AAA+G,cAAI,EAAEvB,IAAI,CAACqC,KAAL,CAAWlB,IAAhI;AAAsI,aAAG,EAAE,aAAAyC,EAAE;AAAA,mBAAK5D,IAAI,CAACo1B,QAAL,GAAgBxxB,EAArB;AAAA;AAA7I,UADF,CADF;AAKD;;AAED,UAAIyxB,cAAc,GAAG,IAArB;;AACA,UAAI,CAAC1yB,IAAI,CAACsxB,QAAV,EAAoB;AAClBoB,sBAAc,gBACf;AAAG,mBAAS,oCAA+B,CAAE,OAAOr1B,IAAI,CAACqC,KAAL,CAAWyyB,YAAlB,IAAkC,WAAlC,GAAgD90B,IAAI,CAACqC,KAAL,CAAWyyB,YAA3D,GAA0EnyB,IAAI,CAACmyB,YAAjF,IAAkG,oCAAlG,GAAyI,EAAxK,CAAZ;AAA2L,iBAAO,EAAG;AAAA,mBAAM90B,IAAI,CAACs1B,UAAL,EAAN;AAAA;AAArM,sCACW,yEAAO,CAAE,OAAOt1B,IAAI,CAACqC,KAAL,CAAWkQ,GAAlB,IAAyB,WAAzB,GAAuCvS,IAAI,CAACqC,KAAL,CAAWkQ,GAAlD,GAAwD5P,IAAI,CAAC4P,GAA/D,IAAuE,CAA9E,CADX,MADC;AAKD;;AAED,UAAIgjB,eAAe,GAAG,IAAtB;AACA,UAAIC,aAAa,GAAG,IAApB;;AACA,UAAIx1B,IAAI,CAACy1B,QAAL,MAAmB,CAACz1B,IAAI,CAACS,MAAL,CAAYyS,QAApC,EAA8C;AAC5CqiB,uBAAe,gBAAI;AAAG,iBAAO,EAAG;AAAA,mBAAMv1B,IAAI,CAAC01B,eAAL,EAAN;AAAA,WAAb;AAA4C,mBAAS,EAAC;AAAtD,sBAAnB;;AACA,YAAI11B,IAAI,CAACqC,KAAL,CAAWgyB,iBAAf,EAAkC;AAChC,cAAI5zB,MAAM,mCAAQT,IAAI,CAACS,MAAb;AAAqBwzB,oBAAQ,EAAEtxB,IAAI,CAACpB;AAApC,YAAV;;AACAd,gBAAM,CAACkO,SAAP,GAAmB,EAAnB;AACA6mB,uBAAa,gBACd;AAAK,cAAE,yBAAkB7yB,IAAI,CAACpB,EAAvB,CAAP;AAAoC,qBAAS,EAAC;AAA9C,0BACK,2DAAC,0DAAD;AAA+B,kBAAM,EAAEd,MAAvC;AAA+C,gBAAI,EAAET,IAAI,CAACqC,KAAL,CAAWlB,IAAhE;AAAsE,eAAG,EAAE,aAAAyC,EAAE;AAAA,qBAAK5D,IAAI,CAACo1B,QAAL,GAAgBxxB,EAArB;AAAA;AAA7E,YADL,CADC;AAKD;AACF;;AAED,UAAI+xB,WAAW,GAAG,IAAlB;;AACA,UAAIhzB,IAAI,CAACizB,SAAL,IAAkBjzB,IAAI,CAACizB,SAAL,CAAepxB,MAArC,EAA6C;AAC3CmxB,mBAAW,gBACT;AAAI,mBAAS,EAAC;AAAd,WACGhzB,IAAI,CAACizB,SAAL,CAAenxB,GAAf,CAAmB,UAACouB,QAAD,EAAc;AAEhC,cAAIxyB,GAAG,8BAA0BwyB,QAAQ,CAACtxB,EAAT,IAAeC,QAAQ,CAAE,UAAUC,IAAI,CAACC,MAAL,EAAZ,CAAjD,CAAP;AACA,8BACE;AAAI,eAAG,EAAErB;AAAT,0BACE,2DAAC,yBAAD;AAA2B,kBAAM,EAAEL,IAAI,CAACS,MAAxC;AAAgD,qBAAS,EAAC,WAA1D;AAAsE,gBAAI,EAAET,IAAI,CAACqC,KAAL,CAAWlB,IAAvF;AAA6F,gBAAI,EAAE0xB;AAAnG,YADF,CADF;AAMD,SATA,CADH,CADF;AAcD;;AAED,0BACE,qFAED;AAAK,UAAE,yBAAkBlwB,IAAI,CAACpB,EAAvB,CAAP;AAAoC,iBAAS,EAAGvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB;AAAxE,SAEM4nB,QAFN,eAIK;AAAK,iBAAS,EAAC;AAAf,SAAoCpyB,IAAI,CAACxB,IAAL,CAAUkS,QAAV,IAAsB1Q,IAAI,CAACxB,IAAL,CAAUmS,QAAhC,cAA+C3Q,IAAI,CAACxB,IAAL,CAAUoS,SAAzD,cAAyE5Q,IAAI,CAACxB,IAAL,CAAUqS,QAAnF,CAApC,CAJL,eAKC;AAAK,iBAAS,EAAC;AAAf,SAAoC7Q,IAAI,CAACuR,mBAAzC,CALD,EAMMzQ,eANN,EAQM4xB,cARN,EASGE,eATH,CAFC,EAeAC,aAfA,EAgBGG,WAhBH,CADF;AAuBD;;;;EA9PoD71B,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXvD;AACA;AAEA;AACA;AAEA;AACA;AAEA;;IAEqB+1B,0B;;;;;AAEnB,sCAAY91B,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AAEA,QAAIC,IAAI,gCAAR;;AACAA,QAAI,CAACuB,EAAL,GAAUxB,KAAK,CAACwB,EAAN,4BAA+BC,QAAQ,CAAE,UAAUC,IAAI,CAACC,MAAL,EAAZ,CAAvC,CAAV;AAEA1B,QAAI,CAACa,aAAL,GAAqB;AACnBi1B,yBAAmB,EAAE,IADF;AAEnB5iB,cAAQ,EAAE,KAFS;AAGnB6iB,gBAAU,EAAE,oCAHO;AAInB7B,eAAS,EAAE9wB,SAJQ;AAKnBtC,YAAM,EAAE,IALW;AAMnBqN,YAAM,EAAE,IANW;AAOnBlL,WAAK,EAAE,IAPY;AAQnB9B,UAAI,EAAE,IARa;AASnBgS,cAAQ,EAAE,EATS;AAUnBpS,SAAG,EAAE;AACHC,WAAG,EAAE,IADF;AAEHC,eAAO,EAAE;AAFN,OAVc;AAcnBswB,sBAAgB,EAAE,QAdC;AAenBrvB,iBAAW,EAAE,EAfM;AAgBnByM,eAAS,EAAE;AAhBQ,KAArB;AAmBA3O,QAAI,CAACS,MAAL,GAAcW,4CAAK,CAACC,SAAN,CAAgBrB,IAAI,CAACa,aAArB,EAAoCb,IAAI,CAACS,MAAzC,EAAiDV,KAAK,CAACU,MAAN,IAAgB,EAAjE,CAAd;AAEAT,QAAI,CAACqC,KAAL,GAAa;AACXlB,UAAI,EAAEnB,IAAI,CAACS,MAAL,CAAYU,IADP;AAEXy0B,eAAS,EAAE;AAFA,KAAb;AA3BiB;AAgClB;;;;sCAEiBh0B,S,EAAWC,S,EAAW;AAEtC,UAAI7B,IAAI,GAAG,IAAX,CAFsC,CAItC;;AACA,UAAI,EAAGA,IAAI,CAACqC,KAAL,CAAWlB,IAAX,IAAmBnB,IAAI,CAACqC,KAAL,CAAWlB,IAAX,CAAgB8P,IAAtC,CAAJ,EAAkD;AAChDX,+DAAqB,CAACnP,IAAtB,CAA2BmrB,OAA3B,CAAmC;AAAEnrB,cAAI,EAAEnB,IAAI,CAACS,MAAL,CAAYU,IAApB;AAA0B4pB,aAAG,EAAE/qB,IAAI,CAACS,MAAL,CAAYsqB,GAA3C;AAAgDjqB,gBAAM,EAAEd,IAAI,CAACS,MAAL,CAAYK,MAApE;AAA4EC,aAAG,EAAEf,IAAI,CAACS,MAAL,CAAYM;AAA7F,SAAnC,EAAuI,UAACH,GAAD,EAAMO,IAAN,EAAe;AACpJnB,cAAI,CAAC0C,QAAL,CAAc;AAAEvB,gBAAI,EAAJA;AAAF,WAAd,EAAwB,YAAM;AAC5BnB,gBAAI,CAAC6P,SAAL;AACD,WAFD;AAGD,SAJD;AAKD,OAND,MAMO;AACL7P,YAAI,CAAC6P,SAAL;AACD;;AAED,WAAKykB,cAAL,GAAsB/uB,QAAQ,CAACwF,gBAAT,CAA0B,yBAA1B,EAAqD,UAAS6B,KAAT,EAAgB;AACzF5M,YAAI,CAACu0B,mBAAL,CAAyB3nB,KAAK,CAAC5B,MAA/B;AACD,OAFqB,CAAtB;AAIA,WAAKwpB,cAAL,GAAsBjvB,QAAQ,CAACwF,gBAAT,CAA0B,qBAA1B,EAAiD,UAAS6B,KAAT,EAAgB;AACrF5M,YAAI,CAACy0B,gBAAL,CAAsB7nB,KAAK,CAAC5B,MAA5B;AACD,OAFqB,CAAtB;AAIA,WAAKgrB,eAAL,GAAuBzwB,QAAQ,CAACwF,gBAAT,CAA0B,sBAA1B,EAAkD,UAAS6B,KAAT,EAAgB;AACvF5M,YAAI,CAACwP,iBAAL,CAAuB5C,KAAK,CAAC5B,MAA7B;AACD,OAFsB,CAAvB;AAID;;;2CAEsB;AACvBzF,cAAQ,CAACuK,mBAAT,CAA6B,yBAA7B,EAAwD,KAAKwkB,cAA7D;AACA/uB,cAAQ,CAACuK,mBAAT,CAA6B,qBAA7B,EAAoD,KAAK0kB,cAAzD;AACAjvB,cAAQ,CAACuK,mBAAT,CAA6B,sBAA7B,EAAqD,KAAKkmB,eAA1D;AACC;;;8BAESpZ,I,EAAM;AAEd,UAAI5c,IAAI,GAAG,IAAX;AAEA,UAAIgB,GAAG,aAAMhB,IAAI,CAACS,MAAL,CAAYM,GAAZ,IAAmBf,IAAI,CAACS,MAAL,CAAYM,GAAZ,CAAgBC,GAAzC,uBAA8DhB,IAAI,CAACS,MAAL,CAAYK,MAA1E,mBAA6Fd,IAAI,CAACS,MAAL,CAAY0N,MAAzG,iCAA0InO,IAAI,CAACS,MAAL,CAAYyzB,SAAtJ,6EAAP;AACA,UAAIjzB,OAAO,GAAGqP,uDAAqB,CAACvP,GAAtB,CAA0BwP,UAA1B,CAAqCvQ,IAAI,CAACS,MAA1C,CAAd;AAEA4F,WAAK,CAACrF,GAAD,EAAM;AAAEC,eAAO,EAAPA;AAAF,OAAN,CAAL,CACGuP,IADH,CACS,UAASC,QAAT,EAAmB;AACxB,YAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,iBAAOD,QAAQ,CAACG,IAAT,EAAP;AACD;;AACD,cAAMH,QAAQ,CAAC4B,IAAT,EAAN;AACD,OANH,EAOG7B,IAPH,CAOQ,UAASI,IAAT,EAAe;AAEnB,YAAIvO,KAAK,qBAAQrC,IAAI,CAACqC,KAAb,CAAT;;AACAA,aAAK,CAACuzB,SAAN,GAAkBhlB,IAAlB;AACAvO,aAAK,CAACuzB,SAAN,CAAgB3V,IAAhB,CAAqB,UAACiK,CAAD,EAAIC,CAAJ,EAAU;AAC7B,iBAAOD,CAAC,CAACI,SAAF,GAAcH,CAAC,CAACG,SAAvB;AACD,SAFD,EAJmB,CAOnB;;AACAtqB,YAAI,CAAC0C,QAAL,CAAcL,KAAd,EAAqB,YAAW;AAC9B,cAAIua,IAAJ,EAAU,OAAOA,IAAI,EAAX;AACX,SAFD;AAID,OAnBH,WAoBS,UAASta,KAAT,EAAgB;AACrB2I,eAAO,CAACC,GAAR,CAAY5I,KAAZ;AACAA,aAAK,CAACkO,IAAN,CAAW,UAAS2gB,QAAT,EAAmB;AAAE,iBAAOlmB,OAAO,CAACC,GAAR,CAAYimB,QAAZ,CAAP;AAA8B,SAA9D;AACD,OAvBH;AAyBD;;;wCAEmB0B,Q,EAAU;AAAA;;AAC5B,WAAKhjB,SAAL,CAAe,YAAM;AACnB,YAAI,MAAI,CAACpP,MAAL,CAAYq1B,mBAAhB,EAAqC;AACnC,cAAI5uB,OAAO,GAAG3B,QAAQ,CAAC0wB,cAAT,wBAA0CpD,QAAQ,CAACtxB,EAAnD,EAAd;AACA,cAAK2F,OAAL,EAAe3B,QAAQ,CAAC0wB,cAAT,wBAA0CpD,QAAQ,CAACtxB,EAAnD,GAAyD6C,cAAzD;AAChB;AACF,OALD;AAMD;;;qCAEgByuB,Q,EAAU;AACzB,WAAKhjB,SAAL;AACD;;;sCAEiBgjB,Q,EAAU;AAC1B,WAAKhjB,SAAL;AACD;;;6BAEQ;AAAA;;AAEP,UAAI7P,IAAI,GAAG,IAAX;AAEA,UAAI41B,SAAS,gBACX;AAAI,iBAAS,EAAC;AAAd,SACG51B,IAAI,CAACqC,KAAL,CAAWuzB,SAAX,CAAqBnxB,GAArB,CAAyB,UAACouB,QAAD,EAAc;AAEtC,YAAIxyB,GAAG,8BAA0BwyB,QAAQ,CAACtxB,EAAT,IAAeC,QAAQ,CAAE,UAAUC,IAAI,CAACC,MAAL,EAAZ,CAAjD,CAAP;AACA,4BACE;AAAI,aAAG,EAAErB;AAAT,wBACE,2DAAC,qDAAD;AAA2B,gBAAM,EAAEL,IAAI,CAACS,MAAxC;AAAgD,cAAI,EAAET,IAAI,CAACqC,KAAL,CAAWlB,IAAjE;AAAuE,cAAI,oBAAO0xB,QAAP;AAA3E,UADF,CADF;AAMD,OATA,CADH,CADF;AAcA,UAAI5vB,KAAK,GAAGjD,IAAI,CAACS,MAAL,CAAYwC,KAAZ,gBAAoB,uEAAKjD,IAAI,CAACS,MAAL,CAAYwC,KAAjB,CAApB,GAAmD,IAA/D;AAEA,UAAIizB,gBAAgB,gBAAG,2DAAC,0DAAD;AAA+B,cAAM,EAAEl2B,IAAI,CAACS,MAA5C;AAAoD,YAAI,EAAET,IAAI,CAACqC,KAAL,CAAWlB;AAArE,QAAvB;;AACA,UAAInB,IAAI,CAACS,MAAL,CAAYyS,QAAhB,EAA0B;AACxB,YAAIlT,IAAI,CAACS,MAAL,CAAYs1B,UAAhB,EAA4B;AAC1BG,0BAAgB,gBAAG;AAAK,qBAAS,EAAC;AAAf,aAAkCl2B,IAAI,CAACS,MAAL,CAAYs1B,UAA9C,CAAnB;AACD,SAFD,MAEO;AACLG,0BAAgB,GAAG,IAAnB;AACD;AACF;;AAED,0BACE;AAAK,UAAE,EAAE,KAAK30B,EAAd;AAAkB,iBAAS,EAAEvB,IAAI,CAACD,KAAL,CAAWoN,SAAX,IAAwB,eAArD;AAAsE,WAAG,EAAE,aAACvJ,EAAD,EAAQ;AAAE,gBAAI,CAACC,QAAL,GAAgBD,EAAhB;AAAqB;AAA1G,SAEGX,KAFH,EAIGizB,gBAJH,EAMGN,SANH,eAOE,sEAPF,eAOO,sEAPP,CADF;AAaD;;;;EApKqD91B,4D;;;;;;;;;;;;;ACXxD,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;CAGA;;CAGA;;CAGA;;AACA+1B,gEAA0B,CAACzgB,aAA3B,GAA2C,SAASA,aAAT,CAAwBC,IAAxB,EAA8B5U,MAA9B,EAAuC;AAChF,MAAIR,UAAU,GAAGoV,IAAI,CAACpV,UAAtB;AACDqV,kDAAQ,CAACC,MAAT,eAAiB,2DAAC,gEAAD;AAA4B,cAAU,EAAEtV,UAAxC;AAAoD,UAAM,EAAEQ;AAA5D,IAAjB,EAAwF4U,IAAxF;AACA,CAHD;;;;;;;;;;;;;ACdA,e;;;;;;;;;;;ACAA,aAAa,kCAAkC,EAAE,I;;;;;;;;;;;ACAjD,aAAa,qCAAqC,EAAE,I","file":"ideas-on-map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ideas-on-map/index.jsx\");\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","module.exports = require('es6-promise').Promise;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   3.3.1\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  return function () {\n    vertxNext(flush);\n  };\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\npolyfill();\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import merge from 'merge';\nimport React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n\t\t// config\n    self.config = self.config || props.config;\n    if (typeof self.config == 'string') {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\t\tlet defaultConfig = {\n      siteId: null,\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      user: {},\n    }\n\t\tself.config = merge.recursive(defaultConfig, self.config, self.props.config || {})\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = self;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentDefaultInput extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      choices: [],\n\t\t\tname: '',\n      placeholder: '',\n      disabled: false,\n      required: false,\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      value: props.value,\n      error: null,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate({ showErrors }) {\n\t\tlet isValid = this.config.required ? !!this.state.value : true;\n    let error = '';\n    if (!isValid && showErrors) error = true;\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n\thandleOnChange(data) {\n\t\tlet self = this;\n    data = data || {};\n\t\tself.setState(data, () => {\n      self.validate({});\n    })\n\t\tif (typeof self.onChange == 'function') {\n\t\t\tself.onChange({ name: self.config.name, value: data.value });\n\t\t}\n\t}\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\nimport OpenStadComponentHidden from './hidden.jsx';\nimport OpenStadComponentImageUpload from './image-upload.jsx';\nimport OpenStadComponentInputWithCounter from './input-with-counter.jsx';\nimport OpenStadComponentRadios from './radios.jsx';\nimport OpenStadComponentPostcode from './postcode.jsx';\nimport OpenStadComponentSelect from './select.jsx';\nimport OpenStadComponentText from './textinput.jsx';\nimport OpenStadComponentTextArea from './textarea.jsx';\n\nexport default class OpenStadComponentFormField extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      inputType: null,\n\n      validateAction: null,\n      changeAction: null,\n      required: false,\n\n      title: null,\n      description: null,\n      choices: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.name = self.config.name || self.config.title.toLowerCase();\n\n    self.state = {\n      value: props.value || undefined,\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(self);\n\n    self.onChange = props.onChange;\n\n  }\n  \n\tvalidate({ showErrors }) {\n    return this.input ? this.input.validate({ showErrors }) : true;\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"form field change\", data);\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h3 className=\"osc-form-title\">{self.config.title}</h3>\n    }\n\n    let descriptionHTML = null;\n    if (self.config.description) {\n      descriptionHTML = <div className=\"osc-form-description\" dangerouslySetInnerHTML={{ __html: self.config.description }}></div>\n    }\n\n    let fieldHTML = null;\n\n    switch (self.config.inputType) {\n\n      case 'hidden':\n        fieldHTML = <OpenStadComponentHidden config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'html-with-counter':\n      case 'htmlarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'htmlarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'image-upload':\n        fieldHTML = <OpenStadComponentImageUpload config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'input-with-counter':\n      case 'text-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ inputType: 'input', ...self.config }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'postcode':\n        fieldHTML = <OpenStadComponentPostcode config={self.config} onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'radios':\n        fieldHTML = <OpenStadComponentRadios config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'select':\n      case 'multiple-choice':\n        fieldHTML = <OpenStadComponentSelect config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'text':\n        fieldHTML = <OpenStadComponentText config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea':\n        fieldHTML = <OpenStadComponentTextArea config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'textarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      default:\n    }\n\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-form-field\">\n\t\t\t\t{titleHTML}\n\t\t\t\t{descriptionHTML}\n\t\t\t\t{fieldHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentFormField from './form-field.jsx';\n\nexport default class OpenStadComponentForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      // validateAction: null,\n      // submitAction: null,\n      title: null,\n      intro: null,\n      fields: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      values: props.values|| {},\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(this);\n\n    self.fields = [];\n\n  }\n  \n\tgetValues() {\n    return this.state.values;\n\t}\n\n\tvalidate({ showErrors }) {\n    let self= this;\n    let isValid = true;\n    let firstInvalid = null\n    self.fields.forEach((field) => {\n      if (!field.validate({ showErrors })) {\n        isValid = false;\n        if (!firstInvalid) firstInvalid = field;\n      }\n    });\n\n    if (firstInvalid && firstInvalid.instance && firstInvalid.instance.scrollIntoView) firstInvalid.instance.scrollIntoView({behavior: 'smooth'});\n    // console.log(isValid);\n    return isValid;    \n\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"formchange\", data);\n    let self = this;\n    let values = { ...this.state.values };\n    values[data.name] = data.value;\n\t\tthis.setState({ values });\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h2 className=\"osc-form-title\">{self.config.title}</h2>\n    }\n\n    let introHTML = null;\n    if (self.config.intro) {\n      introHTML = <div className=\"osc-form-intro\" dangerouslySetInnerHTML={{ __html: self.config.intro }}></div>\n    }\n\n    let fieldsHTML = null;\n    if (self.config.fields && self.config.fields.length) {\n      fieldsHTML =\n        <div className=\"osc-form-fields\">\n          { self.config.fields.map((fieldConfig, i) => {\n            return <OpenStadComponentFormField config={fieldConfig} onChange={self.handleOnChange} ref={el => (self.input = el)} key={`osc-form-field-${i}`}  ref={el => { self.fields[i] = el; }}/>\n          })}\n        </div>\n    }\n\n    return (\n\t\t\t<div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)}>\n\t\t\t\t{titleHTML}\n\t\t\t\t{introHTML}\n\t\t\t\t{fieldsHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n    \n    return (\n\t\t\t<input type=\"hidden\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// TODO: it is probably not ok to write your own html editor, but after intergrating ckeditor or react-rte the build was (more than) twice as large; a bettter solution must be possible\n\n'use strict';\n\nexport default class OpenStadComponentHTMLArea extends React.Component  {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.props.value,\n\t  };\n\n    this.onKeyUpx = this.onKeyUpx.bind(this);\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let value = this.props.value;\n    value = this.filterHTML(value);\n    this.input.innerHTML = value;\n  }\n\n  filterHTML(value) {\n    value = value.replace(/<(\\/?\\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\\s*\\/?)>/g, \"[[[$1]]]\");\n    value = value.replace(/<[^>]+>/g, \"\");\n    value = value.replace(/\\[\\[\\[([^\\]]+)\\]\\]\\]/g, \"<$1>\");\n    return value;\n  }\n\n  executeAction(e, command, args) {\n    e.preventDefault()\n    e.stopPropagation();\n    document.execCommand(command,false,args);\n    this.onKeyUp();\n  }\n  \n  onFocus(e) {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  onBlur(e) {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n    if (this.props.onChange) {\n      this.props.onChange({ value: this.state.value });\n    }\n  }\n\n  onKeyUpx() {\n    let value = this.input.innerHTML;\n    value = this.filterHTML(value);\n    this.setState({ value })\n    if (this.props.onKeyUp) {\n      this.props.onKeyUp(value);\n    }\n  }\n  \n  render () {\n    return (\n      <div className=\"osc-html-editor\">\n        <div className=\"osc-html-editor-buttons\">\n          <div className=\"osc-html-editor-button osc-html-editor-button-bold\" onMouseDown={e => this.executeAction(e, 'bold')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-italic\" onMouseDown={e => this.executeAction(e, 'italic')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-insertunorderedlist\" onMouseDown={e => this.executeAction(e, 'insertunorderedlist')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-createlink\" onMouseDown={e => this.executeAction(e, 'createlink', prompt('Lank naar','http://'))}>&nbsp;</div>\n        </div>\n        <div className=\"osc-html-editor-content\" contentEditable={true}\n             onFocus={ e => this.onFocus(e)}\n             onBlur={ e => this.onBlur(e)}\n             onKeyUp={ e => this.onKeyUpx()}\n             // dangerouslySetInnerHTML={{ __html: this.state.value }}\n             ref={el => (this.input = el)}\n        />\n      </div>\n    );\n  }\n\n}\n\nfunction EditButton(props) {\n  return (\n    <button\n      key={props.cmd}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      {props.name || props.cmd}\n    </button>\n  );\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      allowMultiple: false,\n\t\t\timageserver: {\n\t\t\t\tprocess: '',\n\t\t\t\tfetch: ''\n\t\t\t},\n    };\n\t\tthis.config = merge.recursive(defaultConfig, this.props.config, this.config || {});\n\n    var uploadedFiles = [];\n    let value = props.value || [];\n    value.forEach((image) => {\n      uploadedFiles.push({\n        source: { url: image },\n        options : {\n          type: 'local',\n          // mock file information\n          file: {\n            name: image,\n            //\t\t size: 3001025,\n            //\t type: 'image/png'\n          },\n          metadata: {\n            poster: image,\n          }\n        }\n      })\n    });\n\n    this.state = {\n      uploadedFiles: uploadedFiles,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond files\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\n  }\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar containerElement = document.querySelector('.osc-image-upload-container');\n\t\tif (containerElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\t// FilePond.setOptions({\n\t\t\t//   server: 'https://image-server2.openstadsdeel.nl/image/?access_token=MHhfb5U0m8vquAR81p',\n\t\t\t// });\n      \n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n        allowMultiple: this.config.allowMultiple,\n        allowReorder: true,\n        styleItemPanelAspectRatio: 1,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 5,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: this.state.uploadedFiles,\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: this.config.imageserver.process,\n\t\t\t\t\tfetch: this.config.imageserver.fetch,\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(containerElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = typeof image.serverId == 'string' ? JSON.parse(image.serverId) : image.serverId;\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.onChange({name: self.config.name, value: self.state.value})\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen afbeelding geupload</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-image-upload-container\">\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n//import CKEditor from '@ckeditor/ckeditor5-react';\n//import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport HTMLArea from './htmlarea.jsx';\n\n'use strict';\n\nexport default class FormfieldInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value && props.value.length || 0,\n\t\t};\n\n    self.key = props.useKey || ( self.id || 'osc-input-with-counter-' ) + parseInt( 10000000 * Math.random );\n\n    this.onChange = props.onChange;\n\n    self.handleOnChange = self.handleOnChange.bind(this)\n    self.onInputFocus = self.onInputFocus.bind(this)\n    self.onInputBlur = self.onInputBlur.bind(this)\n    self.onInputKeyUp = self.onInputKeyUp.bind(this)\n\n  }\n\n\tisValid() {\n\t\tlet state = {};\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `De tekst is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `De tekst is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n  }\n\n\tvalidate() {\n\t\tthis.setState({ showWarning: true })\n\t\treturn this.isValid();\n\t}\n  \n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange({ name: this.config.name, value: data.value });\n\t\t}\n\t}\n\n\tonInputFocus() {\n\t\tlet state = {};\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputBlur() {\n\t\tlet state = {};\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputKeyUp(value) {\n\t\tlet state = {};\n\t\tstate.value = value || this.input.value;\n\t\tlet valueLength = state.value.length;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n        \n      case 'htmlarea':\n        inputHTML = (\n          <HTMLArea\n            value={this.state.value}\n            onChange={self.handleOnChange}\n            onFocus={self.onInputFocus}\n            onBlur={self.onInputBlur}\n            onKeyUp={self.onInputKeyUp}\n          />\n        );\n        // inputHTML = (\n        //   <CKEditor\n        //     editor={ ClassicEditor }\n        //     config={{ toolbar: [ 'h3', 'bold', 'italic', 'link' ] }}\n        //     data={this.state.value}\n        //     onInit={ editor => {\n        //       // TODO: betere selector\n        //       document.querySelector('.ck-content').addEventListener('keyup', function(e) {\n        //         self.onInputKeyUp(e, editor.getData())\n        //       })\n        //     }}\n        //     onChange={( event, editor ) => self.handleOnChange({ value: editor.getData() })}\n        //     onFocus={e => self.onInputFocus(e)}\n        //     onBlur={e => self.onInputBlur(e)}\n        //   />\n        // );\n        break;\n        \n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentPostcode extends OpenStadComponentDefaultInput {\n\n\tvalidate({ showErrors }) {\n    \n\t\tlet isValid = true;\n    let error = '';\n    if (!this.state.value || !this.state.value.match(/^\\s*\\d{4}\\s*[a-zA-Z][a-zA-Z]\\s*$/)) {\n      isValid = false;\n      if (showErrors) error = 'Dit is geen postcode';\n    }\n    if (this.config.required && !this.state.value) {\n      isValid = false;\n      if (showErrors) error = 'Je hebt nog niets ingevuld';\n    }\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n  render() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">{self.state.error}</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentRadios extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-radios\">\n        {self.config.choices.map( choice => {\n          if (choice.dangerousDescription) {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\" dangerouslySetInnerHTML={{ __html: choice.dangerousDescription }}/></div>\n          } else {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\">{choice.dangerousDescription ? null : choice.description || choice.title || choice.value}</div></div>\n          }\n        })}\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  componentDidMount() {\n    // init value\n    let value = this.state.value || ( this.config.choices[0] && this.config.choices[0].value );\n    this.handleOnChange({ value })\n  }\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-select\">\n\t\t\t  <select value={this.state.value || ''} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>\n          {self.config.choices.map( choice => {\n            return <option value={choice.value || ''} key={choice.value}>{choice.description || choice.title || choice.value}</option>\n          })}\n        </select>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import React from \"react\"\n\nclass Slider extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: this.props.value,\n      touched: this.props.touched || false,\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const { value } = event.target\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(value)\n    }\n    \n    this.setState({value, touched: true})\n  }\n\n  doTouch() {\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(50)\n    }\n\n    this.setState({touched: true})\n\n  }\n\n  calcProgress(min, max, value) {\n    const range = max - min\n    const progInRange = value - min\n    return ((progInRange*2)/range)-1\n  }\n\n  render(){\n    let self = this;\n    const { value, touched } = self.state\n    const { min, max, step } = self.props\n    return(\n      <div className={`${self.props.className} osc-slider`}>\n        <div className=\"osc-slider-track-container\">\n          <div className=\"osc-slider-track\"></div>\n          <div className=\"osc-slider-track-progress-container\">\n            <div className=\"osc-slider-track-progress\" style={{ transform: 'scaleX(' + self.calcProgress(min, max, value) + ')' }}></div>\n          </div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-left\"></div>\n          <div className=\"osc-slider-track-dot-start osc-slider-track-dot-center\"></div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-right\"></div>\n        </div>\n        <input type='range' min={min} max={max} step={step} value={value} onClick={() => { if (!touched) self.doTouch(); } } onChange={self.handleChange} className={touched ? 'osc-slider-input-range' : 'osc-slider-input-range osc-slider-untouched'} ref={el => (self.input = el)}/>\n      </div>\n    )\n  }\n}\n\nexport default Slider;\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textarea\">\n\t\t\t  <textarea value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>{this.state.value}</textarea>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentText extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport Form from './component/form.jsx';\nimport FormField from './component/form-field.jsx';\nimport Hidden from './component/hidden.jsx';\nimport ImageUpload from './component/image-upload.jsx';\nimport InputWithCounter from './component/input-with-counter.jsx';\nimport Postcode from './component/postcode.jsx';\nimport Radios from './component/radios.jsx';\nimport Select from './component/select.jsx';\nimport Text from './component/textinput.jsx';\nimport Textarea from './component/textarea.jsx';\nimport Slider from './component/slider.jsx';\nexport default {\n  Form,\n  FormField,\n  Hidden,\n  ImageUpload,\n  InputWithCounter,\n  Postcode,\n  Radios,\n  Select,\n  Text,\n  Textarea,\n  Slider,\n}\n\n// render the base element\n// function renderElement( elem, config ) {\n//   let attributes = elem.attributes;\n//   ReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n// }\n// export {renderElement}\n\n","import merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentPoll from '../../poll/index.jsx';\nimport OpenStadComponentReactions from '../../reactions/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\n// todo: een error op fetch wordt niet goed afgevangen\n\nexport default class IdeasDetails extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      idea: {\n        showVoteButtons: true,\n        showLabels: false,\n        allowMultipleImages: false,\n        shareChannelsSelection: [\"facebook\",\"twitter\",\"mail\",\"whatsapp\"],\n      },\n      argument: {\n        isActive: true,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        ignoreReactionsForIdeaIds: '',\n        closeReactionsForIdeaIds: '',\n      },\n      poll: {\n        canAddPolls: false,\n      },\n      labels: {},\n      types: null,\n      typeField: 'typeId',\n      typeLabel: 'Thema',\n\t\t};\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      idea: this.props.idea,\n      ideaId: ( props.idea && props.idea.id ) || this.config.ideaId,\n      showPollForm: false,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.reactionStoredListener = function(event) {\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('osc-reaction-stored', self.reactionStoredListener);\n\n\t\tself.reactionDeletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('osc-reaction-deleted', self.reactionDeletedListener);\n    \n\t\tself.pollCreatedListener = function(event) {\n      self.onPollCreated(event.detail);\n    }\n    document.addEventListener('osc-new-poll-stored', self.pollCreatedListener);\n    \n\t\tself.pollDeletedListener = function(event) {\n      self.onPollDeleted(event.detail);\n    }\n    document.addEventListener('osc-poll-deleted', self.pollDeletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-reaction-stored', this.reactionStoredListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.reactionDeletedListener);\n\t\tdocument.removeEventListener('osc-new-poll-stored', this.pollCreatedListener);\n\t\tdocument.removeEventListener('osc-poll-deleted', this.pollDeletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n    if ( this.config.editIdeaLink ) {\n      document.location.href = this.config.editIdeaLink;\n    } else {\n\t\t  var event = new window.CustomEvent('osc-edit-idea-click', { detail: this.state.idea });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n\n  showPollForm() {\n    this.setState({\n      showPollForm: true\n    })\n  }\n\n  hidePollForm() {\n    this.setState({\n      showPollForm: false\n    })\n  }\n\n  dispatchAddPollClick(e) {\n    e.stopPropagation();\n    this.showPollForm();\n  }\n  \n  onReactionStored(data) {\n    this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onPollCreated() {\n    this.hidePollForm();\n    this.fetchData();\n  }\n\n  onPollDeleted() {\n    this.fetchData();\n  }\n  \n  fetchData() {\n\n    let self = this;\n\n    let ideaId = self.state.ideaId || (this.state.idea && this.state.idea.id);\n\n    if (!ideaId) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ ideaId }?includeVoteCount=1&includeArguments=1&includeArgsCount=1&includeUser=1&includeUserVote=1`;\n    if (self.config.poll.canAddPolls) url += '&includePoll=1';\n\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let idea = json;\n        self.setState({ idea }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n        if ( this.config.afterDeleteIdeaLink ) {\n          document.location.href = this.config.afterDeleteIdeaLink;\n        } else {\n\t\t      var event = new window.CustomEvent('osc-idea-deleted', { detail: { ideaId } });\n\t\t      document.dispatchEvent(event);\n        }\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    if (!idea) return null;\n\n    let labelHTML = null;\n\n    if (self.config.idea.showLabels) {\n      let typeId = eval(`idea.${self.config.typeField}`);\n      let typeDef = self.config.types && self.config.types.find(def => def.id == typeId || def.value == typeId);\n      console.log('==', typeId, typeDef, self.config.types);\n      if (typeDef) {\n        let labelText = typeDef.label;\n        let backgroundColor = typeDef.backgroundColor;\n        let textColor = typeDef.textColor;\n        labelHTML = (\n          <div className=\"ocs-idea-label\" style={{ color: textColor, backgroundColor }}>{labelText}</div>\n        );\n      }\n    }\n    \n    let pollHTML = null;\n    let addPollButtonHTML = null;\n    if (self.config.poll.canAddPolls) {\n      if (idea.poll || self.state.showPollForm) {\n        pollHTML = (\n          <div>\n\t\t\t      <div id=\"poll\" className=\"osc-poll-header\"><h3>{self.config.poll.title || 'Poll'}</h3></div>\n            <OpenStadComponentPoll config={{ ...self.config, ...self.config.poll, ideaId: self.state.ideaId }} poll={idea.poll}/>\n          </div>\n        )\n      } else {\n        if (idea.can && idea.can.edit) {\n          addPollButtonHTML = (\n            <div className=\"osc-editbuttons-container\">\n              <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchAddPollClick(event)}>Add poll</button>\n            </div>\n          )\n        }\n      }\n    }\n\n    let voteButtonsHTML = null;\n    if (self.config.idea.showVoteButtons) {\n      voteButtonsHTML = (\n        <div className=\"osc-details-vote-buttons-container\">\n          <h3>Likes</h3>\n          <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={idea.yes}/>\n        </div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( idea.can && idea.can.edit ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (idea && idea.modBreak) {\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {idea.modBreakDateHumanized}<br/>\n          <br/>\n          {idea.modBreak}\n        </div>\n      );\n    }\n\n    let reactionsCountHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsCountHTML = (\n        <div>\n          <h3>Reacties</h3>\n          <a href=\"#reactions\" className=\"osc-no-of-reactions\">{idea.argCount || 0} reacties</a>\n        </div>\n      );\n    }\n\n    let reactionsHTML = null;\n    if ( self.config.argument.isActive ) {\n      // todo: refactor config zodat hij in reactions ook gewoon argument: {} heet, en dan deze regels naar daar\n      let config = {...self.config}\n      config.argument.isActive = this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`));\n      config.argument.isClosed = this.config.argument.isClosed || this.config.argument.closeReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`));\n      reactionsHTML = (\n        <div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>{self.config.argument.title || 'Reacties'}</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, title: undefined, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: idea.id, loginUrl: self.config.loginUrl, }}/>\n        </div>\n      );\n    }\n\n    let authorHTML = idea.user.nickName || idea.user.fullName || idea.user.firstName +' ' + idea.user.lastName;\n    if (this.config.linkToUserPageUrl) {\n      authorHTML = <a href={this.config.linkToUserPageUrl + '/' + idea.user.id} className=\"osc-author-link\">{authorHTML}</a>\n    }\n\n    let shareButtonsHTML = null;\n    if (self.config.idea.shareChannelsSelection.length) {\n      let facebookButtonHTML = self.config.idea.shareChannelsSelection.includes('facebook') ? (<li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>) : null;\n      let twitterButtonHTML = self.config.idea.shareChannelsSelection.includes('twitter') ? (<li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>) : null;\n      let mailButtonHTML = self.config.idea.shareChannelsSelection.includes('mail') ? (<li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>) : null;\n      let whatsappButtonHTML = self.config.idea.shareChannelsSelection.includes('whatsapp') ? (<li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>) : null;\n\n      shareButtonsHTML = (\n      <div className=\"osc-details-sharebuttons\">\n        <ul>\n          {facebookButtonHTML}\n          {twitterButtonHTML}\n          {mailButtonHTML}\n          {whatsappButtonHTML}\n\t\t\t\t</ul>\n      </div>);\n\n\n    }\n    \n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-idea-image-container\">\n                <OpenStadComponentImage config={{ allowMultipleImages: self.config.idea.allowMultipleImages }} idea={idea}/>\n              </div>\n\n              {labelHTML}\n\n              {shareButtonsHTML}\n\n              <div className=\"osc-details-stats\">\n                {voteButtonsHTML}\n                {reactionsCountHTML}\n                {editButtonsHTML}\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              <span className=\"ocs-gray-text\">Door </span>{authorHTML}\n              <span className=\"ocs-gray-text\"> op </span>{idea.createDateHumanized}\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span>\n\t\t\t        <span className=\"ocs-gray-text\">{self.config.typeLabel}: </span>{idea.extraData.theme}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{idea.summary}</p>\n\n            <p className=\"osc-details-description\" dangerouslySetInnerHTML={{ __html: idea.description }}></p>\n\n            {addPollButtonHTML}\n\n\t\t\t    </div>\n\n          {pollHTML}\n\n          {reactionsHTML}\n\n\t\t\t    <div className=\"osc-bottom-spacer\"></div>\n\n        </div>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote();\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    if (e) e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new window.CustomEvent('osc-idea-liked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaDetails from './component/idea-details.jsx';\n\n// render elements\nOpenStadComponentIdeaDetails.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaDetails attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaDetails as default,\n  OpenStadComponentIdeaDetails as IdeaDetails,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentIdeaImage extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      allowMultipleImages: false\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      currentImageIndex: 0,\n      width: 0,\n    };\n        \n  }\n\n  componentDidMount () {\n    let elem = document.querySelector(`#${this.divId}`);\n    this.setState({width: elem.offsetWidth})\n  }\n\n  setCurrentImageIndex (which) {\n    this.setState({currentImageIndex: which})\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.props.idea;\n\n    if (!idea) return null;\n\n    let images = (idea.extraData && idea.extraData.images) || [];\n    let image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[self.state.currentImageIndex]);\n\n    if (self.config.allowMultipleImages && images.length > 1) {\n\n      // multiple\n      return (\n        <div id={self.divId} className=\"osc-idea-multiple-images\">\n        \n          <div className=\"osc-idea-image-spacer\">\n            <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n          </div>\n\n          <div className=\"osc-idea-multiple-images-thumbs\">\n\n            {images.map(( thumb, i ) => {\n              let height = 0.1 * self.state.width;\n              let width = height * 16/9;\n              // let left = ( width *  1.07) * i + ( self.state.width - width *  1.07* images.length ) / 2;\n              let left = ( width *  1.05 ) * i;\n              return (\n                <div className=\"osc-idea-image-thumb-spacer\" key={`osc-idea-image-thumb-${i}`} style={{ left, width, height }}>\n                  <div className=\"osc-idea-image-thumb\" style={thumb ? { backgroundImage: `url(${thumb})`, zIndex: 10-i } : {}} onClick={e => self.setCurrentImageIndex(i)}></div>\n                </div>\n              );\n            })}\n\n          </div>\n\n        </div>\n      );\n\n    } else {\n\n      // singular\n      return (\n        <div id={self.divId} className=\"osc-idea-image-spacer\">\n          <div className=\"osc-idea-image\" style={image ? { backgroundImage: `url(${image})` } : {}} key={'image-' + idea.id}></div>\n        </div>\n      );\n      \n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaImage from './component/idea-image.jsx';\n\n// render elements\nOpenStadComponentIdeaImage.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaImage attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaImage as default,\n  OpenStadComponentIdeaImage as IdeaImage,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport { IdeasFilterbar, IdeasFilter, IdeasSearch } from '../../ideas-overview/index.jsx';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends IdeasFilterbar {\n\n\trender() {\n\n    let self = this;\n\n    let searchHTML = null;\n\t\tif (self.config.search) {\n\t\t\t// searchHTML = (\n\t\t\t//   <div className={`osc-ideas-search-container`}>\n\t\t\t//   \t<div className=\"osc-ideas-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t//   \t<IdeasSearch config={ self.config.search } className={`${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`} ref={el => self.search = el}/>\n\t\t\t//   </div>\n\t\t\t// );\n\n      searchHTML = (\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t\t  <Search config={{ ...this.config }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>);\n\t\t}\n\n    // TODO: configurable?\n    let resetButtonHTML = null;\n    resetButtonHTML = (\n      <button value=\"reset\" onClick={() => self.resetAll()} className=\"osc-button osc-reset-button\">Alles tonen</button>\n    );\n\n    let filterHTML = null;\n    if (self.config.filter.length) {\n      let isActive = self.filters && self.filters.find( filter => filter.state.currentValue );\n      self.filters = [];\n      filterHTML = (\n        <div className=\"osc-ideas-filters-and-button-container\">\n          <div className={`osc-ideas-filter-button${ isActive ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('filters')}></div>\n          <div className={`osc-ideas-filters-container${self.state.mobileActiveSelector == 'filters' ? ' osc-is-active' : ''}`}>\n            { self.config.filter.map(( filterConfig, i ) => {\n              return (\n                <IdeasFilter config={filterConfig} className=\"osc-align-right-container\" key={`osc-ideas-filter-${i}`} ref={el => self.filters[i] = el}/>\n              );\n            })}\n          </div>\n        {resetButtonHTML}\n        </div>\n      );\n    }\n\n    let filtersAndButtonsHTML = null;\n    filtersAndButtonsHTML = (\n      <div className=\"osc-ideas-filters-and-reset-button-container\">\n        {filterHTML}\n      </div>\n    )\n\n    return (\n      <div className={`osc-ideas-filterbar ${self.props.className || ''}`}>\n        {searchHTML}\n        {filtersAndButtonsHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n// import OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\n// import OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n      fields: [],\n    };\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.fields = [ ...self.config.fields ];\n\n    let fields = self.config.idea.fields || [];\n\n    if (!self.props.idea.extraData) self.props.idea.extraData = {};\n\n    let state = {\n      formfields: {\n        id: self.props.idea.id || '',\n        user: self.props.idea.user || {},\n      },\n      showFormErrorsWarning: false,\n      isBusy: false,\n    };\n\n    fields.forEach((field) => {\n      if (field.name) {\n        state.formfields[field.name] = eval('self.props.idea.' + field.name);\n        field.value = eval('self.props.idea.' + field.name);\n      }\n    });\n\n    let titleField = fields.find(field => field.name == 'title');\n    if (titleField) {\n\t\t  titleField.minLength = self.config.idea.titleMinLength;\n\t\t  titleField.maxLength = self.config.idea.titleMaxLength;\n    }\n\n    let summaryField = fields.find(field => field.name == 'summary');\n    if (summaryField) {\n\t\t  summaryField.minLength = self.config.idea.summaryMinLength;\n\t\t  summaryField.maxLength = self.config.idea.summaryMaxLength;\n    }\n\n    let descriptionField = fields.find(field => field.name == 'description');\n    if (descriptionField) {\n\t\t  descriptionField.minLength = self.config.idea.descriptionMinLength;\n\t\t  descriptionField.maxLength = self.config.idea.descriptionMaxLength;\n    }\n\n    let imageField = fields.find(field => field.inputType == 'image-upload'); // TODO: multiple images?\n    if (imageField) {\n\t\t  imageField.imageserver = self.config.imageserver;\n    }\n\n    if (OpenStadComponentLibs.user.hasRole( self.config.user, 'editor' ) ) {\n\n      // typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        let choices = [];\n        self.config.types.forEach(type => {\n          let typeDef = type;\n          if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n            choices.push({ title: typeDef.name, value: typeDef.id || typeDef.value})\n          }\n        });\n        self.config.idea.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  title: \"Type inzending\",\n\t\t\t\t  value: self.props.idea.typeId,\n          inputType: \"multiple-choice\",\n          choices\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n      // moderator\n      self.config.idea.fields.push({\n\t\t\t\tname: \"modBreak\",\n\t\t\t\ttitle: \"Moderator reactie\",\n\t\t\t\tvalue: self.props.idea.modBreak,\n\t\t\t\tinputType: \"textarea-with-counter\",\n\t\t\t\tminLength: 0,\n\t\t\t\tmaxLength: 2000,\n\t\t\t})\n      state.formfields.modBreak = self.props.idea.modBreak;\n\n    } else {\n\n      // hidden: typeId\n      if (self.config.types && self.config.typeField == 'typeId') {\n        self.config.idea.fields.push({\n\t\t\t\t  name: \"typeId\",\n\t\t\t\t  value: self.props.idea.typeId,\n\t\t\t\t  inputType: \"hidden\",\n\t\t\t  })\n        state.formfields.typeId = self.props.idea.typeId;\n      }\n\n    }\n\n    self.state = state;\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new window.CustomEvent('osc-update-edit-idea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n      console.log('xxx');\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // // images\n\t  // if (!self.imageField.validate()) {\n\t\t//   self['form-warning-image'].style.display = 'block';\n\t\t//   isValid = false;\n\t  // } else {\n\t\t//   self['form-warning-image'].style.display = 'none';\n    // }\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let formValues = self.form.getValues();\n\n      let isValid = self.form.validate({ showErrors: true });\n\n\t    if ( !self.validateIdea() || !isValid ) { // validateIdea doet nog locatie en images\n        self.setState({ isBusy: false, showFormErrorsWarning: true });\n        return;\n      }\n\n      self.setState({ showFormErrorsWarning: false });\n\n\t    if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t    var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n\n      let body = {\n        location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n      };\n      Object.keys(formValues).forEach(key => {\n        let match = key.match(/^extraData\\.(.+)/)\n        if (match) {\n          if (!body.extraData) body.extraData = {};\n          body.extraData[match[1]] = formValues[key];\n        } else {\n          body[key] = formValues[key];\n        }\n      });\n\n      // if ( self.config.user && self.config.user.role == 'admin' ) {\n      //   body.modBreak = self.state.formfields['modBreak'];\n      // }\n\n      let method = 'POST';\n      if (typeof this.state.formfields.id == 'number') {\n        method = 'PUT';\n        url = url + '/' + this.state.formfields.id;\n      }\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw response;\n          }\n          return response.json();\n        })\n        .then( json => {\n          self.setState({ isBusy: false }, () => {\n\t\t        var event = new window.CustomEvent('osc-new-idea-stored', { detail: { idea: json } });\n\t\t        document.dispatchEvent(event);\n          })\n        })\n        .catch((err) => {\n          console.log('Niet goed');\n          console.log(err);\n          if ( typeof err.json == 'function' ) {\n            err.json().then(json => self.setState({ isBusy: false, showFormErrorsWarning: json.message }) );\n          } else {\n            self.setState({ isBusy: false, showFormErrorsWarning: err.message || err })\n          }\n        });\n    })\n    \n  }\n  \n\trender() {\n\n    let self = this;\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      let text = 'Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.';\n      if (typeof self.state.showFormErrorsWarning == 'string') {\n        text = self.state.showFormErrorsWarning;\n      }\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">{ text }</div>\n      );\n    }\n\n    let formHTML = null;\n    formHTML = (\n      <OpenStadComponentForms.Form config={{ fields: self.config.idea.fields }} values={{ typeId: self.state.formfields.typeId /* typeId is hidden */ }} ref={(el) => { self.form = el;}}/>\n    )\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-infobar-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          {formHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className={`osc-button osc-button-blue${ self.state.isBusy ? ' osc-disabled' : '' }`} onClick={() => { if (!self.state.isBusy) self.submitIdea() } } ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBar from './infobar.jsx';\nimport Preview from './preview.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n// TODO: editIdea vs newIdea opschonen\n// TODO: vervang handle functies door events, bijvoorbeeld bij opzoeken adres\n// TODO: events renamen naar osc-xxx\n// TODO: remove event listener is nog niet overal consequent doorgevoerd\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n         \n      display: {\n        type: 'complete',\n        width: null,\n        height: null,\n      },\n\n      canSelectLocation: true,\n      types: [],\n      typeField: null,\n      titleField: 'title',\n      summaryField: 'summary',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n      },\n      content: {\n      },\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.ideaName = self.config.ideaName || 'Inzendingen';\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n    self.config.typeField = self.config.typeField || 'extraData.theme'\n\n    // tmp\n    if (self.config.types && self.config.types.length) {\n      self.config.types.forEach((entry) => {\n        if (entry.value && !entry.name) {\n          entry.name = entry.value;\n        }\n        if (entry.mapicon && typeof entry.mapicon == 'string') {\n          try {\n            entry.mapicon = JSON.parse(entry.mapicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.listicon && typeof entry.listicon == 'string') {\n          try {\n            entry.listicon = JSON.parse(entry.listicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.buttonicon && typeof entry.buttonicon == 'string') {\n          try {\n            entry.buttonicon = JSON.parse(entry.buttonicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n      });\n    }\n\n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      listedIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    window.addEventListener( 'hashchange', e => {\n      self.hideIdeaDetails();\n      let match = window.location.hash.match(/(\\w)(\\d+)/);\n      if (match) {\n        let ideaId = match[2];\n        let idea = self.state.ideas && self.state.ideas.find(idea => idea.id == ideaId);\n        if (match[1] == 'D') {\n          self.showIdeaDetails(idea)\n        } else {\n\t\t\t\t\t// self.setSelectedIdea(idea);\n        }\n      }\n    }, false );\n\n    // when the map is ready\n\t\tdocument.addEventListener('osc-map-is-ready', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // map events\n\t\tdocument.addEventListener('osc-map-click', function(event) {\n      self.onMapClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-marker-click', function(event) {\n      self.onMarkerClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-cluster-click', function(event) {\n      self.onClusterClick(event.detail);\n    });\n    \n    // handle filter changes\n\t  document.addEventListener('osc-ideas-filter-onchange', function(event) {\n      self.onChangeFilter(event.detail);\n    });\n\n    // infobar events\n\t\tdocument.addEventListener('osc-set-selected-idea', function(event) {\n      self.onUpdateSelectedIdea(event.detail);\n    });\n\t\tdocument.addEventListener('osc-set-selected-location', function(event) {\n      self.setSelectedLocation(event.detail);\n    });\n\t\tdocument.addEventListener('osc-new-idea-click', function(event) {\n      self.onNewIdeaClick({ idea: event.detail.idea });\n    });\n\t\tdocument.addEventListener('osc-selected-idea-click', function(event) {\n      self.onSelectedIdeaClick({ idea: event.detail.idea });\n    });\n\t\tdocument.addEventListener('osc-click-mobile-switcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n\n    // ideas list events\n\t\tdocument.addEventListener('osc-idea-tile-click', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('osc-idea-tile-mouse-over', function(event) {\n      self.onTileMouseOver(event.detail.idea);\n    });\n\t\tdocument.addEventListener('osc-idea-tile-mouse-out', function(event) {\n      self.onTileMouseOut(event.detail.idea);\n    });\n\n    // details changes\n\t\tdocument.addEventListener('osc-idea-liked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-stored', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('osc-edit-idea-click', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-idea-deleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('osc-new-idea-stored', function(event) {\n      document.location.href = \"#\";\n      self.onNewIdeaStored(event.detail.idea);\n    });\n\t\tdocument.addEventListener('osc-update-edit-idea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArgsCount=1&includeUser=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers,\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        // showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/(\\w)(\\d+)/) && window.location.hash.match(/(\\w)(\\d+)/)[2] ) || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        // showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        showIdeaDetails = showIdeaDetails || ( window.location.hash.match(/^#D(\\d+)/) && window.location.hash.match(/^#D(\\d+)/)[1] );\n        showIdeaSelected = showIdeaSelected || ( window.location.hash.match(/^#S(\\d+)/) && window.location.hash.match(/^#S(\\d+)/)[1] );\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.map.setBoundsAndCenter();\n\n        self.setState({ ideas }, function () {\n          self.setState({ mobileState: self.config.startWithListOpenOnMobile ? 'opened' : 'closed' })\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers({})\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          if (window.location.hash.match(/^#newidea/)) {\n            // TODO: dit moet ook bestaande ideeen gaan werken\n            let hash = window.location.hash;\n            let match = hash.match(/&([^&]+)=([^&]+)/g);\n            let newIdea = {  };\n            if (match) {\n              match.forEach((entry) => {\n                let [key, val] = entry.split('=');\n                key = key.substring(1, key.length);\n                newIdea[key] = decodeURIComponent(val);\n              });\n            }\n\t\t\t\t\t  self.setNewIdea(newIdea);\n\t\t\t\t    self.showIdeaForm(newIdea);\n          }\n          self.onChangeMapBoundaries();\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    if (self.infobar) self.infobar.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers({})\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n\n    if (self.config.idea.formUrl) {\n      let url = self.config.idea.formUrl;\n      url = url.replace(/:ideaId/, typeof idea.id == 'number' ? idea.id : '');\n      url = url.replace(/:location/, idea.location ? JSON.stringify({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }) : '');\n      url = url.replace(/:typeId/, idea.typeId);\n      url = url.replace(/:address/, idea.address);\n      document.location.href = url;\n    } else {\n      self.setState({ status: 'idea-form', editIdea: idea }, function() {\n        self.map.map.invalidateSize();\n        self.map.hideMarkers({ exception: { location: idea && idea.location && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n        if (next) next();\n      });\n    }\n\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      self.showIdeaDetails(idea)\n      document.location.href = \"#D\" + idea.id\n    } else {\n      document.location.href='#';\n      if (self.state.editIdea && self.state.editIdea.location) {\n        self.setState({ status: 'location-selected' }, function() {\n          // todo: dit zou hij zelf via state moeten doen\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(self.state.editIdea)\n        });\n      } else {\n        self.setState({ status: 'default' }, function() {\n          self.map.map.invalidateSize();\n          self.map.showMarkers({})\n          self.setNewIdea(null)\n        });\n      }\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas\n\t\tthis.state.ideas.forEach((idea) => {\n\t\t\tlet title = eval(`idea.${self.config.titleField}`) || '';\n      let titlelLc = title.toLowerCase();\n\t\t\tlet summary = eval(`idea.${self.config.summaryField}`) || '';\n      let summaryLc = summary.toLowerCase();\n\t\t\tif (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\tsearchResult.ideas.push({\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonClick: function() {\n            //xxx\n            self.onUpdateSelectedIdea(idea)\n          },\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n    \n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\t\t\n\t}\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n\n    let self = this;\n\n    self.map && self.map.setSelectedLocation(location)\n\n    if (location)  {\n      if (self.infobar.ideaform) {\n        self.infobar.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t\t  self.state.editIdea.address = address;\n\t\t\t\t  self.infobar.ideaform.handleLocationChange({ location, address: address });\n\t\t\t  })\n      }\n    } else {\n      self.map && self.map.unfadeAllMarkers();\n      this.setState({ status: 'default', currentIdea: null, newIdea: null, editIdea: null }, function() {\n      });\n    }\n\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        // xxx\n        if (idea.location) self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infobar) {\n          self.setState({ editIdea: self.state.editIdea });\n          if (idea.location) {\n            self.infobar.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n            self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n              let address = json && json._display || 'Geen adres gevonden';\n              let editIdea = self.state.editIdea;\n              editIdea.address = address;\n              self.setState({ editIdea });\n              self.infobar.setNewIdea({ ...self.state.editIdea, address });\n            })\n          } else {\n            self.infobar.setNewIdea({ ...self.state.editIdea, address: 'Geen locatie geselecteerd...' });\n          }\n          self.infobar.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        if (self.infobar) {\n          self.infobar.setNewIdea(null);\n          self.infobar.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    // OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infobar) {\n        this.infobar.setSelectedIdea(idea);\n        this.infobar.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map && this.map.unfadeAllMarkers();\n      if (this.infobar) {\n        this.infobar.setSelectedIdea(null);\n        this.infobar.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infobar.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          document.location.href='#';\n          this.setSelectedIdea(null);\n          this.setSelectedLocation(null);\n          this.setNewIdea(null);\n          this.infobar.updateIdeas({ ideas: this.getVisibleIdeas(), hideSortButton: false });\n        } else {\n          if (!this.config.canSelectLocation) break;\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infobar.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.onUpdateSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infobar.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    if (!self.map) return;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infobar) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infobar.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', hideSortButton: true, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infobar) {\n          self.infobar.updateIdeas({ ideas: self.getVisibleIdeas(), hideSortButton: false });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    if (idea) {\n      // xxx\n      document.location.href='#S'+idea.id;\n    } else {\n      document.location.href = \"#\";\n    }\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      // this.showIdeaDetails(idea);\n      document.location.href = \"#D\" + idea.id;\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      // todo: dit werkt niet meer nu self.infobar.ideaform in de infobar zit\n      self.infobar.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.infobar.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter();\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick({ idea }) {\n    // this.showIdeaDetails(idea);\n    document.location.href = \"#D\" + idea.id\n  };\n  \n  onNewIdeaClick({ idea }) {\n    let self = this;\n    let editIdea = this.state.editIdea || {};\n    editIdea.typeId = idea.typeId;\n    self.showIdeaForm(editIdea, () => {\n      if (this.state.editIdea && this.state.editIdea.location) {\n        let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      // todo: dit werkt niet meer nu self.infobar.ideaform in de infobar zit\n        self.infobar.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t    self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t    let address = json && json._display || 'Geen adres gevonden';\n\t\t\t    self.state.editIdea.address = address;\n\t\t\t    self.infobar.ideaform.handleLocationChange({ location, address: address });\n\t\t    })\n      }\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n\t\tself.showIdeaDetails(idea);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount++;\n    setTimeout(e => { window.location.hash = `#osc-reaction-${data.id}` }, 1000);\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n  \n  onChangeFilter(filter) {\n    this.setSelectedIdea(null);\n\t\tthis.setNewIdea(null);\n\t\tthis.setSelectedLocation(null);\n\t\tthis.setState({ status: 'default' })\n\t\tthis.onChangeMapBoundaries(); // todo: rename\n  }\n  \n  onTileMouseOver(idea) {\n    this.map.fadeMarkers({ exception: idea })\n    this.map.updateFading();\n  }\n\n  onTileMouseOut(idea) {\n    this.map.unfadeAllMarkers()\n    if (this.selectedIdea) {\n      this.map.fadeMarkers({exception: this.selectedIdea});\n    }\n    if (this.map.selectedLocation) {\n      this.map.fadeMarkers({});\n    }\n    this.map.updateFading();\n  }\n\n  onClickBackToOverview(idea) {\n    document.location.href='#S'+this.state.currentIdea.id;\n  }\n  \n  onClickMobileSwitcher() {\n    let self = this;\n    if (self.infobar) self.infobar.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter();\n      }\n    })\n  }\n\n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infobar moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} displayType=\"details\" idea={this.state.currentIdea} className=\"osc-ideas-on-map-info\" ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.onClickBackToOverview() }>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} displayType=\"form\" idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} className=\"osc-ideas-on-map-info\" ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n            mobilePopupHTML = (\n              <Preview config={{ ...this.config, display: { type: 'mobilePreview' } }} selectedLocation={this.state.editIdea} />\n\t\t\t\t\t\t);\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infobar.setState({ mobileState: 'opened' }); document.location.href = \"#D\" + this.state.currentIdea.id; /* this.showIdeaDetails(this.state.currentIdea) */ } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n          <Filterbar config={this.config} className=\"osc-ideas-filterbar\"/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBar config={this.config} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infobar = el)}/>\n        );\n        filterHTML = (\n          <Filterbar config={this.config} className=\"osc-ideas-filterbar\"/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    let divStyle = {};\n    let simpleHTML = null;\n    if ( this.config.display.type == 'simple' ) {\n      filterHTML = null;\n      infoHTML = null;\n      mobilePopupHTML = null;\n      let buttonHTML = null;\n      if (this.config.linkToCompleteUrl) buttonHTML = <button onClick={() => { document.location.href = this.config.linkToCompleteUrl }} className=\"osc-button-blue\" style={{position: 'absolute', top: 20, right: 20}}>Bekijk de volledige kaart</button>\n      simpleHTML = (\n        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, zIndex: 1000 }}>\n          {buttonHTML}\n        </div>)\n      if (this.config.display.width) divStyle.width = this.config.display.width;\n      if (this.config.display.height) divStyle.height = this.config.display.height;\n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} style={divStyle} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className={`osc-ideas-on-map-map osc-ideas-on-map-map-${this.config.display.type}`}>\n\t\t\t    <Map id={this.divId + '-map'} config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField, zoomControl: this.config.display.type == 'simple' ? false : true }} ref={el => (this.map = el)}/>\n        </div>\n        {simpleHTML}\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport { IdeasOverview, IdeasList, IdeasFilterbar, IdeasSort } from '../../ideas-overview/index.jsx';\n\n'use strict';\n\nexport default class IdeasOverview2 extends IdeasOverview {\n\n\trender() {\n\n    let self = this;\n\n    let ideas = typeof self.props.ideas != 'undefined' ? self.props.ideas : self.state.ideas || [];\n\n    let titleHML = (<h3 className=\"osc-title\">{self.config.title} ({ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={`osc-ideas-overview ${self.props.className || ''}`}>\n\n        <IdeasFilterbar config={self.config} showFilterbar={self.props.showFilterbar} className=\"osc-ideas-filterbar\"/>\n        <IdeasSort config={{ ...self.config.sort }} ideas={ideas} showSort={!self.props.hideSortButton} className=\"osc-align-right-container\" ref={el => self.sorter = el}/>\n\n        {titleHML}\n\n        <IdeasList config={self.config} ideas={ideas} className=\"\"/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n\n\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport IdeasOverview from './ideas-overview.jsx';\nimport IdeaDetails from '../../idea-details/index.jsx';\nimport IdeaForm from './idea-form.jsx';\nimport Preview from './preview.jsx';\n\n'use strict';\n\n// details en form worden nu langs hier getekend, maar de rest moet nog heel erg opgeschoond\n// ook hier woren nog funcies meegetuurd die via events moeten lopen\n\nexport default class InfoBar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      display: {\n        type: 'list',\n        columns: 1,\n        showFilterbar: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n      argument: {\n        isActive: true,\n        ignoreReactionsForIdeaIds: '',\n      },\n      types: [],\n\t\t};\n\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n    this.config.loginUrl = this.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    // tmp voor oude data\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionLoggedInHTML) {\n      this.config.content.noSelectionLoggedInHTML = props.config.content.noSelectionHTML\n    }\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionNotLoggedInHTML) {\n      this.config.content.noSelectionNotLoggedInHTML = props.config.content.noSelectionHTML\n    }\n\n    this.state = {\n      currentSortOrder: this.config.defaultValue,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n\t\tdocument.addEventListener('osc-set-selected-idea', function(event) {\n      self.setSelectedIdea(event.detail);\n    });\n\t\tdocument.addEventListener('osc-set-selected-location', function(event) {\n      self.setNewIdea(event.detail);\n    });\n\n  }\n  \n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, hideSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    ideas = this.list ? this.list.sorter.doSort({ ideas, sortOrder, center }) : [];\n    this.setState({ ideas });\n  }\n\n  // todo: dit moet helemaal weg; hij moet controlled worden\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('osc-click-mobile-switcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  render() {\n\n    let self = this;\n\n    let config = {...self.config};\n    // TODO: tmp gerard dou\n    if ( this.props.idea && this.props.idea.extraData && this.props.idea.extraData.type && ( this.props.idea.extraData.type == 'Kans' || this.props.idea.extraData.type == 'Knelpunt' ) ) {\n      config.types = [{\"name\": \"Kans\",\"label\": \"Dit gaat goed\",\"value\": \"Kans\",\"buttonLabel\": \"Ik wil een idee posten\",\"backgroundColor\": \"#bed200\",\"textColor\": \"black\"},{\"name\": \"Knelpunt\",\"label\": \"Dit kan beter\",\"value\": \"Knelpunt\",\"backgroundColor\": \"#ff9100\",\"textColor\": \"black\"}];\n      config.typeField = 'extraData.type'\n      config.showLabels = true;\n    }\n\n    // idea detail\n    if (self.props.displayType == 'details') {\n      return (\n        <IdeaDetails config={config} idea={this.props.idea} className={self.props.className || 'osc-infobar-idea-details'} ref={el => (this.ideadetails = el)}/>\n      );\n    }\n\n    // idea form\n    if (self.props.displayType == 'form') {\n      return (\n\t\t\t  <IdeaForm config={config} idea={this.props.idea} className=\"osc-ideas-on-map-info\" ref={el => (this.ideaform = el)}/>\n      );\n    }\n\n    // ideas in list\n    let ideas = self.state.ideas;\n\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n    let maxLength = null;\n    let hideSortButton = false;\n\n    // new idea\n    if (self.state.newIdea) {\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n      maxLength = 5;\n      hideSortButton = true;\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n      maxLength = 5;\n      hideSortButton = true;\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n    // wat doet dit? het was was if (!newIdeaHTML && !selectedIdeaHTML) {\n    if (!self.state.newIdea && !self.state.selectedIdea) {\n      mobileTitle = `${config.ideaName} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n    let title = config.ideaName + ' ' + titleAddition;\n\n    config.display.onMouseOverTileFadeOthers = true;\n\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-infobar'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          <Preview config={config} selectedIdea={self.state.selectedIdea} selectedLocation={self.state.newIdea}/>\n\t\t\t    <IdeasOverview config={config} ideas={self.state.ideas} maxLength={maxLength} hideSortButton={hideSortButton} title={title} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport OpenStadComponentNLMap from '../../nlmap/index.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      clustering: {\n        maxClusterRadius: 100,\n        showCoverageOnHover: false,\n      },\n      types: [],\n    };\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    // tmp fallback\n    this.config.polygon = this.config.polygon;\n    this.config.autoZoomAndCenter = this.config.autoZoomAndCenter || 'polygon'\n    \n    this.ideas = [];\n\n    this.state = {\n      filters: {},\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    super.componentDidMount(prevProps, prevState);\n\n    let self = this;\n\n    self.mapClusterAnimationEndListener = function(event) {\n      self.onMapClusterAnimationEnd(event.detail);\n    }\n\t\tdocument.addEventListener('osc-map-cluster-animation-end', self.mapClusterAnimationEndListener);\n\n    self.ideasFilterOnchangeListener = function(event) {\n      self.onChangeFilter(event.detail)\n    }      \n\t  document.addEventListener('osc-ideas-filter-onchange', self.ideasFilterOnchangeListener);\n    \n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-map-cluster-animation-end', self.mapClusterAnimationEndListener);\n    document.removeEventListener('osc-ideas-filter-onchange', this.ideasFilterOnchangeListener)\n  }\n  \n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && self.config.typeField ? eval(`idea.${self.config.typeField}`) : 'typeId';\n\t\tlet typeDef = self.config.types.find(entry => typename && ( entry.id == typename || entry.name == typename ));\n    if (!typeDef) typeDef = {};\n\t  let color = typeDef.color || typeDef.backgroundColor || '#164995';\n    let icondef = ( ( typeDef.mapicon || typeDef.icon ) ) || { html: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  setBoundsAndCenter(points) {\n    super.setBoundsAndCenter(points || ( this.config.autoZoomAndCenter == 'polygon' && this.config.polygon ) || this.markers);\n  }\n\n  showMarkers({ keepCenter=false }) {\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    // if (!keepCenter) self.setBoundsAndCenter(( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || self.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception && exception.location) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onMapClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n  onChangeFilter(filter) {\n    // TODO: areas update zou ook met polygons moeten werken\n    let self = this;\n    let filters = self.state.filters;\n    filters[filter.fieldName] = filter;\n    self.setState({ filters }, () => {\n\t    self.setFilter(function(marker) {\n        let result = true;\n        Object.keys(self.state.filters).forEach((fieldName) => {\n          let filter = self.state.filters[fieldName]\n\t\t      if (filter.value && filter.value !== '0') {\n\t\t\t      if (marker.data && !eval(`marker.data.${filter.fieldName}`) || eval(`marker.data.${filter.fieldName}`) != filter.value) result = false;\n\t\t      }\n        });\n        return result;\n\t    })\n    });\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n'use strict';\n\n// todo: dit moet nog heel erg opgeschoond\n// todo: selectedidea weergave kan met idea-overview.tile gaan werken\n\nexport default class Preview extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      display: {\n        type:'idea-selection',\n      },\n      api: {\n      },\n      content: {\n        noSelectionLoggedInHTML: '<div class=\\\"osc-infobar-default-block\\\"><div class=\\\"osc-infobar-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-infobar-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-infobar-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        noSelectionNotLoggedInHTML: '<div class=\\\"osc-infobar-default-block\\\"><div class=\\\"osc-infobar-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-infobar-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-infobar-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        selectionActiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {addButton}.',\n        selectionInactiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        selectionActiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {loginButton} of <a href=\"{loginLink}\">login link</a>.',\n        selectionInactiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        mobilePreviewLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4>{addButton}',\n        mobilePreviewNotLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4><div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"{loginLink}\">inloggen</a>.</div>',\n        showNoSelectionOnMobile: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n\t\t};\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n    this.config.loginUrl = this.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n\n    // tmp voor oude data\n    props.config.content = props.config.content || {};\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionLoggedInHTML) {\n      this.config.content.noSelectionLoggedInHTML = props.config.content.noSelectionHTML\n    }\n    if (props.config.content.noSelectionHTML && !props.config.content.noSelectionNotLoggedInHTML) {\n      this.config.content.noSelectionNotLoggedInHTML = props.config.content.noSelectionHTML\n    }\n\n    // state\n    this.state = {\n    };\n\n  }\n\n  dispatchOnButtonIdeaClick(e, idea) {\n\t\tvar event = new window.CustomEvent('osc-selection-button-click', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchNewIdeaClick(e, idea) {\n\t\tvar event = new window.CustomEvent('osc-new-idea-click', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchSelectedIdeaClick(e, idea) {\n\t\tvar event = new window.CustomEvent('osc-selected-idea-click', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchClosePreview(e, what) {\n    e.stopPropagation();\n    let event;\n    if (what == 'idea')     event = new window.CustomEvent('osc-set-selected-idea',     { detail: null });\n    if (what == 'location') event = new window.CustomEvent('osc-set-selected-location', { detail: null });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  render() {\n\n    let self = this;\n\n    // mobile popup\n    if ( self.config.display.type == 'mobilePreview') {\n\n      let contentHTML = this.config.api.isUserLoggedIn ? this.config.content.mobilePreviewLoggedInHTML : this.config.content.mobilePreviewNotLoggedInHTML;\n\n      let addButton = null; let loginButton = null; let loginLink = null;\n      if (this.config.api.isUserLoggedIn) {\n        if (this.config.idea.canAddNewIdeas) {\n          addButton = (\n            <button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n          );\n        }\n      } else {\n        if (this.config.idea.canAddNewIdeas) {\n          loginButton = (\n            <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n          );\n          loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n        }\n      }\n      \n      contentHTML = contentHTML.replace(/\\{address\\}/g, this.props.selectedLocation.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      \n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      return (\n\t\t\t\t<div className=\"ocs-mobile-popup\">\n\t\t\t\t\t{contentHTML}\n\t\t\t\t</div>\n\t\t\t);\n      \n    }\n\n    // other\n\n    let selectedLocationHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // knoppen\n    let addButton = null; let loginButton = null; let loginLink = null;\n\n    if (self.config.idea.canAddNewIdeas) {\n      if (self.config.types && self.config.typeField == 'typeId') {\n        addButton = (\n          <span className=\"osc-new-idea-buttons\">\n            {self.config.types.map(\n              (type, i) => {\n                let typeDef = type;\n                if (!typeDef.auth || ( typeDef.auth.createableBy && OpenStadComponentLibs.user.hasRole( self.config.user, typeDef.auth.createableBy ) )) {\n                  let buttonBgHTML = typeDef ? <div className=\"osc-button-background-image\" dangerouslySetInnerHTML={{ __html: typeDef.buttonicon && typeDef.buttonicon.html || '' }}></div> : null;\n                  return (<button className={'osc-button osc-button-white' + ( typeDef && typeDef.auth && typeDef.auth.createableBy ? ` osc-button-required-role-is-${typeDef.auth.createableBy}` : '' )} onClick={(event) => self.dispatchNewIdeaClick(event, {typeId: typeDef.id || typeDef.name})} key={`osc-button-${i}`}>{buttonBgHTML}{ typeDef && typeDef.buttonLabel || 'Nieuw punt toevoegen' }</button>)\n                } else return null;\n              }\n            )}\n          </span>\n        );\n      } else {\n        addButton = (\n          <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)}>Nieuw punt toevoegen</button>\n        );\n      }\n      loginButton = (\n        <button onClick={() => { document.location.href = this.config.loginUrl }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n      );\n      loginLink = `javascript: document.location.href = '${this.config.loginUrl}'`;\n    }\n\n    // new idea\n    if (self.props.selectedLocation) {\n      let contentHTML = null;\n      if (self.props.selectedLocation.isPointInPolygon) {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionActiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionActiveNotLoggedInHTML\n        }\n      } else {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionInactiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionInactiveNotLoggedInHTML\n        }\n      }\n\n      contentHTML = contentHTML.replace(/\\{address\\}/g, self.props.selectedLocation.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      selectedLocationHTML = (\n\t\t\t  <div className=\"osc-infobar-new-idea\">\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchClosePreview(event, 'location')} ref={el => (self.resetButton = el)}/>\n          {contentHTML}\n        </div>\n      );\n\n\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.props.selectedIdea) {\n      let idea = self.props.selectedIdea;\n      let ideaTypeValue;\n      try {\n        ideaTypeValue = eval(`idea.${self.config.typeField}`);\n      } catch (err) {\n        ideaTypeValue = '';\n      }\n      let typeDef = self.config.types.find(entry => entry.name == ideaTypeValue || entry.id == ideaTypeValue);\n      if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      let voteCountHTML = null;\n      if (this.config.idea.showVoteButtons) {\n        voteCountHTML = (\n          <div className=\"osc-likes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        argcountHTML = (\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-infobar-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.props.selectedIdea)}>\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchClosePreview(event, 'idea')} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-infobar-selected-idea-idea\">\n            <div className=\"osc-idea-image-container\">\n              <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n            </div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                {voteCountHTML}\n                {argcountHTML}\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    let defaultBlockHTML = null;\n    if (!selectedLocationHTML && !selectedIdeaHTML) {\n      let noSelectionHTML = self.config.content.noSelectionNotLoggedInHTML;\n      if (self.config.api.isUserLoggedIn) noSelectionHTML = self.config.content.noSelectionLoggedInHTML;\n      noSelectionHTML = noSelectionHTML.replace(/\\{loginLink\\}/g, loginLink);\n      noSelectionHTML = OpenStadComponentLibs.reactTemplate({ html: noSelectionHTML, addButton, loginButton })\n      defaultBlockHTML = (\n\t\t\t  <div className={`osc-infobar-default-block${ self.config.content.showNoSelectionOnMobile ? ' osc-visible-on-mobile' : '' }`}>{noSelectionHTML}</div>\n      );\n      mobileTitle = `${self.config.ideaName} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n\n    }\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div className=\"osc-selection-block\">\n        {defaultBlockHTML}\n        {selectedLocationHTML}\n        {selectedIdeaHTML}\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n\n\t\t\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult.bind(this));\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n\t\t// console.log('update', searchValue, searchResult);\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t\tAdressen:\n          { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t\t<div className=\"osc-search-suggestions-hr\"/>\n\t\t\t\t\t{ this.config.title }:\n          { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder=\"Zoek op trefwoord\" onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\nimport 'custom-event-polyfill';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\n\n// render elements\nOpenStadComponentIdeasOnMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOnMap as default,\n  OpenStadComponentIdeasOnMap as IdeasOnMap,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentImage from '../../idea-image/index.jsx';\n\n// TODO: gridder display type\n// TODO: show ranking\n// TODO: status labels\n// TODO: vote progress bar\n// TODO: ellipsis op theme and area moet op beide apart\n\n'use strict';\n\nexport default class IdeasOverview extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n\n      idea:{\n        showVoteButtons: true, // TODO: dit is een stomme config parameter\n        titleField: 'title',\n        summaryField: 'summary',\n      },\n\n      argument: {\n        isActive: true,\n        ignoreReactionsForIdeaIds: '',\n      },\n\n      vote: {\n        isViewable: true,\n        voteValues: [ { value: \"yes\" }, { value: \"no\" } ],\n      },\n      \n      types: [],\n      typeField: 'typeId',\n\n\t\t};\n    // type specific default config\n    switch (props.config.display && props.config.display.type) {\n      case 'list':\n        defaultConfig.display = {\n          columns: 1,\n          showStatusLabel: false,\n          showTheme: false,\n          showArea: false,\n          showVoteProgressbar: false,\n          showStats: true,\n          showTypeIcon: true,\n        };\n        break;\n      case 'grid':\n        defaultConfig.display = {\n          columns: 3,\n          showStatusLabel: false,\n          showTheme: true,\n          showArea: true,\n          showVoteProgressbar: false,\n          showStats: false,\n          showTypeIcon: false,\n        };\n        break;\n      default:\n        defaultConfig.display = {\n          type: 'tiles',\n          columns: 4,\n          showStatusLabel: true,\n          showTheme: false,\n          showArea: false,\n          showVoteProgressbar: true,\n          showStats: true,\n          showTypeIcon: false,\n        };\n    }\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      idea: this.props.idea || {},\n    };\n        \n  }\n\n  dispatchIdeaTileClick(event, idea) {\n    event.stopPropagation();\n\t\tlet newEvent = new window.CustomEvent('osc-idea-tile-click', { detail: { idea } } );\n\t\tdocument.dispatchEvent(newEvent);\n  }\n\n  dispatchIdeaTileMouseOver(event, idea) {\n    event.stopPropagation();\n\t\tlet newEvent = new window.CustomEvent('osc-idea-tile-mouse-over', { detail: { idea } } );\n\t\tdocument.dispatchEvent(newEvent);\n  }\n\n  dispatchIdeaTileMouseOut(event, idea) {\n    event.stopPropagation();\n\t\tlet newEvent = new window.CustomEvent('osc-idea-tile-mouse-out', { detail: { idea } } );\n\t\tdocument.dispatchEvent(newEvent);\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    // status label\n    let statusLabelHTML = null;\n    if (self.config.display.showStatusLabel) {\n    }\n\n    // theme and area\n    let themeAndAreaHTML = null;\n    if (self.config.display.showTheme || self.config.display.showArea) {\n      let areaHTML = null;\n      if (self.config.display.showArea && idea.extraData.area) {\n        areaHTML = <div className=\"osc-area\">{idea.extraData.area}</div>\n      }\n      themeAndAreaHTML = (\n        <div className=\"osc-theme-and-area\">\n          { self.config.display.showTheme && idea.extraData.theme && (<div className=\"osc-theme\">{idea.extraData.theme}</div>) }\n          { self.config.display.showTheme && idea.extraData.theme && self.config.display.showArea && idea.extraData.area && (<div className=\"osc-divider\"></div>) }\n          { self.config.display.showArea && idea.extraData.area && (<div className=\"osc-area\">{idea.extraData.area}</div>) }\n        </div>);\n    }\n\n    // stats: no of votes and reactions\n    let statsHTML = null;\n    if (self.config.display.showStats) {\n      let stats = [];\n      if ( this.config.idea.showVoteButtons && this.config.vote.isViewable == true && this.config.vote.voteValues.find(val => val.value === 'yes' ) ) {\n        stats.push(\n          <div className=\"osc-yes-votes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      if ( this.config.idea.showVoteButtons && this.config.vote.isViewable == true && this.config.vote.voteValues.find(val => val.value === 'no' ) ) {\n        stats.push(\n          <div className=\"osc-no-votes\">\n            {idea.no || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.argument.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        stats.push(\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      statsHTML = (\n        <div className=\"osc-idea-stats-container\">\n          { stats.map((statHTML, i) => {\n            return <div className=\"osc-stat\" key={`osc-stat-${idea.id}-${i}`}>{statHTML}</div>\n          })}\n        </div>\n      )\n    }\n\n    let voteProgressHTML = null;\n    if (self.config.display.showVoteProgressbar) {\n      voteProgressHTML = (\n        <div>GENOEGSTEMMNBALK</div>\n      );\n    }\n\n    // type icon\n    let typeIconHTML = null;\n    if (self.config.display.showTypeIcon) {\n      let ideaTypeValue;\n\t\t  try {\n\t\t\t  ideaTypeValue = eval(`idea.${self.config.typeField}`);\n\t\t  } catch (err) {\n\t\t\t  ideaTypeValue = '';\n\t\t  }\n\t\t  let typeDef = self.config.types.find(entry => ideaTypeValue && ( entry.id == ideaTypeValue || entry.name == ideaTypeValue ));\n\t\t  if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      try {\n        if ( typeof typeDef.listicon == 'string' ) typeDef.listicon = JSON.parse(typeDef.listicon);\n      } catch(err) {}\n      if (typeDef.listicon.html) {\n        typeIconHTML = (\n          <div className=\"osc-typeicon\">\n            <div className=\"osc-typeicon-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n          </div>);\n      }\n    }\n\n    // now render\n    return (\n\t\t\t<div id={self.divId} className={`osc-idea-tile osc-displaytype-${self.config.display.type} ${self.props.className || ''}`} onClick={event => self.dispatchIdeaTileClick(event, idea)} onMouseOver={event => self.dispatchIdeaTileMouseOver(event, idea)} onMouseOut={event => self.dispatchIdeaTileMouseOut(event, idea)}>\n        <div className=\"osc-idea-image-container\">\n          <OpenStadComponentImage config={{}} idea={idea} key={'image-' + idea.id}/>\n        </div>\n        <div className=\"osc-idea-tile-content\">\n          {statusLabelHTML}\n          <h4 className=\"osc-title\">{ eval(`idea.${self.config.idea.titleField}`) }</h4>\n          {themeAndAreaHTML}\n          <div className=\"osc-summary\">\n            { eval(`idea.${self.config.idea.summaryField}`) }\n          </div>\n          {voteProgressHTML}\n          {statsHTML}\n          {/*\n             <div className=\"osc-type\">\n             <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n             </div>*/}\n        </div>\n        {typeIconHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class IdeasFilter extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.doFilter = this.doFilter.bind(this);\n    this.setFilter = this.setFilter.bind(this);\n\n    this.state = {\n      currentValue: this.config.defaultValue,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    if (this.state.currentValue) this.setFilter({ value: this.state.currentValue })\n  }\n\n  doFilter(ideas, value) {\n\n    let self = this;\n    value = value || this.state.currentValue;\n    // console.log('doFilter', value);\n\n    ideas = ideas.filter(idea => {\n      let fieldName = self.config.fieldName;\n      let fieldValue = eval(`idea.${fieldName}`);\n      return fieldValue == value;\n    })\n\n    return ideas;\n    \n  }\n\n  setFilter({ value }) {\n\n    let self = this;\n\n    this.setState({\n      currentValue: value,\n    }, function() {\n      let event = new window.CustomEvent('osc-ideas-filter-onchange', { detail: { fieldName: self.config.fieldName, value, doFilter: self.doFilter } });\n\t\t  document.dispatchEvent(event);\n    });\n\n  }\n\n\trender() {\n\n    let self = this;\n\n    if (self.config.showFilter == false) {\n      return null;\n    }\n\n    let labelHTML = null;\n    if ( self.config.label ) labelHTML = (<div className=\"osc-filter-label\">{self.config.label}:</div>)\n\n    return (\n      <div className={`osc-ideas-filter ${self.props.className || ''}`}>\n        {labelHTML}\n        <select value={self.state.currentValue} onChange={() => self.setFilter({ value: self.filterSelector.value })} className=\"osc-default-select\" ref={el => (self.filterSelector = el)}>\n          { self.config.filterOptions.map((option, i) => {\n            let selected = null;\n            return <option value={ option.value } key={'filter-option-' + i}>{ option.label }</option>;\n          })}\n        </select>\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport IdeasFilter from './ideas-filter.jsx';\nimport IdeasSearch from './ideas-search.jsx';\n\n'use strict';\n\nexport default class IdeasFilterbar extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      display: {},\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.doNextPendingResetAction = this.doNextPendingResetAction.bind(this);\n\n    this.state = {\n      pendingResetActions: [],\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    self.ideasSearchOnchangeListener = function(event) {\n      self.doNextPendingResetAction();\n    }\n\t  document.addEventListener('osc-ideas-search-onchange', self.ideasSearchOnchangeListener);\n\n    self.ideasFilterOnchangeListener = function(event) {\n      self.hideMobileActiveSelector();\n      self.doNextPendingResetAction();\n    }      \n\t  document.addEventListener('osc-ideas-filter-onchange', self.ideasFilterOnchangeListener);\n\n\t}\n\n  componentWillUnmount() {\n    document.removeEventListener('osc-ideas-search-onchange', this.ideasSearchOnchangeListener)\n    document.removeEventListener('osc-ideas-filter-onchange', this.ideasFilterOnchangeListener)\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n  resetAll() {\n    let self = this;\n    self.search && self.state.pendingResetActions.push(self.search.setSearch);\n    self.filters && self.filters.forEach((filter) => {\n      self.state.pendingResetActions.push(filter.setFilter);\n    });\n    self.doNextPendingResetAction();\n  }\n\n  doNextPendingResetAction() {\n    let resetAction = this.state.pendingResetActions.shift();\n    resetAction && resetAction({ value: '' })\n  }\n\n\trender() {\n\n    let self = this;\n\n    let showFilterbar = typeof self.props.showFilterbar != 'undefined' ? self.props.showFilterbar : self.config.display.showFilterbar;\n    if (!showFilterbar) {\n      return null;\n    }\n\n    let searchHTML = null;\n    if (self.config.search) {\n      searchHTML = (\n        <div className={`osc-ideas-search-container`}>\n          <div className=\"osc-ideas-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n          <IdeasSearch config={ self.config.search } className={`${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`} ref={el => self.search = el}/>\n        </div>\n      );\n    }\n\n    // TODO: configurable?\n    let resetButtonHTML = null;\n    resetButtonHTML = (\n      <button value=\"reset\" onClick={() => self.resetAll()} className=\"osc-button osc-reset-button\">Alles tonen</button>\n    );\n\n    let filterHTML = null;\n    if (self.config.filter.length) {\n      let isActive = self.filters && self.filters.find( filter => filter.state.currentValue );\n      self.filters = [];\n      filterHTML = (\n        <div className=\"osc-ideas-filters-and-button-container\">\n          <div className={`osc-ideas-filter-button${ isActive ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('filters')}></div>\n          <div className={`osc-ideas-filters-container${self.state.mobileActiveSelector == 'filters' ? ' osc-is-active' : ''}`}>\n            { self.config.filter.map(( filterConfig, i ) => {\n              return (\n                <IdeasFilter config={filterConfig} className=\"osc-align-right-container\" key={`osc-ideas-filter-${i}`} ref={el => self.filters[i] = el}/>\n              );\n            })}\n          </div>\n        {resetButtonHTML}\n        </div>\n      );\n    }\n\n    let filtersAndButtonsHTML = null;\n    filtersAndButtonsHTML = (\n      <div className=\"osc-ideas-filters-and-reset-button-container\">\n        {filterHTML}\n      </div>\n    )\n\n    return (\n      <div className={`osc-ideas-filterbar ${self.props.className || ''}`}>\n        {searchHTML}\n        {filtersAndButtonsHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport IdeaTile from './idea-tile.jsx';\n\n// TODO:\n// display-type\n// Status labels\n// genoeg stemmen balk\n// thema icon\n// theme & area\n\n'use strict';\n\nexport default class IdeasList extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      display: {\n        title: 'Inzendingen',\n        // type: 'grid',\n        type: 'tiles',\n        // type: 'list',\n        columns: 3,\n        onMouseOverTileFadeOthers: false,\n      },\n      idea:{\n        titleField: 'title',\n        summaryField: 'summary',\n      },\n      sort: {\n        sortOptions: [{ value: 'createdtime,desc', label: 'Nieuwste eerst' },{ value: 'createdtime,asc', label: 'Oudste eerst' }],\n        showSort: true,\n        defaultValue: 'createdtime,desc',\n      },\n      types: [],\n\t\t};\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      highLightIdeaId: null,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    self.ideaTileMouseOverListener = function(event) {\n      self.onTileMouseOver(event.detail);\n    };\n    document.addEventListener('osc-idea-tile-mouse-over', self.ideaTileMouseOverListener)\n\n    self.ideaTileMouseOutListener = function(event) {\n      self.onTileMouseOut(event.detail);\n    };\n    document.addEventListener('osc-idea-tile-mouse-out', self.ideaTileMouseOutListener)\n\n\t}\n\n  componentWillUnmount() {\n    document.removeEventListener('osc-idea-tile-mouse-over', this.ideaTileMouseOverListener)\n    document.removeEventListener('osc-idea-tile-mouse-out', this.ideaTileMouseOutListener)\n  }\n\n  onTileMouseOver({ idea }) {\n    this.setState({ highLightIdeaId: idea.id })\n  }\n\n  onTileMouseOut({ idea }) {\n    this.setState({ highLightIdeaId: null })\n  }\n  \n\trender() {\n\n    let self = this;\n    let ideas = self.props.ideas || [];\n    \n    return (\n      <div className={`osc-tile-list-container ${self.props.className || ''}`}>\n        <div className=\"osc-tile-list\">\n          { ideas.map((idea, i) => {\n            return (\n              <IdeaTile config={self.config} idea={idea} className={`osc-${self.config.display.columns}-columns${this.config.display.onMouseOverTileFadeOthers && self.state.highLightIdeaId && self.state.highLightIdeaId != idea.id ? ' osc-opacity-65' : ''}`} key={`osc-idea-tile-${idea.id}`}/>\n            );\n          })}\n        </div>\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport IdeasList from './ideas-list.jsx';\nimport IdeasFilterbar from './ideas-filterbar.jsx';\nimport IdeaTile from './idea-tile.jsx';\nimport IdeasSort from './ideas-sort.jsx';\n\n// TODO:\n// fixed set of ids\n// filter\n// search is nu as you type, dat zou ook met suggestions moeten kunnen en dan configurabel zijn\n// gebruik default een configurabele link-to-plan-url denk ik\n// sort positioneren\n// hidesortbutton kan er uit; die hoort in de parent (ideas-on-map)\n\n'use strict';\n\nexport default class IdeasOverview extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      title: 'Inzendingen',\n      display: {\n        showFilterbar: true,\n      },\n      idea:{\n        titleField: 'title',\n        summaryField: 'summary',\n      },\n      sort: {\n        showSort: true,\n        defaultValue: 'createdtime,desc',\n      },\n      filter: [],\n      types: [],\n      typeLabel: 'Thema',\n\t\t};\n\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      ideas: this.props.ideas || [],\n      filters: {},\n      search: null,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let self = this;\n    \n    self.ideasFilterOnchangeListener = function(event) {\n      self.updateFilter(event.detail);\n    };\n    document.addEventListener('osc-ideas-filter-onchange', self.ideasFilterOnchangeListener)\n\n    self.ideasSearchOnchangeListener = function(event) {\n      self.updateSearch(event.detail);\n    };\n    document.addEventListener('osc-ideas-search-onchange', self.ideasSearchOnchangeListener)\n\n    self.ideasSortOnchangeListener = function(event) {\n      self.updateSort(event.detail);\n    };\n    document.addEventListener('osc-ideas-sort-onchange', self.ideasSortOnchangeListener)\n\n    if (typeof self.props.ideas == 'undefined') {\n      self.fetchData();\n    }\n\n\t}\n\n  componentWillUnmount() {\n    document.removeEventListener('osc-ideas-filter-onchange', this.ideasFilterOnchangeListener)\n    document.removeEventListener('osc-ideas-search-onchange', this.ideasSearchOnchangeListener)\n    document.removeEventListener('osc-ideas-sort-onchange', this.ideasSortOnchangeListener)\n  }\n  \n  fetchData() {\n\n    let self = this;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?summary=1&includeVoteCount=1&includeArgsCount=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let ideas = json;\n        ideas = self.sorter.doSort({ ideas });\n        self.setState({ ideas }, function() {\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  updateFilter(filter) {\n    // console.log('update filter', filter);\n    let filters = { ...this.state.filters };\n    if (filter.value) {\n      filters[filter.fieldName] = { value: filter.value, doFilter: filter.doFilter };\n    } else {\n      delete filters[filter.fieldName];\n    }\n    this.setState({ filters });\n  }\n\n  updateSearch(search) {\n    // console.log('update search', search);\n    if (search.value) {\n      search = { value: search.value, doSearch: search.doSearch };\n    } else {\n      search = null;\n    }\n    this.setState({ search });\n  }\n\n  updateSort(ideas) {\n    this.setState({ ideas });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let ideas = typeof self.props.ideas != 'undefined' ? self.props.ideas : self.state.ideas || [];\n\n    let filteredIdeas = ideas;\n    Object.keys(self.state.filters).forEach((key) => {\n      let filter = self.state.filters[key];\n      filteredIdeas = filter.doFilter(filteredIdeas);\n    });\n    if (self.state.search) {\n      filteredIdeas = self.state.search.doSearch(filteredIdeas);\n    }\n    if (this.props.maxLength) {\n      filteredIdeas = ideas.slice(0, this.props.maxLength);\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.config.title} ({filteredIdeas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={`osc-ideas-overview ${self.props.className || ''}`}>\n\n        <IdeasFilterbar config={self.config} showFilterbar={self.props.showFilterbar} className=\"osc-ideas-filterbar\"/>\n        <IdeasSort config={{ ...self.config.sort }} ideas={ideas} showSort={!self.props.hideSortButton} className=\"osc-align-right-container\" ref={el => self.sorter = el}/>\n        \n        {titleHML}\n\n        <IdeasList config={self.config} ideas={filteredIdeas} className=\"\"/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n\n\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\n// todo:\n// button\n// hij doet nu search as you type, ik denk dat je dat niet altijd wilt dus configurabel\n// showSearch\n// showButton\n// showSuggestions\n\n\n\nexport default class IdeasSearch extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      placeholder: 'Zoeken',\n      fieldNames: ['title', 'summary'],\n      showSearch: true,\n      showButton: false,\n      showSuggestions: false,\n      defaultValue: '',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.doSearch = this.doSearch.bind(this);\n    this.setSearch = this.setSearch.bind(this);\n\n    this.state = {\n      currentValue: this.config.defaultValue,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    if (this.state.currentValue) this.setFilter({ value: this.state.currentValue })\n  }\n\n  doSearch(ideas, value) {\n\n    let self = this;\n    value = value || this.state.currentValue;\n\n    console.log('==', value);\n\n    ideas = ideas.filter(idea => {\n      let found = false;\n      self.config.fieldNames.forEach((fieldName) => {\n        let fieldValue = eval(`idea.${fieldName}`);\n        if ( fieldValue.match( new RegExp(value, 'i') ) ) found = true;\n      });\n      return found;\n    })\n\n    return ideas;\n    \n  }\n\n  setSearch({ value }) {\n\n    let self = this;\n\n    this.setState({\n      currentValue: value,\n    }, function() {\n      let event = new window.CustomEvent('osc-ideas-search-onchange', { detail: { value, doSearch: self.doSearch } });\n\t\t  document.dispatchEvent(event);\n    });\n\n  }\n\n  showSuggestions(){\n  }\n\n  hideSuggestions(){\n  }\n  \n\trender() {\n\n    let self = this;\n\n    if (self.config.showSearch == false) {\n      return null;\n    }\n\n    let labelHTML = null;\n    if ( self.config.label ) labelHTML = (<div className=\"osc-search-label\">{self.config.label}:</div>)\n\n    // TODO\n    let suggestionsHTML = null;\n\n    return (\n      <div className={`osc-ideas-search ${self.props.className || ''}`}>\n        {labelHTML}\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.currentValue} placeholder={self.config.placeholder} onChange={() => self.setSearch({ value: self.searchInput.value }) } onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-ideas-search-input\" ref={el => self.searchInput = el}/>\n        <button className={`osc-ideas-search-button${ this.state.currentValue ? ' osc-active' : '' }`} onClick={(event) => self.setSearch({ value: '' })} ref={el => (self.resetButton = el)}/>\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class IdeasSort extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      label: null,\n      sortOptions: [{ value: 'createdtime,desc', label: 'Nieuwste eerst' }, { value: 'createdtime,asc', label: 'Oudste eerst' }, { value: 'title', label: 'Titel' }, { value: 'random', label: 'Willekeurig' }, { value: 'likes,desc', label: 'Meeste likes' }, { value: 'likes,asc', label: 'Minste likes' }, { value: 'args,desc', label: 'Meeste reacties' }, { value: 'args,asc', label: 'Minste reacties' }, { value: 'ranking,asc', label: 'Ranglijst' }],\n      defaultValue: 'createdtime,desc',\n      showSort: true,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      currentValue: this.config.defaultValue,\n    };\n        \n  }\n\n  doSort({ ideas, sortOrder, center }) {\n\n    sortOrder = sortOrder || this.state.currentValue;\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'title':\n\t\t\t\tideas = ideas.sort( function(a,b) { if (a.title.toLowerCase() < b.title.toLowerCase()) { return -1; } if (b.title.toLowerCase() < a.title.toLowerCase()) { return 1; } return 0; });\n\t\t\t\tbreak;\n\t\t\tcase 'ranking,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - b.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.yes - b.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'likes,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.yes - a.yes });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'createdtime,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n        center = center || this.config.center;\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'args,desc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return b.argCount - a.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'args,asc':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.argCount - b.argCount })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    return ideas;\n    \n  }\n\n  setSortOrder({ sortOrder }) {\n\n    let self = this;\n    let ideas = self.props.ideas || [];\n\n    ideas = self.doSort({ ideas, sortOrder });\n\n    this.setState({\n      ideas,\n      currentValue: sortOrder,\n    }, function() {\n      let event = new window.CustomEvent('osc-ideas-sort-onchange', { detail: ideas });\n\t\t  document.dispatchEvent(event);\n    });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let ideas = self.props.ideas || [];\n\n    let showSort = typeof self.props.showSort != 'undefined' ? self.props.showSort : self.config.showSort;\n    if (!showSort) {\n      return null;\n    }\n\n    let labelHTML = null;\n    if ( self.config.label ) labelHTML = (<div className=\"osc-sort-label\">{self.config.label}:</div>)\n\n    return (\n      <div className={`osc-ideas-sort ${self.props.className || ''}`}>\n        {labelHTML}\n        <select defaultValue={self.state.currentValue} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n          { self.config.sortOptions.map((option, i) => {\n            let selected = null;\n            return <option value={ option.value } key={'sort-option-' + i}>{ option.label }</option>;\n          })}\n        </select>\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasList from './component/ideas-list.jsx';\nimport OpenStadComponentIdeasOverview from './component/ideas-overview.jsx';\nimport OpenStadComponentIdeasFilterbar from './component/ideas-filterbar.jsx';\nimport OpenStadComponentIdeasFilter from './component/ideas-filter.jsx';\nimport OpenStadComponentIdeasSearch from './component/ideas-search.jsx';\nimport OpenStadComponentIdeasSort from './component/ideas-sort.jsx';\n\n// render elements\nOpenStadComponentIdeasOverview.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOverview attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOverview as default,\n  OpenStadComponentIdeasList as IdeasList,\n  OpenStadComponentIdeasOverview as IdeasOverview,\n  OpenStadComponentIdeasFilterbar as IdeasFilterbar,\n  OpenStadComponentIdeasFilter as IdeasFilter,\n  OpenStadComponentIdeasSort as IdeasSort,\n  OpenStadComponentIdeasSearch as IdeasSearch,\n};\n\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\nimport reactTemplate from './lib/react-template.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n  reactTemplate,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","import merge from 'merge';\n\n// TODO: dit werkt alleen als het er 1 is\n\nexport default function({ html='' }) {\n\n  let args = arguments[0];\n  delete args.html;\n\n  let matches = 0;\n\n  Object.keys(args).forEach((key) => {\n\n    let regEx = new RegExp(`^((?:.|\\n|\\r)*)\\\\{${key}\\\\}((?:.|\\n|\\r)*)$`, 'g');\n    let match = regEx.exec(html);\n\n    if (match) {\n      matches++;\n      html = (\n        <span>\n        <span dangerouslySetInnerHTML={{ __html: match[1] }}></span>\n        {args[key]}\n        <span dangerouslySetInnerHTML={{ __html: match[2] }}></span>\n        </span>\n      );\n    }\n\n  });\n\n  if (matches == 0) html = <span dangerouslySetInnerHTML={{ __html: html }}></span>\n  return html;\n  \n}\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nlet roles = {\n  admin: ['admin', 'moderator', 'editor', 'member', 'anonymous', 'all'],\n  moderator: ['moderator', 'editor', 'member', 'anonymous', 'all'],\n  editor: ['editor', 'member', 'anonymous', 'all'],\n  member: ['member', 'anonymous', 'all'],\n  anonymous: ['anonymous', 'all'],\n  all: ['all'],   // special\n  owner: null, // special\n}\n\nexport default function(user, requiredRole) {\n  let userRole = user.role;\n  if (!Object.keys(roles).includes(userRole)) userRole = 'all';\n  return roles[userRole].includes(requiredRole);\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\nimport hasRole from './has-role.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n  hasRole,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from '../../component/index.jsx';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tself.mapIsReady = true;\n\t\t\tvar event = new CustomEvent('osc-map-is-ready', { detail: { id: self.divId } });\n\t\t\tdocument.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap({ ...self.config });\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n    if (self.config.zoomControl == false) {\n      self.map.removeControl(self.map.zoomControl);\n    }\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || amapsCreateClusterIcon.bind(self) // ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t\tself.markerClusterGroup.on('clusterclick', self.onClusterClick);\n\t\t\tself.markerClusterGroup.on('animationend', self.onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tself.map.on('click', self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\n    if (!Array.isArray(points)) {\n      self.map.panTo(new L.LatLng(self.config.center.latitude, self.config.center.longitude));\n      return;\n    }\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n    if (!point) return false;\n    if (!polygon) return true;\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var x = point.lat, y = point.lng;\n\n    var inside = false;\n    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        var xi = polygon[i].lat, yi = polygon[i].lng;\n        var xj = polygon[j].lat, yj = polygon[j].lng;\n\n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonMarkerClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-marker-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterAnimationEnd(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-animation-end', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentNLMap from './component/map.jsx';\n\n// render elements\nOpenStadComponentNLMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentNLMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentNLMap as default,\n  OpenStadComponentNLMap as NLMap,\n};\n\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n  \n  // todo: configurable\n  let markers = cluster.getAllChildMarkers();\n\n  let colors = {}\n  let total = markers.length;\n  let isFaded = false;\n  markers.forEach((entry) => {\n    let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n    let tmp = self.config.types.find(entry => type && ( entry.id == type || entry.name == type ));\n    let color = tmp && ( tmp.color || tmp.backgroundColor ) || '#164995';\n    if ( type == undefined ) type = 'undef'\n    if ( !colors[color] ) colors[color] = 0;\n    colors[color]++;\n    if (entry.data && entry.data.isFaded) isFaded = true;\n  });\n\n  let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n  let soFar = 0;\n  Object.keys(colors).forEach((key) => {\n    let myColor = key;\n    let perc = 100 * colors[key] / total;\n    let angle = (soFar / 100) * 360;\n    \n    html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n    soFar = soFar + perc;\n  });\n\n  html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n  return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPollForm extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      user: {},\n      questionMinLength: 30,\n      questionMaxLength: 500,\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      allowChoiceTitles: true,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      pollId: props.pollId,\n      poll: props.poll,\n      isBusy: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if ( !self.state.poll ) self.fetchData();\n        });\n      });\n    } else {\n      if ( !self.state.poll ) self.fetchData();\n    }\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n    if (!self.state.pollId) {\n      return self.setState({ poll: {\n        question: '',\n        choices: { \"1\": {}, \"2\": {} },\n      }});\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.config.pollId }?withUser=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.poll = json;\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  validatedResult() {\n\n    let self = this;\n    let poll = self.state.poll;\n\n    let questionInput = self['question-input'];\n    let isValid = questionInput.validate();\n    let result = { question: questionInput.state.value, choices: {} };\n\n    Object.keys(poll.choices).forEach((key) => {\n      let titleInput = self[`title-input-${key}`];\n      let descriptionInput = self[`description-input-${key}`];\n      if (!( titleInput && titleInput.state.value ) && !descriptionInput.state.value) return;\n      result.choices[key] = {};\n      if (self.config.allowChoiceTitles && titleInput.state.value) {\n        result.choices[key].title = titleInput.state.value;\n        if (!titleInput.validate()) isValid = false;\n      }\n      if (descriptionInput.state.value) {\n        result.choices[key].description = descriptionInput.state.value;\n        if (!descriptionInput.validate()) isValid = false;\n      }\n    });\n\n    if (!isValid) return null;\n    if (Object.keys(result.choices).length < 2) return null;\n    return result;\n\n  }\n\n  handleOnChange(data) {\n\n    let self = this;\n    let poll = { ...self.state.poll };\n\n    if (data.choice) {\n      poll.choices[ data.choice.id ] = {\n        title: self.config.allowChoiceTitles && data.choice.title,\n        description: data.choice.description,\n      }\n    }\n\n    if (data.question) {\n      poll.question = data.question;\n    }\n\n    this.setState({ poll }, () => {\n    });\n\n  }\n\n  addChoice() {\n    let self = this;\n    let poll = { ...self.state.poll };\n    let keys = Object.keys(poll.choices).sort();\n    let key = parseInt( keys[keys.length-1] ) + 1;\n    poll.choices[ key ] = {};\n    self.setState({ poll })\n  }\n\n  canSubmit() {\n    if (this.state.poll && this.state.poll.can) {\n      return this.state.poll.can.edit;\n    } else {\n      let requiredUserRole = this.config.requiredUserRole;\n      let userRole = this.props.user && this.props.user.role;\n      // todo: owner; dus dit moet anders\n      // todo: nieuwe rollen structuur\n      return  requiredUserRole == 'anonymous' && userRole  ||\n        requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n        requiredUserRole == 'admin' && userRole == 'admin';\n    }\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let validatedResult = self.validatedResult();\n      if (!validatedResult) {\n        self.setState({ isBusy: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let isNew = true;\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll`;\n      let method = 'POST';\n      if (self.state.poll && self.state.poll.id) {\n        url += `/${ self.state.poll.id }`;\n        method = 'PUT';\n        isNew = false;\n      }\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      let body = validatedResult;\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-new-poll-stored', { detail: json });\n          if (!isNew) event = new CustomEvent('osc-poll-edited', { detail: json });\n\n\t\t      document.dispatchEvent(event);\n          if (typeof self.config.onFinished == 'function') {\n            self.config.onFinished(validatedResult);\n          }\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n    \n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue osc-margin-left${ self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button osc-margin-left\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)} >\n        {formIntro}\n\n        <h4>Vraag</h4>\n        <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.questionMinLength, maxLength: self.config.questionMaxLength, placeholder: 'Vraag' }} value={poll.question} onChange={ data => self.handleOnChange({ question: data.value }) } ref={el => (self[`question-input`] = el)}/>\n\n        <h4>Keuzemogelijkheden</h4>\n        <ol className=\"osc-poll-form-choices\">\n          {poll && poll.choices && Object.keys(poll.choices).sort().map((key) => {\n            let choice = poll.choices[key];\n            let titleInputHTML = null;\n            if (self.config.allowChoiceTitles) titleInputHTML = <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.titleMinLength, maxLength: self.config.titleMaxLength, placeholder: 'Titel' }} value={choice.title} onChange={ data => self.handleOnChange({ choice: { id: key, title: data.value } }) } ref={el => (self[`title-input-${key}`] = el)}/>;\n            return (\n              <li className=\"osc-poll-form-choice\" key={`osc-key-${key}`}>\n                {titleInputHTML}\n                <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.descriptionMinLength, maxLength: self.config.descriptionMaxLength, placeholder: 'Beschrijving' }} value={choice.description} onChange={ data => self.handleOnChange({ choice: { id: key, description: data.value } }) } ref={el => (self[`description-input-${key}`] = el)}/>\n              </li>\n            );\n          })}\n        </ol>\n\n        <a className=\"osc-add-choice-button\" onClick={ e => this.addChoice() }>Nog een keuzemogelijkheid toevoegen</a>\n        \n        {submitButtonHTML}\n\n      </div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\nimport OpenStadComponentPollForm from './poll-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPoll extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-poll-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null, // hoort niet hier\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      withPercentage: true,\n      allowChoiceTitles: true,\n      allowShowResultsIfNotVoted: false,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    self.hideEditForm = self.hideEditForm.bind(self);\n\n    self.state = {\n      user: self.config.user,\n      poll: props.poll,\n      pollId: ( props.poll && props.poll.id ) || self.config.pollId,\n      selectedChoice: null,\n      showResult: false,\n      showQuestion: false,\n      editMode: false,\n      showVoteSucceeded: false,\n    };\n\n    if (self.state.poll) {\n      self.parseVoteCount(self.state.poll);\n      if (self.state.poll.userVote) {\n        self.state.selectedChoice = self.state.poll.userVote;\n      }\n    }\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if (!self.state.poll && self.config.ideaId) self.fetchData();\n        });\n      });\n    } else {\n      if (!self.state.poll && self.config.ideaId) self.fetchData();\n    }\n\n    // document.addEventListener('osc-new-reaction-stored', function(event) {\n    //   self.onNewPolltored(event.detail);\n    // });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    if (!self.state.pollId) {\n      // no data: show new poll form\n      return self.setState({ editMode: true }, () =>{\n      })\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.state.pollId }?withUser=1&withUserVote=1&withVoteCount=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state, showResult: false, showQuestion: false, };\n        state.poll = json;\n        state.pollId = json.id;\n\n        self.parseVoteCount(state.poll);\n\n        if (state.poll.userVote) {\n          state.selectedChoice = state.poll.userVote;\n        }\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  parseVoteCount(poll) {\n    let self = this;\n    if (poll.voteCount) {\n      Object.keys(poll.choices).sort().forEach((key) => {\n        let choice = poll.choices[key];\n        choice.votesAbs = poll.voteCount[key]\n        choice.votesPrc = parseInt(100 * ( poll.voteCount[key] / poll.voteCount.total ));\n        choice.votesPrc = choice.votesPrc || 0;\n      });\n    }\n\n  }\n\n  showEditForm() {\n    this.setState({ editMode: true });\n  }\n\n  hideEditForm() {\n    this.setState({\n      editMode: false,\n    }, function() {\n      this.fetchData()\n    });\n  }\n\n  setShowResult() {\n    this.setState({ showResult: true });\n  }\n\n  setShowQuestion() {\n    this.setState({ showQuestion: true });\n  }\n\n  selectChoice(data) {\n    this.setState({ selectedChoice: data.choice });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  isValid() {\n    return !!this.state.selectedChoice;\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.state.user && this.state.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n            requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n            requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitVote() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      if (!self.isValid()) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = 'POST';\n\n      let body = {\n        choice: self.state.selectedChoice,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          self.fetchData( () => {\n            self.setState({ isBusy: false, showVoteSucceeded: true, }, () => {\n\t\t          let event = new CustomEvent('osc-poll-voted', { detail: json });\n\t\t          document.dispatchEvent(event);\n            });\n          });\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n            \n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  deletePoll() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let poll = self.state.poll;\n      if (!( poll && poll.can && poll.can.delete )) return alert('U kunt deze poll niet verwijderen');\n      if (!( poll && poll.id )) return alert('U kunt deze poll niet verwijderen');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }`;\n      let method = 'DELETE';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      fetch(url, {\n        method,\n        headers,\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-poll-deleted', { detail: json });\n\t\t      document.dispatchEvent(event);\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    if (self.state.editMode) {\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          <OpenStadComponentPollForm config={{ ...self.config, onFinished: self.hideEditForm }} pollId={self.state.poll && self.state.poll.id} poll={self.state.poll} user={self.state.user}/>\n        </div>\n      );\n      \n    } else {\n\n      let questionHTML = null;\n      if (( poll && poll.choices && !poll.userVote ) || self.state.showQuestion) {\n        \n        let config = { name: \"pollChoice\", choices: [] };\n        Object.keys(poll.choices).sort().map(key => {\n          let choiceHTML = self.config.allowChoiceTitles && poll.choices[key].title ? `<h4>${poll.choices[key].title}</h4>` : '';\n          choiceHTML += poll.choices[key].description || '';\n          config.choices.push({\n            dangerousDescription: choiceHTML,\n            value: key\n          });\n        })\n\n        let submitButtonHTML = null;\n        if (self.canSubmit()) {\n          submitButtonHTML = (<button onClick={(e) => { if (!self.state.isBusy) self.submitVote(); }} className={`osc-button-blue${ !self.isValid() ? ' osc-disabled' : '' }`} >Stemmen</button>);\n        } else {\n          submitButtonHTML = (<button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-poll-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>);\n        }\n\n        let showResultButtonHTML = null;\n        if (self.config.allowShowResultsIfNotVoted &&  !(poll.userVote || self.state.showResult)) showResultButtonHTML = (<a className=\"osc-show-result-button\" onClick={ e => this.setShowResult() }>Resultaat bekijken</a>);\n\n        questionHTML = (\n          <div className=\"osc-poll-question osc-form\">\n            <OpenStadComponentForms.Radios config={config} value={self.state.selectedChoice} onChange={ data => self.selectChoice({ choice: data.value }) } ref={el => (self.description = el)}/>\n            <div className=\"osc-poll-question-buttons\">\n              {submitButtonHTML}\n              {showResultButtonHTML}\n            </div>\n          </div>\n        );\n      }\n\n      let resultHTML = null;\n      if ( poll && ( poll.userVote || self.state.showResult ) ) {\n\n        let showQuestionButtonHTML = null;\n        if (!self.state.showQuestion && !(poll && poll.choices && !poll.userVote)) showQuestionButtonHTML = (<a className=\"osc-show-question-button\" onClick={ e => this.setShowQuestion() }>Stem aanpassen</a>);\n\n        let totalVotesHTML = null;\n        if (poll.voteCount && poll.voteCount.total) {\n          let xx = poll.voteCount.total == 1 ? 'stem' : 'stemmen';\n          totalVotesHTML = <div>Totaal {poll.voteCount.total} {xx}<br/><br/></div>\n        }\n\n        resultHTML = (\n          <ul className=\"osc-choices\">\n            {Object.keys(poll.choices).sort().map(key => {\n              let choice = poll.choices[key];\n              let titleHTML = null;\n              if (self.config.allowChoiceTitles && choice.title) titleHTML = (<h4>{choice.title}</h4>);\n              let descriptionHTML = null;\n              if (choice.description) descriptionHTML = (<div>{choice.description}</div>);\n              let percentageHTML = null;\n              if (self.config.withPercentage) {\n                percentageHTML = <div className=\"osc-percentage\">{choice.votesPrc}%</div>\n              }\n              let scoreHTML = (\n                <div className=\"osc-choice-default\">\n                  {titleHTML}\n                  {descriptionHTML}\n                  <div className={`osc-choice-bar${self.config.withPercentage ? ' osc-with-percentage' : ''}`}>\n                    <div className=\"osc-choice-bar-mask\"></div>\n                    <div className=\"osc-choice-bar-progress\" style={{ width: ( choice.votesPrc || 0 ) + '%' }}></div>\n                  </div>\n                  { percentageHTML }\n                </div>\n              );\n              return (\n                <li className=\"osc-choice\" key={`osc-key-${key}`}>\n                  {scoreHTML}\n                </li>\n              );\n            })}\n            {totalVotesHTML}\n            {showQuestionButtonHTML}\n          </ul>\n        );\n      }\n\n      let editButtonsHTML = null;\n      if (self.state.poll && self.state.poll.can && self.state.poll.can.edit) {\n        editButtonsHTML =\n          <div className=\"osc-editbuttons\">\n            <button className=\"osc-editbutton osc-edit\" onClick={event => self.showEditForm()}>Bewerk poll</button>\n            <button className=\"osc-editbutton osc-delete\" onClick={event => { if (confirm('Weet u het zeker')) self.deletePoll() }}>Verwijder poll</button>\n          </div>\n      }\n\n      let voteSucceededHTML = null;\n      if (self.state.showVoteSucceeded) {\n        voteSucceededHTML = <div className=\"osc-vote-succeeded\">Uw stem is opgeslagen</div>\n      }\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          {editButtonsHTML}\n          {voteSucceededHTML}\n          <h4>{poll.question}</h4>\n          {questionHTML}\n          {resultHTML}\n          <br/><br/>\n        </div>\n      );\n\n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentPoll from './component/poll.jsx';\n\n// render elements\nOpenStadComponentPoll.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentPoll attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentPoll as default,\n  OpenStadComponentPoll as Poll,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactionForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    \n    self.state = {\n      description: self.config.description || '',\n      isValid: false,\n      isBusy: false,\n    };\n\n  }\n\n  handleOnChange(data) {\n    data = data || {};\n    if (data.description) data.isValid = this.description.isValid();\n    this.setState(data);\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n             requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n             requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let isValid = self.description.validate({ showWarning: true });\n      if (!isValid) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument${   self.config.argumentId ? `/${  self.config.argumentId}` : ''}`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = self.config.argumentId ? 'PUT' : 'POST';\n\n      let body = {\n        parentId: self.config.parentId,\n        sentiment: self.config.sentiment,\n        description: self.state.description,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n\n          self.setState({ description: '', isBusy: false, isValid: false }, () => {\n\n            self.description.handleOnChange({ value: '' });\n\n            if (self.config.argumentId) {\n\t\t          let event = new CustomEvent('osc-reaction-edited', { detail: json });\n\t\t          document.dispatchEvent(event);\n            } else {\n\t\t          let event = new CustomEvent('osc-new-reaction-stored', { detail: json });\n\t\t          document.dispatchEvent(event);\n            }\n          });\n\n\n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n\n    let config = {\n      descriptionMinLength: self.config.descriptionMinLength || 30,\n      descriptionMaxLength: self.config.descriptionMaxLength || 500,\n    };\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue${ !self.state.isValid || self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <OpenStadComponentForms.InputWithCounter disabled={this.canSubmit() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ data => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        {submitButtonHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reaction-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n    };\n\n    self.config = Object.assign(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      isMenuActive: false,\n      isReplyFromActive: false,\n      editMode: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true });\n  }\n\n  toggleReplyForm() {\n    this.setState({ isReplyFromActive: !this.state.isReplyFromActive });\n  }\n\n  toggleEditForm(what) {\n    this.setState({ editMode: !this.state.editMode });\n  }\n\n  canEdit() {\n    return this.props.data.can.edit;\n  }\n\n  canDelete() {\n    return this.props.data.can.delete;\n  }\n\n  canLike() {\n    if (this.config.isClosed) return false;\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    return (( requiredUserRole == 'anonymous' && userRole ) ||\n            ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n            ( requiredUserRole == 'admin' && userRole == 'admin'));\n  }\n\n  canReply() {\n    return this.props.data.can.reply;\n  }\n\n  submitDelete() {\n\n    let self = this;\n\n    if (!self.canDelete()) return alert('U kunt deze reactie niet verwijderen');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id}`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'DELETE',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        self.setState({ isDeleted: true });\n\n\t\t    let event = new CustomEvent('osc-reaction-deleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  submitLike() {\n\n    let self = this;\n\n    if (!self.canLike()) return alert('U kunt deze reactie niet liken');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id  }/vote`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        // console.log({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n        self.setState({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.setState({ isMenuActive: false, isReplyFromActive: false });\n  }\n\n  onReactionEdited(reaction) {\n    if (reaction.id == this.props.data.id) {\n      this.setState({ editMode: false, isMenuActive: false });\n    }\n  }\n\n  render() {\n\n    let self = this;\n    let data = self.props.data || { can: {} };\n\n    if (data.isDeleted) return null;\n\n    let menuHTML = null;\n    if ( self.canEdit() && self.canDelete() ) {\n      menuHTML = (\n        <div className={ `osc-reaction-menu${   self.state.isMenuActive ? ' osc-reaction-hamburger-active' : ''}` } onClick={ () => { self.showMenu(); }}>\n          <a className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete(); } }/>\n          <a className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.toggleEditForm() }/>\n        </div>\n      );\n    }\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{data.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: data.description, argumentId: data.id }} user={self.state.user} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    let likeButtonHTML = null;\n    if (!data.parentId) {\n      likeButtonHTML = (\n\t\t\t  <a className={ `osc-reaction-like-button${ ( typeof self.state.hasUserVoted != 'undefined' ? self.state.hasUserVoted : data.hasUserVoted ) ? ' osc-reaction-like-button-hasvoted' : ''}` } onClick={ () => self.submitLike() }>\n\t\t\t\t  Mee eens (<span>{( typeof self.state.yes != 'undefined' ? self.state.yes : data.yes ) | 0}</span>)\n        </a>\n      );\n    }\n\n    let replyButtonHTML = null;\n    let replyFormHTML = null;\n    if (self.canReply() && !self.config.isClosed) {\n      replyButtonHTML = (<a onClick={ () => self.toggleReplyForm() } className=\"osc-reply-button\">Reageren</a>);\n      if (self.state.isReplyFromActive) {\n        let config = { ...self.config, parentId: data.id };\n        config.formIntro = '';\n        replyFormHTML = (\n\t\t\t    <div id={`osc-reaction-${data.id}`} className=\"osc-reply\">\n            <OpenStadComponentReactionForm config={config} user={self.state.user} ref={el => (self.editForm = el)}/>\n          </div>\n        );\n      }\n    }\n\n    let repliesHTML = null;\n    if (data.reactions && data.reactions.length) {\n      repliesHTML = (\n        <ul className=\"osc-reactions-list\">\n          {data.reactions.map((reaction) => {\n\n            let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n            return (\n              <li key={key}>\n                <OpenStadComponentReaction config={self.config} className=\"osc-reply\" user={self.state.user} data={reaction}/>\n              </li>\n            );\n\n          })}\n        </ul>\n      );\n    }\n\n    return (\n      <div>\n\n\t\t\t  <div id={`osc-reaction-${data.id}`} className={ self.props.className || 'osc-reaction' }>\n\n          {menuHTML}\n\n          <div className=\"osc-reaction-user\">{data.user.nickName || data.user.fullName || `${data.user.firstName } ${  data.user.lastName}`}</div>\n\t\t\t\t  <div className=\"osc-reaction-date\">{data.createDateHumanized}</div>\n          {descriptionHTML}\n\n          {likeButtonHTML}\n\t\t\t    {replyButtonHTML}\n\n\t\t    </div>\n\n\t\t\t  {replyFormHTML}\n        {repliesHTML}\n\n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\nimport OpenStadComponentReaction from './reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reactions-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      scrollToNewReaction: true,\n      isClosed: false,\n      closedText: 'De reactiemogelijkheid is gesloten',\n      sentiment: undefined,\n      siteId: null,\n      ideaId: null,\n      title: null,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n\n    self.state = {\n      user: self.config.user,\n      reactions: [],\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          self.fetchData();\n        });\n      });\n    } else {\n      self.fetchData();\n    }\n\n    this.storedListener = document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    this.editedListener = document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n    this.deletedListener = document.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\n  }\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-new-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-edited', this.editedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.deletedListener);\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument?sentiment=${  self.config.sentiment  }&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.reactions = json;\n        state.reactions.sort((a, b) => {\n          return a.createdAt < b.createdAt;\n        });\n        // console.log(state.reactions);\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.fetchData(() => {\n      if (this.config.scrollToNewReaction) {\n        let element = document.getElementById(`osc-reaction-${  reaction.id}`);\n        if ( element ) document.getElementById(`osc-reaction-${  reaction.id}`).scrollIntoView();\n      }\n    });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  onReactionDeleted(reaction) {\n    this.fetchData();\n  }\n\n  render() {\n\n    let self = this;\n\n    let reactions =\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n          let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} user={self.state.user} data={{ ...reaction }}/>\n            </li>\n          );\n\n        })}\n      </ul>;\n\n    let title = self.config.title ? <h3>{self.config.title}</h3> : null;\n\n    let reactionFormHTML = <OpenStadComponentReactionForm config={self.config} user={self.state.user}/>;\n    if (self.config.isClosed) {\n      if (self.config.closedText) {\n        reactionFormHTML = <div className=\"osc-closed-text\">{self.config.closedText}</div>\n      } else {\n        reactionFormHTML = null\n      }\n    }\n\n    return (\n      <div id={this.id} className={self.props.className || 'osc-reactions'} ref={(el) => { this.instance = el; }} >\n\n        {title}\n\n        {reactionFormHTML}\n\n        {reactions}\n        <br/><br/>\n\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentReactions from './component/reactions.jsx';\n\n// render elements\nOpenStadComponentReactions.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentReactions as default,\n  OpenStadComponentReactions as Reactions,\n};\n\n","/* (ignored) */","(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());"],"sourceRoot":""}
>>>>>>> Add ideas-overview to ideas-on-map, including some refactoring
